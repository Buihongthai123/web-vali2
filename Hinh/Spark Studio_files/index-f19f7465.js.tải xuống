(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="768a77b9-5d81-4676-8967-ccc4f8d6c047",e._sentryDebugIdIdentifier="sentry-dbid-768a77b9-5d81-4676-8967-ccc4f8d6c047")}catch{}})();function pH(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const gH="modulepreload",mH=function(e){return"/"+e},H4={},Ve=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=mH(s),s in H4)return;H4[s]=!0;const l=s.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const u=i[h];if(u.href===s&&(!l||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":gH,l||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),l)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s})};var vH=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};vH.SENTRY_RELEASE={id:"2553c2d244508f3621e50399182942207515311b"};var Wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yH(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var RD={exports:{}},ay={},DD={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp=Symbol.for("react.element"),_H=Symbol.for("react.portal"),bH=Symbol.for("react.fragment"),SH=Symbol.for("react.strict_mode"),xH=Symbol.for("react.profiler"),wH=Symbol.for("react.provider"),CH=Symbol.for("react.context"),TH=Symbol.for("react.forward_ref"),EH=Symbol.for("react.suspense"),PH=Symbol.for("react.memo"),IH=Symbol.for("react.lazy"),z4=Symbol.iterator;function OH(e){return e===null||typeof e!="object"?null:(e=z4&&e[z4]||e["@@iterator"],typeof e=="function"?e:null)}var MD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LD=Object.assign,FD={};function Ih(e,t,n){this.props=e,this.context=t,this.refs=FD,this.updater=n||MD}Ih.prototype.isReactComponent={};Ih.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ih.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ND(){}ND.prototype=Ih.prototype;function sC(e,t,n){this.props=e,this.context=t,this.refs=FD,this.updater=n||MD}var oC=sC.prototype=new ND;oC.constructor=sC;LD(oC,Ih.prototype);oC.isPureReactComponent=!0;var W4=Array.isArray,jD=Object.prototype.hasOwnProperty,aC={current:null},BD={key:!0,ref:!0,__self:!0,__source:!0};function UD(e,t,n){var r,i={},s=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(s=""+t.key),t)jD.call(t,r)&&!BD.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:dp,type:e,key:s,ref:l,props:i,_owner:aC.current}}function kH(e,t){return{$$typeof:dp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lC(e){return typeof e=="object"&&e!==null&&e.$$typeof===dp}function AH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Y4=/\/+/g;function ib(e,t){return typeof e=="object"&&e!==null&&e.key!=null?AH(""+e.key):t.toString(36)}function $m(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case dp:case _H:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+ib(l,0):r,W4(i)?(n="",e!=null&&(n=e.replace(Y4,"$&/")+"/"),$m(i,t,n,"",function(c){return c})):i!=null&&(lC(i)&&(i=kH(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Y4,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",W4(e))for(var a=0;a<e.length;a++){s=e[a];var o=r+ib(s,a);l+=$m(s,t,n,o,i)}else if(o=OH(e),typeof o=="function")for(e=o.call(e),a=0;!(s=e.next()).done;)s=s.value,o=r+ib(s,a++),l+=$m(s,t,n,o,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Tg(e,t,n){if(e==null)return e;var r=[],i=0;return $m(e,r,"","",function(s){return t.call(n,s,i++)}),r}function RH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Er={current:null},Gm={transition:null},DH={ReactCurrentDispatcher:Er,ReactCurrentBatchConfig:Gm,ReactCurrentOwner:aC};vt.Children={map:Tg,forEach:function(e,t,n){Tg(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tg(e,function(){t++}),t},toArray:function(e){return Tg(e,function(t){return t})||[]},only:function(e){if(!lC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};vt.Component=Ih;vt.Fragment=bH;vt.Profiler=xH;vt.PureComponent=sC;vt.StrictMode=SH;vt.Suspense=EH;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DH;vt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=LD({},e.props),i=e.key,s=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,l=aC.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(o in t)jD.call(t,o)&&!BD.hasOwnProperty(o)&&(r[o]=t[o]===void 0&&a!==void 0?a[o]:t[o])}var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:dp,type:e.type,key:i,ref:s,props:r,_owner:l}};vt.createContext=function(e){return e={$$typeof:CH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wH,_context:e},e.Consumer=e};vt.createElement=UD;vt.createFactory=function(e){var t=UD.bind(null,e);return t.type=e,t};vt.createRef=function(){return{current:null}};vt.forwardRef=function(e){return{$$typeof:TH,render:e}};vt.isValidElement=lC;vt.lazy=function(e){return{$$typeof:IH,_payload:{_status:-1,_result:e},_init:RH}};vt.memo=function(e,t){return{$$typeof:PH,type:e,compare:t===void 0?null:t}};vt.startTransition=function(e){var t=Gm.transition;Gm.transition={};try{e()}finally{Gm.transition=t}};vt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};vt.useCallback=function(e,t){return Er.current.useCallback(e,t)};vt.useContext=function(e){return Er.current.useContext(e)};vt.useDebugValue=function(){};vt.useDeferredValue=function(e){return Er.current.useDeferredValue(e)};vt.useEffect=function(e,t){return Er.current.useEffect(e,t)};vt.useId=function(){return Er.current.useId()};vt.useImperativeHandle=function(e,t,n){return Er.current.useImperativeHandle(e,t,n)};vt.useInsertionEffect=function(e,t){return Er.current.useInsertionEffect(e,t)};vt.useLayoutEffect=function(e,t){return Er.current.useLayoutEffect(e,t)};vt.useMemo=function(e,t){return Er.current.useMemo(e,t)};vt.useReducer=function(e,t,n){return Er.current.useReducer(e,t,n)};vt.useRef=function(e){return Er.current.useRef(e)};vt.useState=function(e){return Er.current.useState(e)};vt.useSyncExternalStore=function(e,t,n){return Er.current.useSyncExternalStore(e,t,n)};vt.useTransition=function(){return Er.current.useTransition()};vt.version="18.2.0";DD.exports=vt;var T=DD.exports;const Jt=Tr(T),$D=pH({__proto__:null,default:Jt},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MH=T,LH=Symbol.for("react.element"),FH=Symbol.for("react.fragment"),NH=Object.prototype.hasOwnProperty,jH=MH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BH={key:!0,ref:!0,__self:!0,__source:!0};function GD(e,t,n){var r,i={},s=null,l=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)NH.call(t,r)&&!BH.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:LH,type:e,key:s,ref:l,props:i,_owner:jH.current}}ay.Fragment=FH;ay.jsx=GD;ay.jsxs=GD;RD.exports=ay;var E=RD.exports;const UH=Tr(E);class Oh{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const n={listener:t};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const vd=typeof window>"u"||"Deno"in window;function di(){}function $H(e,t){return typeof e=="function"?e(t):e}function nx(e){return typeof e=="number"&&e>=0&&e!==1/0}function VD(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Nf(e,t,n){return kh(e)?typeof t=="function"?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function GH(e,t,n){return kh(e)?typeof t=="function"?{...n,mutationKey:e,mutationFn:t}:{...t,mutationKey:e}:typeof e=="function"?{...t,mutationFn:e}:{...e}}function zo(e,t,n){return kh(e)?[{...t,queryKey:e},n]:[e||{},t]}function Z5e(e,t,n){return kh(e)?[{...t,mutationKey:e},n]:[e||{},t]}function X4(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:l,stale:a}=e;if(kh(l)){if(r){if(t.queryHash!==cC(l,t.options))return!1}else if(!T0(t.queryKey,l))return!1}if(n!=="all"){const o=t.isActive();if(n==="active"&&!o||n==="inactive"&&o)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||typeof i<"u"&&i!==t.state.fetchStatus||s&&!s(t))}function q4(e,t){const{exact:n,fetching:r,predicate:i,mutationKey:s}=e;if(kh(s)){if(!t.options.mutationKey)return!1;if(n){if(Cl(t.options.mutationKey)!==Cl(s))return!1}else if(!T0(t.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&t.state.status==="loading"!==r||i&&!i(t))}function cC(e,t){return((t==null?void 0:t.queryKeyHashFn)||Cl)(e)}function Cl(e){return JSON.stringify(e,(t,n)=>rx(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function T0(e,t){return HD(e,t)}function HD(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!HD(e[n],t[n])):!1}function zD(e,t){if(e===t)return e;const n=K4(e)&&K4(t);if(n||rx(e)&&rx(t)){const r=n?e.length:Object.keys(e).length,i=n?t:Object.keys(t),s=i.length,l=n?[]:{};let a=0;for(let o=0;o<s;o++){const c=n?o:i[o];l[c]=zD(e[c],t[c]),l[c]===e[c]&&a++}return r===s&&a===r?e:l}return t}function E0(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function K4(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function rx(e){if(!Q4(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!Q4(n)||!n.hasOwnProperty("isPrototypeOf"))}function Q4(e){return Object.prototype.toString.call(e)==="[object Object]"}function kh(e){return Array.isArray(e)}function WD(e){return new Promise(t=>{setTimeout(t,e)})}function J4(e){WD(0).then(e)}function VH(){if(typeof AbortController=="function")return new AbortController}function ix(e,t,n){return n.isDataEqual!=null&&n.isDataEqual(e,t)?e:typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?zD(e,t):t}class HH extends Oh{constructor(){super(),this.setup=t=>{if(!vd&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach(({listener:t})=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const P0=new HH,Z4=["online","offline"];class zH extends Oh{constructor(){super(),this.setup=t=>{if(!vd&&window.addEventListener){const n=()=>t();return Z4.forEach(r=>{window.addEventListener(r,n,!1)}),()=>{Z4.forEach(r=>{window.removeEventListener(r,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach(({listener:t})=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const I0=new zH;function WH(e){return Math.min(1e3*2**e,3e4)}function ly(e){return(e??"online")==="online"?I0.isOnline():!0}class YD{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function Vm(e){return e instanceof YD}function XD(e){let t=!1,n=0,r=!1,i,s,l;const a=new Promise((g,v)=>{s=g,l=v}),o=g=>{r||(d(new YD(g)),e.abort==null||e.abort())},c=()=>{t=!0},h=()=>{t=!1},u=()=>!P0.isFocused()||e.networkMode!=="always"&&!I0.isOnline(),f=g=>{r||(r=!0,e.onSuccess==null||e.onSuccess(g),i==null||i(),s(g))},d=g=>{r||(r=!0,e.onError==null||e.onError(g),i==null||i(),l(g))},p=()=>new Promise(g=>{i=v=>{const _=r||!u();return _&&g(v),_},e.onPause==null||e.onPause()}).then(()=>{i=void 0,r||e.onContinue==null||e.onContinue()}),m=()=>{if(r)return;let g;try{g=e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var _,y;if(r)return;const b=(_=e.retry)!=null?_:3,S=(y=e.retryDelay)!=null?y:WH,x=typeof S=="function"?S(n,v):S,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,v);if(t||!C){d(v);return}n++,e.onFail==null||e.onFail(n,v),WD(x).then(()=>{if(u())return p()}).then(()=>{t?d(v):m()})})};return ly(e.networkMode)?m():p().then(m),{promise:a,cancel:o,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:c,continueRetry:h}}const uC=console;function YH(){let e=[],t=0,n=h=>{h()},r=h=>{h()};const i=h=>{let u;t++;try{u=h()}finally{t--,t||a()}return u},s=h=>{t?e.push(h):J4(()=>{n(h)})},l=h=>(...u)=>{s(()=>{h(...u)})},a=()=>{const h=e;e=[],h.length&&J4(()=>{r(()=>{h.forEach(u=>{n(u)})})})};return{batch:i,batchCalls:l,schedule:s,setNotifyFunction:h=>{n=h},setBatchNotifyFunction:h=>{r=h}}}const dn=YH();class qD{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nx(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,t??(vd?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class XH extends qD{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||uC,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||qH(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(t,n){const r=ix(this.state.data,t,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){this.dispatch({type:"setState",state:t,setStateOptions:n})}cancel(t){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(t),r?r.then(di).catch(di):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(t=>t.getCurrentResult().isStale)}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!VD(this.state.dataUpdatedAt,t)}onFocus(){var t;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}onOnline(){var t;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,n){var r,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const l=VH(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},o=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>{if(l)return this.abortSignalConsumed=!0,l.signal}})};o(a);const c=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),h={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};if(o(h),(r=this.options.behavior)==null||r.onFetch(h),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=h.fetchOptions)==null?void 0:i.meta)){var u;this.dispatch({type:"fetch",meta:(u=h.fetchOptions)==null?void 0:u.meta})}const f=d=>{if(Vm(d)&&d.silent||this.dispatch({type:"error",error:d}),!Vm(d)){var p,m,g,v;(p=(m=this.cache.config).onError)==null||p.call(m,d,this),(g=(v=this.cache.config).onSettled)==null||g.call(v,this.state.data,d,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=XD({fn:h.fetchFn,abort:l==null?void 0:l.abort.bind(l),onSuccess:d=>{var p,m,g,v;if(typeof d>"u"){f(new Error(this.queryHash+" data is undefined"));return}this.setData(d),(p=(m=this.cache.config).onSuccess)==null||p.call(m,d,this),(g=(v=this.cache.config).onSettled)==null||g.call(v,d,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:f,onFail:(d,p)=>{this.dispatch({type:"failed",failureCount:d,error:p})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){const n=r=>{var i,s;switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=t.meta)!=null?i:null,fetchStatus:ly(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(s=t.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const l=t.error;return Vm(l)&&l.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...r,error:l,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),dn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(t)}),this.cache.notify({query:this,type:"updated",action:t})})}}function qH(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=typeof t<"u",r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class KH extends Oh{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,n,r){var i;const s=n.queryKey,l=(i=n.queryHash)!=null?i:cC(s,n);let a=this.get(l);return a||(a=new XH({cache:this,logger:t.getLogger(),queryKey:s,queryHash:l,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const n=this.queriesMap[t.queryHash];n&&(t.destroy(),this.queries=this.queries.filter(r=>r!==t),n===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){dn.batch(()=>{this.queries.forEach(t=>{this.remove(t)})})}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,n){const[r]=zo(t,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(i=>X4(r,i))}findAll(t,n){const[r]=zo(t,n);return Object.keys(r).length>0?this.queries.filter(i=>X4(r,i)):this.queries}notify(t){dn.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}onFocus(){dn.batch(()=>{this.queries.forEach(t=>{t.onFocus()})})}onOnline(){dn.batch(()=>{this.queries.forEach(t=>{t.onOnline()})})}}class QH extends qD{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||uC,this.observers=[],this.state=t.state||KD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(n=>n!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,n;return(t=(n=this.retryer)==null?void 0:n.continue())!=null?t:this.execute()}async execute(){const t=()=>{var C;return this.retryer=XD({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(w,k)=>{this.dispatch({type:"failed",failureCount:w,error:k})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(C=this.options.retry)!=null?C:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,i,s,l,a,o,c,h;if(!n){var u,f,d,p;this.dispatch({type:"loading",variables:this.options.variables}),await((u=(f=this.mutationCache.config).onMutate)==null?void 0:u.call(f,this.state.variables,this));const w=await((d=(p=this.options).onMutate)==null?void 0:d.call(p,this.state.variables));w!==this.state.context&&this.dispatch({type:"loading",context:w,variables:this.state.variables})}const C=await t();return await((r=(i=this.mutationCache.config).onSuccess)==null?void 0:r.call(i,C,this.state.variables,this.state.context,this)),await((s=(l=this.options).onSuccess)==null?void 0:s.call(l,C,this.state.variables,this.state.context)),await((a=(o=this.mutationCache.config).onSettled)==null?void 0:a.call(o,C,null,this.state.variables,this.state.context,this)),await((c=(h=this.options).onSettled)==null?void 0:c.call(h,C,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:C}),C}catch(C){try{var m,g,v,_,y,b,S,x;throw await((m=(g=this.mutationCache.config).onError)==null?void 0:m.call(g,C,this.state.variables,this.state.context,this)),await((v=(_=this.options).onError)==null?void 0:v.call(_,C,this.state.variables,this.state.context)),await((y=(b=this.mutationCache.config).onSettled)==null?void 0:y.call(b,void 0,C,this.state.variables,this.state.context,this)),await((S=(x=this.options).onSettled)==null?void 0:S.call(x,void 0,C,this.state.variables,this.state.context)),C}finally{this.dispatch({type:"error",error:C})}}}dispatch(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!ly(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...r,...t.state}}};this.state=n(this.state),dn.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}}function KD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class JH extends Oh{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,n,r){const i=new QH({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?t.getMutationDefaults(n.mutationKey):void 0});return this.add(i),i}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter(n=>n!==t),this.notify({type:"removed",mutation:t})}clear(){dn.batch(()=>{this.mutations.forEach(t=>{this.remove(t)})})}getAll(){return this.mutations}find(t){return typeof t.exact>"u"&&(t.exact=!0),this.mutations.find(n=>q4(t,n))}findAll(t){return this.mutations.filter(n=>q4(t,n))}notify(t){dn.batch(()=>{this.listeners.forEach(({listener:n})=>{n(t)})})}resumePausedMutations(){var t;return this.resuming=((t=this.resuming)!=null?t:Promise.resolve()).then(()=>{const n=this.mutations.filter(r=>r.state.isPaused);return dn.batch(()=>n.reduce((r,i)=>r.then(()=>i.continue().catch(di)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function ZH(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,r,i,s,l;const a=(t=e.fetchOptions)==null||(n=t.meta)==null?void 0:n.refetchPage,o=(r=e.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,c=o==null?void 0:o.pageParam,h=(o==null?void 0:o.direction)==="forward",u=(o==null?void 0:o.direction)==="backward",f=((s=e.state.data)==null?void 0:s.pages)||[],d=((l=e.state.data)==null?void 0:l.pageParams)||[];let p=d,m=!1;const g=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>{var C;if((C=e.signal)!=null&&C.aborted)m=!0;else{var w;(w=e.signal)==null||w.addEventListener("abort",()=>{m=!0})}return e.signal}})},v=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),_=(x,C,w,k)=>(p=k?[C,...p]:[...p,C],k?[w,...x]:[...x,w]),y=(x,C,w,k)=>{if(m)return Promise.reject("Cancelled");if(typeof w>"u"&&!C&&x.length)return Promise.resolve(x);const I={queryKey:e.queryKey,pageParam:w,meta:e.options.meta};g(I);const R=v(I);return Promise.resolve(R).then(G=>_(x,w,G,k))};let b;if(!f.length)b=y([]);else if(h){const x=typeof c<"u",C=x?c:sx(e.options,f);b=y(f,x,C)}else if(u){const x=typeof c<"u",C=x?c:QD(e.options,f);b=y(f,x,C,!0)}else{p=[];const x=typeof e.options.getNextPageParam>"u";b=(a&&f[0]?a(f[0],0,f):!0)?y([],x,d[0]):Promise.resolve(_([],d[0],f[0]));for(let w=1;w<f.length;w++)b=b.then(k=>{if(a&&f[w]?a(f[w],w,f):!0){const R=x?d[w]:sx(e.options,k);return y(k,x,R)}return Promise.resolve(_(k,d[w],f[w]))})}return b.then(x=>({pages:x,pageParams:p}))}}}}function sx(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function QD(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}function e3e(e,t){if(e.getNextPageParam&&Array.isArray(t)){const n=sx(e,t);return typeof n<"u"&&n!==null&&n!==!1}}function t3e(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){const n=QD(e,t);return typeof n<"u"&&n!==null&&n!==!1}}class ez{constructor(t={}){this.queryCache=t.queryCache||new KH,this.mutationCache=t.mutationCache||new JH,this.logger=t.logger||uC,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=P0.subscribe(()=>{P0.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=I0.subscribe(()=>{I0.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var t,n;this.mountCount--,this.mountCount===0&&((t=this.unsubscribeFocus)==null||t.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(t,n){const[r]=zo(t,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,n){var r;return(r=this.queryCache.find(t,n))==null?void 0:r.state.data}ensureQueryData(t,n,r){const i=Nf(t,n,r),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(t,n,r){const i=this.queryCache.find(t),s=i==null?void 0:i.state.data,l=$H(n,s);if(typeof l>"u")return;const a=Nf(t),o=this.defaultQueryOptions(a);return this.queryCache.build(this,o).setData(l,{...r,manual:!0})}setQueriesData(t,n,r){return dn.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(t,n){var r;return(r=this.queryCache.find(t,n))==null?void 0:r.state}removeQueries(t,n){const[r]=zo(t,n),i=this.queryCache;dn.batch(()=>{i.findAll(r).forEach(s=>{i.remove(s)})})}resetQueries(t,n,r){const[i,s]=zo(t,n,r),l=this.queryCache,a={type:"active",...i};return dn.batch(()=>(l.findAll(i).forEach(o=>{o.reset()}),this.refetchQueries(a,s)))}cancelQueries(t,n,r){const[i,s={}]=zo(t,n,r);typeof s.revert>"u"&&(s.revert=!0);const l=dn.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(l).then(di).catch(di)}invalidateQueries(t,n,r){const[i,s]=zo(t,n,r);return dn.batch(()=>{var l,a;if(this.queryCache.findAll(i).forEach(c=>{c.invalidate()}),i.refetchType==="none")return Promise.resolve();const o={...i,type:(l=(a=i.refetchType)!=null?a:i.type)!=null?l:"active"};return this.refetchQueries(o,s)})}refetchQueries(t,n,r){const[i,s]=zo(t,n,r),l=dn.batch(()=>this.queryCache.findAll(i).filter(o=>!o.isDisabled()).map(o=>{var c;return o.fetch(void 0,{...s,cancelRefetch:(c=s==null?void 0:s.cancelRefetch)!=null?c:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(l).then(di);return s!=null&&s.throwOnError||(a=a.catch(di)),a}fetchQuery(t,n,r){const i=Nf(t,n,r),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const l=this.queryCache.build(this,s);return l.isStaleByTime(s.staleTime)?l.fetch(s):Promise.resolve(l.state.data)}prefetchQuery(t,n,r){return this.fetchQuery(t,n,r).then(di).catch(di)}fetchInfiniteQuery(t,n,r){const i=Nf(t,n,r);return i.behavior=ZH(),this.fetchQuery(i)}prefetchInfiniteQuery(t,n,r){return this.fetchInfiniteQuery(t,n,r).then(di).catch(di)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,n){const r=this.queryDefaults.find(i=>Cl(t)===Cl(i.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:t,defaultOptions:n})}getQueryDefaults(t){if(!t)return;const n=this.queryDefaults.find(r=>T0(t,r.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(t,n){const r=this.mutationDefaults.find(i=>Cl(t)===Cl(i.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:t,defaultOptions:n})}getMutationDefaults(t){if(!t)return;const n=this.mutationDefaults.find(r=>T0(t,r.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const n={...this.defaultOptions.queries,...this.getQueryDefaults(t==null?void 0:t.queryKey),...t,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=cC(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(t==null?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class tz extends Oh{constructor(t,n){super(),this.client=t,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),eI(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ox(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ox(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,n){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),E0(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const s=this.hasListeners();s&&tI(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(n),s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const l=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||l!==this.currentRefetchInterval)&&this.updateRefetchInterval(l)}getOptimisticResult(t){const n=this.client.getQueryCache().build(this.client,t),r=this.createResult(n,t);return rz(this,r,t)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(t){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),t[r])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:t,...n}={}){return this.fetch({...n,meta:{refetchPage:t}})}fetchOptimistic(t){const n=this.client.defaultQueryOptions(t),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){var n;return this.executeFetch({...t,cancelRefetch:(n=t.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(t){this.updateQuery();let n=this.currentQuery.fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(di)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),vd||this.currentResult.isStale||!nx(this.options.staleTime))return;const n=VD(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var t;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(t=this.options.refetchInterval)!=null?t:!1}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!(vd||this.options.enabled===!1||!nx(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||P0.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,n){const r=this.currentQuery,i=this.options,s=this.currentResult,l=this.currentResultState,a=this.currentResultOptions,o=t!==r,c=o?t.state:this.currentQueryInitialState,h=o?this.currentResult:this.previousQueryResult,{state:u}=t;let{dataUpdatedAt:f,error:d,errorUpdatedAt:p,fetchStatus:m,status:g}=u,v=!1,_=!1,y;if(n._optimisticResults){const w=this.hasListeners(),k=!w&&eI(t,n),I=w&&tI(t,r,n,i);(k||I)&&(m=ly(t.options.networkMode)?"fetching":"paused",f||(g="loading")),n._optimisticResults==="isRestoring"&&(m="idle")}if(n.keepPreviousData&&!u.dataUpdatedAt&&h!=null&&h.isSuccess&&g!=="error")y=h.data,f=h.dataUpdatedAt,g=h.status,v=!0;else if(n.select&&typeof u.data<"u")if(s&&u.data===(l==null?void 0:l.data)&&n.select===this.selectFn)y=this.selectResult;else try{this.selectFn=n.select,y=n.select(u.data),y=ix(s==null?void 0:s.data,y,n),this.selectResult=y,this.selectError=null}catch(w){this.selectError=w}else y=u.data;if(typeof n.placeholderData<"u"&&typeof y>"u"&&g==="loading"){let w;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))w=s.data;else if(w=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof w<"u")try{w=n.select(w),this.selectError=null}catch(k){this.selectError=k}typeof w<"u"&&(g="success",y=ix(s==null?void 0:s.data,w,n),_=!0)}this.selectError&&(d=this.selectError,y=this.selectResult,p=Date.now(),g="error");const b=m==="fetching",S=g==="loading",x=g==="error";return{status:g,fetchStatus:m,isLoading:S,isSuccess:g==="success",isError:x,isInitialLoading:S&&b,data:y,dataUpdatedAt:f,error:d,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!S,isLoadingError:x&&u.dataUpdatedAt===0,isPaused:m==="paused",isPlaceholderData:_,isPreviousData:v,isRefetchError:x&&u.dataUpdatedAt!==0,isStale:hC(t,n),refetch:this.refetch,remove:this.remove}}updateResult(t){const n=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,E0(r,n))return;this.currentResult=r;const i={cache:!0},s=()=>{if(!n)return!0;const{notifyOnChangeProps:l}=this.options,a=typeof l=="function"?l():l;if(a==="all"||!a&&!this.trackedProps.size)return!0;const o=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&o.add("error"),Object.keys(this.currentResult).some(c=>{const h=c;return this.currentResult[h]!==n[h]&&o.has(h)})};(t==null?void 0:t.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...t})}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const n={};t.type==="success"?n.onSuccess=!t.manual:t.type==="error"&&!Vm(t.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(t){dn.batch(()=>{if(t.onSuccess){var n,r,i,s;(n=(r=this.options).onSuccess)==null||n.call(r,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(t.onError){var l,a,o,c;(l=(a=this.options).onError)==null||l.call(a,this.currentResult.error),(o=(c=this.options).onSettled)==null||o.call(c,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach(({listener:h})=>{h(this.currentResult)}),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function nz(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function eI(e,t){return nz(e,t)||e.state.dataUpdatedAt>0&&ox(e,t,t.refetchOnMount)}function ox(e,t,n){if(t.enabled!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&hC(e,t)}return!1}function tI(e,t,n,r){return n.enabled!==!1&&(e!==t||r.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&hC(e,n)}function hC(e,t){return e.isStaleByTime(t.staleTime)}function rz(e,t,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?t.isPlaceholderData:!E0(e.getCurrentResult(),t)}let iz=class extends Oh{constructor(t,n){super(),this.client=t,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var n;const r=this.options;this.options=this.client.defaultMutationOptions(t),E0(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(n=this.currentMutation)==null||n.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.currentMutation)==null||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();const n={listeners:!0};t.type==="success"?n.onSuccess=!0:t.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof t<"u"?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:KD(),n={...t,isLoading:t.status==="loading",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=n}notify(t){dn.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(t.onSuccess){var n,r,i,s;(n=(r=this.mutateOptions).onSuccess)==null||n.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(i=(s=this.mutateOptions).onSettled)==null||i.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(t.onError){var l,a,o,c;(l=(a=this.mutateOptions).onError)==null||l.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(o=(c=this.mutateOptions).onSettled)==null||o.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}t.listeners&&this.listeners.forEach(({listener:h})=>{h(this.currentResult)})})}};var JD={exports:{}},Zr={},ZD={exports:{}},e6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,P){var O=M.length;M.push(P);e:for(;0<O;){var A=O-1>>>1,D=M[A];if(0<i(D,P))M[A]=P,M[O]=D,O=A;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var P=M[0],O=M.pop();if(O!==P){M[0]=O;e:for(var A=0,D=M.length,X=D>>>1;A<X;){var N=2*(A+1)-1,F=M[N],z=N+1,L=M[z];if(0>i(F,O))z<D&&0>i(L,F)?(M[A]=L,M[z]=O,A=z):(M[A]=F,M[N]=O,A=N);else if(z<D&&0>i(L,O))M[A]=L,M[z]=O,A=z;else break e}}return P}function i(M,P){var O=M.sortIndex-P.sortIndex;return O!==0?O:M.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var o=[],c=[],h=1,u=null,f=3,d=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(M){for(var P=n(c);P!==null;){if(P.callback===null)r(c);else if(P.startTime<=M)r(c),P.sortIndex=P.expirationTime,t(o,P);else break;P=n(c)}}function b(M){if(m=!1,y(M),!p)if(n(o)!==null)p=!0,V(S);else{var P=n(c);P!==null&&W(b,P.startTime-M)}}function S(M,P){p=!1,m&&(m=!1,v(w),w=-1),d=!0;var O=f;try{for(y(P),u=n(o);u!==null&&(!(u.expirationTime>P)||M&&!R());){var A=u.callback;if(typeof A=="function"){u.callback=null,f=u.priorityLevel;var D=A(u.expirationTime<=P);P=e.unstable_now(),typeof D=="function"?u.callback=D:u===n(o)&&r(o),y(P)}else r(o);u=n(o)}if(u!==null)var X=!0;else{var N=n(c);N!==null&&W(b,N.startTime-P),X=!1}return X}finally{u=null,f=O,d=!1}}var x=!1,C=null,w=-1,k=5,I=-1;function R(){return!(e.unstable_now()-I<k)}function j(){if(C!==null){var M=e.unstable_now();I=M;var P=!0;try{P=C(!0,M)}finally{P?G():(x=!1,C=null)}}else x=!1}var G;if(typeof _=="function")G=function(){_(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=j,G=function(){$.postMessage(null)}}else G=function(){g(j,0)};function V(M){C=M,x||(x=!0,G())}function W(M,P){w=g(function(){M(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){p||d||(p=!0,V(S))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(o)},e.unstable_next=function(M){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var O=f;f=P;try{return M()}finally{f=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,P){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var O=f;f=M;try{return P()}finally{f=O}},e.unstable_scheduleCallback=function(M,P,O){var A=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?A+O:A):O=A,M){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=O+D,M={id:h++,callback:P,priorityLevel:M,startTime:O,expirationTime:D,sortIndex:-1},O>A?(M.sortIndex=O,t(c,M),n(o)===null&&M===n(c)&&(m?(v(w),w=-1):m=!0,W(b,O-A))):(M.sortIndex=D,t(o,M),p||d||(p=!0,V(S))),M},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(M){var P=f;return function(){var O=f;f=P;try{return M.apply(this,arguments)}finally{f=O}}}})(e6);ZD.exports=e6;var sz=ZD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t6=T,Kr=sz;function xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n6=new Set,yd={};function sc(e,t){Vu(e,t),Vu(e+"Capture",t)}function Vu(e,t){for(yd[e]=t,e=0;e<t.length;e++)n6.add(t[e])}var fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ax=Object.prototype.hasOwnProperty,oz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nI={},rI={};function az(e){return ax.call(rI,e)?!0:ax.call(nI,e)?!1:oz.test(e)?rI[e]=!0:(nI[e]=!0,!1)}function lz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cz(e,t,n,r){if(t===null||typeof t>"u"||lz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pr(e,t,n,r,i,s,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=l}var tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tr[e]=new Pr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tr[t]=new Pr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tr[e]=new Pr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tr[e]=new Pr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tr[e]=new Pr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tr[e]=new Pr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tr[e]=new Pr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tr[e]=new Pr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tr[e]=new Pr(e,5,!1,e.toLowerCase(),null,!1,!1)});var fC=/[\-:]([a-z])/g;function dC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fC,dC);tr[t]=new Pr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fC,dC);tr[t]=new Pr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fC,dC);tr[t]=new Pr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tr[e]=new Pr(e,1,!1,e.toLowerCase(),null,!1,!1)});tr.xlinkHref=new Pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tr[e]=new Pr(e,1,!1,e.toLowerCase(),null,!0,!0)});function pC(e,t,n,r){var i=tr.hasOwnProperty(t)?tr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cz(t,n,i,r)&&(n=null),r||i===null?az(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Co=t6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eg=Symbol.for("react.element"),Xc=Symbol.for("react.portal"),qc=Symbol.for("react.fragment"),gC=Symbol.for("react.strict_mode"),lx=Symbol.for("react.profiler"),r6=Symbol.for("react.provider"),i6=Symbol.for("react.context"),mC=Symbol.for("react.forward_ref"),cx=Symbol.for("react.suspense"),ux=Symbol.for("react.suspense_list"),vC=Symbol.for("react.memo"),Wo=Symbol.for("react.lazy"),s6=Symbol.for("react.offscreen"),iI=Symbol.iterator;function cf(e){return e===null||typeof e!="object"?null:(e=iI&&e[iI]||e["@@iterator"],typeof e=="function"?e:null)}var cn=Object.assign,sb;function jf(e){if(sb===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);sb=t&&t[1]||""}return`
`+sb+e}var ob=!1;function ab(e,t){if(!e||ob)return"";ob=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),l=i.length-1,a=s.length-1;1<=l&&0<=a&&i[l]!==s[a];)a--;for(;1<=l&&0<=a;l--,a--)if(i[l]!==s[a]){if(l!==1||a!==1)do if(l--,a--,0>a||i[l]!==s[a]){var o=`
`+i[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=l&&0<=a);break}}}finally{ob=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jf(e):""}function uz(e){switch(e.tag){case 5:return jf(e.type);case 16:return jf("Lazy");case 13:return jf("Suspense");case 19:return jf("SuspenseList");case 0:case 2:case 15:return e=ab(e.type,!1),e;case 11:return e=ab(e.type.render,!1),e;case 1:return e=ab(e.type,!0),e;default:return""}}function hx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qc:return"Fragment";case Xc:return"Portal";case lx:return"Profiler";case gC:return"StrictMode";case cx:return"Suspense";case ux:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case i6:return(e.displayName||"Context")+".Consumer";case r6:return(e._context.displayName||"Context")+".Provider";case mC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vC:return t=e.displayName||null,t!==null?t:hx(e.type)||"Memo";case Wo:t=e._payload,e=e._init;try{return hx(e(t))}catch{}}return null}function hz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hx(t);case 8:return t===gC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ia(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function o6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fz(e){var t=o6(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,s.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pg(e){e._valueTracker||(e._valueTracker=fz(e))}function a6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=o6(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function O0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fx(e,t){var n=t.checked;return cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function sI(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ia(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function l6(e,t){t=t.checked,t!=null&&pC(e,"checked",t,!1)}function dx(e,t){l6(e,t);var n=Ia(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?px(e,t.type,n):t.hasOwnProperty("defaultValue")&&px(e,t.type,Ia(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function oI(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function px(e,t,n){(t!=="number"||O0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Bf=Array.isArray;function Cu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ia(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function gx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(xe(91));return cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function aI(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(xe(92));if(Bf(n)){if(1<n.length)throw Error(xe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ia(n)}}function c6(e,t){var n=Ia(t.value),r=Ia(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function lI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function u6(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?u6(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ig,h6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ig=Ig||document.createElement("div"),Ig.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ig.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _d(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var zf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dz=["Webkit","ms","Moz","O"];Object.keys(zf).forEach(function(e){dz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zf[t]=zf[e]})});function f6(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||zf.hasOwnProperty(e)&&zf[e]?(""+t).trim():t+"px"}function d6(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=f6(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var pz=cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vx(e,t){if(t){if(pz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(xe(62))}}function yx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _x=null;function yC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bx=null,Tu=null,Eu=null;function cI(e){if(e=mp(e)){if(typeof bx!="function")throw Error(xe(280));var t=e.stateNode;t&&(t=dy(t),bx(e.stateNode,e.type,t))}}function p6(e){Tu?Eu?Eu.push(e):Eu=[e]:Tu=e}function g6(){if(Tu){var e=Tu,t=Eu;if(Eu=Tu=null,cI(e),t)for(e=0;e<t.length;e++)cI(t[e])}}function m6(e,t){return e(t)}function v6(){}var lb=!1;function y6(e,t,n){if(lb)return e(t,n);lb=!0;try{return m6(e,t,n)}finally{lb=!1,(Tu!==null||Eu!==null)&&(v6(),g6())}}function bd(e,t){var n=e.stateNode;if(n===null)return null;var r=dy(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(xe(231,t,typeof n));return n}var Sx=!1;if(fo)try{var uf={};Object.defineProperty(uf,"passive",{get:function(){Sx=!0}}),window.addEventListener("test",uf,uf),window.removeEventListener("test",uf,uf)}catch{Sx=!1}function gz(e,t,n,r,i,s,l,a,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(h){this.onError(h)}}var Wf=!1,k0=null,A0=!1,xx=null,mz={onError:function(e){Wf=!0,k0=e}};function vz(e,t,n,r,i,s,l,a,o){Wf=!1,k0=null,gz.apply(mz,arguments)}function yz(e,t,n,r,i,s,l,a,o){if(vz.apply(this,arguments),Wf){if(Wf){var c=k0;Wf=!1,k0=null}else throw Error(xe(198));A0||(A0=!0,xx=c)}}function oc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _6(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function uI(e){if(oc(e)!==e)throw Error(xe(188))}function _z(e){var t=e.alternate;if(!t){if(t=oc(e),t===null)throw Error(xe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return uI(i),e;if(s===r)return uI(i),t;s=s.sibling}throw Error(xe(188))}if(n.return!==r.return)n=i,r=s;else{for(var l=!1,a=i.child;a;){if(a===n){l=!0,n=i,r=s;break}if(a===r){l=!0,r=i,n=s;break}a=a.sibling}if(!l){for(a=s.child;a;){if(a===n){l=!0,n=s,r=i;break}if(a===r){l=!0,r=s,n=i;break}a=a.sibling}if(!l)throw Error(xe(189))}}if(n.alternate!==r)throw Error(xe(190))}if(n.tag!==3)throw Error(xe(188));return n.stateNode.current===n?e:t}function b6(e){return e=_z(e),e!==null?S6(e):null}function S6(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=S6(e);if(t!==null)return t;e=e.sibling}return null}var x6=Kr.unstable_scheduleCallback,hI=Kr.unstable_cancelCallback,bz=Kr.unstable_shouldYield,Sz=Kr.unstable_requestPaint,Cn=Kr.unstable_now,xz=Kr.unstable_getCurrentPriorityLevel,_C=Kr.unstable_ImmediatePriority,w6=Kr.unstable_UserBlockingPriority,R0=Kr.unstable_NormalPriority,wz=Kr.unstable_LowPriority,C6=Kr.unstable_IdlePriority,cy=null,Es=null;function Cz(e){if(Es&&typeof Es.onCommitFiberRoot=="function")try{Es.onCommitFiberRoot(cy,e,void 0,(e.current.flags&128)===128)}catch{}}var $i=Math.clz32?Math.clz32:Pz,Tz=Math.log,Ez=Math.LN2;function Pz(e){return e>>>=0,e===0?32:31-(Tz(e)/Ez|0)|0}var Og=64,kg=4194304;function Uf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function D0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~i;a!==0?r=Uf(a):(s&=l,s!==0&&(r=Uf(s)))}else l=n&~i,l!==0?r=Uf(l):s!==0&&(r=Uf(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-$i(t),i=1<<n,r|=e[n],t&=~i;return r}function Iz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oz(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-$i(s),a=1<<l,o=i[l];o===-1?(!(a&n)||a&r)&&(i[l]=Iz(a,t)):o<=t&&(e.expiredLanes|=a),s&=~a}}function wx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function T6(){var e=Og;return Og<<=1,!(Og&4194240)&&(Og=64),e}function cb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$i(t),e[t]=n}function kz(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-$i(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function bC(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-$i(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Rt=0;function E6(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var P6,SC,I6,O6,k6,Cx=!1,Ag=[],fa=null,da=null,pa=null,Sd=new Map,xd=new Map,na=[],Az="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fI(e,t){switch(e){case"focusin":case"focusout":fa=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":Sd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xd.delete(t.pointerId)}}function hf(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=mp(t),t!==null&&SC(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Rz(e,t,n,r,i){switch(t){case"focusin":return fa=hf(fa,e,t,n,r,i),!0;case"dragenter":return da=hf(da,e,t,n,r,i),!0;case"mouseover":return pa=hf(pa,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Sd.set(s,hf(Sd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xd.set(s,hf(xd.get(s)||null,e,t,n,r,i)),!0}return!1}function A6(e){var t=Tl(e.target);if(t!==null){var n=oc(t);if(n!==null){if(t=n.tag,t===13){if(t=_6(n),t!==null){e.blockedOn=t,k6(e.priority,function(){I6(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Tx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);_x=r,n.target.dispatchEvent(r),_x=null}else return t=mp(n),t!==null&&SC(t),e.blockedOn=n,!1;t.shift()}return!0}function dI(e,t,n){Hm(e)&&n.delete(t)}function Dz(){Cx=!1,fa!==null&&Hm(fa)&&(fa=null),da!==null&&Hm(da)&&(da=null),pa!==null&&Hm(pa)&&(pa=null),Sd.forEach(dI),xd.forEach(dI)}function ff(e,t){e.blockedOn===t&&(e.blockedOn=null,Cx||(Cx=!0,Kr.unstable_scheduleCallback(Kr.unstable_NormalPriority,Dz)))}function wd(e){function t(i){return ff(i,e)}if(0<Ag.length){ff(Ag[0],e);for(var n=1;n<Ag.length;n++){var r=Ag[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fa!==null&&ff(fa,e),da!==null&&ff(da,e),pa!==null&&ff(pa,e),Sd.forEach(t),xd.forEach(t),n=0;n<na.length;n++)r=na[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<na.length&&(n=na[0],n.blockedOn===null);)A6(n),n.blockedOn===null&&na.shift()}var Pu=Co.ReactCurrentBatchConfig,M0=!0;function Mz(e,t,n,r){var i=Rt,s=Pu.transition;Pu.transition=null;try{Rt=1,xC(e,t,n,r)}finally{Rt=i,Pu.transition=s}}function Lz(e,t,n,r){var i=Rt,s=Pu.transition;Pu.transition=null;try{Rt=4,xC(e,t,n,r)}finally{Rt=i,Pu.transition=s}}function xC(e,t,n,r){if(M0){var i=Tx(e,t,n,r);if(i===null)_b(e,t,r,L0,n),fI(e,r);else if(Rz(i,e,t,n,r))r.stopPropagation();else if(fI(e,r),t&4&&-1<Az.indexOf(e)){for(;i!==null;){var s=mp(i);if(s!==null&&P6(s),s=Tx(e,t,n,r),s===null&&_b(e,t,r,L0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _b(e,t,r,null,n)}}var L0=null;function Tx(e,t,n,r){if(L0=null,e=yC(r),e=Tl(e),e!==null)if(t=oc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_6(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return L0=e,null}function R6(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xz()){case _C:return 1;case w6:return 4;case R0:case wz:return 16;case C6:return 536870912;default:return 16}default:return 16}}var oa=null,wC=null,zm=null;function D6(){if(zm)return zm;var e,t=wC,n=t.length,r,i="value"in oa?oa.value:oa.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[s-r];r++);return zm=i.slice(e,1<r?1-r:void 0)}function Wm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rg(){return!0}function pI(){return!1}function ei(e){function t(n,r,i,s,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rg:pI,this.isPropagationStopped=pI,this}return cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rg)},persist:function(){},isPersistent:Rg}),t}var Ah={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CC=ei(Ah),gp=cn({},Ah,{view:0,detail:0}),Fz=ei(gp),ub,hb,df,uy=cn({},gp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:TC,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==df&&(df&&e.type==="mousemove"?(ub=e.screenX-df.screenX,hb=e.screenY-df.screenY):hb=ub=0,df=e),ub)},movementY:function(e){return"movementY"in e?e.movementY:hb}}),gI=ei(uy),Nz=cn({},uy,{dataTransfer:0}),jz=ei(Nz),Bz=cn({},gp,{relatedTarget:0}),fb=ei(Bz),Uz=cn({},Ah,{animationName:0,elapsedTime:0,pseudoElement:0}),$z=ei(Uz),Gz=cn({},Ah,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vz=ei(Gz),Hz=cn({},Ah,{data:0}),mI=ei(Hz),zz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xz(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yz[e])?!!t[e]:!1}function TC(){return Xz}var qz=cn({},gp,{key:function(e){if(e.key){var t=zz[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wz[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:TC,charCode:function(e){return e.type==="keypress"?Wm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kz=ei(qz),Qz=cn({},uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vI=ei(Qz),Jz=cn({},gp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:TC}),Zz=ei(Jz),eW=cn({},Ah,{propertyName:0,elapsedTime:0,pseudoElement:0}),tW=ei(eW),nW=cn({},uy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rW=ei(nW),iW=[9,13,27,32],EC=fo&&"CompositionEvent"in window,Yf=null;fo&&"documentMode"in document&&(Yf=document.documentMode);var sW=fo&&"TextEvent"in window&&!Yf,M6=fo&&(!EC||Yf&&8<Yf&&11>=Yf),yI=String.fromCharCode(32),_I=!1;function L6(e,t){switch(e){case"keyup":return iW.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kc=!1;function oW(e,t){switch(e){case"compositionend":return F6(t);case"keypress":return t.which!==32?null:(_I=!0,yI);case"textInput":return e=t.data,e===yI&&_I?null:e;default:return null}}function aW(e,t){if(Kc)return e==="compositionend"||!EC&&L6(e,t)?(e=D6(),zm=wC=oa=null,Kc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return M6&&t.locale!=="ko"?null:t.data;default:return null}}var lW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lW[e.type]:t==="textarea"}function N6(e,t,n,r){p6(r),t=F0(t,"onChange"),0<t.length&&(n=new CC("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xf=null,Cd=null;function cW(e){X6(e,0)}function hy(e){var t=Zc(e);if(a6(t))return e}function uW(e,t){if(e==="change")return t}var j6=!1;if(fo){var db;if(fo){var pb="oninput"in document;if(!pb){var SI=document.createElement("div");SI.setAttribute("oninput","return;"),pb=typeof SI.oninput=="function"}db=pb}else db=!1;j6=db&&(!document.documentMode||9<document.documentMode)}function xI(){Xf&&(Xf.detachEvent("onpropertychange",B6),Cd=Xf=null)}function B6(e){if(e.propertyName==="value"&&hy(Cd)){var t=[];N6(t,Cd,e,yC(e)),y6(cW,t)}}function hW(e,t,n){e==="focusin"?(xI(),Xf=t,Cd=n,Xf.attachEvent("onpropertychange",B6)):e==="focusout"&&xI()}function fW(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hy(Cd)}function dW(e,t){if(e==="click")return hy(t)}function pW(e,t){if(e==="input"||e==="change")return hy(t)}function gW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qi=typeof Object.is=="function"?Object.is:gW;function Td(e,t){if(qi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ax.call(t,i)||!qi(e[i],t[i]))return!1}return!0}function wI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function CI(e,t){var n=wI(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wI(n)}}function U6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?U6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $6(){for(var e=window,t=O0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=O0(e.document)}return t}function PC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mW(e){var t=$6(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&U6(n.ownerDocument.documentElement,n)){if(r!==null&&PC(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=CI(n,s);var l=CI(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vW=fo&&"documentMode"in document&&11>=document.documentMode,Qc=null,Ex=null,qf=null,Px=!1;function TI(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Px||Qc==null||Qc!==O0(r)||(r=Qc,"selectionStart"in r&&PC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qf&&Td(qf,r)||(qf=r,r=F0(Ex,"onSelect"),0<r.length&&(t=new CC("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qc)))}function Dg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Jc={animationend:Dg("Animation","AnimationEnd"),animationiteration:Dg("Animation","AnimationIteration"),animationstart:Dg("Animation","AnimationStart"),transitionend:Dg("Transition","TransitionEnd")},gb={},G6={};fo&&(G6=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function fy(e){if(gb[e])return gb[e];if(!Jc[e])return e;var t=Jc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in G6)return gb[e]=t[n];return e}var V6=fy("animationend"),H6=fy("animationiteration"),z6=fy("animationstart"),W6=fy("transitionend"),Y6=new Map,EI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ua(e,t){Y6.set(e,t),sc(t,[e])}for(var mb=0;mb<EI.length;mb++){var vb=EI[mb],yW=vb.toLowerCase(),_W=vb[0].toUpperCase()+vb.slice(1);Ua(yW,"on"+_W)}Ua(V6,"onAnimationEnd");Ua(H6,"onAnimationIteration");Ua(z6,"onAnimationStart");Ua("dblclick","onDoubleClick");Ua("focusin","onFocus");Ua("focusout","onBlur");Ua(W6,"onTransitionEnd");Vu("onMouseEnter",["mouseout","mouseover"]);Vu("onMouseLeave",["mouseout","mouseover"]);Vu("onPointerEnter",["pointerout","pointerover"]);Vu("onPointerLeave",["pointerout","pointerover"]);sc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sc("onBeforeInput",["compositionend","keypress","textInput","paste"]);sc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $f="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bW=new Set("cancel close invalid load scroll toggle".split(" ").concat($f));function PI(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,yz(r,t,void 0,e),e.currentTarget=null}function X6(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==s&&i.isPropagationStopped())break e;PI(i,a,c),s=o}else for(l=0;l<r.length;l++){if(a=r[l],o=a.instance,c=a.currentTarget,a=a.listener,o!==s&&i.isPropagationStopped())break e;PI(i,a,c),s=o}}}if(A0)throw e=xx,A0=!1,xx=null,e}function qt(e,t){var n=t[Rx];n===void 0&&(n=t[Rx]=new Set);var r=e+"__bubble";n.has(r)||(q6(t,e,2,!1),n.add(r))}function yb(e,t,n){var r=0;t&&(r|=4),q6(n,e,r,t)}var Mg="_reactListening"+Math.random().toString(36).slice(2);function Ed(e){if(!e[Mg]){e[Mg]=!0,n6.forEach(function(n){n!=="selectionchange"&&(bW.has(n)||yb(n,!1,e),yb(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mg]||(t[Mg]=!0,yb("selectionchange",!1,t))}}function q6(e,t,n,r){switch(R6(t)){case 1:var i=Mz;break;case 4:i=Lz;break;default:i=xC}n=i.bind(null,t,n,e),i=void 0,!Sx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function _b(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===i||o.nodeType===8&&o.parentNode===i))return;l=l.return}for(;a!==null;){if(l=Tl(a),l===null)return;if(o=l.tag,o===5||o===6){r=s=l;continue e}a=a.parentNode}}r=r.return}y6(function(){var c=s,h=yC(n),u=[];e:{var f=Y6.get(e);if(f!==void 0){var d=CC,p=e;switch(e){case"keypress":if(Wm(n)===0)break e;case"keydown":case"keyup":d=Kz;break;case"focusin":p="focus",d=fb;break;case"focusout":p="blur",d=fb;break;case"beforeblur":case"afterblur":d=fb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=gI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=jz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Zz;break;case V6:case H6:case z6:d=$z;break;case W6:d=tW;break;case"scroll":d=Fz;break;case"wheel":d=rW;break;case"copy":case"cut":case"paste":d=Vz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=vI}var m=(t&4)!==0,g=!m&&e==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var _=c,y;_!==null;){y=_;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,v!==null&&(b=bd(_,v),b!=null&&m.push(Pd(_,b,y)))),g)break;_=_.return}0<m.length&&(f=new d(f,p,null,n,h),u.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",f&&n!==_x&&(p=n.relatedTarget||n.fromElement)&&(Tl(p)||p[po]))break e;if((d||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=c,p=p?Tl(p):null,p!==null&&(g=oc(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=c),d!==p)){if(m=gI,b="onMouseLeave",v="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(m=vI,b="onPointerLeave",v="onPointerEnter",_="pointer"),g=d==null?f:Zc(d),y=p==null?f:Zc(p),f=new m(b,_+"leave",d,n,h),f.target=g,f.relatedTarget=y,b=null,Tl(h)===c&&(m=new m(v,_+"enter",p,n,h),m.target=y,m.relatedTarget=g,b=m),g=b,d&&p)t:{for(m=d,v=p,_=0,y=m;y;y=Ac(y))_++;for(y=0,b=v;b;b=Ac(b))y++;for(;0<_-y;)m=Ac(m),_--;for(;0<y-_;)v=Ac(v),y--;for(;_--;){if(m===v||v!==null&&m===v.alternate)break t;m=Ac(m),v=Ac(v)}m=null}else m=null;d!==null&&II(u,f,d,m,!1),p!==null&&g!==null&&II(u,g,p,m,!0)}}e:{if(f=c?Zc(c):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var S=uW;else if(bI(f))if(j6)S=pW;else{S=fW;var x=hW}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=dW);if(S&&(S=S(e,c))){N6(u,S,n,h);break e}x&&x(e,f,c),e==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&px(f,"number",f.value)}switch(x=c?Zc(c):window,e){case"focusin":(bI(x)||x.contentEditable==="true")&&(Qc=x,Ex=c,qf=null);break;case"focusout":qf=Ex=Qc=null;break;case"mousedown":Px=!0;break;case"contextmenu":case"mouseup":case"dragend":Px=!1,TI(u,n,h);break;case"selectionchange":if(vW)break;case"keydown":case"keyup":TI(u,n,h)}var C;if(EC)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Kc?L6(e,n)&&(w="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(M6&&n.locale!=="ko"&&(Kc||w!=="onCompositionStart"?w==="onCompositionEnd"&&Kc&&(C=D6()):(oa=h,wC="value"in oa?oa.value:oa.textContent,Kc=!0)),x=F0(c,w),0<x.length&&(w=new mI(w,e,null,n,h),u.push({event:w,listeners:x}),C?w.data=C:(C=F6(n),C!==null&&(w.data=C)))),(C=sW?oW(e,n):aW(e,n))&&(c=F0(c,"onBeforeInput"),0<c.length&&(h=new mI("onBeforeInput","beforeinput",null,n,h),u.push({event:h,listeners:c}),h.data=C))}X6(u,t)})}function Pd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function F0(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bd(e,n),s!=null&&r.unshift(Pd(e,s,i)),s=bd(e,t),s!=null&&r.push(Pd(e,s,i))),e=e.return}return r}function Ac(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function II(e,t,n,r,i){for(var s=t._reactName,l=[];n!==null&&n!==r;){var a=n,o=a.alternate,c=a.stateNode;if(o!==null&&o===r)break;a.tag===5&&c!==null&&(a=c,i?(o=bd(n,s),o!=null&&l.unshift(Pd(n,o,a))):i||(o=bd(n,s),o!=null&&l.push(Pd(n,o,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var SW=/\r\n?/g,xW=/\u0000|\uFFFD/g;function OI(e){return(typeof e=="string"?e:""+e).replace(SW,`
`).replace(xW,"")}function Lg(e,t,n){if(t=OI(t),OI(e)!==t&&n)throw Error(xe(425))}function N0(){}var Ix=null,Ox=null;function kx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ax=typeof setTimeout=="function"?setTimeout:void 0,wW=typeof clearTimeout=="function"?clearTimeout:void 0,kI=typeof Promise=="function"?Promise:void 0,CW=typeof queueMicrotask=="function"?queueMicrotask:typeof kI<"u"?function(e){return kI.resolve(null).then(e).catch(TW)}:Ax;function TW(e){setTimeout(function(){throw e})}function bb(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),wd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wd(t)}function ga(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function AI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Rh=Math.random().toString(36).slice(2),ms="__reactFiber$"+Rh,Id="__reactProps$"+Rh,po="__reactContainer$"+Rh,Rx="__reactEvents$"+Rh,EW="__reactListeners$"+Rh,PW="__reactHandles$"+Rh;function Tl(e){var t=e[ms];if(t)return t;for(var n=e.parentNode;n;){if(t=n[po]||n[ms]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=AI(e);e!==null;){if(n=e[ms])return n;e=AI(e)}return t}e=n,n=e.parentNode}return null}function mp(e){return e=e[ms]||e[po],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(xe(33))}function dy(e){return e[Id]||null}var Dx=[],eu=-1;function $a(e){return{current:e}}function Qt(e){0>eu||(e.current=Dx[eu],Dx[eu]=null,eu--)}function zt(e,t){eu++,Dx[eu]=e.current,e.current=t}var Oa={},hr=$a(Oa),Nr=$a(!1),jl=Oa;function Hu(e,t){var n=e.type.contextTypes;if(!n)return Oa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function jr(e){return e=e.childContextTypes,e!=null}function j0(){Qt(Nr),Qt(hr)}function RI(e,t,n){if(hr.current!==Oa)throw Error(xe(168));zt(hr,t),zt(Nr,n)}function K6(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(xe(108,hz(e)||"Unknown",i));return cn({},n,r)}function B0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oa,jl=hr.current,zt(hr,e),zt(Nr,Nr.current),!0}function DI(e,t,n){var r=e.stateNode;if(!r)throw Error(xe(169));n?(e=K6(e,t,jl),r.__reactInternalMemoizedMergedChildContext=e,Qt(Nr),Qt(hr),zt(hr,e)):Qt(Nr),zt(Nr,n)}var Ys=null,py=!1,Sb=!1;function Q6(e){Ys===null?Ys=[e]:Ys.push(e)}function IW(e){py=!0,Q6(e)}function Ga(){if(!Sb&&Ys!==null){Sb=!0;var e=0,t=Rt;try{var n=Ys;for(Rt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ys=null,py=!1}catch(i){throw Ys!==null&&(Ys=Ys.slice(e+1)),x6(_C,Ga),i}finally{Rt=t,Sb=!1}}return null}var tu=[],nu=0,U0=null,$0=0,vi=[],yi=0,Bl=null,Xs=1,qs="";function pl(e,t){tu[nu++]=$0,tu[nu++]=U0,U0=e,$0=t}function J6(e,t,n){vi[yi++]=Xs,vi[yi++]=qs,vi[yi++]=Bl,Bl=e;var r=Xs;e=qs;var i=32-$i(r)-1;r&=~(1<<i),n+=1;var s=32-$i(t)+i;if(30<s){var l=i-i%5;s=(r&(1<<l)-1).toString(32),r>>=l,i-=l,Xs=1<<32-$i(t)+i|n<<i|r,qs=s+e}else Xs=1<<s|n<<i|r,qs=e}function IC(e){e.return!==null&&(pl(e,1),J6(e,1,0))}function OC(e){for(;e===U0;)U0=tu[--nu],tu[nu]=null,$0=tu[--nu],tu[nu]=null;for(;e===Bl;)Bl=vi[--yi],vi[yi]=null,qs=vi[--yi],vi[yi]=null,Xs=vi[--yi],vi[yi]=null}var Xr=null,Yr=null,Zt=!1,Bi=null;function Z6(e,t){var n=xi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function MI(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xr=e,Yr=ga(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xr=e,Yr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Bl!==null?{id:Xs,overflow:qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xr=e,Yr=null,!0):!1;default:return!1}}function Mx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Lx(e){if(Zt){var t=Yr;if(t){var n=t;if(!MI(e,t)){if(Mx(e))throw Error(xe(418));t=ga(n.nextSibling);var r=Xr;t&&MI(e,t)?Z6(r,n):(e.flags=e.flags&-4097|2,Zt=!1,Xr=e)}}else{if(Mx(e))throw Error(xe(418));e.flags=e.flags&-4097|2,Zt=!1,Xr=e}}}function LI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xr=e}function Fg(e){if(e!==Xr)return!1;if(!Zt)return LI(e),Zt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kx(e.type,e.memoizedProps)),t&&(t=Yr)){if(Mx(e))throw eM(),Error(xe(418));for(;t;)Z6(e,t),t=ga(t.nextSibling)}if(LI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Yr=ga(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Yr=null}}else Yr=Xr?ga(e.stateNode.nextSibling):null;return!0}function eM(){for(var e=Yr;e;)e=ga(e.nextSibling)}function zu(){Yr=Xr=null,Zt=!1}function kC(e){Bi===null?Bi=[e]:Bi.push(e)}var OW=Co.ReactCurrentBatchConfig;function Li(e,t){if(e&&e.defaultProps){t=cn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var G0=$a(null),V0=null,ru=null,AC=null;function RC(){AC=ru=V0=null}function DC(e){var t=G0.current;Qt(G0),e._currentValue=t}function Fx(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Iu(e,t){V0=e,AC=ru=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mr=!0),e.firstContext=null)}function Pi(e){var t=e._currentValue;if(AC!==e)if(e={context:e,memoizedValue:t,next:null},ru===null){if(V0===null)throw Error(xe(308));ru=e,V0.dependencies={lanes:0,firstContext:e}}else ru=ru.next=e;return t}var El=null;function MC(e){El===null?El=[e]:El.push(e)}function tM(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,MC(t)):(n.next=i.next,i.next=n),t.interleaved=n,go(e,r)}function go(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yo=!1;function LC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ma(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ct&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,go(e,n)}return i=r.interleaved,i===null?(t.next=t,MC(r)):(t.next=i.next,i.next=t),r.interleaved=t,go(e,n)}function Ym(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bC(e,n)}}function FI(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=l:s=s.next=l,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function H0(e,t,n,r){var i=e.updateQueue;Yo=!1;var s=i.firstBaseUpdate,l=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var o=a,c=o.next;o.next=null,l===null?s=c:l.next=c,l=o;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==l&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=o))}if(s!==null){var u=i.baseState;l=0,h=c=o=null,a=s;do{var f=a.lane,d=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(f=t,d=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){u=p.call(d,u,f);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(d,u,f):p,f==null)break e;u=cn({},u,f);break e;case 2:Yo=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=d,o=u):h=h.next=d,l|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(h===null&&(o=u),i.baseState=o,i.firstBaseUpdate=c,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);$l|=l,e.lanes=l,e.memoizedState=u}}function NI(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(xe(191,i));i.call(r)}}}var rM=new t6.Component().refs;function Nx(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:cn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var gy={isMounted:function(e){return(e=e._reactInternals)?oc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xr(),i=ya(e),s=Zs(r,i);s.payload=t,n!=null&&(s.callback=n),t=ma(e,s,i),t!==null&&(Gi(t,e,i,r),Ym(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xr(),i=ya(e),s=Zs(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ma(e,s,i),t!==null&&(Gi(t,e,i,r),Ym(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xr(),r=ya(e),i=Zs(n,r);i.tag=2,t!=null&&(i.callback=t),t=ma(e,i,r),t!==null&&(Gi(t,e,r,n),Ym(t,e,r))}};function jI(e,t,n,r,i,s,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,l):t.prototype&&t.prototype.isPureReactComponent?!Td(n,r)||!Td(i,s):!0}function iM(e,t,n){var r=!1,i=Oa,s=t.contextType;return typeof s=="object"&&s!==null?s=Pi(s):(i=jr(t)?jl:hr.current,r=t.contextTypes,s=(r=r!=null)?Hu(e,i):Oa),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function BI(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gy.enqueueReplaceState(t,t.state,null)}function jx(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=rM,LC(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Pi(s):(s=jr(t)?jl:hr.current,i.context=Hu(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Nx(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&gy.enqueueReplaceState(i,i.state,null),H0(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function pf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(xe(309));var r=n.stateNode}if(!r)throw Error(xe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(l){var a=i.refs;a===rM&&(a=i.refs={}),l===null?delete a[s]:a[s]=l},t._stringRef=s,t)}if(typeof e!="string")throw Error(xe(284));if(!n._owner)throw Error(xe(290,e))}return e}function Ng(e,t){throw e=Object.prototype.toString.call(t),Error(xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function UI(e){var t=e._init;return t(e._payload)}function sM(e){function t(v,_){if(e){var y=v.deletions;y===null?(v.deletions=[_],v.flags|=16):y.push(_)}}function n(v,_){if(!e)return null;for(;_!==null;)t(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=_a(v,_),v.index=0,v.sibling=null,v}function s(v,_,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<_?(v.flags|=2,_):y):(v.flags|=2,_)):(v.flags|=1048576,_)}function l(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,_,y,b){return _===null||_.tag!==6?(_=Ib(y,v.mode,b),_.return=v,_):(_=i(_,y),_.return=v,_)}function o(v,_,y,b){var S=y.type;return S===qc?h(v,_,y.props.children,b,y.key):_!==null&&(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wo&&UI(S)===_.type)?(b=i(_,y.props),b.ref=pf(v,_,y),b.return=v,b):(b=Zm(y.type,y.key,y.props,null,v.mode,b),b.ref=pf(v,_,y),b.return=v,b)}function c(v,_,y,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==y.containerInfo||_.stateNode.implementation!==y.implementation?(_=Ob(y,v.mode,b),_.return=v,_):(_=i(_,y.children||[]),_.return=v,_)}function h(v,_,y,b,S){return _===null||_.tag!==7?(_=Dl(y,v.mode,b,S),_.return=v,_):(_=i(_,y),_.return=v,_)}function u(v,_,y){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ib(""+_,v.mode,y),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Eg:return y=Zm(_.type,_.key,_.props,null,v.mode,y),y.ref=pf(v,null,_),y.return=v,y;case Xc:return _=Ob(_,v.mode,y),_.return=v,_;case Wo:var b=_._init;return u(v,b(_._payload),y)}if(Bf(_)||cf(_))return _=Dl(_,v.mode,y,null),_.return=v,_;Ng(v,_)}return null}function f(v,_,y,b){var S=_!==null?_.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(v,_,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Eg:return y.key===S?o(v,_,y,b):null;case Xc:return y.key===S?c(v,_,y,b):null;case Wo:return S=y._init,f(v,_,S(y._payload),b)}if(Bf(y)||cf(y))return S!==null?null:h(v,_,y,b,null);Ng(v,y)}return null}function d(v,_,y,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(y)||null,a(_,v,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Eg:return v=v.get(b.key===null?y:b.key)||null,o(_,v,b,S);case Xc:return v=v.get(b.key===null?y:b.key)||null,c(_,v,b,S);case Wo:var x=b._init;return d(v,_,y,x(b._payload),S)}if(Bf(b)||cf(b))return v=v.get(y)||null,h(_,v,b,S,null);Ng(_,b)}return null}function p(v,_,y,b){for(var S=null,x=null,C=_,w=_=0,k=null;C!==null&&w<y.length;w++){C.index>w?(k=C,C=null):k=C.sibling;var I=f(v,C,y[w],b);if(I===null){C===null&&(C=k);break}e&&C&&I.alternate===null&&t(v,C),_=s(I,_,w),x===null?S=I:x.sibling=I,x=I,C=k}if(w===y.length)return n(v,C),Zt&&pl(v,w),S;if(C===null){for(;w<y.length;w++)C=u(v,y[w],b),C!==null&&(_=s(C,_,w),x===null?S=C:x.sibling=C,x=C);return Zt&&pl(v,w),S}for(C=r(v,C);w<y.length;w++)k=d(C,v,w,y[w],b),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?w:k.key),_=s(k,_,w),x===null?S=k:x.sibling=k,x=k);return e&&C.forEach(function(R){return t(v,R)}),Zt&&pl(v,w),S}function m(v,_,y,b){var S=cf(y);if(typeof S!="function")throw Error(xe(150));if(y=S.call(y),y==null)throw Error(xe(151));for(var x=S=null,C=_,w=_=0,k=null,I=y.next();C!==null&&!I.done;w++,I=y.next()){C.index>w?(k=C,C=null):k=C.sibling;var R=f(v,C,I.value,b);if(R===null){C===null&&(C=k);break}e&&C&&R.alternate===null&&t(v,C),_=s(R,_,w),x===null?S=R:x.sibling=R,x=R,C=k}if(I.done)return n(v,C),Zt&&pl(v,w),S;if(C===null){for(;!I.done;w++,I=y.next())I=u(v,I.value,b),I!==null&&(_=s(I,_,w),x===null?S=I:x.sibling=I,x=I);return Zt&&pl(v,w),S}for(C=r(v,C);!I.done;w++,I=y.next())I=d(C,v,w,I.value,b),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?w:I.key),_=s(I,_,w),x===null?S=I:x.sibling=I,x=I);return e&&C.forEach(function(j){return t(v,j)}),Zt&&pl(v,w),S}function g(v,_,y,b){if(typeof y=="object"&&y!==null&&y.type===qc&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Eg:e:{for(var S=y.key,x=_;x!==null;){if(x.key===S){if(S=y.type,S===qc){if(x.tag===7){n(v,x.sibling),_=i(x,y.props.children),_.return=v,v=_;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wo&&UI(S)===x.type){n(v,x.sibling),_=i(x,y.props),_.ref=pf(v,x,y),_.return=v,v=_;break e}n(v,x);break}else t(v,x);x=x.sibling}y.type===qc?(_=Dl(y.props.children,v.mode,b,y.key),_.return=v,v=_):(b=Zm(y.type,y.key,y.props,null,v.mode,b),b.ref=pf(v,_,y),b.return=v,v=b)}return l(v);case Xc:e:{for(x=y.key;_!==null;){if(_.key===x)if(_.tag===4&&_.stateNode.containerInfo===y.containerInfo&&_.stateNode.implementation===y.implementation){n(v,_.sibling),_=i(_,y.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else t(v,_);_=_.sibling}_=Ob(y,v.mode,b),_.return=v,v=_}return l(v);case Wo:return x=y._init,g(v,_,x(y._payload),b)}if(Bf(y))return p(v,_,y,b);if(cf(y))return m(v,_,y,b);Ng(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,_!==null&&_.tag===6?(n(v,_.sibling),_=i(_,y),_.return=v,v=_):(n(v,_),_=Ib(y,v.mode,b),_.return=v,v=_),l(v)):n(v,_)}return g}var Wu=sM(!0),oM=sM(!1),vp={},Ps=$a(vp),Od=$a(vp),kd=$a(vp);function Pl(e){if(e===vp)throw Error(xe(174));return e}function FC(e,t){switch(zt(kd,t),zt(Od,e),zt(Ps,vp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mx(t,e)}Qt(Ps),zt(Ps,t)}function Yu(){Qt(Ps),Qt(Od),Qt(kd)}function aM(e){Pl(kd.current);var t=Pl(Ps.current),n=mx(t,e.type);t!==n&&(zt(Od,e),zt(Ps,n))}function NC(e){Od.current===e&&(Qt(Ps),Qt(Od))}var rn=$a(0);function z0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xb=[];function jC(){for(var e=0;e<xb.length;e++)xb[e]._workInProgressVersionPrimary=null;xb.length=0}var Xm=Co.ReactCurrentDispatcher,wb=Co.ReactCurrentBatchConfig,Ul=0,ln=null,Bn=null,Wn=null,W0=!1,Kf=!1,Ad=0,kW=0;function ar(){throw Error(xe(321))}function BC(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qi(e[n],t[n]))return!1;return!0}function UC(e,t,n,r,i,s){if(Ul=s,ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xm.current=e===null||e.memoizedState===null?MW:LW,e=n(r,i),Kf){s=0;do{if(Kf=!1,Ad=0,25<=s)throw Error(xe(301));s+=1,Wn=Bn=null,t.updateQueue=null,Xm.current=FW,e=n(r,i)}while(Kf)}if(Xm.current=Y0,t=Bn!==null&&Bn.next!==null,Ul=0,Wn=Bn=ln=null,W0=!1,t)throw Error(xe(300));return e}function $C(){var e=Ad!==0;return Ad=0,e}function hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?ln.memoizedState=Wn=e:Wn=Wn.next=e,Wn}function Ii(){if(Bn===null){var e=ln.alternate;e=e!==null?e.memoizedState:null}else e=Bn.next;var t=Wn===null?ln.memoizedState:Wn.next;if(t!==null)Wn=t,Bn=e;else{if(e===null)throw Error(xe(310));Bn=e,e={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},Wn===null?ln.memoizedState=Wn=e:Wn=Wn.next=e}return Wn}function Rd(e,t){return typeof t=="function"?t(e):t}function Cb(e){var t=Ii(),n=t.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=e;var r=Bn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var l=i.next;i.next=s.next,s.next=l}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=l=null,o=null,c=s;do{var h=c.lane;if((Ul&h)===h)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=u,l=r):o=o.next=u,ln.lanes|=h,$l|=h}c=c.next}while(c!==null&&c!==s);o===null?l=r:o.next=a,qi(r,t.memoizedState)||(Mr=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=o,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ln.lanes|=s,$l|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Tb(e){var t=Ii(),n=t.queue;if(n===null)throw Error(xe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do s=e(s,l.action),l=l.next;while(l!==i);qi(s,t.memoizedState)||(Mr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function lM(){}function cM(e,t){var n=ln,r=Ii(),i=t(),s=!qi(r.memoizedState,i);if(s&&(r.memoizedState=i,Mr=!0),r=r.queue,GC(fM.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Wn!==null&&Wn.memoizedState.tag&1){if(n.flags|=2048,Dd(9,hM.bind(null,n,r,i,t),void 0,null),qn===null)throw Error(xe(349));Ul&30||uM(n,t,i)}return i}function uM(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function hM(e,t,n,r){t.value=n,t.getSnapshot=r,dM(t)&&pM(e)}function fM(e,t,n){return n(function(){dM(t)&&pM(e)})}function dM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qi(e,n)}catch{return!0}}function pM(e){var t=go(e,1);t!==null&&Gi(t,e,1,-1)}function $I(e){var t=hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rd,lastRenderedState:e},t.queue=e,e=e.dispatch=DW.bind(null,ln,e),[t.memoizedState,e]}function Dd(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function gM(){return Ii().memoizedState}function qm(e,t,n,r){var i=hs();ln.flags|=e,i.memoizedState=Dd(1|t,n,void 0,r===void 0?null:r)}function my(e,t,n,r){var i=Ii();r=r===void 0?null:r;var s=void 0;if(Bn!==null){var l=Bn.memoizedState;if(s=l.destroy,r!==null&&BC(r,l.deps)){i.memoizedState=Dd(t,n,s,r);return}}ln.flags|=e,i.memoizedState=Dd(1|t,n,s,r)}function GI(e,t){return qm(8390656,8,e,t)}function GC(e,t){return my(2048,8,e,t)}function mM(e,t){return my(4,2,e,t)}function vM(e,t){return my(4,4,e,t)}function yM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _M(e,t,n){return n=n!=null?n.concat([e]):null,my(4,4,yM.bind(null,t,e),n)}function VC(){}function bM(e,t){var n=Ii();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&BC(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function SM(e,t){var n=Ii();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&BC(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xM(e,t,n){return Ul&21?(qi(n,t)||(n=T6(),ln.lanes|=n,$l|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mr=!0),e.memoizedState=n)}function AW(e,t){var n=Rt;Rt=n!==0&&4>n?n:4,e(!0);var r=wb.transition;wb.transition={};try{e(!1),t()}finally{Rt=n,wb.transition=r}}function wM(){return Ii().memoizedState}function RW(e,t,n){var r=ya(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CM(e))TM(t,n);else if(n=tM(e,t,n,r),n!==null){var i=xr();Gi(n,e,r,i),EM(n,t,r)}}function DW(e,t,n){var r=ya(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CM(e))TM(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var l=t.lastRenderedState,a=s(l,n);if(i.hasEagerState=!0,i.eagerState=a,qi(a,l)){var o=t.interleaved;o===null?(i.next=i,MC(t)):(i.next=o.next,o.next=i),t.interleaved=i;return}}catch{}finally{}n=tM(e,t,i,r),n!==null&&(i=xr(),Gi(n,e,r,i),EM(n,t,r))}}function CM(e){var t=e.alternate;return e===ln||t!==null&&t===ln}function TM(e,t){Kf=W0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function EM(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,bC(e,n)}}var Y0={readContext:Pi,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},MW={readContext:Pi,useCallback:function(e,t){return hs().memoizedState=[e,t===void 0?null:t],e},useContext:Pi,useEffect:GI,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qm(4194308,4,yM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qm(4194308,4,e,t)},useInsertionEffect:function(e,t){return qm(4,2,e,t)},useMemo:function(e,t){var n=hs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=RW.bind(null,ln,e),[r.memoizedState,e]},useRef:function(e){var t=hs();return e={current:e},t.memoizedState=e},useState:$I,useDebugValue:VC,useDeferredValue:function(e){return hs().memoizedState=e},useTransition:function(){var e=$I(!1),t=e[0];return e=AW.bind(null,e[1]),hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ln,i=hs();if(Zt){if(n===void 0)throw Error(xe(407));n=n()}else{if(n=t(),qn===null)throw Error(xe(349));Ul&30||uM(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,GI(fM.bind(null,r,s,e),[e]),r.flags|=2048,Dd(9,hM.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=hs(),t=qn.identifierPrefix;if(Zt){var n=qs,r=Xs;n=(r&~(1<<32-$i(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ad++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=kW++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},LW={readContext:Pi,useCallback:bM,useContext:Pi,useEffect:GC,useImperativeHandle:_M,useInsertionEffect:mM,useLayoutEffect:vM,useMemo:SM,useReducer:Cb,useRef:gM,useState:function(){return Cb(Rd)},useDebugValue:VC,useDeferredValue:function(e){var t=Ii();return xM(t,Bn.memoizedState,e)},useTransition:function(){var e=Cb(Rd)[0],t=Ii().memoizedState;return[e,t]},useMutableSource:lM,useSyncExternalStore:cM,useId:wM,unstable_isNewReconciler:!1},FW={readContext:Pi,useCallback:bM,useContext:Pi,useEffect:GC,useImperativeHandle:_M,useInsertionEffect:mM,useLayoutEffect:vM,useMemo:SM,useReducer:Tb,useRef:gM,useState:function(){return Tb(Rd)},useDebugValue:VC,useDeferredValue:function(e){var t=Ii();return Bn===null?t.memoizedState=e:xM(t,Bn.memoizedState,e)},useTransition:function(){var e=Tb(Rd)[0],t=Ii().memoizedState;return[e,t]},useMutableSource:lM,useSyncExternalStore:cM,useId:wM,unstable_isNewReconciler:!1};function Xu(e,t){try{var n="",r=t;do n+=uz(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Eb(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Bx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var NW=typeof WeakMap=="function"?WeakMap:Map;function PM(e,t,n){n=Zs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){q0||(q0=!0,qx=r),Bx(e,t)},n}function IM(e,t,n){n=Zs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Bx(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bx(e,t),typeof r!="function"&&(va===null?va=new Set([this]):va.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function VI(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new NW;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=QW.bind(null,e,t,n),t.then(e,e))}function HI(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zI(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zs(-1,1),t.tag=2,ma(n,t,1))),n.lanes|=1),e)}var jW=Co.ReactCurrentOwner,Mr=!1;function yr(e,t,n,r){t.child=e===null?oM(t,null,n,r):Wu(t,e.child,n,r)}function WI(e,t,n,r,i){n=n.render;var s=t.ref;return Iu(t,i),r=UC(e,t,n,r,s,i),n=$C(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,mo(e,t,i)):(Zt&&n&&IC(t),t.flags|=1,yr(e,t,r,i),t.child)}function YI(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!QC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,OM(e,t,s,r,i)):(e=Zm(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var l=s.memoizedProps;if(n=n.compare,n=n!==null?n:Td,n(l,r)&&e.ref===t.ref)return mo(e,t,i)}return t.flags|=1,e=_a(s,r),e.ref=t.ref,e.return=t,t.child=e}function OM(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Td(s,r)&&e.ref===t.ref)if(Mr=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Mr=!0);else return t.lanes=e.lanes,mo(e,t,i)}return Ux(e,t,n,r,i)}function kM(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(su,Hr),Hr|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,zt(su,Hr),Hr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,zt(su,Hr),Hr|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,zt(su,Hr),Hr|=r;return yr(e,t,i,n),t.child}function AM(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ux(e,t,n,r,i){var s=jr(n)?jl:hr.current;return s=Hu(t,s),Iu(t,i),n=UC(e,t,n,r,s,i),r=$C(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,mo(e,t,i)):(Zt&&r&&IC(t),t.flags|=1,yr(e,t,n,i),t.child)}function XI(e,t,n,r,i){if(jr(n)){var s=!0;B0(t)}else s=!1;if(Iu(t,i),t.stateNode===null)Km(e,t),iM(t,n,r),jx(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var o=l.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pi(c):(c=jr(n)?jl:hr.current,c=Hu(t,c));var h=n.getDerivedStateFromProps,u=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";u||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||o!==c)&&BI(t,l,r,c),Yo=!1;var f=t.memoizedState;l.state=f,H0(t,r,l,i),o=t.memoizedState,a!==r||f!==o||Nr.current||Yo?(typeof h=="function"&&(Nx(t,n,h,r),o=t.memoizedState),(a=Yo||jI(t,n,a,r,f,o,c))?(u||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),l.props=r,l.state=o,l.context=c,r=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,nM(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Li(t.type,a),l.props=c,u=t.pendingProps,f=l.context,o=n.contextType,typeof o=="object"&&o!==null?o=Pi(o):(o=jr(n)?jl:hr.current,o=Hu(t,o));var d=n.getDerivedStateFromProps;(h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==u||f!==o)&&BI(t,l,r,o),Yo=!1,f=t.memoizedState,l.state=f,H0(t,r,l,i);var p=t.memoizedState;a!==u||f!==p||Nr.current||Yo?(typeof d=="function"&&(Nx(t,n,d,r),p=t.memoizedState),(c=Yo||jI(t,n,c,r,f,p,o)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,p,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,p,o)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),l.props=r,l.state=p,l.context=o,r=c):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return $x(e,t,n,r,s,i)}function $x(e,t,n,r,i,s){AM(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&DI(t,n,!1),mo(e,t,s);r=t.stateNode,jW.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Wu(t,e.child,null,s),t.child=Wu(t,null,a,s)):yr(e,t,a,s),t.memoizedState=r.state,i&&DI(t,n,!0),t.child}function RM(e){var t=e.stateNode;t.pendingContext?RI(e,t.pendingContext,t.pendingContext!==t.context):t.context&&RI(e,t.context,!1),FC(e,t.containerInfo)}function qI(e,t,n,r,i){return zu(),kC(i),t.flags|=256,yr(e,t,n,r),t.child}var Gx={dehydrated:null,treeContext:null,retryLane:0};function Vx(e){return{baseLanes:e,cachePool:null,transitions:null}}function DM(e,t,n){var r=t.pendingProps,i=rn.current,s=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),zt(rn,i&1),e===null)return Lx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=_y(l,r,0,null),e=Dl(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Vx(n),t.memoizedState=Gx,e):HC(t,l));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return BW(e,t,l,r,a,i,n);if(s){s=r.fallback,l=t.mode,i=e.child,a=i.sibling;var o={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=o,t.deletions=null):(r=_a(i,o),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=_a(a,s):(s=Dl(s,l,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=e.child.memoizedState,l=l===null?Vx(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Gx,r}return s=e.child,e=s.sibling,r=_a(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function HC(e,t){return t=_y({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jg(e,t,n,r){return r!==null&&kC(r),Wu(t,e.child,null,n),e=HC(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function BW(e,t,n,r,i,s,l){if(n)return t.flags&256?(t.flags&=-257,r=Eb(Error(xe(422))),jg(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=_y({mode:"visible",children:r.children},i,0,null),s=Dl(s,i,l,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Wu(t,e.child,null,l),t.child.memoizedState=Vx(l),t.memoizedState=Gx,s);if(!(t.mode&1))return jg(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(xe(419)),r=Eb(s,r,void 0),jg(e,t,l,r)}if(a=(l&e.childLanes)!==0,Mr||a){if(r=qn,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,go(e,i),Gi(r,e,i,-1))}return KC(),r=Eb(Error(xe(421))),jg(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=JW.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Yr=ga(i.nextSibling),Xr=t,Zt=!0,Bi=null,e!==null&&(vi[yi++]=Xs,vi[yi++]=qs,vi[yi++]=Bl,Xs=e.id,qs=e.overflow,Bl=t),t=HC(t,r.children),t.flags|=4096,t)}function KI(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fx(e.return,t,n)}function Pb(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function MM(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(yr(e,t,r.children,n),r=rn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&KI(e,n,t);else if(e.tag===19)KI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(zt(rn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&z0(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Pb(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&z0(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Pb(t,!0,n,null,s);break;case"together":Pb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Km(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$l|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(xe(153));if(t.child!==null){for(e=t.child,n=_a(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_a(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function UW(e,t,n){switch(t.tag){case 3:RM(t),zu();break;case 5:aM(t);break;case 1:jr(t.type)&&B0(t);break;case 4:FC(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;zt(G0,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(zt(rn,rn.current&1),t.flags|=128,null):n&t.child.childLanes?DM(e,t,n):(zt(rn,rn.current&1),e=mo(e,t,n),e!==null?e.sibling:null);zt(rn,rn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return MM(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),zt(rn,rn.current),r)break;return null;case 22:case 23:return t.lanes=0,kM(e,t,n)}return mo(e,t,n)}var LM,Hx,FM,NM;LM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hx=function(){};FM=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Pl(Ps.current);var s=null;switch(n){case"input":i=fx(e,i),r=fx(e,r),s=[];break;case"select":i=cn({},i,{value:void 0}),r=cn({},r,{value:void 0}),s=[];break;case"textarea":i=gx(e,i),r=gx(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=N0)}vx(n,r);var l;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var o=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(l in a)!a.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in o)o.hasOwnProperty(l)&&a[l]!==o[l]&&(n||(n={}),n[l]=o[l])}else n||(s||(s=[]),s.push(c,n)),n=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(s=s||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yd.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&qt("scroll",e),s||a===o||(s=[])):(s=s||[]).push(c,o))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};NM=function(e,t,n,r){n!==r&&(t.flags|=4)};function gf(e,t){if(!Zt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $W(e,t,n){var r=t.pendingProps;switch(OC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return jr(t.type)&&j0(),lr(t),null;case 3:return r=t.stateNode,Yu(),Qt(Nr),Qt(hr),jC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Fg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bi!==null&&(Jx(Bi),Bi=null))),Hx(e,t),lr(t),null;case 5:NC(t);var i=Pl(kd.current);if(n=t.type,e!==null&&t.stateNode!=null)FM(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(xe(166));return lr(t),null}if(e=Pl(Ps.current),Fg(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ms]=t,r[Id]=s,e=(t.mode&1)!==0,n){case"dialog":qt("cancel",r),qt("close",r);break;case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(i=0;i<$f.length;i++)qt($f[i],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"details":qt("toggle",r);break;case"input":sI(r,s),qt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qt("invalid",r);break;case"textarea":aI(r,s),qt("invalid",r)}vx(n,s),i=null;for(var l in s)if(s.hasOwnProperty(l)){var a=s[l];l==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lg(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lg(r.textContent,a,e),i=["children",""+a]):yd.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&qt("scroll",r)}switch(n){case"input":Pg(r),oI(r,s,!0);break;case"textarea":Pg(r),lI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=N0)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=u6(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ms]=t,e[Id]=r,LM(e,t,!1,!1),t.stateNode=e;e:{switch(l=yx(n,r),n){case"dialog":qt("cancel",e),qt("close",e),i=r;break;case"iframe":case"object":case"embed":qt("load",e),i=r;break;case"video":case"audio":for(i=0;i<$f.length;i++)qt($f[i],e);i=r;break;case"source":qt("error",e),i=r;break;case"img":case"image":case"link":qt("error",e),qt("load",e),i=r;break;case"details":qt("toggle",e),i=r;break;case"input":sI(e,r),i=fx(e,r),qt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=cn({},r,{value:void 0}),qt("invalid",e);break;case"textarea":aI(e,r),i=gx(e,r),qt("invalid",e);break;default:i=r}vx(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="style"?d6(e,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&h6(e,o)):s==="children"?typeof o=="string"?(n!=="textarea"||o!=="")&&_d(e,o):typeof o=="number"&&_d(e,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yd.hasOwnProperty(s)?o!=null&&s==="onScroll"&&qt("scroll",e):o!=null&&pC(e,s,o,l))}switch(n){case"input":Pg(e),oI(e,r,!1);break;case"textarea":Pg(e),lI(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ia(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Cu(e,!!r.multiple,s,!1):r.defaultValue!=null&&Cu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=N0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lr(t),null;case 6:if(e&&t.stateNode!=null)NM(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(xe(166));if(n=Pl(kd.current),Pl(Ps.current),Fg(t)){if(r=t.stateNode,n=t.memoizedProps,r[ms]=t,(s=r.nodeValue!==n)&&(e=Xr,e!==null))switch(e.tag){case 3:Lg(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lg(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ms]=t,t.stateNode=r}return lr(t),null;case 13:if(Qt(rn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zt&&Yr!==null&&t.mode&1&&!(t.flags&128))eM(),zu(),t.flags|=98560,s=!1;else if(s=Fg(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(xe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(xe(317));s[ms]=t}else zu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lr(t),s=!1}else Bi!==null&&(Jx(Bi),Bi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||rn.current&1?Gn===0&&(Gn=3):KC())),t.updateQueue!==null&&(t.flags|=4),lr(t),null);case 4:return Yu(),Hx(e,t),e===null&&Ed(t.stateNode.containerInfo),lr(t),null;case 10:return DC(t.type._context),lr(t),null;case 17:return jr(t.type)&&j0(),lr(t),null;case 19:if(Qt(rn),s=t.memoizedState,s===null)return lr(t),null;if(r=(t.flags&128)!==0,l=s.rendering,l===null)if(r)gf(s,!1);else{if(Gn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=z0(e),l!==null){for(t.flags|=128,gf(s,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return zt(rn,rn.current&1|2),t.child}e=e.sibling}s.tail!==null&&Cn()>qu&&(t.flags|=128,r=!0,gf(s,!1),t.lanes=4194304)}else{if(!r)if(e=z0(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!Zt)return lr(t),null}else 2*Cn()-s.renderingStartTime>qu&&n!==1073741824&&(t.flags|=128,r=!0,gf(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(n=s.last,n!==null?n.sibling=l:t.child=l,s.last=l)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Cn(),t.sibling=null,n=rn.current,zt(rn,r?n&1|2:n&1),t):(lr(t),null);case 22:case 23:return qC(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Hr&1073741824&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),null;case 24:return null;case 25:return null}throw Error(xe(156,t.tag))}function GW(e,t){switch(OC(t),t.tag){case 1:return jr(t.type)&&j0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yu(),Qt(Nr),Qt(hr),jC(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return NC(t),null;case 13:if(Qt(rn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(xe(340));zu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qt(rn),null;case 4:return Yu(),null;case 10:return DC(t.type._context),null;case 22:case 23:return qC(),null;case 24:return null;default:return null}}var Bg=!1,ur=!1,VW=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function iu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){fn(e,t,r)}else n.current=null}function zx(e,t,n){try{n()}catch(r){fn(e,t,r)}}var QI=!1;function HW(e,t){if(Ix=M0,e=$6(),PC(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var l=0,a=-1,o=-1,c=0,h=0,u=e,f=null;t:for(;;){for(var d;u!==n||i!==0&&u.nodeType!==3||(a=l+i),u!==s||r!==0&&u.nodeType!==3||(o=l+r),u.nodeType===3&&(l+=u.nodeValue.length),(d=u.firstChild)!==null;)f=u,u=d;for(;;){if(u===e)break t;if(f===n&&++c===i&&(a=l),f===s&&++h===r&&(o=l),(d=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=d}n=a===-1||o===-1?null:{start:a,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ox={focusedElem:e,selectionRange:n},M0=!1,Ae=t;Ae!==null;)if(t=Ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ae=e;else for(;Ae!==null;){t=Ae;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Li(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(b){fn(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Ae=e;break}Ae=t.return}return p=QI,QI=!1,p}function Qf(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&zx(t,n,s)}i=i.next}while(i!==r)}}function vy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Wx(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jM(e){var t=e.alternate;t!==null&&(e.alternate=null,jM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ms],delete t[Id],delete t[Rx],delete t[EW],delete t[PW])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function BM(e){return e.tag===5||e.tag===3||e.tag===4}function JI(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||BM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yx(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=N0));else if(r!==4&&(e=e.child,e!==null))for(Yx(e,t,n),e=e.sibling;e!==null;)Yx(e,t,n),e=e.sibling}function Xx(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Xx(e,t,n),e=e.sibling;e!==null;)Xx(e,t,n),e=e.sibling}var Jn=null,Ni=!1;function Lo(e,t,n){for(n=n.child;n!==null;)UM(e,t,n),n=n.sibling}function UM(e,t,n){if(Es&&typeof Es.onCommitFiberUnmount=="function")try{Es.onCommitFiberUnmount(cy,n)}catch{}switch(n.tag){case 5:ur||iu(n,t);case 6:var r=Jn,i=Ni;Jn=null,Lo(e,t,n),Jn=r,Ni=i,Jn!==null&&(Ni?(e=Jn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Jn.removeChild(n.stateNode));break;case 18:Jn!==null&&(Ni?(e=Jn,n=n.stateNode,e.nodeType===8?bb(e.parentNode,n):e.nodeType===1&&bb(e,n),wd(e)):bb(Jn,n.stateNode));break;case 4:r=Jn,i=Ni,Jn=n.stateNode.containerInfo,Ni=!0,Lo(e,t,n),Jn=r,Ni=i;break;case 0:case 11:case 14:case 15:if(!ur&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&zx(n,t,l),i=i.next}while(i!==r)}Lo(e,t,n);break;case 1:if(!ur&&(iu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){fn(n,t,a)}Lo(e,t,n);break;case 21:Lo(e,t,n);break;case 22:n.mode&1?(ur=(r=ur)||n.memoizedState!==null,Lo(e,t,n),ur=r):Lo(e,t,n);break;default:Lo(e,t,n)}}function ZI(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new VW),t.forEach(function(r){var i=ZW.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ri(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:Jn=a.stateNode,Ni=!1;break e;case 3:Jn=a.stateNode.containerInfo,Ni=!0;break e;case 4:Jn=a.stateNode.containerInfo,Ni=!0;break e}a=a.return}if(Jn===null)throw Error(xe(160));UM(s,l,i),Jn=null,Ni=!1;var o=i.alternate;o!==null&&(o.return=null),i.return=null}catch(c){fn(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$M(t,e),t=t.sibling}function $M(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ri(t,e),ls(e),r&4){try{Qf(3,e,e.return),vy(3,e)}catch(m){fn(e,e.return,m)}try{Qf(5,e,e.return)}catch(m){fn(e,e.return,m)}}break;case 1:Ri(t,e),ls(e),r&512&&n!==null&&iu(n,n.return);break;case 5:if(Ri(t,e),ls(e),r&512&&n!==null&&iu(n,n.return),e.flags&32){var i=e.stateNode;try{_d(i,"")}catch(m){fn(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,l=n!==null?n.memoizedProps:s,a=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&l6(i,s),yx(a,l);var c=yx(a,s);for(l=0;l<o.length;l+=2){var h=o[l],u=o[l+1];h==="style"?d6(i,u):h==="dangerouslySetInnerHTML"?h6(i,u):h==="children"?_d(i,u):pC(i,h,u,c)}switch(a){case"input":dx(i,s);break;case"textarea":c6(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Cu(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Cu(i,!!s.multiple,s.defaultValue,!0):Cu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Id]=s}catch(m){fn(e,e.return,m)}}break;case 6:if(Ri(t,e),ls(e),r&4){if(e.stateNode===null)throw Error(xe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){fn(e,e.return,m)}}break;case 3:if(Ri(t,e),ls(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wd(t.containerInfo)}catch(m){fn(e,e.return,m)}break;case 4:Ri(t,e),ls(e);break;case 13:Ri(t,e),ls(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(YC=Cn())),r&4&&ZI(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(ur=(c=ur)||h,Ri(t,e),ur=c):Ri(t,e),ls(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(Ae=e,h=e.child;h!==null;){for(u=Ae=h;Ae!==null;){switch(f=Ae,d=f.child,f.tag){case 0:case 11:case 14:case 15:Qf(4,f,f.return);break;case 1:iu(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){fn(r,n,m)}}break;case 5:iu(f,f.return);break;case 22:if(f.memoizedState!==null){tO(u);continue}}d!==null?(d.return=f,Ae=d):tO(u)}h=h.sibling}e:for(h=null,u=e;;){if(u.tag===5){if(h===null){h=u;try{i=u.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,o=u.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=f6("display",l))}catch(m){fn(e,e.return,m)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){fn(e,e.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Ri(t,e),ls(e),r&4&&ZI(e);break;case 21:break;default:Ri(t,e),ls(e)}}function ls(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(BM(n)){var r=n;break e}n=n.return}throw Error(xe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_d(i,""),r.flags&=-33);var s=JI(e);Xx(e,s,i);break;case 3:case 4:var l=r.stateNode.containerInfo,a=JI(e);Yx(e,a,l);break;default:throw Error(xe(161))}}catch(o){fn(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zW(e,t,n){Ae=e,GM(e)}function GM(e,t,n){for(var r=(e.mode&1)!==0;Ae!==null;){var i=Ae,s=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||Bg;if(!l){var a=i.alternate,o=a!==null&&a.memoizedState!==null||ur;a=Bg;var c=ur;if(Bg=l,(ur=o)&&!c)for(Ae=i;Ae!==null;)l=Ae,o=l.child,l.tag===22&&l.memoizedState!==null?nO(i):o!==null?(o.return=l,Ae=o):nO(i);for(;s!==null;)Ae=s,GM(s),s=s.sibling;Ae=i,Bg=a,ur=c}eO(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ae=s):eO(e)}}function eO(e){for(;Ae!==null;){var t=Ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ur||vy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ur)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Li(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&NI(t,s,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}NI(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&n.focus();break;case"img":o.src&&(n.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&wd(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}ur||t.flags&512&&Wx(t)}catch(f){fn(t,t.return,f)}}if(t===e){Ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ae=n;break}Ae=t.return}}function tO(e){for(;Ae!==null;){var t=Ae;if(t===e){Ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ae=n;break}Ae=t.return}}function nO(e){for(;Ae!==null;){var t=Ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vy(4,t)}catch(o){fn(t,n,o)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(o){fn(t,i,o)}}var s=t.return;try{Wx(t)}catch(o){fn(t,s,o)}break;case 5:var l=t.return;try{Wx(t)}catch(o){fn(t,l,o)}}}catch(o){fn(t,t.return,o)}if(t===e){Ae=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ae=a;break}Ae=t.return}}var WW=Math.ceil,X0=Co.ReactCurrentDispatcher,zC=Co.ReactCurrentOwner,Ti=Co.ReactCurrentBatchConfig,Ct=0,qn=null,Mn=null,er=0,Hr=0,su=$a(0),Gn=0,Md=null,$l=0,yy=0,WC=0,Jf=null,Rr=null,YC=0,qu=1/0,Vs=null,q0=!1,qx=null,va=null,Ug=!1,aa=null,K0=0,Zf=0,Kx=null,Qm=-1,Jm=0;function xr(){return Ct&6?Cn():Qm!==-1?Qm:Qm=Cn()}function ya(e){return e.mode&1?Ct&2&&er!==0?er&-er:OW.transition!==null?(Jm===0&&(Jm=T6()),Jm):(e=Rt,e!==0||(e=window.event,e=e===void 0?16:R6(e.type)),e):1}function Gi(e,t,n,r){if(50<Zf)throw Zf=0,Kx=null,Error(xe(185));pp(e,n,r),(!(Ct&2)||e!==qn)&&(e===qn&&(!(Ct&2)&&(yy|=n),Gn===4&&ra(e,er)),Br(e,r),n===1&&Ct===0&&!(t.mode&1)&&(qu=Cn()+500,py&&Ga()))}function Br(e,t){var n=e.callbackNode;Oz(e,t);var r=D0(e,e===qn?er:0);if(r===0)n!==null&&hI(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&hI(n),t===1)e.tag===0?IW(rO.bind(null,e)):Q6(rO.bind(null,e)),CW(function(){!(Ct&6)&&Ga()}),n=null;else{switch(E6(r)){case 1:n=_C;break;case 4:n=w6;break;case 16:n=R0;break;case 536870912:n=C6;break;default:n=R0}n=KM(n,VM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function VM(e,t){if(Qm=-1,Jm=0,Ct&6)throw Error(xe(327));var n=e.callbackNode;if(Ou()&&e.callbackNode!==n)return null;var r=D0(e,e===qn?er:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Q0(e,r);else{t=r;var i=Ct;Ct|=2;var s=zM();(qn!==e||er!==t)&&(Vs=null,qu=Cn()+500,Rl(e,t));do try{qW();break}catch(a){HM(e,a)}while(1);RC(),X0.current=s,Ct=i,Mn!==null?t=0:(qn=null,er=0,t=Gn)}if(t!==0){if(t===2&&(i=wx(e),i!==0&&(r=i,t=Qx(e,i))),t===1)throw n=Md,Rl(e,0),ra(e,r),Br(e,Cn()),n;if(t===6)ra(e,r);else{if(i=e.current.alternate,!(r&30)&&!YW(i)&&(t=Q0(e,r),t===2&&(s=wx(e),s!==0&&(r=s,t=Qx(e,s))),t===1))throw n=Md,Rl(e,0),ra(e,r),Br(e,Cn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(xe(345));case 2:gl(e,Rr,Vs);break;case 3:if(ra(e,r),(r&130023424)===r&&(t=YC+500-Cn(),10<t)){if(D0(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){xr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ax(gl.bind(null,e,Rr,Vs),t);break}gl(e,Rr,Vs);break;case 4:if(ra(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-$i(r);s=1<<l,l=t[l],l>i&&(i=l),r&=~s}if(r=i,r=Cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WW(r/1960))-r,10<r){e.timeoutHandle=Ax(gl.bind(null,e,Rr,Vs),r);break}gl(e,Rr,Vs);break;case 5:gl(e,Rr,Vs);break;default:throw Error(xe(329))}}}return Br(e,Cn()),e.callbackNode===n?VM.bind(null,e):null}function Qx(e,t){var n=Jf;return e.current.memoizedState.isDehydrated&&(Rl(e,t).flags|=256),e=Q0(e,t),e!==2&&(t=Rr,Rr=n,t!==null&&Jx(t)),e}function Jx(e){Rr===null?Rr=e:Rr.push.apply(Rr,e)}function YW(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!qi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ra(e,t){for(t&=~WC,t&=~yy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$i(t),r=1<<n;e[n]=-1,t&=~r}}function rO(e){if(Ct&6)throw Error(xe(327));Ou();var t=D0(e,0);if(!(t&1))return Br(e,Cn()),null;var n=Q0(e,t);if(e.tag!==0&&n===2){var r=wx(e);r!==0&&(t=r,n=Qx(e,r))}if(n===1)throw n=Md,Rl(e,0),ra(e,t),Br(e,Cn()),n;if(n===6)throw Error(xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gl(e,Rr,Vs),Br(e,Cn()),null}function XC(e,t){var n=Ct;Ct|=1;try{return e(t)}finally{Ct=n,Ct===0&&(qu=Cn()+500,py&&Ga())}}function Gl(e){aa!==null&&aa.tag===0&&!(Ct&6)&&Ou();var t=Ct;Ct|=1;var n=Ti.transition,r=Rt;try{if(Ti.transition=null,Rt=1,e)return e()}finally{Rt=r,Ti.transition=n,Ct=t,!(Ct&6)&&Ga()}}function qC(){Hr=su.current,Qt(su)}function Rl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,wW(n)),Mn!==null)for(n=Mn.return;n!==null;){var r=n;switch(OC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&j0();break;case 3:Yu(),Qt(Nr),Qt(hr),jC();break;case 5:NC(r);break;case 4:Yu();break;case 13:Qt(rn);break;case 19:Qt(rn);break;case 10:DC(r.type._context);break;case 22:case 23:qC()}n=n.return}if(qn=e,Mn=e=_a(e.current,null),er=Hr=t,Gn=0,Md=null,WC=yy=$l=0,Rr=Jf=null,El!==null){for(t=0;t<El.length;t++)if(n=El[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var l=s.next;s.next=i,r.next=l}n.pending=r}El=null}return e}function HM(e,t){do{var n=Mn;try{if(RC(),Xm.current=Y0,W0){for(var r=ln.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}W0=!1}if(Ul=0,Wn=Bn=ln=null,Kf=!1,Ad=0,zC.current=null,n===null||n.return===null){Gn=1,Md=t,Mn=null;break}e:{var s=e,l=n.return,a=n,o=t;if(t=er,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,h=a,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=HI(l);if(d!==null){d.flags&=-257,zI(d,l,a,s,t),d.mode&1&&VI(s,c,t),t=d,o=c;var p=t.updateQueue;if(p===null){var m=new Set;m.add(o),t.updateQueue=m}else p.add(o);break e}else{if(!(t&1)){VI(s,c,t),KC();break e}o=Error(xe(426))}}else if(Zt&&a.mode&1){var g=HI(l);if(g!==null){!(g.flags&65536)&&(g.flags|=256),zI(g,l,a,s,t),kC(Xu(o,a));break e}}s=o=Xu(o,a),Gn!==4&&(Gn=2),Jf===null?Jf=[s]:Jf.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=PM(s,o,t);FI(s,v);break e;case 1:a=o;var _=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(va===null||!va.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=IM(s,a,t);FI(s,b);break e}}s=s.return}while(s!==null)}YM(n)}catch(S){t=S,Mn===n&&n!==null&&(Mn=n=n.return);continue}break}while(1)}function zM(){var e=X0.current;return X0.current=Y0,e===null?Y0:e}function KC(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),qn===null||!($l&268435455)&&!(yy&268435455)||ra(qn,er)}function Q0(e,t){var n=Ct;Ct|=2;var r=zM();(qn!==e||er!==t)&&(Vs=null,Rl(e,t));do try{XW();break}catch(i){HM(e,i)}while(1);if(RC(),Ct=n,X0.current=r,Mn!==null)throw Error(xe(261));return qn=null,er=0,Gn}function XW(){for(;Mn!==null;)WM(Mn)}function qW(){for(;Mn!==null&&!bz();)WM(Mn)}function WM(e){var t=qM(e.alternate,e,Hr);e.memoizedProps=e.pendingProps,t===null?YM(e):Mn=t,zC.current=null}function YM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=GW(n,t),n!==null){n.flags&=32767,Mn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Gn=6,Mn=null;return}}else if(n=$W(n,t,Hr),n!==null){Mn=n;return}if(t=t.sibling,t!==null){Mn=t;return}Mn=t=e}while(t!==null);Gn===0&&(Gn=5)}function gl(e,t,n){var r=Rt,i=Ti.transition;try{Ti.transition=null,Rt=1,KW(e,t,n,r)}finally{Ti.transition=i,Rt=r}return null}function KW(e,t,n,r){do Ou();while(aa!==null);if(Ct&6)throw Error(xe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(xe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(kz(e,s),e===qn&&(Mn=qn=null,er=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ug||(Ug=!0,KM(R0,function(){return Ou(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ti.transition,Ti.transition=null;var l=Rt;Rt=1;var a=Ct;Ct|=4,zC.current=null,HW(e,n),$M(n,e),mW(Ox),M0=!!Ix,Ox=Ix=null,e.current=n,zW(n),Sz(),Ct=a,Rt=l,Ti.transition=s}else e.current=n;if(Ug&&(Ug=!1,aa=e,K0=i),s=e.pendingLanes,s===0&&(va=null),Cz(n.stateNode),Br(e,Cn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(q0)throw q0=!1,e=qx,qx=null,e;return K0&1&&e.tag!==0&&Ou(),s=e.pendingLanes,s&1?e===Kx?Zf++:(Zf=0,Kx=e):Zf=0,Ga(),null}function Ou(){if(aa!==null){var e=E6(K0),t=Ti.transition,n=Rt;try{if(Ti.transition=null,Rt=16>e?16:e,aa===null)var r=!1;else{if(e=aa,aa=null,K0=0,Ct&6)throw Error(xe(331));var i=Ct;for(Ct|=4,Ae=e.current;Ae!==null;){var s=Ae,l=s.child;if(Ae.flags&16){var a=s.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for(Ae=c;Ae!==null;){var h=Ae;switch(h.tag){case 0:case 11:case 15:Qf(8,h,s)}var u=h.child;if(u!==null)u.return=h,Ae=u;else for(;Ae!==null;){h=Ae;var f=h.sibling,d=h.return;if(jM(h),h===c){Ae=null;break}if(f!==null){f.return=d,Ae=f;break}Ae=d}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ae=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,Ae=l;else e:for(;Ae!==null;){if(s=Ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qf(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ae=v;break e}Ae=s.return}}var _=e.current;for(Ae=_;Ae!==null;){l=Ae;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,Ae=y;else e:for(l=_;Ae!==null;){if(a=Ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vy(9,a)}}catch(S){fn(a,a.return,S)}if(a===l){Ae=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Ae=b;break e}Ae=a.return}}if(Ct=i,Ga(),Es&&typeof Es.onPostCommitFiberRoot=="function")try{Es.onPostCommitFiberRoot(cy,e)}catch{}r=!0}return r}finally{Rt=n,Ti.transition=t}}return!1}function iO(e,t,n){t=Xu(n,t),t=PM(e,t,1),e=ma(e,t,1),t=xr(),e!==null&&(pp(e,1,t),Br(e,t))}function fn(e,t,n){if(e.tag===3)iO(e,e,n);else for(;t!==null;){if(t.tag===3){iO(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(va===null||!va.has(r))){e=Xu(n,e),e=IM(t,e,1),t=ma(t,e,1),e=xr(),t!==null&&(pp(t,1,e),Br(t,e));break}}t=t.return}}function QW(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xr(),e.pingedLanes|=e.suspendedLanes&n,qn===e&&(er&n)===n&&(Gn===4||Gn===3&&(er&130023424)===er&&500>Cn()-YC?Rl(e,0):WC|=n),Br(e,t)}function XM(e,t){t===0&&(e.mode&1?(t=kg,kg<<=1,!(kg&130023424)&&(kg=4194304)):t=1);var n=xr();e=go(e,t),e!==null&&(pp(e,t,n),Br(e,n))}function JW(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XM(e,n)}function ZW(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(xe(314))}r!==null&&r.delete(t),XM(e,n)}var qM;qM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Nr.current)Mr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mr=!1,UW(e,t,n);Mr=!!(e.flags&131072)}else Mr=!1,Zt&&t.flags&1048576&&J6(t,$0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Km(e,t),e=t.pendingProps;var i=Hu(t,hr.current);Iu(t,n),i=UC(null,t,r,e,i,n);var s=$C();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jr(r)?(s=!0,B0(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,LC(t),i.updater=gy,t.stateNode=i,i._reactInternals=t,jx(t,r,e,n),t=$x(null,t,r,!0,s,n)):(t.tag=0,Zt&&s&&IC(t),yr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Km(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=tY(r),e=Li(r,e),i){case 0:t=Ux(null,t,r,e,n);break e;case 1:t=XI(null,t,r,e,n);break e;case 11:t=WI(null,t,r,e,n);break e;case 14:t=YI(null,t,r,Li(r.type,e),n);break e}throw Error(xe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Li(r,i),Ux(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Li(r,i),XI(e,t,r,i,n);case 3:e:{if(RM(t),e===null)throw Error(xe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,nM(e,t),H0(t,r,null,n);var l=t.memoizedState;if(r=l.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Xu(Error(xe(423)),t),t=qI(e,t,r,n,i);break e}else if(r!==i){i=Xu(Error(xe(424)),t),t=qI(e,t,r,n,i);break e}else for(Yr=ga(t.stateNode.containerInfo.firstChild),Xr=t,Zt=!0,Bi=null,n=oM(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zu(),r===i){t=mo(e,t,n);break e}yr(e,t,r,n)}t=t.child}return t;case 5:return aM(t),e===null&&Lx(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,l=i.children,kx(r,i)?l=null:s!==null&&kx(r,s)&&(t.flags|=32),AM(e,t),yr(e,t,l,n),t.child;case 6:return e===null&&Lx(t),null;case 13:return DM(e,t,n);case 4:return FC(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Wu(t,null,r,n):yr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Li(r,i),WI(e,t,r,i,n);case 7:return yr(e,t,t.pendingProps,n),t.child;case 8:return yr(e,t,t.pendingProps.children,n),t.child;case 12:return yr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,l=i.value,zt(G0,r._currentValue),r._currentValue=l,s!==null)if(qi(s.value,l)){if(s.children===i.children&&!Nr.current){t=mo(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){l=s.child;for(var o=a.firstContext;o!==null;){if(o.context===r){if(s.tag===1){o=Zs(-1,n&-n),o.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?o.next=o:(o.next=h.next,h.next=o),c.pending=o}}s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Fx(s.return,n,t),a.lanes|=n;break}o=o.next}}else if(s.tag===10)l=s.type===t.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(xe(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),Fx(l,n,t),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}yr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Iu(t,n),i=Pi(i),r=r(i),t.flags|=1,yr(e,t,r,n),t.child;case 14:return r=t.type,i=Li(r,t.pendingProps),i=Li(r.type,i),YI(e,t,r,i,n);case 15:return OM(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Li(r,i),Km(e,t),t.tag=1,jr(r)?(e=!0,B0(t)):e=!1,Iu(t,n),iM(t,r,i),jx(t,r,i,n),$x(null,t,r,!0,e,n);case 19:return MM(e,t,n);case 22:return kM(e,t,n)}throw Error(xe(156,t.tag))};function KM(e,t){return x6(e,t)}function eY(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(e,t,n,r){return new eY(e,t,n,r)}function QC(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tY(e){if(typeof e=="function")return QC(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mC)return 11;if(e===vC)return 14}return 2}function _a(e,t){var n=e.alternate;return n===null?(n=xi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zm(e,t,n,r,i,s){var l=2;if(r=e,typeof e=="function")QC(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case qc:return Dl(n.children,i,s,t);case gC:l=8,i|=8;break;case lx:return e=xi(12,n,t,i|2),e.elementType=lx,e.lanes=s,e;case cx:return e=xi(13,n,t,i),e.elementType=cx,e.lanes=s,e;case ux:return e=xi(19,n,t,i),e.elementType=ux,e.lanes=s,e;case s6:return _y(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case r6:l=10;break e;case i6:l=9;break e;case mC:l=11;break e;case vC:l=14;break e;case Wo:l=16,r=null;break e}throw Error(xe(130,e==null?e:typeof e,""))}return t=xi(l,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Dl(e,t,n,r){return e=xi(7,e,r,t),e.lanes=n,e}function _y(e,t,n,r){return e=xi(22,e,r,t),e.elementType=s6,e.lanes=n,e.stateNode={isHidden:!1},e}function Ib(e,t,n){return e=xi(6,e,null,t),e.lanes=n,e}function Ob(e,t,n){return t=xi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nY(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cb(0),this.expirationTimes=cb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cb(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function JC(e,t,n,r,i,s,l,a,o){return e=new nY(e,t,n,a,o),t===1?(t=1,s===!0&&(t|=8)):t=0,s=xi(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},LC(s),e}function rY(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function QM(e){if(!e)return Oa;e=e._reactInternals;e:{if(oc(e)!==e||e.tag!==1)throw Error(xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(xe(171))}if(e.tag===1){var n=e.type;if(jr(n))return K6(e,n,t)}return t}function JM(e,t,n,r,i,s,l,a,o){return e=JC(n,r,!0,e,i,s,l,a,o),e.context=QM(null),n=e.current,r=xr(),i=ya(n),s=Zs(r,i),s.callback=t??null,ma(n,s,i),e.current.lanes=i,pp(e,i,r),Br(e,r),e}function by(e,t,n,r){var i=t.current,s=xr(),l=ya(i);return n=QM(n),t.context===null?t.context=n:t.pendingContext=n,t=Zs(s,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ma(i,t,l),e!==null&&(Gi(e,i,l,s),Ym(e,i,l)),l}function J0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ZC(e,t){sO(e,t),(e=e.alternate)&&sO(e,t)}function iY(){return null}var ZM=typeof reportError=="function"?reportError:function(e){console.error(e)};function eT(e){this._internalRoot=e}Sy.prototype.render=eT.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(xe(409));by(e,t,null,null)};Sy.prototype.unmount=eT.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gl(function(){by(null,e,null,null)}),t[po]=null}};function Sy(e){this._internalRoot=e}Sy.prototype.unstable_scheduleHydration=function(e){if(e){var t=O6();e={blockedOn:null,target:e,priority:t};for(var n=0;n<na.length&&t!==0&&t<na[n].priority;n++);na.splice(n,0,e),n===0&&A6(e)}};function tT(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function oO(){}function sY(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=J0(l);s.call(c)}}var l=JM(t,r,e,0,null,!1,!1,"",oO);return e._reactRootContainer=l,e[po]=l.current,Ed(e.nodeType===8?e.parentNode:e),Gl(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=J0(o);a.call(c)}}var o=JC(e,0,!1,null,null,!1,!1,"",oO);return e._reactRootContainer=o,e[po]=o.current,Ed(e.nodeType===8?e.parentNode:e),Gl(function(){by(t,o,n,r)}),o}function wy(e,t,n,r,i){var s=n._reactRootContainer;if(s){var l=s;if(typeof i=="function"){var a=i;i=function(){var o=J0(l);a.call(o)}}by(t,l,e,i)}else l=sY(n,t,e,i,r);return J0(l)}P6=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Uf(t.pendingLanes);n!==0&&(bC(t,n|1),Br(t,Cn()),!(Ct&6)&&(qu=Cn()+500,Ga()))}break;case 13:Gl(function(){var r=go(e,1);if(r!==null){var i=xr();Gi(r,e,1,i)}}),ZC(e,1)}};SC=function(e){if(e.tag===13){var t=go(e,134217728);if(t!==null){var n=xr();Gi(t,e,134217728,n)}ZC(e,134217728)}};I6=function(e){if(e.tag===13){var t=ya(e),n=go(e,t);if(n!==null){var r=xr();Gi(n,e,t,r)}ZC(e,t)}};O6=function(){return Rt};k6=function(e,t){var n=Rt;try{return Rt=e,t()}finally{Rt=n}};bx=function(e,t,n){switch(t){case"input":if(dx(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=dy(r);if(!i)throw Error(xe(90));a6(r),dx(r,i)}}}break;case"textarea":c6(e,n);break;case"select":t=n.value,t!=null&&Cu(e,!!n.multiple,t,!1)}};m6=XC;v6=Gl;var oY={usingClientEntryPoint:!1,Events:[mp,Zc,dy,p6,g6,XC]},mf={findFiberByHostInstance:Tl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},aY={bundleType:mf.bundleType,version:mf.version,rendererPackageName:mf.rendererPackageName,rendererConfig:mf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Co.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=b6(e),e===null?null:e.stateNode},findFiberByHostInstance:mf.findFiberByHostInstance||iY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$g.isDisabled&&$g.supportsFiber)try{cy=$g.inject(aY),Es=$g}catch{}}Zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oY;Zr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tT(t))throw Error(xe(200));return rY(e,t,null,n)};Zr.createRoot=function(e,t){if(!tT(e))throw Error(xe(299));var n=!1,r="",i=ZM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=JC(e,1,!1,null,null,n,!1,r,i),e[po]=t.current,Ed(e.nodeType===8?e.parentNode:e),new eT(t)};Zr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(xe(188)):(e=Object.keys(e).join(","),Error(xe(268,e)));return e=b6(t),e=e===null?null:e.stateNode,e};Zr.flushSync=function(e){return Gl(e)};Zr.hydrate=function(e,t,n){if(!xy(t))throw Error(xe(200));return wy(null,e,t,!0,n)};Zr.hydrateRoot=function(e,t,n){if(!tT(e))throw Error(xe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",l=ZM;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=JM(t,null,e,1,n??null,i,!1,s,l),e[po]=t.current,Ed(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Sy(t)};Zr.render=function(e,t,n){if(!xy(t))throw Error(xe(200));return wy(null,e,t,!1,n)};Zr.unmountComponentAtNode=function(e){if(!xy(e))throw Error(xe(40));return e._reactRootContainer?(Gl(function(){wy(null,null,e,!1,function(){e._reactRootContainer=null,e[po]=null})}),!0):!1};Zr.unstable_batchedUpdates=XC;Zr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xy(n))throw Error(xe(200));if(e==null||e._reactInternals===void 0)throw Error(xe(38));return wy(e,t,n,!1,r)};Zr.version="18.2.0-next-9e3b772b8-20220608";function e8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e8)}catch(e){console.error(e)}}e8(),JD.exports=Zr;var ac=JD.exports;const lY=Tr(ac);var t8={exports:{}},n8={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=T;function cY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var uY=typeof Object.is=="function"?Object.is:cY,hY=Ku.useState,fY=Ku.useEffect,dY=Ku.useLayoutEffect,pY=Ku.useDebugValue;function gY(e,t){var n=t(),r=hY({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return dY(function(){i.value=n,i.getSnapshot=t,kb(i)&&s({inst:i})},[e,n,t]),fY(function(){return kb(i)&&s({inst:i}),e(function(){kb(i)&&s({inst:i})})},[e]),pY(n),n}function kb(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!uY(e,n)}catch{return!0}}function mY(e,t){return t()}var vY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mY:gY;n8.useSyncExternalStore=Ku.useSyncExternalStore!==void 0?Ku.useSyncExternalStore:vY;t8.exports=n8;var nT=t8.exports;const r8=nT.useSyncExternalStore,aO=T.createContext(void 0),i8=T.createContext(!1);function s8(e,t){return e||(t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=aO),window.ReactQueryClientContext):aO)}const Cy=({context:e}={})=>{const t=T.useContext(s8(e,T.useContext(i8)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},yY=({client:e,children:t,context:n,contextSharing:r=!1})=>{T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const i=s8(n,r);return T.createElement(i8.Provider,{value:!n&&r},T.createElement(i.Provider,{value:e},t))},o8=T.createContext(!1),_Y=()=>T.useContext(o8);o8.Provider;function bY(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const SY=T.createContext(bY()),xY=()=>T.useContext(SY);function a8(e,t){return typeof e=="function"?e(...t):!!e}const wY=(e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))},CY=e=>{T.useEffect(()=>{e.clearReset()},[e])},TY=({result:e,errorResetBoundary:t,useErrorBoundary:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&a8(n,[e.error,r]),EY=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},PY=(e,t)=>e.isLoading&&e.isFetching&&!t,IY=(e,t,n)=>(e==null?void 0:e.suspense)&&PY(t,n),OY=(e,t,n)=>t.fetchOptimistic(e).then(({data:r})=>{e.onSuccess==null||e.onSuccess(r),e.onSettled==null||e.onSettled(r,null)}).catch(r=>{n.clearReset(),e.onError==null||e.onError(r),e.onSettled==null||e.onSettled(void 0,r)});function kY(e,t){const n=Cy({context:e.context}),r=_Y(),i=xY(),s=n.defaultQueryOptions(e);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=dn.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=dn.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=dn.batchCalls(s.onSettled)),EY(s),wY(s,i),CY(i);const[l]=T.useState(()=>new t(n,s)),a=l.getOptimisticResult(s);if(r8(T.useCallback(o=>{const c=r?()=>{}:l.subscribe(dn.batchCalls(o));return l.updateResult(),c},[l,r]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),T.useEffect(()=>{l.setOptions(s,{listeners:!1})},[s,l]),IY(s,a,r))throw OY(s,l,i);if(TY({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:l.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:l.trackResult(a)}function Ot(e,t,n){const r=Nf(e,t,n);return kY(r,tz)}function Ke(e,t,n){const r=GH(e,t,n),i=Cy({context:r.context}),[s]=T.useState(()=>new iz(i,r));T.useEffect(()=>{s.setOptions(r)},[s,r]);const l=r8(T.useCallback(o=>s.subscribe(dn.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=T.useCallback((o,c)=>{s.mutate(o,c).catch(AY)},[s]);if(l.error&&a8(s.options.useErrorBoundary,[l.error]))throw l.error;return{...l,mutate:a,mutateAsync:l.mutate}}function AY(){}const RY=function(){return null};var Zx={},lO=ac;Zx.createRoot=lO.createRoot,Zx.hydrateRoot=lO.hydrateRoot;const DY=T.createContext(null),Ab={didCatch:!1,error:null};let MY=class extends T.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Ab}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:s,reason:"imperative-api"}),this.setState(Ab)}}componentDidCatch(t,n){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&n.error!==null&&LY(t.resetKeys,i)){var s,l;(s=(l=this.props).onReset)===null||s===void 0||s.call(l,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(Ab)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:i}=this.props,{didCatch:s,error:l}=this.state;let a=t;if(s){const o={error:l,resetErrorBoundary:this.resetErrorBoundary};if(T.isValidElement(i))a=i;else if(typeof n=="function")a=n(o);else if(r)a=T.createElement(r,o);else throw l}return T.createElement(DY.Provider,{value:{didCatch:s,error:l,resetErrorBoundary:this.resetErrorBoundary}},a)}};function LY(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}var l8={exports:{}},FY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",NY=FY,jY=NY;function c8(){}function u8(){}u8.resetWarningCache=c8;var BY=function(){function e(r,i,s,l,a,o){if(o!==jY){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:u8,resetWarningCache:c8};return n.PropTypes=n,n};l8.exports=BY();var UY=l8.exports;const yt=Tr(UY);var $Y=typeof Element<"u",GY=typeof Map=="function",VY=typeof Set=="function",HY=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function e0(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!e0(e[r],t[r]))return!1;return!0}var s;if(GY&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;for(s=e.entries();!(r=s.next()).done;)if(!e0(r.value[1],t.get(r.value[0])))return!1;return!0}if(VY&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(HY&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if($Y&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!e0(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var zY=function(t,n){try{return e0(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const WY=Tr(zY);var YY=function(e,t,n,r,i,s,l,a){if(!e){var o;if(t===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,l,a],h=0;o=new Error(t.replace(/%s/g,function(){return c[h++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}},XY=YY;const cO=Tr(XY);var qY=function(t,n,r,i){var s=r?r.call(i,t,n):void 0;if(s!==void 0)return!!s;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var l=Object.keys(t),a=Object.keys(n);if(l.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(n),c=0;c<l.length;c++){var h=l[c];if(!o(h))return!1;var u=t[h],f=n[h];if(s=r?r.call(i,u,f,h):void 0,s===!1||s===void 0&&u!==f)return!1}return!0};const KY=Tr(qY);function xn(){return xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xn.apply(this,arguments)}function rT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ew(e,t)}function ew(e,t){return ew=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ew(e,t)}function uO(e,t){if(e==null)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(i[n]=e[n]);return i}var We={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},QY={rel:["amphtml","canonical","alternate"]},JY={type:["application/ld+json"]},ZY={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},hO=Object.keys(We).map(function(e){return We[e]}),Z0={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},eX=Object.keys(Z0).reduce(function(e,t){return e[Z0[t]]=t,e},{}),ku=function(e,t){for(var n=e.length-1;n>=0;n-=1){var r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},tX=function(e){var t=ku(e,We.TITLE),n=ku(e,"titleTemplate");if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,function(){return t});var r=ku(e,"defaultTitle");return t||r||void 0},nX=function(e){return ku(e,"onChangeClientState")||function(){}},Rb=function(e,t){return t.filter(function(n){return n[e]!==void 0}).map(function(n){return n[e]}).reduce(function(n,r){return xn({},n,r)},{})},rX=function(e,t){return t.filter(function(n){return n[We.BASE]!==void 0}).map(function(n){return n[We.BASE]}).reverse().reduce(function(n,r){if(!n.length)for(var i=Object.keys(r),s=0;s<i.length;s+=1){var l=i[s].toLowerCase();if(e.indexOf(l)!==-1&&r[l])return n.concat(r)}return n},[])},vf=function(e,t,n){var r={};return n.filter(function(i){return!!Array.isArray(i[e])||(i[e]!==void 0&&console&&typeof console.warn=="function"&&console.warn("Helmet: "+e+' should be of type "Array". Instead found type "'+typeof i[e]+'"'),!1)}).map(function(i){return i[e]}).reverse().reduce(function(i,s){var l={};s.filter(function(u){for(var f,d=Object.keys(u),p=0;p<d.length;p+=1){var m=d[p],g=m.toLowerCase();t.indexOf(g)===-1||f==="rel"&&u[f].toLowerCase()==="canonical"||g==="rel"&&u[g].toLowerCase()==="stylesheet"||(f=g),t.indexOf(m)===-1||m!=="innerHTML"&&m!=="cssText"&&m!=="itemprop"||(f=m)}if(!f||!u[f])return!1;var v=u[f].toLowerCase();return r[f]||(r[f]={}),l[f]||(l[f]={}),!r[f][v]&&(l[f][v]=!0,!0)}).reverse().forEach(function(u){return i.push(u)});for(var a=Object.keys(l),o=0;o<a.length;o+=1){var c=a[o],h=xn({},r[c],l[c]);r[c]=h}return i},[]).reverse()},iX=function(e,t){if(Array.isArray(e)&&e.length){for(var n=0;n<e.length;n+=1)if(e[n][t])return!0}return!1},h8=function(e){return Array.isArray(e)?e.join(""):e},Db=function(e,t){return Array.isArray(e)?e.reduce(function(n,r){return function(i,s){for(var l=Object.keys(i),a=0;a<l.length;a+=1)if(s[l[a]]&&s[l[a]].includes(i[l[a]]))return!0;return!1}(r,t)?n.priority.push(r):n.default.push(r),n},{priority:[],default:[]}):{default:e}},fO=function(e,t){var n;return xn({},e,((n={})[t]=void 0,n))},sX=[We.NOSCRIPT,We.SCRIPT,We.STYLE],Mb=function(e,t){return t===void 0&&(t=!0),t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},dO=function(e){return Object.keys(e).reduce(function(t,n){var r=e[n]!==void 0?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r},"")},pO=function(e,t){return t===void 0&&(t={}),Object.keys(e).reduce(function(n,r){return n[Z0[r]||r]=e[r],n},t)},t0=function(e,t){return t.map(function(n,r){var i,s=((i={key:r})["data-rh"]=!0,i);return Object.keys(n).forEach(function(l){var a=Z0[l]||l;a==="innerHTML"||a==="cssText"?s.dangerouslySetInnerHTML={__html:n.innerHTML||n.cssText}:s[a]=n[l]}),Jt.createElement(e,s)})},ci=function(e,t,n){switch(e){case We.TITLE:return{toComponent:function(){return i=t.titleAttributes,(s={key:r=t.title})["data-rh"]=!0,l=pO(i,s),[Jt.createElement(We.TITLE,l,r)];var r,i,s,l},toString:function(){return function(r,i,s,l){var a=dO(s),o=h8(i);return a?"<"+r+' data-rh="true" '+a+">"+Mb(o,l)+"</"+r+">":"<"+r+' data-rh="true">'+Mb(o,l)+"</"+r+">"}(e,t.title,t.titleAttributes,n)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return pO(t)},toString:function(){return dO(t)}};default:return{toComponent:function(){return t0(e,t)},toString:function(){return function(r,i,s){return i.reduce(function(l,a){var o=Object.keys(a).filter(function(u){return!(u==="innerHTML"||u==="cssText")}).reduce(function(u,f){var d=a[f]===void 0?f:f+'="'+Mb(a[f],s)+'"';return u?u+" "+d:d},""),c=a.innerHTML||a.cssText||"",h=sX.indexOf(r)===-1;return l+"<"+r+' data-rh="true" '+o+(h?"/>":">"+c+"</"+r+">")},"")}(e,t,n)}}}},tw=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,s=e.noscriptTags,l=e.styleTags,a=e.title,o=a===void 0?"":a,c=e.titleAttributes,h=e.linkTags,u=e.metaTags,f=e.scriptTags,d={toComponent:function(){},toString:function(){return""}};if(e.prioritizeSeoTags){var p=function(m){var g=m.linkTags,v=m.scriptTags,_=m.encode,y=Db(m.metaTags,ZY),b=Db(g,QY),S=Db(v,JY);return{priorityMethods:{toComponent:function(){return[].concat(t0(We.META,y.priority),t0(We.LINK,b.priority),t0(We.SCRIPT,S.priority))},toString:function(){return ci(We.META,y.priority,_)+" "+ci(We.LINK,b.priority,_)+" "+ci(We.SCRIPT,S.priority,_)}},metaTags:y.default,linkTags:b.default,scriptTags:S.default}}(e);d=p.priorityMethods,h=p.linkTags,u=p.metaTags,f=p.scriptTags}return{priority:d,base:ci(We.BASE,t,r),bodyAttributes:ci("bodyAttributes",n,r),htmlAttributes:ci("htmlAttributes",i,r),link:ci(We.LINK,h,r),meta:ci(We.META,u,r),noscript:ci(We.NOSCRIPT,s,r),script:ci(We.SCRIPT,f,r),style:ci(We.STYLE,l,r),title:ci(We.TITLE,{title:o,titleAttributes:c},r)}},Gg=[],nw=function(e,t){var n=this;t===void 0&&(t=typeof document<"u"),this.instances=[],this.value={setHelmet:function(r){n.context.helmet=r},helmetInstances:{get:function(){return n.canUseDOM?Gg:n.instances},add:function(r){(n.canUseDOM?Gg:n.instances).push(r)},remove:function(r){var i=(n.canUseDOM?Gg:n.instances).indexOf(r);(n.canUseDOM?Gg:n.instances).splice(i,1)}}},this.context=e,this.canUseDOM=t,t||(e.helmet=tw({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},f8=Jt.createContext({}),oX=yt.shape({setHelmet:yt.func,helmetInstances:yt.shape({get:yt.func,add:yt.func,remove:yt.func})}),aX=typeof document<"u",ou=function(e){function t(n){var r;return(r=e.call(this,n)||this).helmetData=new nw(r.props.context,t.canUseDOM),r}return rT(t,e),t.prototype.render=function(){return Jt.createElement(f8.Provider,{value:this.helmetData.value},this.props.children)},t}(T.Component);ou.canUseDOM=aX,ou.propTypes={context:yt.shape({helmet:yt.shape()}),children:yt.node.isRequired},ou.defaultProps={context:{}},ou.displayName="HelmetProvider";var Rc=function(e,t){var n,r=document.head||document.querySelector(We.HEAD),i=r.querySelectorAll(e+"[data-rh]"),s=[].slice.call(i),l=[];return t&&t.length&&t.forEach(function(a){var o=document.createElement(e);for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(c==="innerHTML"?o.innerHTML=a.innerHTML:c==="cssText"?o.styleSheet?o.styleSheet.cssText=a.cssText:o.appendChild(document.createTextNode(a.cssText)):o.setAttribute(c,a[c]===void 0?"":a[c]));o.setAttribute("data-rh","true"),s.some(function(h,u){return n=u,o.isEqualNode(h)})?s.splice(n,1):l.push(o)}),s.forEach(function(a){return a.parentNode.removeChild(a)}),l.forEach(function(a){return r.appendChild(a)}),{oldTags:s,newTags:l}},Lb=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute("data-rh"),i=r?r.split(","):[],s=[].concat(i),l=Object.keys(t),a=0;a<l.length;a+=1){var o=l[a],c=t[o]||"";n.getAttribute(o)!==c&&n.setAttribute(o,c),i.indexOf(o)===-1&&i.push(o);var h=s.indexOf(o);h!==-1&&s.splice(h,1)}for(var u=s.length-1;u>=0;u-=1)n.removeAttribute(s[u]);i.length===s.length?n.removeAttribute("data-rh"):n.getAttribute("data-rh")!==l.join(",")&&n.setAttribute("data-rh",l.join(","))}},gO=function(e,t){var n=e.baseTag,r=e.htmlAttributes,i=e.linkTags,s=e.metaTags,l=e.noscriptTags,a=e.onChangeClientState,o=e.scriptTags,c=e.styleTags,h=e.title,u=e.titleAttributes;Lb(We.BODY,e.bodyAttributes),Lb(We.HTML,r),function(m,g){m!==void 0&&document.title!==m&&(document.title=h8(m)),Lb(We.TITLE,g)}(h,u);var f={baseTag:Rc(We.BASE,n),linkTags:Rc(We.LINK,i),metaTags:Rc(We.META,s),noscriptTags:Rc(We.NOSCRIPT,l),scriptTags:Rc(We.SCRIPT,o),styleTags:Rc(We.STYLE,c)},d={},p={};Object.keys(f).forEach(function(m){var g=f[m],v=g.newTags,_=g.oldTags;v.length&&(d[m]=v),_.length&&(p[m]=f[m].oldTags)}),t&&t(),a(e,d,p)},yf=null,ev=function(e){function t(){for(var r,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return(r=e.call.apply(e,[this].concat(s))||this).rendered=!1,r}rT(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(r){return!KY(r,this.props)},n.componentDidUpdate=function(){this.emitChange()},n.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},n.emitChange=function(){var r,i,s=this.props.context,l=s.setHelmet,a=null,o=(r=s.helmetInstances.get().map(function(c){var h=xn({},c.props);return delete h.context,h}),{baseTag:rX(["href"],r),bodyAttributes:Rb("bodyAttributes",r),defer:ku(r,"defer"),encode:ku(r,"encodeSpecialCharacters"),htmlAttributes:Rb("htmlAttributes",r),linkTags:vf(We.LINK,["rel","href"],r),metaTags:vf(We.META,["name","charset","http-equiv","property","itemprop"],r),noscriptTags:vf(We.NOSCRIPT,["innerHTML"],r),onChangeClientState:nX(r),scriptTags:vf(We.SCRIPT,["src","innerHTML"],r),styleTags:vf(We.STYLE,["cssText"],r),title:tX(r),titleAttributes:Rb("titleAttributes",r),prioritizeSeoTags:iX(r,"prioritizeSeoTags")});ou.canUseDOM?(i=o,yf&&cancelAnimationFrame(yf),i.defer?yf=requestAnimationFrame(function(){gO(i,function(){yf=null})}):(gO(i),yf=null)):tw&&(a=tw(o)),l(a)},n.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},n.render=function(){return this.init(),null},t}(T.Component);ev.propTypes={context:oX.isRequired},ev.displayName="HelmetDispatcher";var lX=["children"],cX=["children"],Ml=function(e){function t(){return e.apply(this,arguments)||this}rT(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(r){return!WY(fO(this.props,"helmetData"),fO(r,"helmetData"))},n.mapNestedChildrenToProps=function(r,i){if(!i)return null;switch(r.type){case We.SCRIPT:case We.NOSCRIPT:return{innerHTML:i};case We.STYLE:return{cssText:i};default:throw new Error("<"+r.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},n.flattenArrayTypeChildren=function(r){var i,s=r.child,l=r.arrayTypeChildren;return xn({},l,((i={})[s.type]=[].concat(l[s.type]||[],[xn({},r.newChildProps,this.mapNestedChildrenToProps(s,r.nestedChildren))]),i))},n.mapObjectTypeChildren=function(r){var i,s,l=r.child,a=r.newProps,o=r.newChildProps,c=r.nestedChildren;switch(l.type){case We.TITLE:return xn({},a,((i={})[l.type]=c,i.titleAttributes=xn({},o),i));case We.BODY:return xn({},a,{bodyAttributes:xn({},o)});case We.HTML:return xn({},a,{htmlAttributes:xn({},o)});default:return xn({},a,((s={})[l.type]=xn({},o),s))}},n.mapArrayTypeChildrenToProps=function(r,i){var s=xn({},i);return Object.keys(r).forEach(function(l){var a;s=xn({},s,((a={})[l]=r[l],a))}),s},n.warnOnInvalidChildren=function(r,i){return cO(hO.some(function(s){return r.type===s}),typeof r.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+hO.join(", ")+" are allowed. Helmet does not support rendering <"+r.type+"> elements. Refer to our API for more information."),cO(!i||typeof i=="string"||Array.isArray(i)&&!i.some(function(s){return typeof s!="string"}),"Helmet expects a string as a child of <"+r.type+">. Did you forget to wrap your children in braces? ( <"+r.type+">{``}</"+r.type+"> ) Refer to our API for more information."),!0},n.mapChildrenToProps=function(r,i){var s=this,l={};return Jt.Children.forEach(r,function(a){if(a&&a.props){var o=a.props,c=o.children,h=uO(o,lX),u=Object.keys(h).reduce(function(d,p){return d[eX[p]||p]=h[p],d},{}),f=a.type;switch(typeof f=="symbol"?f=f.toString():s.warnOnInvalidChildren(a,c),f){case We.FRAGMENT:i=s.mapChildrenToProps(c,i);break;case We.LINK:case We.META:case We.NOSCRIPT:case We.SCRIPT:case We.STYLE:l=s.flattenArrayTypeChildren({child:a,arrayTypeChildren:l,newChildProps:u,nestedChildren:c});break;default:i=s.mapObjectTypeChildren({child:a,newProps:i,newChildProps:u,nestedChildren:c})}}}),this.mapArrayTypeChildrenToProps(l,i)},n.render=function(){var r=this.props,i=r.children,s=uO(r,cX),l=xn({},s),a=s.helmetData;return i&&(l=this.mapChildrenToProps(i,l)),!a||a instanceof nw||(a=new nw(a.context,a.instances)),a?Jt.createElement(ev,xn({},l,{context:a.value,helmetData:void 0})):Jt.createElement(f8.Consumer,null,function(o){return Jt.createElement(ev,xn({},l,{context:o}))})},t}(T.Component);Ml.propTypes={base:yt.object,bodyAttributes:yt.object,children:yt.oneOfType([yt.arrayOf(yt.node),yt.node]),defaultTitle:yt.string,defer:yt.bool,encodeSpecialCharacters:yt.bool,htmlAttributes:yt.object,link:yt.arrayOf(yt.object),meta:yt.arrayOf(yt.object),noscript:yt.arrayOf(yt.object),onChangeClientState:yt.func,script:yt.arrayOf(yt.object),style:yt.arrayOf(yt.object),title:yt.string,titleAttributes:yt.object,titleTemplate:yt.string,prioritizeSeoTags:yt.bool,helmetData:yt.object},Ml.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},Ml.displayName="Helmet";/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kt(){return Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kt.apply(this,arguments)}var Dn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Dn||(Dn={}));const mO="popstate";function uX(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:l,hash:a}=r.location;return Ld("",{pathname:s,search:l,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Vl(i)}return fX(t,n,null,e)}function dt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function hX(){return Math.random().toString(36).substr(2,8)}function vO(e,t){return{usr:e.state,key:e.key,idx:t}}function Ld(e,t,n,r){return n===void 0&&(n=null),Kt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?To(t):t,{state:n,key:t&&t.key||r||hX()})}function Vl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function To(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function fX(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,l=i.history,a=Dn.Pop,o=null,c=h();c==null&&(c=0,l.replaceState(Kt({},l.state,{idx:c}),""));function h(){return(l.state||{idx:null}).idx}function u(){a=Dn.Pop;let g=h(),v=g==null?null:g-c;c=g,o&&o({action:a,location:m.location,delta:v})}function f(g,v){a=Dn.Push;let _=Ld(m.location,g,v);n&&n(_,g),c=h()+1;let y=vO(_,c),b=m.createHref(_);try{l.pushState(y,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(b)}s&&o&&o({action:a,location:m.location,delta:1})}function d(g,v){a=Dn.Replace;let _=Ld(m.location,g,v);n&&n(_,g),c=h();let y=vO(_,c),b=m.createHref(_);l.replaceState(y,"",b),s&&o&&o({action:a,location:m.location,delta:0})}function p(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof g=="string"?g:Vl(g);return dt(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let m={get action(){return a},get location(){return e(i,l)},listen(g){if(o)throw new Error("A history only accepts one active listener");return i.addEventListener(mO,u),o=g,()=>{i.removeEventListener(mO,u),o=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:d,go(g){return l.go(g)}};return m}var jn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(jn||(jn={}));const dX=new Set(["lazy","caseSensitive","path","id","index","children"]);function pX(e){return e.index===!0}function rw(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((i,s)=>{let l=[...n,s],a=typeof i.id=="string"?i.id:l.join("-");if(dt(i.index!==!0||!i.children,"Cannot specify children on an index route"),dt(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),pX(i)){let o=Kt({},i,t(i),{id:a});return r[a]=o,o}else{let o=Kt({},i,t(i),{id:a,children:void 0});return r[a]=o,i.children&&(o.children=rw(i.children,t,l,r)),o}})}function au(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?To(t):t,i=ka(r.pathname||"/",n);if(i==null)return null;let s=d8(e);gX(s);let l=null;for(let a=0;l==null&&a<s.length;++a)l=CX(s[a],PX(i));return l}function d8(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,l,a)=>{let o={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};o.relativePath.startsWith("/")&&(dt(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(r.length));let c=eo([r,o.relativePath]),h=n.concat(o);s.children&&s.children.length>0&&(dt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),d8(s.children,t,h,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:xX(c,s.index),routesMeta:h})};return e.forEach((s,l)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,l);else for(let o of p8(s.path))i(s,l,o)}),t}function p8(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let l=p8(r.join("/")),a=[];return a.push(...l.map(o=>o===""?s:[s,o].join("/"))),i&&a.push(...l),a.map(o=>e.startsWith("/")&&o===""?"/":o)}function gX(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:wX(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mX=/^:\w+$/,vX=3,yX=2,_X=1,bX=10,SX=-2,yO=e=>e==="*";function xX(e,t){let n=e.split("/"),r=n.length;return n.some(yO)&&(r+=SX),t&&(r+=yX),n.filter(i=>!yO(i)).reduce((i,s)=>i+(mX.test(s)?vX:s===""?_X:bX),r)}function wX(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function CX(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let l=0;l<n.length;++l){let a=n[l],o=l===n.length-1,c=i==="/"?t:t.slice(i.length)||"/",h=TX({path:a.relativePath,caseSensitive:a.caseSensitive,end:o},c);if(!h)return null;Object.assign(r,h.params);let u=a.route;s.push({params:r,pathname:eo([i,h.pathname]),pathnameBase:AX(eo([i,h.pathnameBase])),route:u}),h.pathnameBase!=="/"&&(i=eo([i,h.pathnameBase]))}return s}function TX(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=EX(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],l=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,u)=>{if(h==="*"){let f=a[u]||"";l=s.slice(0,s.length-f.length).replace(/(.)\/+$/,"$1")}return c[h]=IX(a[u]||"",h),c},{}),pathname:s,pathnameBase:l,pattern:e}}function EX(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Qu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(l,a)=>(r.push(a),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function PX(e){try{return decodeURI(e)}catch(t){return Qu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function IX(e,t){try{return decodeURIComponent(e)}catch(n){return Qu(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function ka(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function OX(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?To(e):e;return{pathname:n?n.startsWith("/")?n:kX(n,t):t,search:RX(r),hash:DX(i)}}function kX(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fb(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ty(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function iT(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=To(e):(i=Kt({},e),dt(!i.pathname||!i.pathname.includes("?"),Fb("?","pathname","search",i)),dt(!i.pathname||!i.pathname.includes("#"),Fb("#","pathname","hash",i)),dt(!i.search||!i.search.includes("#"),Fb("#","search","hash",i)));let s=e===""||i.pathname==="",l=s?"/":i.pathname,a;if(r||l==null)a=n;else{let u=t.length-1;if(l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),u-=1;i.pathname=f.join("/")}a=u>=0?t[u]:"/"}let o=OX(i,a),c=l&&l!=="/"&&l.endsWith("/"),h=(s||l===".")&&n.endsWith("/");return!o.pathname.endsWith("/")&&(c||h)&&(o.pathname+="/"),o}const eo=e=>e.join("/").replace(/\/\/+/g,"/"),AX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),RX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,DX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Fn=function(t,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",t),new Response(null,Kt({},r,{headers:i}))};class sT{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function g8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const m8=["post","put","patch","delete"],MX=new Set(m8),LX=["get",...m8],FX=new Set(LX),NX=new Set([301,302,303,307,308]),jX=new Set([307,308]),Nb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},BX={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Vc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},v8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UX=e=>({hasErrorBoundary:!!e.hasErrorBoundary});function $X(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;dt(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let ue=e.detectErrorBoundary;i=ge=>({hasErrorBoundary:ue(ge)})}else i=UX;let s={},l=rw(e.routes,i,void 0,s),a,o=e.basename||"/",c=Kt({v7_normalizeFormMethod:!1,v7_prependBasename:!1},e.future),h=null,u=new Set,f=null,d=null,p=null,m=e.hydrationData!=null,g=au(l,e.history.location,o),v=null;if(g==null){let ue=pi(404,{pathname:e.history.location.pathname}),{matches:ge,route:ye}=EO(l);g=ge,v={[ye.id]:ue}}let _=!g.some(ue=>ue.route.lazy)&&(!g.some(ue=>ue.route.loader)||e.hydrationData!=null),y,b={historyAction:e.history.action,location:e.history.location,matches:g,initialized:_,navigation:Nb,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||v,fetchers:new Map,blockers:new Map},S=Dn.Pop,x=!1,C,w=!1,k=!1,I=[],R=[],j=new Map,G=0,B=-1,$=new Map,V=new Set,W=new Map,M=new Map,P=new Map,O=!1;function A(){return h=e.history.listen(ue=>{let{action:ge,location:ye,delta:De}=ue;if(O){O=!1;return}Qu(P.size===0||De!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let et=st({currentLocation:b.location,nextLocation:ye,historyAction:ge});if(et&&De!=null){O=!0,e.history.go(De*-1),_t(et,{state:"blocked",location:ye,proceed(){_t(et,{state:"proceeding",proceed:void 0,reset:void 0,location:ye}),e.history.go(De)},reset(){let Qe=new Map(b.blockers);Qe.set(et,Vc),N({blockers:Qe})}});return}return H(ge,ye)}),b.initialized||H(Dn.Pop,b.location),y}function D(){h&&h(),u.clear(),C&&C.abort(),b.fetchers.forEach((ue,ge)=>fe(ge)),b.blockers.forEach((ue,ge)=>ze(ge))}function X(ue){return u.add(ue),()=>u.delete(ue)}function N(ue){b=Kt({},b,ue),u.forEach(ge=>ge(b))}function F(ue,ge){var ye,De;let et=b.actionData!=null&&b.navigation.formMethod!=null&&ji(b.navigation.formMethod)&&b.navigation.state==="loading"&&((ye=ue.state)==null?void 0:ye._isRedirect)!==!0,Qe;ge.actionData?Object.keys(ge.actionData).length>0?Qe=ge.actionData:Qe=null:et?Qe=b.actionData:Qe=null;let Ze=ge.loaderData?TO(b.loaderData,ge.loaderData,ge.matches||[],ge.errors):b.loaderData,He=b.blockers;He.size>0&&(He=new Map(He),He.forEach((Mt,bt)=>He.set(bt,Vc)));let Ue=x===!0||b.navigation.formMethod!=null&&ji(b.navigation.formMethod)&&((De=ue.state)==null?void 0:De._isRedirect)!==!0;a&&(l=a,a=void 0),w||S===Dn.Pop||(S===Dn.Push?e.history.push(ue,ue.state):S===Dn.Replace&&e.history.replace(ue,ue.state)),N(Kt({},ge,{actionData:Qe,loaderData:Ze,historyAction:S,location:ue,initialized:!0,navigation:Nb,revalidation:"idle",restoreScrollPosition:gr(ue,ge.matches||b.matches),preventScrollReset:Ue,blockers:He})),S=Dn.Pop,x=!1,w=!1,k=!1,I=[],R=[]}async function z(ue,ge){if(typeof ue=="number"){e.history.go(ue);return}let ye=iw(b.location,b.matches,o,c.v7_prependBasename,ue,ge==null?void 0:ge.fromRouteId,ge==null?void 0:ge.relative),{path:De,submission:et,error:Qe}=_O(c.v7_normalizeFormMethod,!1,ye,ge),Ze=b.location,He=Ld(b.location,De,ge&&ge.state);He=Kt({},He,e.history.encodeLocation(He));let Ue=ge&&ge.replace!=null?ge.replace:void 0,Mt=Dn.Push;Ue===!0?Mt=Dn.Replace:Ue===!1||et!=null&&ji(et.formMethod)&&et.formAction===b.location.pathname+b.location.search&&(Mt=Dn.Replace);let bt=ge&&"preventScrollReset"in ge?ge.preventScrollReset===!0:void 0,On=st({currentLocation:Ze,nextLocation:He,historyAction:Mt});if(On){_t(On,{state:"blocked",location:He,proceed(){_t(On,{state:"proceeding",proceed:void 0,reset:void 0,location:He}),z(ue,ge)},reset(){let _n=new Map(b.blockers);_n.set(On,Vc),N({blockers:_n})}});return}return await H(Mt,He,{submission:et,pendingError:Qe,preventScrollReset:bt,replace:ge&&ge.replace})}function L(){if(re(),N({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){H(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}H(S||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation})}}async function H(ue,ge,ye){C&&C.abort(),C=null,S=ue,w=(ye&&ye.startUninterruptedRevalidation)===!0,Ns(b.location,b.matches),x=(ye&&ye.preventScrollReset)===!0;let De=a||l,et=ye&&ye.overrideNavigation,Qe=au(De,ge,o);if(!Qe){let _n=pi(404,{pathname:ge.pathname}),{matches:sr,route:li}=EO(De);tn(),F(ge,{matches:sr,loaderData:{},errors:{[li.id]:_n}});return}if(b.initialized&&!k&&WX(b.location,ge)&&!(ye&&ye.submission&&ji(ye.submission.formMethod))){F(ge,{matches:Qe});return}C=new AbortController;let Ze=bf(e.history,ge,C.signal,ye&&ye.submission),He,Ue;if(ye&&ye.pendingError)Ue={[lu(Qe).route.id]:ye.pendingError};else if(ye&&ye.submission&&ji(ye.submission.formMethod)){let _n=await K(Ze,ge,ye.submission,Qe,{replace:ye.replace});if(_n.shortCircuited)return;He=_n.pendingActionData,Ue=_n.pendingActionError,et=Vg(ge,ye.submission),Ze=new Request(Ze.url,{signal:Ze.signal})}let{shortCircuited:Mt,loaderData:bt,errors:On}=await Z(Ze,ge,Qe,et,ye&&ye.submission,ye&&ye.fetcherSubmission,ye&&ye.replace,He,Ue);Mt||(C=null,F(ge,Kt({matches:Qe},He?{actionData:He}:{},{loaderData:bt,errors:On})))}async function K(ue,ge,ye,De,et){et===void 0&&(et={}),re();let Qe=QX(ge,ye);N({navigation:Qe});let Ze,He=ow(De,ge);if(!He.route.action&&!He.route.lazy)Ze={type:jn.error,error:pi(405,{method:ue.method,pathname:ge.pathname,routeId:He.route.id})};else if(Ze=await _f("action",ue,He,De,s,i,o),ue.signal.aborted)return{shortCircuited:!0};if(Au(Ze)){let Ue;return et&&et.replace!=null?Ue=et.replace:Ue=Ze.location===b.location.pathname+b.location.search,await ne(b,Ze,{submission:ye,replace:Ue}),{shortCircuited:!0}}if(ed(Ze)){let Ue=lu(De,He.route.id);return(et&&et.replace)!==!0&&(S=Dn.Push),{pendingActionData:{},pendingActionError:{[Ue.route.id]:Ze.error}}}if(Il(Ze))throw pi(400,{type:"defer-action"});return{pendingActionData:{[He.route.id]:Ze.data}}}async function Z(ue,ge,ye,De,et,Qe,Ze,He,Ue){let Mt=De||Vg(ge,et),bt=et||Qe||OO(Mt),On=a||l,[_n,sr]=bO(e.history,b,ye,bt,ge,k,I,R,W,V,On,o,He,Ue);if(tn($t=>!(ye&&ye.some(Ir=>Ir.route.id===$t))||_n&&_n.some(Ir=>Ir.route.id===$t)),_n.length===0&&sr.length===0){let $t=se();return F(ge,Kt({matches:ye,loaderData:{},errors:Ue||null},He?{actionData:He}:{},$t?{fetchers:new Map(b.fetchers)}:{})),{shortCircuited:!0}}if(!w){sr.forEach(Ir=>{let Do=b.fetchers.get(Ir.key),Ln=Sf(void 0,Do?Do.data:void 0);b.fetchers.set(Ir.key,Ln)});let $t=He||b.actionData;N(Kt({navigation:Mt},$t?Object.keys($t).length===0?{actionData:null}:{actionData:$t}:{},sr.length>0?{fetchers:new Map(b.fetchers)}:{}))}B=++G,sr.forEach($t=>{j.has($t.key)&&be($t.key),$t.controller&&j.set($t.key,$t.controller)});let li=()=>sr.forEach($t=>be($t.key));C&&C.signal.addEventListener("abort",li);let{results:nl,loaderResults:rl,fetcherResults:Pc}=await ie(b.matches,ye,_n,sr,ue);if(ue.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",li),sr.forEach($t=>j.delete($t.key));let Ai=PO(nl);if(Ai)return await ne(b,Ai,{replace:Ze}),{shortCircuited:!0};let{loaderData:Ic,errors:rf}=CO(b,ye,_n,rl,Ue,sr,Pc,M);M.forEach(($t,Ir)=>{$t.subscribe(Do=>{(Do||$t.done)&&M.delete(Ir)})});let sf=se(),of=me(B),il=sf||of||sr.length>0;return Kt({loaderData:Ic,errors:rf},il?{fetchers:new Map(b.fetchers)}:{})}function ee(ue){return b.fetchers.get(ue)||BX}function ae(ue,ge,ye,De){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");j.has(ue)&&be(ue);let et=a||l,Qe=iw(b.location,b.matches,o,c.v7_prependBasename,ye,ge,De==null?void 0:De.relative),Ze=au(et,Qe,o);if(!Ze){he(ue,ge,pi(404,{pathname:Qe}));return}let{path:He,submission:Ue,error:Mt}=_O(c.v7_normalizeFormMethod,!0,Qe,De);if(Mt){he(ue,ge,Mt);return}let bt=ow(Ze,He);if(x=(De&&De.preventScrollReset)===!0,Ue&&ji(Ue.formMethod)){te(ue,ge,He,bt,Ze,Ue);return}W.set(ue,{routeId:ge,path:He}),J(ue,ge,He,bt,Ze,Ue)}async function te(ue,ge,ye,De,et,Qe){if(re(),W.delete(ue),!De.route.action&&!De.route.lazy){let Ln=pi(405,{method:Qe.formMethod,pathname:ye,routeId:ge});he(ue,ge,Ln);return}let Ze=b.fetchers.get(ue),He=JX(Qe,Ze);b.fetchers.set(ue,He),N({fetchers:new Map(b.fetchers)});let Ue=new AbortController,Mt=bf(e.history,ye,Ue.signal,Qe);j.set(ue,Ue);let bt=await _f("action",Mt,De,et,s,i,o);if(Mt.signal.aborted){j.get(ue)===Ue&&j.delete(ue);return}if(Au(bt)){j.delete(ue),V.add(ue);let Ln=Sf(Qe);return b.fetchers.set(ue,Ln),N({fetchers:new Map(b.fetchers)}),ne(b,bt,{submission:Qe,isFetchActionRedirect:!0})}if(ed(bt)){he(ue,ge,bt.error);return}if(Il(bt))throw pi(400,{type:"defer-action"});let On=b.navigation.location||b.location,_n=bf(e.history,On,Ue.signal),sr=a||l,li=b.navigation.state!=="idle"?au(sr,b.navigation.location,o):b.matches;dt(li,"Didn't find any matches after fetcher action");let nl=++G;$.set(ue,nl);let rl=Sf(Qe,bt.data);b.fetchers.set(ue,rl);let[Pc,Ai]=bO(e.history,b,li,Qe,On,k,I,R,W,V,sr,o,{[De.route.id]:bt.data},void 0);Ai.filter(Ln=>Ln.key!==ue).forEach(Ln=>{let sl=Ln.key,wg=b.fetchers.get(sl),J_=Sf(void 0,wg?wg.data:void 0);b.fetchers.set(sl,J_),j.has(sl)&&be(sl),Ln.controller&&j.set(sl,Ln.controller)}),N({fetchers:new Map(b.fetchers)});let Ic=()=>Ai.forEach(Ln=>be(Ln.key));Ue.signal.addEventListener("abort",Ic);let{results:rf,loaderResults:sf,fetcherResults:of}=await ie(b.matches,li,Pc,Ai,_n);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",Ic),$.delete(ue),j.delete(ue),Ai.forEach(Ln=>j.delete(Ln.key));let il=PO(rf);if(il)return ne(b,il);let{loaderData:$t,errors:Ir}=CO(b,b.matches,Pc,sf,void 0,Ai,of,M);if(b.fetchers.has(ue)){let Ln=n0(bt.data);b.fetchers.set(ue,Ln)}let Do=me(nl);b.navigation.state==="loading"&&nl>B?(dt(S,"Expected pending action"),C&&C.abort(),F(b.navigation.location,{matches:li,loaderData:$t,errors:Ir,fetchers:new Map(b.fetchers)})):(N(Kt({errors:Ir,loaderData:TO(b.loaderData,$t,li,Ir)},Do||Ai.length>0?{fetchers:new Map(b.fetchers)}:{})),k=!1)}async function J(ue,ge,ye,De,et,Qe){let Ze=b.fetchers.get(ue),He=Sf(Qe,Ze?Ze.data:void 0);b.fetchers.set(ue,He),N({fetchers:new Map(b.fetchers)});let Ue=new AbortController,Mt=bf(e.history,ye,Ue.signal);j.set(ue,Ue);let bt=await _f("loader",Mt,De,et,s,i,o);if(Il(bt)&&(bt=await b8(bt,Mt.signal,!0)||bt),j.get(ue)===Ue&&j.delete(ue),Mt.signal.aborted)return;if(Au(bt)){V.add(ue),await ne(b,bt);return}if(ed(bt)){let _n=lu(b.matches,ge);b.fetchers.delete(ue),N({fetchers:new Map(b.fetchers),errors:{[_n.route.id]:bt.error}});return}dt(!Il(bt),"Unhandled fetcher deferred data");let On=n0(bt.data);b.fetchers.set(ue,On),N({fetchers:new Map(b.fetchers)})}async function ne(ue,ge,ye){let{submission:De,replace:et,isFetchActionRedirect:Qe}=ye===void 0?{}:ye;ge.revalidate&&(k=!0);let Ze=Ld(ue.location,ge.location,Kt({_isRedirect:!0},Qe?{_isFetchActionRedirect:!0}:{}));if(dt(Ze,"Expected a location on the redirect navigation"),v8.test(ge.location)&&n){let Mt=e.history.createURL(ge.location),bt=ka(Mt.pathname,o)==null;if(t.location.origin!==Mt.origin||bt){et?t.location.replace(ge.location):t.location.assign(ge.location);return}}C=null;let He=et===!0?Dn.Replace:Dn.Push,Ue=De||OO(ue.navigation);if(jX.has(ge.status)&&Ue&&ji(Ue.formMethod))await H(He,Ze,{submission:Kt({},Ue,{formAction:ge.location}),preventScrollReset:x});else if(Qe)await H(He,Ze,{overrideNavigation:Vg(Ze),fetcherSubmission:Ue,preventScrollReset:x});else{let Mt=Vg(Ze,Ue);await H(He,Ze,{overrideNavigation:Mt,preventScrollReset:x})}}async function ie(ue,ge,ye,De,et){let Qe=await Promise.all([...ye.map(Ue=>_f("loader",et,Ue,ge,s,i,o)),...De.map(Ue=>Ue.matches&&Ue.match&&Ue.controller?_f("loader",bf(e.history,Ue.path,Ue.controller.signal),Ue.match,Ue.matches,s,i,o):{type:jn.error,error:pi(404,{pathname:Ue.path})})]),Ze=Qe.slice(0,ye.length),He=Qe.slice(ye.length);return await Promise.all([IO(ue,ye,Ze,Ze.map(()=>et.signal),!1,b.loaderData),IO(ue,De.map(Ue=>Ue.match),He,De.map(Ue=>Ue.controller?Ue.controller.signal:null),!0)]),{results:Qe,loaderResults:Ze,fetcherResults:He}}function re(){k=!0,I.push(...tn()),W.forEach((ue,ge)=>{j.has(ge)&&(R.push(ge),be(ge))})}function he(ue,ge,ye){let De=lu(b.matches,ge);fe(ue),N({errors:{[De.route.id]:ye},fetchers:new Map(b.fetchers)})}function fe(ue){let ge=b.fetchers.get(ue);j.has(ue)&&!(ge&&ge.state==="loading"&&$.has(ue))&&be(ue),W.delete(ue),$.delete(ue),V.delete(ue),b.fetchers.delete(ue)}function be(ue){let ge=j.get(ue);dt(ge,"Expected fetch controller: "+ue),ge.abort(),j.delete(ue)}function pe(ue){for(let ge of ue){let ye=ee(ge),De=n0(ye.data);b.fetchers.set(ge,De)}}function se(){let ue=[],ge=!1;for(let ye of V){let De=b.fetchers.get(ye);dt(De,"Expected fetcher: "+ye),De.state==="loading"&&(V.delete(ye),ue.push(ye),ge=!0)}return pe(ue),ge}function me(ue){let ge=[];for(let[ye,De]of $)if(De<ue){let et=b.fetchers.get(ye);dt(et,"Expected fetcher: "+ye),et.state==="loading"&&(be(ye),$.delete(ye),ge.push(ye))}return pe(ge),ge.length>0}function Re(ue,ge){let ye=b.blockers.get(ue)||Vc;return P.get(ue)!==ge&&P.set(ue,ge),ye}function ze(ue){b.blockers.delete(ue),P.delete(ue)}function _t(ue,ge){let ye=b.blockers.get(ue)||Vc;dt(ye.state==="unblocked"&&ge.state==="blocked"||ye.state==="blocked"&&ge.state==="blocked"||ye.state==="blocked"&&ge.state==="proceeding"||ye.state==="blocked"&&ge.state==="unblocked"||ye.state==="proceeding"&&ge.state==="unblocked","Invalid blocker state transition: "+ye.state+" -> "+ge.state);let De=new Map(b.blockers);De.set(ue,ge),N({blockers:De})}function st(ue){let{currentLocation:ge,nextLocation:ye,historyAction:De}=ue;if(P.size===0)return;P.size>1&&Qu(!1,"A router only supports one blocker at a time");let et=Array.from(P.entries()),[Qe,Ze]=et[et.length-1],He=b.blockers.get(Qe);if(!(He&&He.state==="proceeding")&&Ze({currentLocation:ge,nextLocation:ye,historyAction:De}))return Qe}function tn(ue){let ge=[];return M.forEach((ye,De)=>{(!ue||ue(De))&&(ye.cancel(),ge.push(De),M.delete(De))}),ge}function Ut(ue,ge,ye){if(f=ue,p=ge,d=ye||null,!m&&b.navigation===Nb){m=!0;let De=gr(b.location,b.matches);De!=null&&N({restoreScrollPosition:De})}return()=>{f=null,p=null,d=null}}function ai(ue,ge){return d&&d(ue,ge.map(De=>KX(De,b.loaderData)))||ue.key}function Ns(ue,ge){if(f&&p){let ye=ai(ue,ge);f[ye]=p()}}function gr(ue,ge){if(f){let ye=ai(ue,ge),De=f[ye];if(typeof De=="number")return De}return null}function nf(ue){s={},a=rw(ue,i,void 0,s)}return y={get basename(){return o},get state(){return b},get routes(){return l},initialize:A,subscribe:X,enableScrollRestoration:Ut,navigate:z,fetch:ae,revalidate:L,createHref:ue=>e.history.createHref(ue),encodeLocation:ue=>e.history.encodeLocation(ue),getFetcher:ee,deleteFetcher:fe,dispose:D,getBlocker:Re,deleteBlocker:ze,_internalFetchControllers:j,_internalActiveDeferreds:M,_internalSetRoutes:nf},y}function GX(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function iw(e,t,n,r,i,s,l){let a,o;if(s!=null&&l!=="path"){a=[];for(let h of t)if(a.push(h),h.route.id===s){o=h;break}}else a=t,o=t[t.length-1];let c=iT(i||".",Ty(a).map(h=>h.pathnameBase),ka(e.pathname,n)||e.pathname,l==="path");return i==null&&(c.search=e.search,c.hash=e.hash),(i==null||i===""||i===".")&&o&&o.route.index&&!oT(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:eo([n,c.pathname])),Vl(c)}function _O(e,t,n,r){if(!r||!GX(r))return{path:n};if(r.formMethod&&!qX(r.formMethod))return{path:n,error:pi(405,{method:r.formMethod})};let i=()=>({path:n,error:pi(400,{type:"invalid-body"})}),s=r.formMethod||"get",l=e?s.toUpperCase():s.toLowerCase(),a=_8(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ji(l))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((d,p)=>{let[m,g]=p;return""+d+m+"="+g+`
`},""):String(r.body);return{path:n,submission:{formMethod:l,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!ji(l))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}dt(typeof FormData=="function","FormData is not available in this environment");let o,c;if(r.formData)o=sw(r.formData),c=r.formData;else if(r.body instanceof FormData)o=sw(r.body),c=r.body;else if(r.body instanceof URLSearchParams)o=r.body,c=wO(o);else if(r.body==null)o=new URLSearchParams,c=new FormData;else try{o=new URLSearchParams(r.body),c=wO(o)}catch{return i()}let h={formMethod:l,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ji(h.formMethod))return{path:n,submission:h};let u=To(n);return t&&u.search&&oT(u.search)&&o.append("index",""),u.search="?"+o,{path:Vl(u),submission:h}}function VX(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function bO(e,t,n,r,i,s,l,a,o,c,h,u,f,d){let p=d?Object.values(d)[0]:f?Object.values(f)[0]:void 0,m=e.createURL(t.location),g=e.createURL(i),v=d?Object.keys(d)[0]:void 0,y=VX(n,v).filter((S,x)=>{if(S.route.lazy)return!0;if(S.route.loader==null)return!1;if(HX(t.loaderData,t.matches[x],S)||l.some(k=>k===S.route.id))return!0;let C=t.matches[x],w=S;return SO(S,Kt({currentUrl:m,currentParams:C.params,nextUrl:g,nextParams:w.params},r,{actionResult:p,defaultShouldRevalidate:s||m.pathname+m.search===g.pathname+g.search||m.search!==g.search||y8(C,w)}))}),b=[];return o.forEach((S,x)=>{if(!n.some(j=>j.route.id===S.routeId))return;let C=au(h,S.path,u);if(!C){b.push({key:x,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let w=t.fetchers.get(x),k=w&&w.state!=="idle"&&w.data===void 0&&!c.has(x),I=ow(C,S.path);(a.includes(x)||k||SO(I,Kt({currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:g,nextParams:n[n.length-1].params},r,{actionResult:p,defaultShouldRevalidate:s})))&&b.push({key:x,routeId:S.routeId,path:S.path,matches:C,match:I,controller:new AbortController})}),[y,b]}function HX(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function y8(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function SO(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function xO(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];dt(i,"No route found in manifest");let s={};for(let l in r){let o=i[l]!==void 0&&l!=="hasErrorBoundary";Qu(!o,'Route "'+i.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!o&&!dX.has(l)&&(s[l]=r[l])}Object.assign(i,s),Object.assign(i,Kt({},t(i),{lazy:void 0}))}async function _f(e,t,n,r,i,s,l,a){a===void 0&&(a={});let o,c,h,u=p=>{let m,g=new Promise((v,_)=>m=_);return h=()=>m(),t.signal.addEventListener("abort",h),Promise.race([p({request:t,params:n.params,context:a.requestContext}),g])};try{let p=n.route[e];if(n.route.lazy)if(p)c=(await Promise.all([u(p),xO(n.route,s,i)]))[0];else if(await xO(n.route,s,i),p=n.route[e],p)c=await u(p);else if(e==="action"){let m=new URL(t.url),g=m.pathname+m.search;throw pi(405,{method:t.method,pathname:g,routeId:n.route.id})}else return{type:jn.data,data:void 0};else if(p)c=await u(p);else{let m=new URL(t.url),g=m.pathname+m.search;throw pi(404,{pathname:g})}dt(c!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(p){o=jn.error,c=p}finally{h&&t.signal.removeEventListener("abort",h)}if(XX(c)){let p=c.status;if(NX.has(p)){let v=c.headers.get("Location");if(dt(v,"Redirects returned/thrown from loaders/actions must have a Location header"),!v8.test(v))v=iw(new URL(t.url),r.slice(0,r.indexOf(n)+1),l,!0,v);else if(!a.isStaticRequest){let _=new URL(t.url),y=v.startsWith("//")?new URL(_.protocol+v):new URL(v),b=ka(y.pathname,l)!=null;y.origin===_.origin&&b&&(v=y.pathname+y.search+y.hash)}if(a.isStaticRequest)throw c.headers.set("Location",v),c;return{type:jn.redirect,status:p,location:v,revalidate:c.headers.get("X-Remix-Revalidate")!==null}}if(a.isRouteRequest)throw{type:o||jn.data,response:c};let m,g=c.headers.get("Content-Type");return g&&/\bapplication\/json\b/.test(g)?m=await c.json():m=await c.text(),o===jn.error?{type:o,error:new sT(p,c.statusText,m),headers:c.headers}:{type:jn.data,data:m,statusCode:c.status,headers:c.headers}}if(o===jn.error)return{type:o,error:c};if(YX(c)){var f,d;return{type:jn.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((d=c.init)==null?void 0:d.headers)&&new Headers(c.init.headers)}}return{type:jn.data,data:c}}function bf(e,t,n,r){let i=e.createURL(_8(t)).toString(),s={signal:n};if(r&&ji(r.formMethod)){let{formMethod:l,formEncType:a}=r;s.method=l.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=sw(r.formData):s.body=r.formData}return new Request(i,s)}function sw(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function wO(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function zX(e,t,n,r,i){let s={},l=null,a,o=!1,c={};return n.forEach((h,u)=>{let f=t[u].route.id;if(dt(!Au(h),"Cannot handle redirect results in processLoaderData"),ed(h)){let d=lu(e,f),p=h.error;r&&(p=Object.values(r)[0],r=void 0),l=l||{},l[d.route.id]==null&&(l[d.route.id]=p),s[f]=void 0,o||(o=!0,a=g8(h.error)?h.error.status:500),h.headers&&(c[f]=h.headers)}else Il(h)?(i.set(f,h.deferredData),s[f]=h.deferredData.data):s[f]=h.data,h.statusCode!=null&&h.statusCode!==200&&!o&&(a=h.statusCode),h.headers&&(c[f]=h.headers)}),r&&(l=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:l,statusCode:a||200,loaderHeaders:c}}function CO(e,t,n,r,i,s,l,a){let{loaderData:o,errors:c}=zX(t,n,r,i,a);for(let h=0;h<s.length;h++){let{key:u,match:f,controller:d}=s[h];dt(l!==void 0&&l[h]!==void 0,"Did not find corresponding fetcher result");let p=l[h];if(!(d&&d.signal.aborted))if(ed(p)){let m=lu(e.matches,f==null?void 0:f.route.id);c&&c[m.route.id]||(c=Kt({},c,{[m.route.id]:p.error})),e.fetchers.delete(u)}else if(Au(p))dt(!1,"Unhandled fetcher revalidation redirect");else if(Il(p))dt(!1,"Unhandled fetcher deferred data");else{let m=n0(p.data);e.fetchers.set(u,m)}}return{loaderData:o,errors:c}}function TO(e,t,n,r){let i=Kt({},t);for(let s of n){let l=s.route.id;if(t.hasOwnProperty(l)?t[l]!==void 0&&(i[l]=t[l]):e[l]!==void 0&&s.route.loader&&(i[l]=e[l]),r&&r.hasOwnProperty(l))break}return i}function lu(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function EO(e){let t=e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function pi(e,t){let{pathname:n,routeId:r,method:i,type:s}=t===void 0?{}:t,l="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(l="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):e===403?(l="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):e===404?(l="Not Found",a='No route matches URL "'+n+'"'):e===405&&(l="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new sT(e||500,l,new Error(a),!0)}function PO(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Au(n))return n}}function _8(e){let t=typeof e=="string"?To(e):e;return Vl(Kt({},t,{hash:""}))}function WX(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Il(e){return e.type===jn.deferred}function ed(e){return e.type===jn.error}function Au(e){return(e&&e.type)===jn.redirect}function YX(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function XX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function qX(e){return FX.has(e.toLowerCase())}function ji(e){return MX.has(e.toLowerCase())}async function IO(e,t,n,r,i,s){for(let l=0;l<n.length;l++){let a=n[l],o=t[l];if(!o)continue;let c=e.find(u=>u.route.id===o.route.id),h=c!=null&&!y8(c,o)&&(s&&s[o.route.id])!==void 0;if(Il(a)&&(i||h)){let u=r[l];dt(u,"Expected an AbortSignal for revalidating fetcher deferred result"),await b8(a,u,i).then(f=>{f&&(n[l]=f||n[l])})}}}async function b8(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:jn.data,data:e.deferredData.unwrappedData}}catch(i){return{type:jn.error,error:i}}return{type:jn.data,data:e.deferredData.data}}}function oT(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function KX(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function ow(e,t){let n=typeof t=="string"?To(t).search:t.search;if(e[e.length-1].route.index&&oT(n||""))return e[e.length-1];let r=Ty(e);return r[r.length-1]}function OO(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:s,json:l}=e;if(!(!t||!n||!r)){if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(l!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:l,text:void 0}}}function Vg(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function QX(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Sf(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t," _hasFetcherDoneAnything ":!0}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t," _hasFetcherDoneAnything ":!0}}function JX(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0," _hasFetcherDoneAnything ":!0}}function n0(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e," _hasFetcherDoneAnything ":!0}}/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ju(){return Ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ju.apply(this,arguments)}const Ey=T.createContext(null),S8=T.createContext(null),Dh=T.createContext(null),Py=T.createContext(null),Eo=T.createContext({outlet:null,matches:[],isDataRoute:!1}),x8=T.createContext(null);function ZX(e,t){let{relative:n}=t===void 0?{}:t;yp()||dt(!1);let{basename:r,navigator:i}=T.useContext(Dh),{hash:s,pathname:l,search:a}=C8(e,{relative:n}),o=l;return r!=="/"&&(o=l==="/"?r:eo([r,l])),i.createHref({pathname:o,search:a,hash:s})}function yp(){return T.useContext(Py)!=null}function _p(){return yp()||dt(!1),T.useContext(Py).location}function w8(e){T.useContext(Dh).static||T.useLayoutEffect(e)}function aT(){let{isDataRoute:e}=T.useContext(Eo);return e?dq():eq()}function eq(){yp()||dt(!1);let e=T.useContext(Ey),{basename:t,navigator:n}=T.useContext(Dh),{matches:r}=T.useContext(Eo),{pathname:i}=_p(),s=JSON.stringify(Ty(r).map(o=>o.pathnameBase)),l=T.useRef(!1);return w8(()=>{l.current=!0}),T.useCallback(function(o,c){if(c===void 0&&(c={}),!l.current)return;if(typeof o=="number"){n.go(o);return}let h=iT(o,JSON.parse(s),i,c.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:eo([t,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[t,n,s,i,e])}const tq=T.createContext(null);function nq(e){let t=T.useContext(Eo).outlet;return t&&T.createElement(tq.Provider,{value:e},t)}function i3e(){let{matches:e}=T.useContext(Eo),t=e[e.length-1];return t?t.params:{}}function C8(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=T.useContext(Eo),{pathname:i}=_p(),s=JSON.stringify(Ty(r).map(l=>l.pathnameBase));return T.useMemo(()=>iT(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function rq(e,t,n){yp()||dt(!1);let{navigator:r}=T.useContext(Dh),{matches:i}=T.useContext(Eo),s=i[i.length-1],l=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let o=_p(),c;if(t){var h;let m=typeof t=="string"?To(t):t;a==="/"||(h=m.pathname)!=null&&h.startsWith(a)||dt(!1),c=m}else c=o;let u=c.pathname||"/",f=a==="/"?u:u.slice(a.length)||"/",d=au(e,{pathname:f}),p=lq(d&&d.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:eo([a,r.encodeLocation?r.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:eo([a,r.encodeLocation?r.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,n);return t&&p?T.createElement(Py.Provider,{value:{location:Ju({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Dn.Pop}},p):p}function iq(){let e=uq(),t=g8(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:i},n):null,s)}const sq=T.createElement(iq,null);class oq extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?T.createElement(Eo.Provider,{value:this.props.routeContext},T.createElement(x8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aq(e){let{routeContext:t,match:n,children:r}=e,i=T.useContext(Ey);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Eo.Provider,{value:t},r)}function lq(e,t,n){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let s=e,l=(r=n)==null?void 0:r.errors;if(l!=null){let a=s.findIndex(o=>o.route.id&&(l==null?void 0:l[o.route.id]));a>=0||dt(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,o,c)=>{let h=o.route.id?l==null?void 0:l[o.route.id]:null,u=null;n&&(u=o.route.errorElement||sq);let f=t.concat(s.slice(0,c+1)),d=()=>{let p;return h?p=u:o.route.Component?p=T.createElement(o.route.Component,null):o.route.element?p=o.route.element:p=a,T.createElement(aq,{match:o,routeContext:{outlet:a,matches:f,isDataRoute:n!=null},children:p})};return n&&(o.route.ErrorBoundary||o.route.errorElement||c===0)?T.createElement(oq,{location:n.location,revalidation:n.revalidation,component:u,error:h,children:d(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):d()},null)}var tv;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(tv||(tv={}));var Aa;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(Aa||(Aa={}));function T8(e){let t=T.useContext(Ey);return t||dt(!1),t}function lT(e){let t=T.useContext(S8);return t||dt(!1),t}function cq(e){let t=T.useContext(Eo);return t||dt(!1),t}function cT(e){let t=cq(),n=t.matches[t.matches.length-1];return n.route.id||dt(!1),n.route.id}function s3e(){let e=lT(Aa.UseLoaderData),t=cT(Aa.UseLoaderData);if(e.errors&&e.errors[t]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")");return}return e.loaderData[t]}function uq(){var e;let t=T.useContext(x8),n=lT(Aa.UseRouteError),r=cT(Aa.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}let hq=0;function fq(e){let{router:t,basename:n}=T8(tv.UseBlocker),r=lT(Aa.UseBlocker),[i,s]=T.useState(""),l=T.useCallback(a=>{if(typeof e!="function")return!!e;if(n==="/")return e(a);let{currentLocation:o,nextLocation:c,historyAction:h}=a;return e({currentLocation:Ju({},o,{pathname:ka(o.pathname,n)||o.pathname}),nextLocation:Ju({},c,{pathname:ka(c.pathname,n)||c.pathname}),historyAction:h})},[n,e]);return T.useEffect(()=>{let a=String(++hq);return s(a),()=>t.deleteBlocker(a)},[t]),T.useEffect(()=>{i!==""&&t.getBlocker(i,l)},[t,i,l]),i&&r.blockers.has(i)?r.blockers.get(i):Vc}function dq(){let{router:e}=T8(tv.UseNavigateStable),t=cT(Aa.UseNavigateStable),n=T.useRef(!1);return w8(()=>{n.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ju({fromRouteId:t},s)))},[e,t])}const pq="startTransition",kO=$D[pq];function gq(e){let{fallbackElement:t,router:n,future:r}=e,[i,s]=T.useState(n.state),{v7_startTransition:l}=r||{},a=T.useCallback(u=>{l&&kO?kO(()=>s(u)):s(u)},[s,l]);T.useLayoutEffect(()=>n.subscribe(a),[n,a]);let o=T.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:u=>n.navigate(u),push:(u,f,d)=>n.navigate(u,{state:f,preventScrollReset:d==null?void 0:d.preventScrollReset}),replace:(u,f,d)=>n.navigate(u,{replace:!0,state:f,preventScrollReset:d==null?void 0:d.preventScrollReset})}),[n]),c=n.basename||"/",h=T.useMemo(()=>({router:n,navigator:o,static:!1,basename:c}),[n,o,c]);return T.createElement(T.Fragment,null,T.createElement(Ey.Provider,{value:h},T.createElement(S8.Provider,{value:i},T.createElement(vq,{basename:c,location:i.location,navigationType:i.historyAction,navigator:o},i.initialized?T.createElement(mq,{routes:n.routes,state:i}):t))),null)}function mq(e){let{routes:t,state:n}=e;return rq(t,void 0,n)}function r0(e){return nq(e.context)}function vq(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Dn.Pop,navigator:s,static:l=!1}=e;yp()&&dt(!1);let a=t.replace(/^\/*/,"/"),o=T.useMemo(()=>({basename:a,navigator:s,static:l}),[a,s,l]);typeof r=="string"&&(r=To(r));let{pathname:c="/",search:h="",hash:u="",state:f=null,key:d="default"}=r,p=T.useMemo(()=>{let m=ka(c,a);return m==null?null:{location:{pathname:m,search:h,hash:u,state:f,key:d},navigationType:i}},[a,c,h,u,f,d,i]);return p==null?null:T.createElement(Dh.Provider,{value:o},T.createElement(Py.Provider,{children:n,value:p}))}var AO;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(AO||(AO={}));new Promise(()=>{});function yq(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:T.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:T.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fd(){return Fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fd.apply(this,arguments)}function _q(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function bq(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Sq(e,t){return e.button===0&&(!t||t==="_self")&&!bq(e)}function aw(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function xq(e,t){let n=aw(e);if(t)for(let r of t.keys())n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)});return n}const wq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Cq(e,t){return $X({basename:t==null?void 0:t.basename,future:Fd({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:uX({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Tq(),routes:e,mapRouteProperties:yq}).initialize()}function Tq(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Fd({},t,{errors:Eq(t.errors)})),t}function Eq(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&i.__type==="RouteErrorResponse")n[r]=new sT(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let s=new Error(i.message);s.stack="",n[r]=s}else n[r]=i;return n}const Pq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Iq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o3e=T.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:l,state:a,target:o,to:c,preventScrollReset:h}=t,u=_q(t,wq),{basename:f}=T.useContext(Dh),d,p=!1;if(typeof c=="string"&&Iq.test(c)&&(d=c,Pq))try{let _=new URL(window.location.href),y=c.startsWith("//")?new URL(_.protocol+c):new URL(c),b=ka(y.pathname,f);y.origin===_.origin&&b!=null?c=b+y.search+y.hash:p=!0}catch{}let m=ZX(c,{relative:i}),g=Oq(c,{replace:l,state:a,target:o,preventScrollReset:h,relative:i});function v(_){r&&r(_),_.defaultPrevented||g(_)}return T.createElement("a",Fd({},u,{href:d||m,onClick:p||s?r:v,ref:n,target:o}))});var RO;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(RO||(RO={}));var DO;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DO||(DO={}));function Oq(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:l}=t===void 0?{}:t,a=aT(),o=_p(),c=C8(e,{relative:l});return T.useCallback(h=>{if(Sq(h,n)){h.preventDefault();let u=r!==void 0?r:Vl(o)===Vl(c);a(e,{replace:u,state:i,preventScrollReset:s,relative:l})}},[o,a,c,r,i,n,e,s,l])}function a3e(e){let t=T.useRef(aw(e)),n=T.useRef(!1),r=_p(),i=T.useMemo(()=>xq(r.search,n.current?null:t.current),[r.search]),s=aT(),l=T.useCallback((a,o)=>{const c=aw(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,o)},[s,i]);return[i,l]}function l3e(e,t){let{capture:n}=t||{};T.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("beforeunload",e,r),()=>{window.removeEventListener("beforeunload",e,r)}},[e,n])}function c3e(e){let{when:t,message:n}=e,r=fq(t);T.useEffect(()=>{r.state==="blocked"&&!t&&r.reset()},[r,t]),T.useEffect(()=>{r.state==="blocked"&&(window.confirm(n)?setTimeout(r.proceed,0):r.reset())},[r,n])}const E8=Object.prototype.toString;function P8(e){switch(E8.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return vo(e,Error)}}function Mh(e,t){return E8.call(e)===`[object ${t}]`}function uT(e){return Mh(e,"ErrorEvent")}function MO(e){return Mh(e,"DOMError")}function kq(e){return Mh(e,"DOMException")}function Is(e){return Mh(e,"String")}function hT(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function fT(e){return e===null||hT(e)||typeof e!="object"&&typeof e!="function"}function Zu(e){return Mh(e,"Object")}function Iy(e){return typeof Event<"u"&&vo(e,Event)}function Aq(e){return typeof Element<"u"&&vo(e,Element)}function Rq(e){return Mh(e,"RegExp")}function Oy(e){return!!(e&&e.then&&typeof e.then=="function")}function Dq(e){return Zu(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function I8(e){return typeof e=="number"&&e!==e}function vo(e,t){try{return e instanceof t}catch{return!1}}function O8(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Ru(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function LO(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const i=e[r];try{O8(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Mq(e,t,n=!1){return Is(e)?Rq(t)?t.test(e):Is(t)?n?e===t:e.includes(t):!1:!1}function bp(e,t=[],n=!1){return t.some(r=>Mq(e,r,n))}function Lq(e,t,n=250,r,i,s,l){if(!s.exception||!s.exception.values||!l||!vo(l.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=Fq(lw(e,t,i,l.originalException,r,s.exception.values,a,0),n))}function lw(e,t,n,r,i,s,l,a){if(s.length>=n+1)return s;let o=[...s];if(vo(r[i],Error)){FO(l,a);const c=e(t,r[i]),h=o.length;NO(c,i,h,a),o=lw(e,t,n,r[i],i,[c,...o],c,h)}return Array.isArray(r.errors)&&r.errors.forEach((c,h)=>{if(vo(c,Error)){FO(l,a);const u=e(t,c),f=o.length;NO(u,`errors[${h}]`,f,a),o=lw(e,t,n,c,i,[u,...o],u,f)}}),o}function FO(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function NO(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function Fq(e,t){return e.map(n=>(n.value&&(n.value=Ru(n.value,t)),n))}function Hg(e){return e&&e.Math==Math?e:void 0}const Pt=typeof globalThis=="object"&&Hg(globalThis)||typeof window=="object"&&Hg(window)||typeof self=="object"&&Hg(self)||typeof global=="object"&&Hg(global)||function(){return this}()||{};function dT(){return Pt}function k8(e,t,n){const r=n||Pt,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}const Du=dT(),Nq=80;function Nd(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let s=0,l=0;const a=" > ",o=a.length;let c;const h=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||Nq;for(;n&&s++<r&&(c=jq(n,h),!(c==="html"||s>1&&l+i.length*o+c.length>=u));)i.push(c),l+=c.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function jq(e,t){const n=e,r=[];let i,s,l,a,o;if(!n||!n.tagName)return"";if(Du.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const c=t&&t.length?t.filter(u=>n.getAttribute(u)).map(u=>[u,n.getAttribute(u)]):null;if(c&&c.length)c.forEach(u=>{r.push(`[${u[0]}="${u[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&Is(i))for(s=i.split(/\s+/),o=0;o<s.length;o++)r.push(`.${s[o]}`);const h=["aria-label","type","name","title","alt"];for(o=0;o<h.length;o++)l=h[o],a=n.getAttribute(l),a&&r.push(`[${l}="${a}"]`);return r.join("")}function Bq(){try{return Du.document.location.href}catch{return""}}function Uq(e){return Du.document&&Du.document.querySelector?Du.document.querySelector(e):null}function A8(e){if(!Du.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const Lh=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$q="Sentry Logger ",cw=["debug","info","warn","error","log","assert","trace"],nv={};function ky(e){if(!("console"in Pt))return e();const t=Pt.console,n={},r=Object.keys(nv);r.forEach(i=>{const s=nv[i];n[i]=t[i],t[i]=s});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function Gq(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Lh?cw.forEach(n=>{t[n]=(...r)=>{e&&ky(()=>{Pt.console[n](`${$q}[${n}]:`,...r)})}}):cw.forEach(n=>{t[n]=()=>{}}),t}const _e=Gq(),Vq=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Hq(e){return e==="http"||e==="https"}function Fh(e,t=!1){const{host:n,path:r,pass:i,port:s,projectId:l,protocol:a,publicKey:o}=e;return`${a}://${o}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${l}`}function zq(e){const t=Vq.exec(e);if(!t){ky(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,i="",s,l="",a]=t.slice(1);let o="",c=a;const h=c.split("/");if(h.length>1&&(o=h.slice(0,-1).join("/"),c=h.pop()),c){const u=c.match(/^\d+/);u&&(c=u[0])}return R8({host:s,pass:i,path:o,projectId:c,port:l,protocol:n,publicKey:r})}function R8(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Wq(e){if(!Lh)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(l=>e[l]?!1:(_e.error(`Invalid Sentry Dsn: ${l} missing`),!0))?!1:n.match(/^\d+$/)?Hq(r)?t&&isNaN(parseInt(t,10))?(_e.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(_e.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(_e.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function D8(e){const t=typeof e=="string"?zq(e):R8(e);if(!(!t||!Wq(t)))return t}class vs extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function Zn(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);typeof i=="function"&&M8(i,r),e[t]=i}function Hl(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Lh&&_e.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function M8(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Hl(e,"__sentry_original__",t)}catch{}}function pT(e){return e.__sentry_original__}function Yq(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function L8(e){if(P8(e))return{message:e.message,name:e.name,stack:e.stack,...BO(e)};if(Iy(e)){const t={type:e.type,target:jO(e.target),currentTarget:jO(e.currentTarget),...BO(e)};return typeof CustomEvent<"u"&&vo(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function jO(e){try{return Aq(e)?Nd(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function BO(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Xq(e,t=40){const n=Object.keys(L8(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Ru(n[0],t);for(let r=n.length;r>0;r--){const i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:Ru(i,t)}return""}function wi(e){return uw(e,new Map)}function uw(e,t){if(qq(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const i of Object.keys(e))typeof e[i]<"u"&&(r[i]=uw(e[i],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(i=>{r.push(uw(i,t))}),r}return e}function qq(e){if(!Zu(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const F8=50,UO=/\(error: (.*)\)/,$O=/captureMessage|captureException/;function N8(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const i=[],s=n.split(`
`);for(let l=r;l<s.length;l++){const a=s[l];if(a.length>1024)continue;const o=UO.test(a)?a.replace(UO,"$1"):a;if(!o.match(/\S*Error: /)){for(const c of t){const h=c(o);if(h){i.push(h);break}}if(i.length>=F8)break}}return Qq(i)}}function Kq(e){return Array.isArray(e)?N8(...e):e}function Qq(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),$O.test(t[t.length-1].function||"")&&(t.pop(),$O.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,F8).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const jb="<anonymous>";function yo(e){try{return!e||typeof e!="function"?jb:e.name||jb}catch{return jb}}const i0={},GO={};function lc(e,t){i0[e]=i0[e]||[],i0[e].push(t)}function cc(e,t){GO[e]||(t(),GO[e]=!0)}function Vi(e,t){const n=e&&i0[e];if(n)for(const r of n)try{r(t)}catch(i){Lh&&_e.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${yo(r)}
Error:`,i)}}function Jq(e){const t="console";lc(t,e),cc(t,Zq)}function Zq(){"console"in Pt&&cw.forEach(function(e){e in Pt.console&&Zn(Pt.console,e,function(t){return nv[e]=t,function(...n){Vi("console",{args:n,level:e});const i=nv[e];i&&i.apply(Pt.console,n)}})})}function Tn(){const e=Pt,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function j8(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function ia(e){const{message:t,event_id:n}=e;if(t)return t;const r=j8(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function hw(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function jd(e,t){const n=j8(e);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){const s={...i&&i.data,...t.data};n.mechanism.data=s}}function VO(e){if(e&&e.__sentry_captured__)return!0;try{Hl(e,"__sentry_captured__",!0)}catch{}return!1}function B8(e){return Array.isArray(e)?e:[e]}const Hc=Pt,eK=1e3;let HO,fw,dw;function tK(e){const t="dom";lc(t,e),cc(t,nK)}function nK(){if(!Hc.document)return;const e=Vi.bind(null,"dom"),t=zO(e,!0);Hc.document.addEventListener("click",t,!1),Hc.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=Hc[n]&&Hc[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(Zn(r,"addEventListener",function(i){return function(s,l,a){if(s==="click"||s=="keypress")try{const o=this,c=o.__sentry_instrumentation_handlers__=o.__sentry_instrumentation_handlers__||{},h=c[s]=c[s]||{refCount:0};if(!h.handler){const u=zO(e);h.handler=u,i.call(this,s,u,a)}h.refCount++}catch{}return i.call(this,s,l,a)}}),Zn(r,"removeEventListener",function(i){return function(s,l,a){if(s==="click"||s=="keypress")try{const o=this,c=o.__sentry_instrumentation_handlers__||{},h=c[s];h&&(h.refCount--,h.refCount<=0&&(i.call(this,s,h.handler,a),h.handler=void 0,delete c[s]),Object.keys(c).length===0&&delete o.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,l,a)}}))})}function rK(e){if(e.type!==fw)return!1;try{if(!e.target||e.target._sentryId!==dw)return!1}catch{}return!0}function iK(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function zO(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=sK(n);if(iK(n.type,r))return;Hl(n,"_sentryCaptured",!0),r&&!r._sentryId&&Hl(r,"_sentryId",Tn());const i=n.type==="keypress"?"input":n.type;rK(n)||(e({event:n,name:i,global:t}),fw=n.type,dw=r?r._sentryId:void 0),clearTimeout(HO),HO=Hc.setTimeout(()=>{dw=void 0,fw=void 0},eK)}}function sK(e){try{return e.target}catch{return null}}const pw=dT();function U8(){if(!("fetch"in pw))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function gw(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function oK(){if(typeof EdgeRuntime=="string")return!0;if(!U8())return!1;if(gw(pw.fetch))return!0;let e=!1;const t=pw.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=gw(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){Lh&&_e.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function $8(e){const t="fetch";lc(t,e),cc(t,aK)}function aK(){oK()&&Zn(Pt,"fetch",function(e){return function(...t){const{method:n,url:r}=lK(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Vi("fetch",{...i}),e.apply(Pt,t).then(s=>{const l={...i,endTimestamp:Date.now(),response:s};return Vi("fetch",l),s},s=>{const l={...i,endTimestamp:Date.now(),error:s};throw Vi("fetch",l),s})}})}function mw(e,t){return!!e&&typeof e=="object"&&!!e[t]}function WO(e){return typeof e=="string"?e:e?mw(e,"url")?e.url:e.toString?e.toString():"":""}function lK(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:WO(n),method:mw(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:WO(t),method:mw(t,"method")?String(t.method).toUpperCase():"GET"}}let zg=null;function G8(e){const t="error";lc(t,e),cc(t,cK)}function cK(){zg=Pt.onerror,Pt.onerror=function(e,t,n,r,i){return Vi("error",{column:r,error:i,line:n,msg:e,url:t}),zg&&!zg.__SENTRY_LOADER__?zg.apply(this,arguments):!1},Pt.onerror.__SENTRY_INSTRUMENTED__=!0}let Wg=null;function V8(e){const t="unhandledrejection";lc(t,e),cc(t,uK)}function uK(){Wg=Pt.onunhandledrejection,Pt.onunhandledrejection=function(e){return Vi("unhandledrejection",e),Wg&&!Wg.__SENTRY_LOADER__?Wg.apply(this,arguments):!0},Pt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Yg=dT();function hK(){const e=Yg.chrome,t=e&&e.app&&e.app.runtime,n="history"in Yg&&!!Yg.history.pushState&&!!Yg.history.replaceState;return!t&&n}const xf=Pt;let Xg;function gT(e){const t="history";lc(t,e),cc(t,fK)}function fK(){if(!hK())return;const e=xf.onpopstate;xf.onpopstate=function(...n){const r=xf.location.href,i=Xg;if(Xg=r,Vi("history",{from:i,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=Xg,l=String(i);Xg=l,Vi("history",{from:s,to:l})}return n.apply(this,r)}}Zn(xf.history,"pushState",t),Zn(xf.history,"replaceState",t)}const dK=Pt,cu="__sentry_xhr_v3__";function H8(e){const t="xhr";lc(t,e),cc(t,pK)}function pK(){if(!dK.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;Zn(e,"open",function(t){return function(...n){const r=Date.now(),i=Is(n[0])?n[0].toUpperCase():void 0,s=gK(n[1]);if(!i||!s)return t.apply(this,n);this[cu]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const l=()=>{const a=this[cu];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const o={args:[i,s],endTimestamp:Date.now(),startTimestamp:r,xhr:this};Vi("xhr",o)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?Zn(this,"onreadystatechange",function(a){return function(...o){return l(),a.apply(this,o)}}):this.addEventListener("readystatechange",l),Zn(this,"setRequestHeader",function(a){return function(...o){const[c,h]=o,u=this[cu];return u&&Is(c)&&Is(h)&&(u.request_headers[c.toLowerCase()]=h),a.apply(this,o)}}),t.apply(this,n)}}),Zn(e,"send",function(t){return function(...n){const r=this[cu];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const i={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return Vi("xhr",i),t.apply(this,n)}})}function gK(e){if(Is(e))return e;try{return e.toString()}catch{}}function mK(){return"npm"}function vK(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let s=0;s<t.length;s++)if(t[s]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let s=0;s<t.length;s++)if(t[s]===i){t.splice(s,1);break}}return[n,r]}function Xo(e,t=100,n=1/0){try{return vw("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function z8(e,t=3,n=100*1024){const r=Xo(e,t);return SK(r)>n?z8(e,t-1,n):r}function vw(e,t,n=1/0,r=1/0,i=vK()){const[s,l]=i;if(t==null||["number","boolean","string"].includes(typeof t)&&!I8(t))return t;const a=yK(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const o=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(o===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const d=c.toJSON();return vw("",d,o-1,r,i)}catch{}const h=Array.isArray(t)?[]:{};let u=0;const f=L8(t);for(const d in f){if(!Object.prototype.hasOwnProperty.call(f,d))continue;if(u>=r){h[d]="[MaxProperties ~]";break}const p=f[d];h[d]=vw(d,p,o-1,r,i),u++}return l(t),h}function yK(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(O8(t))return"[VueViewModel]";if(Dq(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${yo(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=_K(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function _K(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function bK(e){return~-encodeURI(e).split(/%..|./).length}function SK(e){return bK(JSON.stringify(e))}var Hs;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(Hs||(Hs={}));function eh(e){return new Nh(t=>{t(e)})}function mT(e){return new Nh((t,n)=>{n(e)})}let Nh=class ml{constructor(t){ml.prototype.__init.call(this),ml.prototype.__init2.call(this),ml.prototype.__init3.call(this),ml.prototype.__init4.call(this),this._state=Hs.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new ml((r,i)=>{this._handlers.push([!1,s=>{if(!t)r(s);else try{r(t(s))}catch(l){i(l)}},s=>{if(!n)i(s);else try{r(n(s))}catch(l){i(l)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new ml((n,r)=>{let i,s;return this.then(l=>{s=!1,i=l,t&&t()},l=>{s=!0,i=l,t&&t()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=t=>{this._setResult(Hs.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Hs.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Hs.PENDING){if(Oy(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Hs.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Hs.RESOLVED&&n[1](this._value),this._state===Hs.REJECTED&&n[2](this._value),n[0]=!0)})}}};function xK(e){const t=[];function n(){return e===void 0||t.length<e}function r(l){return t.splice(t.indexOf(l),1)[0]}function i(l){if(!n())return mT(new vs("Not adding Promise because buffer limit was reached."));const a=l();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(l){return new Nh((a,o)=>{let c=t.length;if(!c)return a(!0);const h=setTimeout(()=>{l&&l>0&&a(!1)},l);t.forEach(u=>{eh(u).then(()=>{--c||(clearTimeout(h),a(!0))},o)})})}return{$:t,add:i,drain:s}}function s0(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const wK=["fatal","error","warning","log","info","debug"];function CK(e){return e==="warn"?"warning":wK.includes(e)?e:"log"}const W8=1e3;function Sp(){return Date.now()/W8}function TK(){const{performance:e}=Pt;if(!e||!e.now)return Sp;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/W8}const xp=TK(),Ds=(()=>{const{performance:e}=Pt;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=i<t,l=e.timing&&e.timing.navigationStart,o=typeof l=="number"?Math.abs(l+n-r):t,c=o<t;return s||c?i<=o?e.timeOrigin:l:r})(),yw="baggage",Y8="sentry-",EK=/^sentry-/,PK=8192;function IK(e){if(!Is(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,i)=>{const s=YO(i);for(const l of Object.keys(s))r[l]=s[l];return r},{});else{if(!e)return;t=YO(e)}const n=Object.entries(t).reduce((r,[i,s])=>{if(i.match(EK)){const l=i.slice(Y8.length);r[l]=s}return r},{});if(Object.keys(n).length>0)return n}function X8(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,i])=>(i&&(n[`${Y8}${r}`]=i),n),{});return OK(t)}function YO(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function OK(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],i)=>{const s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,l=i===0?s:`${t},${s}`;return l.length>PK?(Lh&&_e.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):l},"")}const kK=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function AK(e){if(!e)return;const t=e.match(kK);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function RK(e,t){const n=AK(e),r=IK(t),{traceId:i,parentSpanId:s,parentSampled:l}=n||{};return n?{traceId:i||Tn(),parentSpanId:s||Tn().substring(16),spanId:Tn().substring(16),sampled:l,dsc:r||{}}:{traceId:i||Tn(),spanId:Tn().substring(16)}}function vT(e=Tn(),t=Tn().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function jh(e,t=[]){return[e,t]}function DK(e,t){const[n,r]=e;return[n,[...r,t]]}function XO(e,t){const n=e[1];for(const r of n){const i=r[0].type;if(t(r,i))return!0}return!1}function _w(e,t){return(t||new TextEncoder).encode(e)}function MK(e,t){const[n,r]=e;let i=JSON.stringify(n);function s(l){typeof i=="string"?i=typeof l=="string"?i+l:[_w(i,t),l]:i.push(typeof l=="string"?_w(l,t):l)}for(const l of r){const[a,o]=l;if(s(`
${JSON.stringify(a)}
`),typeof o=="string"||o instanceof Uint8Array)s(o);else{let c;try{c=JSON.stringify(o)}catch{c=JSON.stringify(Xo(o))}s(c)}}return typeof i=="string"?i:LK(i)}function LK(e){const t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}function FK(e,t){const n=typeof e.data=="string"?_w(e.data,t):e.data;return[wi({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const NK={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function qO(e){return NK[e]}function q8(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function jK(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Fh(r)},...i&&{trace:wi({...i})}}}function BK(e,t,n){const r=[{type:"client_report"},{timestamp:n||Sp(),discarded_events:e}];return jh(t?{dsn:t}:{},[r])}const UK=60*1e3;function $K(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?UK:r-t}function GK(e,t){return e[t]||e.all||0}function VK(e,t,n=Date.now()){return GK(e,t)>n}function HK(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},s=n&&n["x-sentry-rate-limits"],l=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[o,c]=a.split(":",2),h=parseInt(o,10),u=(isNaN(h)?60:h)*1e3;if(!c)i.all=r+u;else for(const f of c.split(";"))i[f]=r+u}else l?i.all=r+$K(l,r):t===429&&(i.all=r+60*1e3);return i}const Ge=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ay="production";function yT(){return k8("globalEventProcessors",()=>[])}function zK(e){yT().push(e)}function rv(e,t,n,r=0){return new Nh((i,s)=>{const l=e[r];if(t===null||typeof l!="function")i(t);else{const a=l({...t},n);Ge&&l.id&&a===null&&_e.log(`Event processor "${l.id}" dropped event`),Oy(a)?a.then(o=>rv(e,o,n,r+1).then(i)).then(null,s):rv(e,a,n,r+1).then(i).then(null,s)}})}function K8(e){const t=xp(),n={sid:Tn(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>WK(n)};return e&&zl(n,e),n}function zl(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||xp(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Tn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Q8(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),zl(e,n)}function WK(e){return wi({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const YK=0,J8=1;function _T(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:s,status:l,tags:a,origin:o}=wr(e);return wi({data:r,op:i,parent_span_id:s,span_id:t,status:l,tags:a,trace_id:n,origin:o})}function Ry(e){const{traceId:t,spanId:n}=e.spanContext(),r=Z8(e);return vT(t,n,r)}function Dy(e){return typeof e=="number"?KO(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?KO(e.getTime()):xp()}function KO(e){return e>9999999999?e/1e3:e}function wr(e){return XK(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function XK(e){return typeof e.getSpanJSON=="function"}function Z8(e){const{traceFlags:t}=e.spanContext();return!!(t&J8)}function qK(e,t,n,r,i,s){const{normalizeDepth:l=3,normalizeMaxBreadth:a=1e3}=e,o={...t,event_id:t.event_id||n.event_id||Tn(),timestamp:t.timestamp||Sp()},c=n.integrations||e.integrations.map(g=>g.name);KK(o,e),ZK(o,c),t.type===void 0&&QK(o,e.stackParser);const h=tQ(r,n.captureContext);n.mechanism&&jd(o,n.mechanism);const u=i&&i.getEventProcessors?i.getEventProcessors():[],f=fQ().getScopeData();if(s){const g=s.getScopeData();ek(f,g)}if(h){const g=h.getScopeData();ek(f,g)}const d=[...n.attachments||[],...f.attachments];d.length&&(n.attachments=d),iL(o,f);const p=[...u,...yT(),...f.eventProcessors];return rv(p,o,n).then(g=>(g&&JK(g),typeof l=="number"&&l>0?eQ(g,l,a):g))}function KK(e,t){const{environment:n,release:r,dist:i,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:Ay),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=Ru(e.message,s));const l=e.exception&&e.exception.values&&e.exception.values[0];l&&l.value&&(l.value=Ru(l.value,s));const a=e.request;a&&a.url&&(a.url=Ru(a.url,s))}const QO=new WeakMap;function QK(e,t){const n=Pt._sentryDebugIds;if(!n)return;let r;const i=QO.get(t);i?r=i:(r=new Map,QO.set(t,r));const s=Object.keys(n).reduce((l,a)=>{let o;const c=r.get(a);c?o=c:(o=t(a),r.set(a,o));for(let h=o.length-1;h>=0;h--){const u=o[h];if(u.filename){l[u.filename]=n[a];break}}return l},{});try{e.exception.values.forEach(l=>{l.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function JK(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function ZK(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function eQ(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:Xo(i.data,t,n)}}))},...e.user&&{user:Xo(e.user,t,n)},...e.contexts&&{contexts:Xo(e.contexts,t,n)},...e.extra&&{extra:Xo(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Xo(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>{const s=wr(i).data;return s&&(i.data=Xo(s,t,n)),i})),r}function tQ(e,t){if(!t)return e;const n=e?e.clone():new Ud;return n.update(t),n}function nQ(e){if(e)return rQ(e)?{captureContext:e}:sQ(e)?{captureContext:e}:e}function rQ(e){return e instanceof Ud||typeof e=="function"}const iQ=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function sQ(e){return Object.keys(e).some(t=>iQ.includes(t))}function bT(e,t){return ti().captureException(e,nQ(t))}function eL(e,t){return ti().captureEvent(e,t)}function Wl(e,t){ti().addBreadcrumb(e,t)}function tL(...e){const t=ti();if(e.length===2){const[n,r]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,r(n))):t.withScope(r)}return t.withScope(e[0])}function Kn(){return ti().getClient()}function Po(){return ti().getScope()}function JO(e){const t=Kn(),n=uc(),r=Po(),{release:i,environment:s=Ay}=t&&t.getOptions()||{},{userAgent:l}=Pt.navigator||{},a=K8({release:i,environment:s,user:r.getUser()||n.getUser(),...l&&{userAgent:l},...e}),o=n.getSession();return o&&o.status==="ok"&&zl(o,{status:"exited"}),nL(),n.setSession(a),r.setSession(a),a}function nL(){const e=uc(),t=Po(),n=t.getSession()||e.getSession();n&&Q8(n),rL(),e.setSession(),t.setSession()}function rL(){const e=uc(),t=Po(),n=Kn(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function ZO(e=!1){if(e){nL();return}rL()}function iv(e){return e.transaction}function My(e,t,n){const r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},l=wi({environment:r.environment||Ay,release:r.release,user_segment:s,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",l),l}function Bd(e){const t=Kn();if(!t)return{};const n=My(wr(e).trace_id||"",t,Po()),r=iv(e);if(!r)return n;const i=r&&r._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:s,source:l}=r.metadata;s!=null&&(n.sample_rate=`${s}`);const a=wr(r);return l&&l!=="url"&&(n.transaction=a.description),n.sampled=String(Z8(r)),t.emit&&t.emit("createDsc",n),n}function iL(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=t;oQ(e,t),r&&cQ(e,r),uQ(e,n),aQ(e,i),lQ(e,s)}function ek(e,t){const{extra:n,tags:r,user:i,contexts:s,level:l,sdkProcessingMetadata:a,breadcrumbs:o,fingerprint:c,eventProcessors:h,attachments:u,propagationContext:f,transactionName:d,span:p}=t;wf(e,"extra",n),wf(e,"tags",r),wf(e,"user",i),wf(e,"contexts",s),wf(e,"sdkProcessingMetadata",a),l&&(e.level=l),d&&(e.transactionName=d),p&&(e.span=p),o.length&&(e.breadcrumbs=[...e.breadcrumbs,...o]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),h.length&&(e.eventProcessors=[...e.eventProcessors,...h]),u.length&&(e.attachments=[...e.attachments,...u]),e.propagationContext={...e.propagationContext,...f}}function wf(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function oQ(e,t){const{extra:n,tags:r,user:i,contexts:s,level:l,transactionName:a}=t,o=wi(n);o&&Object.keys(o).length&&(e.extra={...o,...e.extra});const c=wi(r);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});const h=wi(i);h&&Object.keys(h).length&&(e.user={...h,...e.user});const u=wi(s);u&&Object.keys(u).length&&(e.contexts={...u,...e.contexts}),l&&(e.level=l),a&&(e.transaction=a)}function aQ(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function lQ(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function cQ(e,t){e.contexts={trace:_T(t),...e.contexts};const n=iv(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Bd(t),...e.sdkProcessingMetadata};const r=wr(n).description;r&&(e.tags={transaction:r,...e.tags})}}function uQ(e,t){e.fingerprint=e.fingerprint?B8(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const hQ=100;let Bb,Ud=class Gf{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=tk()}static clone(t){return t?t.clone():new Gf}clone(){const t=new Gf;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&zl(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const n=t(this);return n instanceof Gf?n:this}return t instanceof Gf?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):Zu(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=tk(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:hQ;if(r<=0)return this;const i={timestamp:Sp(),...t},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:i,_extra:s,_user:l,_level:a,_fingerprint:o,_eventProcessors:c,_propagationContext:h,_sdkProcessingMetadata:u,_transactionName:f,_span:d}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:i,extra:s,user:l,level:a,fingerprint:o||[],eventProcessors:c,propagationContext:h,sdkProcessingMetadata:u,transactionName:f,span:d}}applyToEvent(t,n={},r=[]){iL(t,this.getScopeData());const i=[...r,...yT(),...this._eventProcessors];return rv(i,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:Tn();if(!this._client)return _e.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureMessage(t,n,r){const i=r&&r.event_id?r.event_id:Tn();if(!this._client)return _e.warn("No client configured on scope - will not capture message!"),i;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i},this),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:Tn();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(_e.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function fQ(){return Bb||(Bb=new Ud),Bb}function tk(){return{traceId:Tn(),spanId:Tn().substring(16)}}const bw="7.100.1",sL=parseFloat(bw),dQ=100;let oL=class{constructor(t,n,r,i=sL){this._version=i;let s;n?s=n:(s=new Ud,s.setClient(t));let l;r?l=r:(l=new Ud,l.setClient(t)),this._stack=[{scope:s}],t&&this.bindClient(t),this._isolationScope=l}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(i){throw this.popScope(),i}return Oy(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Tn(),i=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:i,...n,event_id:r}),r}captureMessage(t,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:Tn(),s=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i}),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:Tn();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:l=dQ}=i.getOptions&&i.getOptions()||{};if(l<=0)return;const o={timestamp:Sp(),...t},c=s?ky(()=>s(o,n)):o;c!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",c,n),r.addBreadcrumb(c,l))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=nk(this);try{t(this)}finally{nk(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return Ge&&_e.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return Ge&&!r&&(this.getClient()?_e.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):_e.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&Q8(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=Ay}=r&&r.getOptions()||{},{userAgent:l}=Pt.navigator||{},a=K8({release:i,environment:s,user:n.getUser(),...l&&{userAgent:l},...t}),o=n.getSession&&n.getSession();return o&&o.status==="ok"&&zl(o,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(t,...n){const i=wp().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,n);Ge&&_e.warn(`Extension method ${t} couldn't be found, doing nothing.`)}};function wp(){return Pt.__SENTRY__=Pt.__SENTRY__||{extensions:{},hub:void 0},Pt}function nk(e){const t=wp(),n=Sw(t);return aL(t,e),n}function ti(){const e=wp();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return pQ(e)}function uc(){return ti().getIsolationScope()}function pQ(e=wp()){return(!gQ(e)||Sw(e).isOlderThan(sL))&&aL(e,new oL),Sw(e)}function gQ(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Sw(e){return k8("hub",()=>new oL,e)}function aL(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function Bh(e){return(e||ti()).getScope().getTransaction()}let rk=!1;function mQ(){rk||(rk=!0,G8(xw),V8(xw))}function xw(){const e=Bh();if(e){const t="internal_error";Ge&&_e.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}xw.tag="sentry_tracingErrorCallback";const Mu="sentry.source",uu="sentry.sample_rate",qg="sentry.op",hu="sentry.origin";var ik;(function(e){const t="ok";e.Ok=t;const n="deadline_exceeded";e.DeadlineExceeded=n;const r="unauthenticated";e.Unauthenticated=r;const i="permission_denied";e.PermissionDenied=i;const s="not_found";e.NotFound=s;const l="resource_exhausted";e.ResourceExhausted=l;const a="invalid_argument";e.InvalidArgument=a;const o="unimplemented";e.Unimplemented=o;const c="unavailable";e.Unavailable=c;const h="internal_error";e.InternalError=h;const u="unknown_error";e.UnknownError=u;const f="cancelled";e.Cancelled=f;const d="already_exists";e.AlreadyExists=d;const p="failed_precondition";e.FailedPrecondition=p;const m="aborted";e.Aborted=m;const g="out_of_range";e.OutOfRange=g;const v="data_loss";e.DataLoss=v})(ik||(ik={}));function vQ(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function ST(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=vQ(t);n!=="unknown_error"&&e.setStatus(n)}class lL{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class xT{constructor(t={}){this._traceId=t.traceId||Tn(),this._spanId=t.spanId||Tn().substring(16),this._startTime=t.startTimestamp||xp(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this.instrumenter=t.instrumenter||"sentry",this._attributes={},this.setAttributes({[hu]:t.origin||"manual",[qg]:t.op,...t.attributes}),this._name=t.name||t.description,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.status&&(this._status=t.status),t.endTimestamp&&(this._endTime=t.endTimestamp)}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}set parentSpanId(t){this._parentSpanId=t}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}get startTimestamp(){return this._startTime}set startTimestamp(t){this._startTime=t}get endTimestamp(){return this._endTime}set endTimestamp(t){this._endTime=t}get status(){return this._status}set status(t){this._status=t}get op(){return this._attributes[qg]}set op(t){this.setAttribute(qg,t)}get origin(){return this._attributes[hu]}set origin(t){this.setAttribute(hu,t)}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?J8:YK}}startChild(t){const n=new xT({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=iv(this);if(n.transaction=r,Ge&&r){const i=t&&t.op||"< unknown op >",s=wr(n).description||"< unknown name >",l=r.spanContext().spanId,a=`[Tracing] Starting '${i}' span on transaction '${s}' (${l}).`;_e.log(a),this._logMessage=a}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setAttribute(t,n){n===void 0?delete this._attributes[t]:this._attributes[t]=n}setAttributes(t){Object.keys(t).forEach(n=>this.setAttribute(n,t[n]))}setStatus(t){return this._status=t,this}setHttpStatus(t){return ST(this,t),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return this._status==="ok"}finish(t){return this.end(t)}end(t){if(this._endTime)return;const n=iv(this);if(Ge&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&_e.log(r.replace("Starting","Finishing"))}this._endTime=Dy(t)}toTraceparent(){return Ry(this)}toContext(){return wi({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this._endTime=t.endTimestamp,this.op=t.op,this._parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this._startTime=t.startTimestamp||this._startTime,this._status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return _T(this)}getSpanJSON(){return wi({data:this._getData(),description:this._name,op:this._attributes[qg],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[hu]})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:n}=this,r=Object.keys(t).length>0,i=Object.keys(n).length>0;if(!(!r&&!i))return r&&i?{...t,...n}:r?t:n}}function Ly(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=Kn(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function cL(e){if(!Ly())return;const t=_Q(e),n=ti(),r=e.scope?e.scope.getSpan():yQ();if(e.onlyIfParent&&!r)return;const s=uc(),l=Po();let a;if(r)a=r.startChild(t);else{const{traceId:o,dsc:c,parentSpanId:h,sampled:u}={...s.getPropagationContext(),...l.getPropagationContext()};a=n.startTransaction({traceId:o,parentSpanId:h,parentSampled:u,...t,metadata:{dynamicSamplingContext:c,...t.metadata}})}return bQ(a,l,s),a}function yQ(){return Po().getSpan()}function _Q(e){if(e.startTime){const t={...e};return t.startTimestamp=Dy(e.startTime),delete t.startTime,t}return e}const uL="_sentryScope",hL="_sentryIsolationScope";function bQ(e,t,n){e&&(Hl(e,hL,n),Hl(e,uL,t))}function SQ(e){return{scope:e[uL],isolationScope:e[hL]}}class fL extends xT{constructor(t,n){super(t),this._measurements={},this._contexts={},this._hub=n||ti(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Mu]&&{source:this._attributes[Mu]},...this._attributes[uu]&&{sampleRate:this._attributes[uu]}}}set metadata(t){this._metadata=t}setName(t,n="custom"){this._name=t,this.setAttribute(Mu,n)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new lL(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const n=Dy(t),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const t=super.toContext();return wi({...t,name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return Bd(this)}setHub(t){this._hub=t}_finishTransaction(t){if(this._endTime!==void 0)return;this._name||(Ge&&_e.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){Ge&&_e.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(h=>h!==this&&wr(h).timestamp):[];if(this._trimEnd&&r.length>0){const h=r.map(u=>wr(u).timestamp).filter(Boolean);this._endTime=h.reduce((u,f)=>u>f?u:f)}const{scope:i,isolationScope:s}=SQ(this),{metadata:l}=this,{source:a}=l,o={contexts:{...this._contexts,trace:_T(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...l,capturedSpanScope:i,capturedSpanIsolationScope:s,dynamicSamplingContext:Bd(this)},...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(Ge&&_e.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),o.measurements=this._measurements),Ge&&_e.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),o}}const o0={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},xQ="finishReason",Dc=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class wQ extends lL{constructor(t,n,r,i){super(i),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=r}add(t){if(t.spanContext().spanId!==this.transactionSpanId){const n=t.end;t.end=(...r)=>(this._popActivity(t.spanContext().spanId),n.apply(t,r)),wr(t).timestamp===void 0&&this._pushActivity(t.spanContext().spanId)}super.add(t)}}class CQ extends fL{constructor(t,n,r=o0.idleTimeout,i=o0.finalTimeout,s=o0.heartbeatInterval,l=!1,a=!1){super(t,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=i,this._heartbeatInterval=s,this._onScope=l,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Dc[4],this._autoFinishAllowed=!a,l&&(Ge&&_e.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),n.getScope().setSpan(this)),a||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Dc[3],this.end())},this._finalTimeout)}end(t){const n=Dy(t);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(xQ,this._finishReason),this.spanRecorder){Ge&&_e.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,n);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanContext().spanId===this.spanContext().spanId)return!0;wr(r).timestamp||(r.setStatus("cancelled"),r.end(n),Ge&&_e.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const{start_timestamp:i,timestamp:s}=wr(r),l=i&&i<n,a=(this._finalTimeout+this._idleTimeout)/1e3,o=s&&i&&s-i<a;if(Ge){const c=JSON.stringify(r,void 0,2);l?o||_e.log("[Tracing] discarding Span since it finished after Transaction final timeout",c):_e.log("[Tracing] discarding Span since it happened after Transaction was finished",c)}return l&&o}),Ge&&_e.log("[Tracing] flushing IdleTransaction")}else Ge&&_e.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=i=>{this._finished||this._pushActivity(i)},r=i=>{this._finished||this._popActivity(i)};this.spanRecorder=new wQ(n,r,this.spanContext().spanId,t),Ge&&_e.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Dc[5],this.end(t)))}setFinishReason(t){this._finishReason=t}sendAutoFinishSignal(){this._autoFinishAllowed||(Ge&&_e.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Dc[1],this.end(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),Ge&&_e.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,Ge&&_e.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(Ge&&_e.log(`[Tracing] popActivity ${t}`),delete this.activities[t],Ge&&_e.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=xp();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Dc[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?this._autoFinishAllowed&&(Ge&&_e.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Dc[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){Ge&&_e.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function dL(e,t,n){if(!Ly(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setAttribute(uu,Number(e.sampled)),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setAttribute(uu,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setAttribute(uu,Number(r))):(r=1,e.setAttribute(uu,r)),TQ(r)?r?(e.sampled=Math.random()<r,e.sampled?(Ge&&_e.log(`[Tracing] starting ${e.op} transaction - ${wr(e).description}`),e):(Ge&&_e.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(Ge&&_e.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):(Ge&&_e.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function TQ(e){return I8(e)||!(typeof e=="number"||typeof e=="boolean")?(Ge&&_e.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?(Ge&&_e.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function EQ(){const t=this.getScope().getSpan();return t?{"sentry-trace":Ry(t)}:{}}function PQ(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},i=r.instrumenter||"sentry",s=e.instrumenter||"sentry";i!==s&&(Ge&&_e.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${i}\` instrumenter.
The transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),e.sampled=!1);let l=new fL(e,this);return l=dL(l,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),l.isRecording()&&l.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",l),l}function sk(e,t,n,r,i,s,l,a=!1){const o=e.getClient(),c=o&&o.getOptions()||{};let h=new CQ(t,e,n,r,l,i,a);return h=dL(h,c,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...s}),h.isRecording()&&h.initSpanRecorder(c._experiments&&c._experiments.maxSpans),o&&o.emit&&o.emit("startTransaction",h),h}function IQ(){const e=wp();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=PQ),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=EQ),mQ())}function OQ(e,t,n){const r=Bh();r&&r.setMeasurement(e,t,n)}function kQ(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function AQ(e,t,n,r){const i=q8(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:Fh(t)}},l="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return jh(s,[l])}function RQ(e,t,n,r){const i=q8(n),s=e.type&&e.type!=="replay_event"?e.type:"event";kQ(e,n&&n.sdk);const l=jK(e,i,r,t);return delete e.sdkProcessingMetadata,jh(l,[[{type:s},e]])}const DQ="7";function pL(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function MQ(e){return`${pL(e)}${e.projectId}/envelope/`}function LQ(e,t){return Yq({sentry_key:e.publicKey,sentry_version:DQ,...t&&{sentry_client:`${t.name}/${t.version}`}})}function FQ(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${MQ(e)}?${LQ(e,r)}`}function NQ(e,t){const n=D8(e);if(!n)return"";const r=`${pL(n)}embed/error-page/`;let i=`dsn=${Fh(n)}`;for(const s in t)if(s!=="dsn"&&s!=="onClose")if(s==="user"){const l=t.user;if(!l)continue;l.name&&(i+=`&name=${encodeURIComponent(l.name)}`),l.email&&(i+=`&email=${encodeURIComponent(l.email)}`)}else i+=`&${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`;return`${r}?${i}`}const ok=[];function jQ(e){const t={};return e.forEach(n=>{const{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function BQ(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(l=>{l.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=B8(n(t)):r=t;const i=jQ(r),s=$Q(i,l=>l.name==="Debug");if(s!==-1){const[l]=i.splice(s,1);i.push(l)}return i}function UQ(e,t){const n={};return t.forEach(r=>{r&&gL(e,r,n)}),n}function ak(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function gL(e,t,n){if(n[t.name]){Ge&&_e.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,ok.indexOf(t.name)===-1&&(t.setupOnce(zK,ti),ok.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,s)=>r(i,s,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((s,l)=>r(s,l,e),{id:t.name});e.addEventProcessor(i)}Ge&&_e.log(`Integration installed: ${t.name}`)}function $Q(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function Va(e,t){return Object.assign(function(...r){return t(...r)},{id:e})}function GQ(e){let t="";for(const n of e){const r=Object.entries(n.tags),i=r.length>0?`|#${r.map(([s,l])=>`${s}:${l}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${i}|T${n.timestamp}
`}return t}function VQ(e,t,n,r){const i={sent_at:new Date().toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(i.dsn=Fh(t));const s=HQ(e);return jh(i,[s])}function HQ(e){const t=GQ(e);return[{type:"statsd",length:t.length},t]}const lk="Not capturing exception because it's already been captured.";class zQ{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=D8(t.dsn):Ge&&_e.warn("No DSN provided, client will not send events."),this._dsn){const n=FQ(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(VO(t)){Ge&&_e.log(lk);return}let i=n&&n.event_id;return this._process(this.eventFromException(t,n).then(s=>this._captureEvent(s,n,r)).then(s=>{i=s})),i}captureMessage(t,n,r,i){let s=r&&r.event_id;const l=hT(t)?t:String(t),a=fT(t)?this.eventFromMessage(l,n,r):this.eventFromException(t,r);return this._process(a.then(o=>this._captureEvent(o,r,i)).then(o=>{s=o})),s}captureEvent(t,n,r){if(n&&n.originalException&&VO(n.originalException)){Ge&&_e.log(lk);return}let i=n&&n.event_id;const l=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,n,l||r).then(a=>{i=a})),i}captureSession(t){typeof t.release!="string"?Ge&&_e.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),zl(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i))):eh(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return Ge&&_e.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const n=this._integrations[t.name];gL(this,t,this._integrations),n||ak(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=RQ(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=DK(r,FK(s,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const n=AQ(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const i=`${t}:${n}`;Ge&&_e.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}captureAggregateMetrics(t){Ge&&_e.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=VQ(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=UQ(this,t),ak(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,n){let r=!1,i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const o of s){const c=o.mechanism;if(c&&c.handled===!1){r=!0;break}}}const l=t.status==="ok";(l&&t.errors===0||l&&r)&&(zl(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Nh(n=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,t&&r>=t&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,i=uc()){const s=this.getOptions(),l=Object.keys(this._integrations);return!n.integrations&&l.length>0&&(n.integrations=l),this.emit("preprocessEvent",t,n),qK(s,t,n,r,this,i).then(a=>{if(a===null)return a;const o={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&o){const{traceId:h,spanId:u,parentSpanId:f,dsc:d}=o;a.contexts={trace:{trace_id:h,span_id:u,parent_span_id:f},...a.contexts};const p=d||My(h,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:p,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(i=>i.event_id,i=>{if(Ge){const s=i;s.logLevel==="log"?_e.log(s.message):_e.warn(s)}})}_processEvent(t,n,r){const i=this.getOptions(),{sampleRate:s}=i,l=vL(t),a=mL(t),o=t.type||"error",c=`before send for type \`${o}\``;if(a&&typeof s=="number"&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",t),mT(new vs(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const h=o==="replay_event"?"replay":o,f=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,f).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",h,t),new vs("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return d;const m=YQ(i,d,n);return WQ(m,c)}).then(d=>{if(d===null)throw this.recordDroppedEvent("before_send",h,t),new vs(`${c} returned \`null\`, will not send event.`,"log");const p=r&&r.getSession();!l&&p&&this._updateSessionFromEvent(p,d);const m=d.transaction_info;if(l&&m&&d.transaction!==t.transaction){const g="custom";d.transaction_info={...m,source:g}}return this.sendEvent(d,n),d}).then(null,d=>{throw d instanceof vs?d:(this.captureException(d,{data:{__sentry__:!0},originalException:d}),new vs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{Ge&&_e.error("Error while sending event:",n)});Ge&&_e.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,i]=n.split(":");return{reason:r,category:i,quantity:t[n]}})}}function WQ(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Oy(e))return e.then(r=>{if(!Zu(r)&&r!==null)throw new vs(n);return r},r=>{throw new vs(`${t} rejected with ${r}`)});if(!Zu(e)&&e!==null)throw new vs(n);return e}function YQ(e,t,n){const{beforeSend:r,beforeSendTransaction:i}=e;return mL(t)&&r?r(t,n):vL(t)&&i?i(t,n):t}function mL(e){return e.type===void 0}function vL(e){return e.type==="transaction"}function XQ(e,t){t.debug===!0&&(Ge?_e.enable():ky(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Po().update(t.initialScope);const r=new e(t);qQ(r),KQ(r)}function qQ(e){const n=ti().getStackTop();n.client=e,n.scope.setClient(e)}function KQ(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}const QQ=30;function yL(e,t,n=xK(e.bufferSize||QQ)){let r={};const i=l=>n.drain(l);function s(l){const a=[];if(XO(l,(u,f)=>{const d=qO(f);if(VK(r,d)){const p=ck(u,f);e.recordDroppedEvent("ratelimit_backoff",d,p)}else a.push(u)}),a.length===0)return eh();const o=jh(l[0],a),c=u=>{XO(o,(f,d)=>{const p=ck(f,d);e.recordDroppedEvent(u,qO(d),p)})},h=()=>t({body:MK(o,e.textEncoder)}).then(u=>(u.statusCode!==void 0&&(u.statusCode<200||u.statusCode>=300)&&Ge&&_e.warn(`Sentry responded with status code ${u.statusCode} to sent event.`),r=HK(r,u),u),u=>{throw c("network_error"),u});return n.add(h).then(u=>u,u=>{if(u instanceof vs)return Ge&&_e.error("Skipped sending event because buffer is full."),c("queue_overflow"),eh();throw u})}return s.__sentry__baseTransport__=!0,{send:s,flush:i}}function ck(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function JQ(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:bw})),version:bw}),e._metadata=i}const ZQ=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],eJ=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],_L="InboundFilters",tJ=(e={})=>({name:_L,setupOnce(){},processEvent(t,n,r){const i=r.getOptions(),s=nJ(e,i);return rJ(t,s)?null:t}}),bL=tJ;Va(_L,bL);function nJ(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ZQ],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:eJ],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function rJ(e,t){return t.ignoreInternal&&cJ(e)?(Ge&&_e.warn(`Event dropped due to being internal Sentry Error.
Event: ${ia(e)}`),!0):iJ(e,t.ignoreErrors)?(Ge&&_e.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${ia(e)}`),!0):sJ(e,t.ignoreTransactions)?(Ge&&_e.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${ia(e)}`),!0):oJ(e,t.denyUrls)?(Ge&&_e.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${ia(e)}.
Url: ${sv(e)}`),!0):aJ(e,t.allowUrls)?!1:(Ge&&_e.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${ia(e)}.
Url: ${sv(e)}`),!0)}function iJ(e,t){return e.type||!t||!t.length?!1:lJ(e).some(n=>bp(n,t))}function sJ(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?bp(n,t):!1}function oJ(e,t){if(!t||!t.length)return!1;const n=sv(e);return n?bp(n,t):!1}function aJ(e,t){if(!t||!t.length)return!0;const n=sv(e);return n?bp(n,t):!0}function lJ(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),Ge&&t.length===0&&_e.error(`Could not extract message for event ${ia(e)}`),t}function cJ(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function uJ(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function sv(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?uJ(t):null}catch{return Ge&&_e.error(`Cannot extract url for event ${ia(e)}`),null}}let uk;const SL="FunctionToString",hk=new WeakMap,hJ=()=>({name:SL,setupOnce(){uk=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=pT(this),n=hk.has(Kn())&&t!==void 0?t:this;return uk.apply(n,e)}}catch{}},setup(e){hk.set(e,!0)}}),xL=hJ;Va(SL,xL);const sn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Et=Pt;function fJ(){Et&&Et.document?Et.document.addEventListener("visibilitychange",()=>{const e=Bh();if(Et.document.hidden&&e){const t="cancelled",{op:n,status:r}=wr(e);sn&&_e.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):sn&&_e.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const wT=(e,t,n)=>{let r,i;return s=>{t.value>=0&&(s||n)&&(i=t.value-(r||0),(i||r===void 0)&&(r=t.value,t.delta=i,e(t)))}},dJ=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,pJ=()=>{const e=Et.performance.timing,t=Et.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},wL=()=>Et.__WEB_VITALS_POLYFILL__?Et.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||pJ()):Et.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],CL=()=>{const e=wL();return e&&e.activationStart||0},CT=(e,t)=>{const n=wL();let r="navigate";return n&&(Et.document.prerendering||CL()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:dJ(),navigationType:r}},Fy=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(i=>{t(i.getEntries())});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},Ny=(e,t)=>{const n=r=>{(r.type==="pagehide"||Et.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},gJ=e=>{const t=CT("CLS",0);let n,r=0,i=[];const s=a=>{a.forEach(o=>{if(!o.hadRecentInput){const c=i[0],h=i[i.length-1];r&&i.length!==0&&o.startTime-h.startTime<1e3&&o.startTime-c.startTime<5e3?(r+=o.value,i.push(o)):(r=o.value,i=[o]),r>t.value&&(t.value=r,t.entries=i,n&&n())}})},l=Fy("layout-shift",s);if(l){n=wT(e,t);const a=()=>{s(l.takeRecords()),n(!0)};return Ny(a),a}};let a0=-1;const mJ=()=>Et.document.visibilityState==="hidden"&&!Et.document.prerendering?0:1/0,vJ=()=>{Ny(({timeStamp:e})=>{a0=e},!0)},TT=()=>(a0<0&&(a0=mJ(),vJ()),{get firstHiddenTime(){return a0}}),yJ=e=>{const t=TT(),n=CT("FID");let r;const i=a=>{a.startTime<t.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),r(!0))},s=a=>{a.forEach(i)},l=Fy("first-input",s);r=wT(e,n),l&&Ny(()=>{s(l.takeRecords()),l.disconnect()},!0)},fk={},_J=e=>{const t=TT(),n=CT("LCP");let r;const i=l=>{const a=l[l.length-1];if(a){const o=Math.max(a.startTime-CL(),0);o<t.firstHiddenTime&&(n.value=o,n.entries=[a],r())}},s=Fy("largest-contentful-paint",i);if(s){r=wT(e,n);const l=()=>{fk[n.id]||(i(s.takeRecords()),s.disconnect(),fk[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,l,{once:!0,capture:!0})}),Ny(l,!0),l}},td={},ov={};let TL,EL,PL;function bJ(e,t=!1){return PT("cls",e,wJ,TL,t)}function SJ(e,t=!1){return PT("lcp",e,TJ,PL,t)}function xJ(e){return PT("fid",e,CJ,EL)}function ET(e,t){return IL(e,t),ov[e]||(EJ(e),ov[e]=!0),OL(e,t)}function jy(e,t){const n=td[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(i){sn&&_e.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${yo(r)}
Error:`,i)}}function wJ(){return gJ(e=>{jy("cls",{metric:e}),TL=e})}function CJ(){return yJ(e=>{jy("fid",{metric:e}),EL=e})}function TJ(){return _J(e=>{jy("lcp",{metric:e}),PL=e})}function PT(e,t,n,r,i=!1){IL(e,t);let s;return ov[e]||(s=n(),ov[e]=!0),r&&t({metric:r}),OL(e,t,i?s:void 0)}function EJ(e){const t={};e==="event"&&(t.durationThreshold=0),Fy(e,n=>{jy(e,{entries:n})},t)}function IL(e,t){td[e]=td[e]||[],td[e].push(t)}function OL(e,t,n){return()=>{n&&n();const r=td[e];if(!r)return;const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}function Ub(e){return typeof e=="number"&&isFinite(e)}function th(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const PJ=2147483647;function Un(e){return e/1e3}function kL(){return Et&&Et.addEventListener&&Et.performance}let dk=0,Sn={},fs,nd;function IJ(){const e=kL();if(e&&Ds){e.mark&&Et.performance.mark("sentry-tracing-init");const t=DJ(),n=AJ(),r=RJ();return()=>{t(),n(),r()}}return()=>{}}function OJ(){ET("longtask",({entries:e})=>{for(const t of e){const n=Bh();if(!n)return;const r=Un(Ds+t.startTime),i=Un(t.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+i})}})}function kJ(){ET("event",({entries:e})=>{for(const t of e){const n=Bh();if(!n)return;if(t.name==="click"){const r=Un(Ds+t.startTime),i=Un(t.duration),s={description:Nd(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+i},l=A8(t.target);l&&(s.attributes={"ui.component_name":l}),n.startChild(s)}}})}function AJ(){return bJ(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(sn&&_e.log("[Measurements] Adding CLS"),Sn.cls={value:e.value,unit:""},nd=t)},!0)}function RJ(){return SJ(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(sn&&_e.log("[Measurements] Adding LCP"),Sn.lcp={value:e.value,unit:"millisecond"},fs=t)},!0)}function DJ(){return xJ(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Un(Ds),r=Un(t.startTime);sn&&_e.log("[Measurements] Adding FID"),Sn.fid={value:e.value,unit:"millisecond"},Sn["mark.fid"]={value:n+r,unit:"second"}})}function MJ(e){const t=kL();if(!t||!Et.performance.getEntries||!Ds)return;sn&&_e.log("[Tracing] Adding & adjusting spans using Performance API");const n=Un(Ds),r=t.getEntries();let i,s;const{op:l,start_timestamp:a}=wr(e);if(r.slice(dk).forEach(o=>{const c=Un(o.startTime),h=Un(o.duration);if(!(e.op==="navigation"&&a&&n+c<a))switch(o.entryType){case"navigation":{FJ(e,o,n),i=n+Un(o.responseStart),s=n+Un(o.requestStart);break}case"mark":case"paint":case"measure":{LJ(e,o,c,h,n);const u=TT(),f=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&f&&(sn&&_e.log("[Measurements] Adding FP"),Sn.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&f&&(sn&&_e.log("[Measurements] Adding FCP"),Sn.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{jJ(e,o,o.name,c,h,n);break}}}),dk=Math.max(r.length-1,0),BJ(e),l==="pageload"){$J(Sn,i,s,a),["fcp","fp","lcp"].forEach(c=>{if(!Sn[c]||!a||n>=a)return;const h=Sn[c].value,u=n+Un(h),f=Math.abs((u-a)*1e3),d=f-h;sn&&_e.log(`[Measurements] Normalized ${c} from ${h} to ${f} (${d})`),Sn[c].value=f});const o=Sn["mark.fid"];o&&Sn.fid&&(th(e,{description:"first input delay",endTimestamp:o.value+Un(Sn.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:o.value}),delete Sn["mark.fid"]),"fcp"in Sn||delete Sn.cls,Object.keys(Sn).forEach(c=>{OQ(c,Sn[c].value,Sn[c].unit)}),UJ(e)}fs=void 0,nd=void 0,Sn={}}function LJ(e,t,n,r,i){const s=i+n,l=s+r;return th(e,{description:t.name,endTimestamp:l,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s}),s}function FJ(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Kg(e,t,r,n)}),Kg(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Kg(e,t,"fetch",n,"cache","domainLookupStart"),Kg(e,t,"domainLookup",n,"DNS"),NJ(e,t,n)}function Kg(e,t,n,r,i,s){const l=s?t[s]:t[`${n}End`],a=t[`${n}Start`];!a||!l||th(e,{op:"browser",origin:"auto.browser.browser.metrics",description:i||n,startTimestamp:r+Un(a),endTimestamp:r+Un(l)})}function NJ(e,t,n){t.responseEnd&&(th(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Un(t.requestStart),endTimestamp:n+Un(t.responseEnd)}),th(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Un(t.responseStart),endTimestamp:n+Un(t.responseEnd)}))}function jJ(e,t,n,r,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const l=s0(n),a={};$b(a,t,"transferSize","http.response_transfer_size"),$b(a,t,"encodedBodySize","http.response_content_length"),$b(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus),l.protocol&&(a["url.scheme"]=l.protocol.split(":").pop()),l.host&&(a["server.address"]=l.host),a["url.same_origin"]=n.includes(Et.location.origin);const o=s+r,c=o+i;th(e,{description:n.replace(Et.location.origin,""),endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:o,data:a})}function BJ(e){const t=Et.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Ub(n.rtt)&&(Sn["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Ub(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),Ub(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function UJ(e){fs&&(sn&&_e.log("[Measurements] Adding LCP Data"),fs.element&&e.setTag("lcp.element",Nd(fs.element)),fs.id&&e.setTag("lcp.id",fs.id),fs.url&&e.setTag("lcp.url",fs.url.trim().slice(0,200)),e.setTag("lcp.size",fs.size)),nd&&nd.sources&&(sn&&_e.log("[Measurements] Adding CLS Data"),nd.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,Nd(t.node))))}function $b(e,t,n,r){const i=t[n];i!=null&&i<PJ&&(e[r]=i)}function $J(e,t,n,r){typeof t=="number"&&r&&(sn&&_e.log("[Measurements] Adding TTFB"),e.ttfb={value:Math.max(t-r,0)*1e3,unit:"millisecond"},typeof n=="number"&&n<=t&&(e["ttfb.requestTime"]={value:(t-n)*1e3,unit:"millisecond"}))}function GJ(e,t,n,r,i="auto.http.browser"){if(!Ly()||!e.fetchData)return;const s=t(e.fetchData.url);if(e.endTimestamp&&s){const u=e.fetchData.__span;if(!u)return;const f=r[u];if(f){if(e.response){ST(f,e.response.status);const d=e.response&&e.response.headers&&e.response.headers.get("content-length");if(d){const p=parseInt(d);p>0&&f.setAttribute("http.response_content_length",p)}}else e.error&&f.setStatus("internal_error");f.end(),delete r[u]}return}const l=Po(),a=Kn(),{method:o,url:c}=e.fetchData,h=s?cL({name:`${o} ${c}`,onlyIfParent:!0,attributes:{url:c,type:"fetch","http.method":o,[hu]:i},op:"http.client"}):void 0;if(h&&(e.fetchData.__span=h.spanContext().spanId,r[h.spanContext().spanId]=h),n(e.fetchData.url)&&a){const u=e.args[0];e.args[1]=e.args[1]||{};const f=e.args[1];f.headers=VJ(u,a,l,f,h)}return h}function VJ(e,t,n,r,i){const s=i||n.getSpan(),l=uc(),{traceId:a,spanId:o,sampled:c,dsc:h}={...l.getPropagationContext(),...n.getPropagationContext()},u=s?Ry(s):vT(a,o,c),f=X8(h||(s?Bd(s):My(a,t,n))),d=r.headers||(typeof Request<"u"&&vo(e,Request)?e.headers:void 0);if(d)if(typeof Headers<"u"&&vo(d,Headers)){const p=new Headers(d);return p.append("sentry-trace",u),f&&p.append(yw,f),p}else if(Array.isArray(d)){const p=[...d,["sentry-trace",u]];return f&&p.push([yw,f]),p}else{const p="baggage"in d?d.baggage:void 0,m=[];return Array.isArray(p)?m.push(...p):p&&m.push(p),f&&m.push(f),{...d,"sentry-trace":u,baggage:m.length>0?m.join(","):void 0}}else return{"sentry-trace":u,baggage:f}}const ww=["localhost",/^\/(?!\/)/],Cw={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:ww,tracePropagationTargets:ww};function HJ(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:i,shouldCreateSpanForRequest:s,enableHTTPTimings:l}={traceFetch:Cw.traceFetch,traceXHR:Cw.traceXHR,...e},a=typeof s=="function"?s:h=>!0,o=h=>XJ(h,r||i),c={};t&&$8(h=>{const u=GJ(h,a,o,c);l&&u&&pk(u)}),n&&H8(h=>{const u=qJ(h,a,o,c);l&&u&&pk(u)})}function zJ(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function pk(e){const{url:t}=wr(e).data||{};if(!t||typeof t!="string")return;const n=ET("resource",({entries:r})=>{r.forEach(i=>{zJ(i)&&i.name.endsWith(t)&&(YJ(i).forEach(l=>e.setAttribute(...l)),setTimeout(n))})})}function WJ(e){let t="unknown",n="unknown",r="";for(const i of e){if(i==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=i}return r===e&&(t=r),{name:t,version:n}}function cs(e=0){return((Ds||performance.timeOrigin)+e)/1e3}function YJ(e){const{name:t,version:n}=WJ(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),Ds?[...r,["http.request.redirect_start",cs(e.redirectStart)],["http.request.fetch_start",cs(e.fetchStart)],["http.request.domain_lookup_start",cs(e.domainLookupStart)],["http.request.domain_lookup_end",cs(e.domainLookupEnd)],["http.request.connect_start",cs(e.connectStart)],["http.request.secure_connection_start",cs(e.secureConnectionStart)],["http.request.connection_end",cs(e.connectEnd)],["http.request.request_start",cs(e.requestStart)],["http.request.response_start",cs(e.responseStart)],["http.request.response_end",cs(e.responseEnd)]]:r}function XJ(e,t){return bp(e,t||ww)}function qJ(e,t,n,r){const i=e.xhr,s=i&&i[cu];if(!Ly()||!i||i.__sentry_own_request__||!s)return;const l=t(s.url);if(e.endTimestamp&&l){const u=i.__sentry_xhr_span_id__;if(!u)return;const f=r[u];f&&s.status_code!==void 0&&(ST(f,s.status_code),f.end(),delete r[u]);return}const a=Po(),o=uc(),c=l?cL({name:`${s.method} ${s.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":s.method,url:s.url,[hu]:"auto.http.browser"},op:"http.client"}):void 0;c&&(i.__sentry_xhr_span_id__=c.spanContext().spanId,r[i.__sentry_xhr_span_id__]=c);const h=Kn();if(i.setRequestHeader&&n(s.url)&&h){const{traceId:u,spanId:f,sampled:d,dsc:p}={...o.getPropagationContext(),...a.getPropagationContext()},m=c?Ry(c):vT(u,f,d),g=X8(p||(c?Bd(c):My(u,h,a)));KJ(i,m,g)}return c}function KJ(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(yw,n)}catch{}}function QJ(e,t=!0,n=!0){if(!Et||!Et.location){sn&&_e.warn("Could not initialize routing instrumentation due to invalid location");return}let r=Et.location.href,i;t&&(i=e({name:Et.location.pathname,startTimestamp:Ds?Ds/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&gT(({to:s,from:l})=>{if(l===void 0&&r&&r.indexOf(s)!==-1){r=void 0;return}l!==s&&(r=void 0,i&&(sn&&_e.log(`[Tracing] Finishing current transaction with op: ${i.op}`),i.end()),i=e({name:Et.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const JJ="BrowserTracing",ZJ={...o0,markBackgroundTransactions:!0,routingInstrumentation:QJ,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...Cw};class eZ{constructor(t){this.name=JJ,this._hasSetTracePropagationTargets=!1,IQ(),sn&&(this._hasSetTracePropagationTargets=!!(t&&(t.tracePropagationTargets||t.tracingOrigins))),this.options={...ZJ,...t},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=IJ(),this.options.enableLongTask&&OJ(),this.options._experiments.enableInteractions&&kJ()}setupOnce(t,n){this._getCurrentHub=n;const i=n().getClient(),s=i&&i.getOptions(),{routingInstrumentation:l,startTransactionOnLocationChange:a,startTransactionOnPageLoad:o,markBackgroundTransactions:c,traceFetch:h,traceXHR:u,shouldCreateSpanForRequest:f,enableHTTPTimings:d,_experiments:p}=this.options,m=s&&s.tracePropagationTargets,g=m||this.options.tracePropagationTargets;sn&&this._hasSetTracePropagationTargets&&m&&_e.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),l(v=>{const _=this._createRouteTransaction(v);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(_,v,n),_},o,a),c&&fJ(),p.enableInteractions&&this._registerInteractionListener(),HJ({traceFetch:h,traceXHR:u,tracePropagationTargets:g,shouldCreateSpanForRequest:f,enableHTTPTimings:d})}_createRouteTransaction(t){if(!this._getCurrentHub){sn&&_e.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:i,finalTimeout:s,heartbeatInterval:l}=this.options,a=t.op==="pageload";let o;if(a){const d=a?gk("sentry-trace"):"",p=a?gk("baggage"):void 0,{traceId:m,dsc:g,parentSpanId:v,sampled:_}=RK(d,p);o={traceId:m,parentSpanId:v,parentSampled:_,...t,metadata:{...t.metadata,dynamicSamplingContext:g},trimEnd:!0}}else o={trimEnd:!0,...t};const c=typeof r=="function"?r(o):o,h=c===void 0?{...o,sampled:!1}:c;h.metadata=h.name!==o.name?{...h.metadata,source:"custom"}:h.metadata,this._latestRouteName=h.name,this._latestRouteSource=tZ(h),h.sampled===!1&&sn&&_e.log(`[Tracing] Will not send ${h.op} transaction because of beforeNavigate.`),sn&&_e.log(`[Tracing] Starting ${h.op} transaction on scope`);const{location:u}=Et,f=sk(n,h,i,s,!0,{location:u},l,a);return a&&(Et.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(Et.document.readyState)&&f.sendAutoFinishSignal()}),["interactive","complete"].includes(Et.document.readyState)&&f.sendAutoFinishSignal()),f.registerBeforeFinishCallback(d=>{this._collectWebVitals(),MJ(d)}),f}_registerInteractionListener(){let t;const n=()=>{const{idleTimeout:r,finalTimeout:i,heartbeatInterval:s}=this.options,l="ui.action.click",a=Bh();if(a&&a.op&&["navigation","pageload"].includes(a.op)){sn&&_e.warn(`[Tracing] Did not create ${l} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.end(),t=void 0),!this._getCurrentHub){sn&&_e.warn(`[Tracing] Did not create ${l} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){sn&&_e.warn(`[Tracing] Did not create ${l} transaction because _latestRouteName is missing.`);return}const o=this._getCurrentHub(),{location:c}=Et,h={name:this._latestRouteName,op:l,trimEnd:!0,data:{[Mu]:this._latestRouteSource||"url"}};t=sk(o,h,r,i,!0,{location:c},s)};["click"].forEach(r=>{addEventListener(r,n,{once:!1,capture:!0})})}}function gk(e){const t=Uq(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function tZ(e){const t=e.attributes&&e.attributes[Mu],n=e.data&&e.data[Mu],r=e.metadata&&e.metadata.source;return t||n||r}const gt=Pt;let Tw=0;function AL(){return Tw>0}function nZ(){Tw++,setTimeout(()=>{Tw--})}function nh(e,t={},n){if(typeof e!="function")return e;try{const i=e.__sentry_wrapped__;if(i)return i;if(pT(e))return e}catch{return e}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const s=i.map(l=>nh(l,t));return e.apply(this,s)}catch(s){throw nZ(),tL(l=>{l.addEventProcessor(a=>(t.mechanism&&(hw(a,void 0,void 0),jd(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),bT(s)}),s}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}M8(r,e),Hl(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const Ci=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function RL(e,t){const n=IT(e,t),r={type:t&&t.name,value:oZ(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function rZ(e,t,n,r){const i=Kn(),s=i&&i.getOptions().normalizeDepth,l={exception:{values:[{type:Iy(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:cZ(t,{isUnhandledRejection:r})}]},extra:{__serialized__:z8(t,s)}};if(n){const a=IT(e,n);a.length&&(l.exception.values[0].stacktrace={frames:a})}return l}function Gb(e,t){return{exception:{values:[RL(e,t)]}}}function IT(e,t){const n=t.stacktrace||t.stack||"",r=sZ(t);try{return e(n,r)}catch{}return[]}const iZ=/Minified React error #\d+;/i;function sZ(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(iZ.test(e.message))return 1}return 0}function oZ(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function aZ(e,t,n,r){const i=n&&n.syntheticException||void 0,s=OT(e,t,i,r);return jd(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),eh(s)}function lZ(e,t,n="info",r,i){const s=r&&r.syntheticException||void 0,l=Ew(e,t,s,i);return l.level=n,r&&r.event_id&&(l.event_id=r.event_id),eh(l)}function OT(e,t,n,r,i){let s;if(uT(t)&&t.error)return Gb(e,t.error);if(MO(t)||kq(t)){const l=t;if("stack"in t)s=Gb(e,t);else{const a=l.name||(MO(l)?"DOMError":"DOMException"),o=l.message?`${a}: ${l.message}`:a;s=Ew(e,o,n,r),hw(s,o)}return"code"in l&&(s.tags={...s.tags,"DOMException.code":`${l.code}`}),s}return P8(t)?Gb(e,t):Zu(t)||Iy(t)?(s=rZ(e,t,n,i),jd(s,{synthetic:!0}),s):(s=Ew(e,t,n,r),hw(s,`${t}`,void 0),jd(s,{synthetic:!0}),s)}function Ew(e,t,n,r){const i={};if(r&&n){const s=IT(e,n);s.length&&(i.exception={values:[{value:t,stacktrace:{frames:s}}]})}if(hT(t)){const{__sentry_template_string__:s,__sentry_template_values__:l}=t;return i.logentry={message:s,params:l},i}return i.message=t,i}function cZ(e,{isUnhandledRejection:t}){const n=Xq(e),r=t?"promise rejection":"exception";return uT(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Iy(e)?`Event \`${uZ(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function uZ(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function hZ(e,{metadata:t,tunnel:n,dsn:r}){const i={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Fh(r)}},s=fZ(e);return jh(i,[s])}function fZ(e){return[{type:"user_report"},e]}class dZ extends zQ{constructor(t){const n=gt.SENTRY_SDK_SOURCE||mK();JQ(t,"browser",["browser"],n),super(t),t.sendClientReports&&gt.document&&gt.document.addEventListener("visibilitychange",()=>{gt.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return aZ(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return lZ(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){Ci&&_e.warn("SDK not enabled, will not capture user feedback.");return}const n=hZ(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){Ci&&_e.log("No outcomes to send");return}if(!this._dsn){Ci&&_e.log("No dsn provided, will not send outcomes");return}Ci&&_e.log("Sending outcomes:",t);const n=BK(t,this._options.tunnel&&Fh(this._dsn));this._sendEnvelope(n)}}let Vf;function pZ(){if(Vf)return Vf;if(gw(gt.fetch))return Vf=gt.fetch.bind(gt);const e=gt.document;let t=gt.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){Ci&&_e.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return Vf=t.bind(gt)}function gZ(){Vf=void 0}function mZ(e,t=pZ()){let n=0,r=0;function i(s){const l=s.body.length;n+=l,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then(o=>(n-=l,r--,{statusCode:o.status,headers:{"x-sentry-rate-limits":o.headers.get("X-Sentry-Rate-Limits"),"retry-after":o.headers.get("Retry-After")}}))}catch(o){return gZ(),n-=l,r--,mT(o)}}return yL(e,i)}const vZ=4;function yZ(e){function t(n){return new Nh((r,i)=>{const s=new XMLHttpRequest;s.onerror=i,s.onreadystatechange=()=>{s.readyState===vZ&&r({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",e.url);for(const l in e.headers)Object.prototype.hasOwnProperty.call(e.headers,l)&&s.setRequestHeader(l,e.headers[l]);s.send(n.body)})}return yL(e,t)}const By="?",_Z=30,bZ=40,SZ=50;function kT(e,t,n,r){const i={filename:e,function:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const xZ=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,wZ=/\((\S*)(?::(\d+))(?::(\d+))\)/,CZ=e=>{const t=xZ.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const s=wZ.exec(t[2]);s&&(t[2]=s[1],t[3]=s[2],t[4]=s[3])}const[r,i]=DL(t[1]||By,t[2]);return kT(i,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},TZ=[_Z,CZ],EZ=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,PZ=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,IZ=e=>{const t=EZ.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=PZ.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let r=t[3],i=t[1]||By;return[i,r]=DL(i,r),kT(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},OZ=[SZ,IZ],kZ=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,AZ=e=>{const t=kZ.exec(e);return t?kT(t[2],t[1]||By,+t[3],t[4]?+t[4]:void 0):void 0},RZ=[bZ,AZ],DZ=[TZ,OZ,RZ],MZ=N8(...DZ),DL=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:By,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Qg=1024,ML="Breadcrumbs",LZ=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:ML,setupOnce(){},setup(n){t.console&&Jq(jZ(n)),t.dom&&tK(NZ(n,t.dom)),t.xhr&&H8(BZ(n)),t.fetch&&$8(UZ(n)),t.history&&gT($Z(n)),t.sentry&&n.on&&n.on("beforeSendEvent",FZ(n))}}},LL=LZ;Va(ML,LL);function FZ(e){return function(n){Kn()===e&&Wl({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:ia(n)},{event:n})}}function NZ(e,t){return function(r){if(Kn()!==e)return;let i,s,l=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Qg&&(Ci&&_e.warn(`\`dom.maxStringLength\` cannot exceed ${Qg}, but a value of ${a} was configured. Sentry will use ${Qg} instead.`),a=Qg),typeof l=="string"&&(l=[l]);try{const c=r.event,h=GZ(c)?c.target:c;i=Nd(h,{keyAttrs:l,maxStringLength:a}),s=A8(h)}catch{i="<unknown>"}if(i.length===0)return;const o={category:`ui.${r.name}`,message:i};s&&(o.data={"ui.component_name":s}),Wl(o,{event:r.event,name:r.name,global:r.global})}}function jZ(e){return function(n){if(Kn()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:CK(n.level),message:LO(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${LO(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Wl(r,{input:n.args,level:n.level})}}function BZ(e){return function(n){if(Kn()!==e)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[cu];if(!r||!i||!s)return;const{method:l,url:a,status_code:o,body:c}=s,h={method:l,url:a,status_code:o},u={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i};Wl({category:"xhr",data:h,type:"http"},u)}}function UZ(e){return function(n){if(Kn()!==e)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const s=n.fetchData,l={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};Wl({category:"fetch",data:s,level:"error",type:"http"},l)}else{const s=n.response,l={...n.fetchData,status_code:s&&s.status},a={input:n.args,response:s,startTimestamp:r,endTimestamp:i};Wl({category:"fetch",data:l,type:"http"},a)}}}function $Z(e){return function(n){if(Kn()!==e)return;let r=n.from,i=n.to;const s=s0(gt.location.href);let l=r?s0(r):void 0;const a=s0(i);(!l||!l.path)&&(l=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===l.protocol&&s.host===l.host&&(r=l.relative),Wl({category:"navigation",data:{from:r,to:i}})}}function GZ(e){return!!e&&!!e.target}const FL="Dedupe",VZ=()=>{let e;return{name:FL,setupOnce(){},processEvent(t){if(t.type)return t;try{if(HZ(t,e))return Ci&&_e.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},NL=VZ;Va(FL,NL);function HZ(e,t){return t?!!(zZ(e,t)||WZ(e,t)):!1}function zZ(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!BL(e,t)||!jL(e,t))}function WZ(e,t){const n=mk(t),r=mk(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!BL(e,t)||!jL(e,t))}function jL(e,t){let n=vk(e),r=vk(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],l=n[i];if(s.filename!==l.filename||s.lineno!==l.lineno||s.colno!==l.colno||s.function!==l.function)return!1}return!0}function BL(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function mk(e){return e.exception&&e.exception.values&&e.exception.values[0]}function vk(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const UL="GlobalHandlers",YZ=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:UL,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(XZ(n),yk("onerror")),t.onunhandledrejection&&(qZ(n),yk("onunhandledrejection"))}}},$L=YZ;Va(UL,$L);function XZ(e){G8(t=>{const{stackParser:n,attachStacktrace:r}=VL();if(Kn()!==e||AL())return;const{msg:i,url:s,line:l,column:a,error:o}=t,c=o===void 0&&Is(i)?JZ(i,s,l,a):GL(OT(n,o||i,void 0,r,!1),s,l,a);c.level="error",eL(c,{originalException:o,mechanism:{handled:!1,type:"onerror"}})})}function qZ(e){V8(t=>{const{stackParser:n,attachStacktrace:r}=VL();if(Kn()!==e||AL())return;const i=KZ(t),s=fT(i)?QZ(i):OT(n,i,void 0,r,!0);s.level="error",eL(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function KZ(e){if(fT(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return e}function QZ(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function JZ(e,t,n,r){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=uT(e)?e.message:e,l="Error";const a=s.match(i);return a&&(l=a[1],s=a[2]),GL({exception:{values:[{type:l,value:s}]}},t,n,r)}function GL(e,t,n,r){const i=e.exception=e.exception||{},s=i.values=i.values||[],l=s[0]=s[0]||{},a=l.stacktrace=l.stacktrace||{},o=a.frames=a.frames||[],c=isNaN(parseInt(r,10))?void 0:r,h=isNaN(parseInt(n,10))?void 0:n,u=Is(t)&&t.length>0?t:Bq();return o.length===0&&o.push({colno:c,filename:u,function:"?",in_app:!0,lineno:h}),e}function yk(e){Ci&&_e.log(`Global Handler attached: ${e}`)}function VL(){const e=Kn();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const HL="HttpContext",ZZ=()=>({name:HL,setupOnce(){},preprocessEvent(e){if(!gt.navigator&&!gt.location&&!gt.document)return;const t=e.request&&e.request.url||gt.location&&gt.location.href,{referrer:n}=gt.document||{},{userAgent:r}=gt.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:i};e.request=s}}),zL=ZZ;Va(HL,zL);const eee="cause",tee=5,WL="LinkedErrors",nee=(e={})=>{const t=e.limit||tee,n=e.key||eee;return{name:WL,setupOnce(){},preprocessEvent(r,i,s){const l=s.getOptions();Lq(RL,l.stackParser,l.maxValueLength,n,t,r,i)}}},YL=nee;Va(WL,YL);const ree=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],XL="TryCatch",iee=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:XL,setupOnce(){t.setTimeout&&Zn(gt,"setTimeout",_k),t.setInterval&&Zn(gt,"setInterval",_k),t.requestAnimationFrame&&Zn(gt,"requestAnimationFrame",see),t.XMLHttpRequest&&"XMLHttpRequest"in gt&&Zn(XMLHttpRequest.prototype,"send",oee);const n=t.eventTarget;n&&(Array.isArray(n)?n:ree).forEach(aee)}}},qL=iee;Va(XL,qL);function _k(e){return function(...t){const n=t[0];return t[0]=nh(n,{mechanism:{data:{function:yo(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function see(e){return function(t){return e.apply(this,[nh(t,{mechanism:{data:{function:"requestAnimationFrame",handler:yo(e)},handled:!1,type:"instrument"}})])}}function oee(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&Zn(n,i,function(s){const l={mechanism:{data:{function:i,handler:yo(s)},handled:!1,type:"instrument"}},a=pT(s);return a&&(l.mechanism.data.handler=yo(a)),nh(s,l)})}),e.apply(this,t)}}function aee(e){const t=gt,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(Zn(n,"addEventListener",function(r){return function(i,s,l){try{typeof s.handleEvent=="function"&&(s.handleEvent=nh(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:yo(s),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,nh(s,{mechanism:{data:{function:"addEventListener",handler:yo(s),target:e},handled:!1,type:"instrument"}}),l])}}),Zn(n,"removeEventListener",function(r){return function(i,s,l){const a=s;try{const o=a&&a.__sentry_wrapped__;o&&r.call(this,i,o,l)}catch{}return r.call(this,i,a,l)}}))}const lee=[bL(),xL(),qL(),LL(),$L(),YL(),NL(),zL()];function cee(e){return[...lee]}function uee(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=cee()),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),gt.SENTRY_RELEASE&&gt.SENTRY_RELEASE.id&&(e.release=gt.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t={...e,stackParser:Kq(e.stackParser||MZ),integrations:BQ(e),transport:e.transport||(U8()?mZ:yZ)};XQ(dZ,t),e.autoSessionTracking&&hee()}const bk=(e={},t=ti())=>{if(!gt.document){Ci&&_e.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=t.getStackTop(),i=e.dsn||n&&n.getDsn();if(!i){Ci&&_e.error("DSN not configured for showReportDialog call");return}r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const s=gt.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=NQ(i,e),e.onLoad&&(s.onload=e.onLoad);const{onClose:l}=e;if(l){const o=c=>{if(c.data==="__sentry_reportdialog_closed__")try{l()}finally{gt.removeEventListener("message",o)}};gt.addEventListener("message",o)}const a=gt.document.head||gt.document.body;a?a.appendChild(s):Ci&&_e.error("Not injecting report dialog. No injection point found in HTML")};function hee(){if(typeof gt.document>"u"){Ci&&_e.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}JO({ignoreDuration:!0}),ZO(),gT(({from:e,to:t})=>{e!==void 0&&e!==t&&(JO({ignoreDuration:!0}),ZO())})}const KL=Object.prototype.toString;function fee(e){switch(KL.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Uy(e,Error)}}function AT(e,t){return KL.call(e)===`[object ${t}]`}function Ll(e){return AT(e,"String")}function RT(e){return AT(e,"Object")}function dee(e){return typeof Event<"u"&&Uy(e,Event)}function pee(e){return typeof Element<"u"&&Uy(e,Element)}function gee(e){return AT(e,"RegExp")}function DT(e){return!!(e&&e.then&&typeof e.then=="function")}function mee(e){return RT(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function vee(e){return typeof e=="number"&&e!==e}function Uy(e,t){try{return e instanceof t}catch{return!1}}function yee(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Vb(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function _ee(e,t,n=!1){return Ll(e)?gee(t)?t.test(e):Ll(t)?n?e===t:e.includes(t):!1:!1}function bee(e,t=[],n=!1){return t.some(r=>_ee(e,r,n))}function Jg(e){return e&&e.Math==Math?e:void 0}const mn=typeof globalThis=="object"&&Jg(globalThis)||typeof window=="object"&&Jg(window)||typeof self=="object"&&Jg(self)||typeof global=="object"&&Jg(global)||function(){return this}()||{};function MT(){return mn}function QL(e,t,n){const r=n||mn,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}const See=MT(),xee=80;function LT(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let s=0,l=0;const a=" > ",o=a.length;let c;const h=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||xee;for(;n&&s++<r&&(c=wee(n,h),!(c==="html"||s>1&&l+i.length*o+c.length>=u));)i.push(c),l+=c.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function wee(e,t){const n=e,r=[];let i,s,l,a,o;if(!n||!n.tagName)return"";if(See.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const c=t&&t.length?t.filter(u=>n.getAttribute(u)).map(u=>[u,n.getAttribute(u)]):null;if(c&&c.length)c.forEach(u=>{r.push(`[${u[0]}="${u[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&Ll(i))for(s=i.split(/\s+/),o=0;o<s.length;o++)r.push(`.${s[o]}`);const h=["aria-label","type","name","title","alt"];for(o=0;o<h.length;o++)l=h[o],a=n.getAttribute(l),a&&r.push(`[${l}="${a}"]`);return r.join("")}const $y=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Cee="Sentry Logger ",Sk=["debug","info","warn","error","log","assert","trace"],xk={};function $d(e){if(!("console"in mn))return e();const t=mn.console,n={},r=Object.keys(xk);r.forEach(i=>{const s=xk[i];n[i]=t[i],t[i]=s});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function Tee(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return $y?Sk.forEach(n=>{t[n]=(...r)=>{e&&$d(()=>{mn.console[n](`${Cee}[${n}]:`,...r)})}}):Sk.forEach(n=>{t[n]=()=>{}}),t}const mt=Tee();function Eee(e,t=!1){const{host:n,path:r,pass:i,port:s,projectId:l,protocol:a,publicKey:o}=e;return`${a}://${o}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${l}`}function bs(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);typeof i=="function"&&Pee(i,r),e[t]=i}function Pw(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{$y&&mt.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Pee(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Pw(e,"__sentry_original__",t)}catch{}}function Iee(e){if(fee(e))return{message:e.message,name:e.name,stack:e.stack,...Ck(e)};if(dee(e)){const t={type:e.type,target:wk(e.target),currentTarget:wk(e.currentTarget),...Ck(e)};return typeof CustomEvent<"u"&&Uy(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function wk(e){try{return pee(e)?LT(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Ck(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Ss(e){return Iw(e,new Map)}function Iw(e,t){if(Oee(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const i of Object.keys(e))typeof e[i]<"u"&&(r[i]=Iw(e[i],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(i=>{r.push(Iw(i,t))}),r}return e}function Oee(e){if(!RT(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const Hb="<anonymous>";function FT(e){try{return!e||typeof e!="function"?Hb:e.name||Hb}catch{return Hb}}const l0={},Tk={};function Gy(e,t){l0[e]=l0[e]||[],l0[e].push(t)}function Vy(e,t){Tk[e]||(t(),Tk[e]=!0)}function ba(e,t){const n=e&&l0[e];if(n)for(const r of n)try{r(t)}catch(i){$y&&mt.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${FT(r)}
Error:`,i)}}function qr(){const e=mn,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function kee(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Aee(e,t){const n=kee(e);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){const s={...i&&i.data,...t.data};n.mechanism.data=s}}function Ree(e){return Array.isArray(e)?e:[e]}const zc=mn,Dee=1e3;let Ek,Ow,kw;function Mee(e){const t="dom";Gy(t,e),Vy(t,Lee)}function Lee(){if(!zc.document)return;const e=ba.bind(null,"dom"),t=Pk(e,!0);zc.document.addEventListener("click",t,!1),zc.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=zc[n]&&zc[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(bs(r,"addEventListener",function(i){return function(s,l,a){if(s==="click"||s=="keypress")try{const o=this,c=o.__sentry_instrumentation_handlers__=o.__sentry_instrumentation_handlers__||{},h=c[s]=c[s]||{refCount:0};if(!h.handler){const u=Pk(e);h.handler=u,i.call(this,s,u,a)}h.refCount++}catch{}return i.call(this,s,l,a)}}),bs(r,"removeEventListener",function(i){return function(s,l,a){if(s==="click"||s=="keypress")try{const o=this,c=o.__sentry_instrumentation_handlers__||{},h=c[s];h&&(h.refCount--,h.refCount<=0&&(i.call(this,s,h.handler,a),h.handler=void 0,delete c[s]),Object.keys(c).length===0&&delete o.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,l,a)}}))})}function Fee(e){if(e.type!==Ow)return!1;try{if(!e.target||e.target._sentryId!==kw)return!1}catch{}return!0}function Nee(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function Pk(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=jee(n);if(Nee(n.type,r))return;Pw(n,"_sentryCaptured",!0),r&&!r._sentryId&&Pw(r,"_sentryId",qr());const i=n.type==="keypress"?"input":n.type;Fee(n)||(e({event:n,name:i,global:t}),Ow=n.type,kw=r?r._sentryId:void 0),clearTimeout(Ek),Ek=zc.setTimeout(()=>{kw=void 0,Ow=void 0},Dee)}}function jee(e){try{return e.target}catch{return null}}const Aw=MT();function Bee(){if(!("fetch"in Aw))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Ik(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Uee(){if(typeof EdgeRuntime=="string")return!0;if(!Bee())return!1;if(Ik(Aw.fetch))return!0;let e=!1;const t=Aw.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Ik(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){$y&&mt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function $ee(e){const t="fetch";Gy(t,e),Vy(t,Gee)}function Gee(){Uee()&&bs(mn,"fetch",function(e){return function(...t){const{method:n,url:r}=Vee(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return ba("fetch",{...i}),e.apply(mn,t).then(s=>{const l={...i,endTimestamp:Date.now(),response:s};return ba("fetch",l),s},s=>{const l={...i,endTimestamp:Date.now(),error:s};throw ba("fetch",l),s})}})}function Rw(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Ok(e){return typeof e=="string"?e:e?Rw(e,"url")?e.url:e.toString?e.toString():"":""}function Vee(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Ok(n),method:Rw(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Ok(t),method:Rw(t,"method")?String(t.method).toUpperCase():"GET"}}const Zg=MT();function Hee(){const e=Zg.chrome,t=e&&e.app&&e.app.runtime,n="history"in Zg&&!!Zg.history.pushState&&!!Zg.history.replaceState;return!t&&n}const Cf=mn;let em;function zee(e){const t="history";Gy(t,e),Vy(t,Wee)}function Wee(){if(!Hee())return;const e=Cf.onpopstate;Cf.onpopstate=function(...n){const r=Cf.location.href,i=em;if(em=r,ba("history",{from:i,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=em,l=String(i);em=l,ba("history",{from:s,to:l})}return n.apply(this,r)}}bs(Cf.history,"pushState",t),bs(Cf.history,"replaceState",t)}const Yee=mn,fu="__sentry_xhr_v3__";function Xee(e){const t="xhr";Gy(t,e),Vy(t,qee)}function qee(){if(!Yee.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;bs(e,"open",function(t){return function(...n){const r=Date.now(),i=Ll(n[0])?n[0].toUpperCase():void 0,s=Kee(n[1]);if(!i||!s)return t.apply(this,n);this[fu]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const l=()=>{const a=this[fu];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const o={args:[i,s],endTimestamp:Date.now(),startTimestamp:r,xhr:this};ba("xhr",o)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?bs(this,"onreadystatechange",function(a){return function(...o){return l(),a.apply(this,o)}}):this.addEventListener("readystatechange",l),bs(this,"setRequestHeader",function(a){return function(...o){const[c,h]=o,u=this[fu];return u&&Ll(c)&&Ll(h)&&(u.request_headers[c.toLowerCase()]=h),a.apply(this,o)}}),t.apply(this,n)}}),bs(e,"send",function(t){return function(...n){const r=this[fu];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const i={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return ba("xhr",i),t.apply(this,n)}})}function Kee(e){if(Ll(e))return e;try{return e.toString()}catch{}}function Qee(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Jee(){return!Qee()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function kk(){return typeof window<"u"&&(!Jee()||Zee())}function Zee(){return mn.process!==void 0&&mn.process.type==="renderer"}function ete(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let s=0;s<t.length;s++)if(t[s]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let s=0;s<t.length;s++)if(t[s]===i){t.splice(s,1);break}}return[n,r]}function qo(e,t=100,n=1/0){try{return Dw("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Dw(e,t,n=1/0,r=1/0,i=ete()){const[s,l]=i;if(t==null||["number","boolean","string"].includes(typeof t)&&!vee(t))return t;const a=tte(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const o=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(o===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const d=c.toJSON();return Dw("",d,o-1,r,i)}catch{}const h=Array.isArray(t)?[]:{};let u=0;const f=Iee(t);for(const d in f){if(!Object.prototype.hasOwnProperty.call(f,d))continue;if(u>=r){h[d]="[MaxProperties ~]";break}const p=f[d];h[d]=Dw(d,p,o-1,r,i),u++}return l(t),h}function tte(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(yee(t))return"[VueViewModel]";if(mee(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${FT(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=nte(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function nte(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}var zs;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(zs||(zs={}));class Ko{constructor(t){Ko.prototype.__init.call(this),Ko.prototype.__init2.call(this),Ko.prototype.__init3.call(this),Ko.prototype.__init4.call(this),this._state=zs.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new Ko((r,i)=>{this._handlers.push([!1,s=>{if(!t)r(s);else try{r(t(s))}catch(l){i(l)}},s=>{if(!n)i(s);else try{r(n(s))}catch(l){i(l)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Ko((n,r)=>{let i,s;return this.then(l=>{s=!1,i=l,t&&t()},l=>{s=!0,i=l,t&&t()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=t=>{this._setResult(zs.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(zs.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===zs.PENDING){if(DT(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===zs.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===zs.RESOLVED&&n[1](this._value),this._state===zs.REJECTED&&n[2](this._value),n[0]=!0)})}}}const JL=1e3;function Hy(){return Date.now()/JL}function rte(){const{performance:e}=mn;if(!e||!e.now)return Hy;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/JL}const ZL=rte(),ite=(()=>{const{performance:e}=mn;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=i<t,l=e.timing&&e.timing.navigationStart,o=typeof l=="number"?Math.abs(l+n-r):t,c=o<t;return s||c?i<=o?e.timeOrigin:l:r})();function ste(e,t=[]){return[e,t]}function ote(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function ate(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Eee(r)},...i&&{trace:Ss({...i})}}}const lte=60*1e3;function cte(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?lte:r-t}function ute(e,t){return e[t]||e.all||0}function hte(e,t,n=Date.now()){return ute(e,t)>n}function fte(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},s=n&&n["x-sentry-rate-limits"],l=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[o,c]=a.split(":",2),h=parseInt(o,10),u=(isNaN(h)?60:h)*1e3;if(!c)i.all=r+u;else for(const f of c.split(";"))i[f]=r+u}else l?i.all=r+cte(l,r):t===429&&(i.all=r+60*1e3);return i}function dte(e,t){return e??t()}function zb(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...l)=>n.call(t,...l)),t=void 0)}return n}const c0=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,NT="production";function e9(){return QL("globalEventProcessors",()=>[])}function av(e,t,n,r=0){return new Ko((i,s)=>{const l=e[r];if(t===null||typeof l!="function")i(t);else{const a=l({...t},n);c0&&l.id&&a===null&&mt.log(`Event processor "${l.id}" dropped event`),DT(a)?a.then(o=>av(e,o,n,r+1).then(i)).then(null,s):av(e,a,n,r+1).then(i).then(null,s)}})}function pte(e){const t=ZL(),n={sid:qr(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>mte(n)};return e&&zy(n,e),n}function zy(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ZL(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:qr()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function gte(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),zy(e,n)}function mte(e){return Ss({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const vte=1;function yte(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:s,status:l,tags:a,origin:o}=Yl(e);return Ss({data:r,op:i,parent_span_id:s,span_id:t,status:l,tags:a,trace_id:n,origin:o})}function Yl(e){return _te(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function _te(e){return typeof e.getSpanJSON=="function"}function bte(e){const{traceFlags:t}=e.spanContext();return!!(t&vte)}function Ste(e,t,n,r,i,s){const{normalizeDepth:l=3,normalizeMaxBreadth:a=1e3}=e,o={...t,event_id:t.event_id||n.event_id||qr(),timestamp:t.timestamp||Hy()},c=n.integrations||e.integrations.map(g=>g.name);xte(o,e),Tte(o,c),t.type===void 0&&wte(o,e.stackParser);const h=Pte(r,n.captureContext);n.mechanism&&Aee(o,n.mechanism);const u=i&&i.getEventProcessors?i.getEventProcessors():[],f=Gte().getScopeData();if(s){const g=s.getScopeData();Rk(f,g)}if(h){const g=h.getScopeData();Rk(f,g)}const d=[...n.attachments||[],...f.attachments];d.length&&(n.attachments=d),r9(o,f);const p=[...u,...e9(),...f.eventProcessors];return av(p,o,n).then(g=>(g&&Cte(g),typeof l=="number"&&l>0?Ete(g,l,a):g))}function xte(e,t){const{environment:n,release:r,dist:i,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:NT),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=Vb(e.message,s));const l=e.exception&&e.exception.values&&e.exception.values[0];l&&l.value&&(l.value=Vb(l.value,s));const a=e.request;a&&a.url&&(a.url=Vb(a.url,s))}const Ak=new WeakMap;function wte(e,t){const n=mn._sentryDebugIds;if(!n)return;let r;const i=Ak.get(t);i?r=i:(r=new Map,Ak.set(t,r));const s=Object.keys(n).reduce((l,a)=>{let o;const c=r.get(a);c?o=c:(o=t(a),r.set(a,o));for(let h=o.length-1;h>=0;h--){const u=o[h];if(u.filename){l[u.filename]=n[a];break}}return l},{});try{e.exception.values.forEach(l=>{l.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function Cte(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function Tte(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function Ete(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:qo(i.data,t,n)}}))},...e.user&&{user:qo(e.user,t,n)},...e.contexts&&{contexts:qo(e.contexts,t,n)},...e.extra&&{extra:qo(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=qo(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>{const s=Yl(i).data;return s&&(i.data=qo(s,t,n)),i})),r}function Pte(e,t){if(!t)return e;const n=e?e.clone():new xs;return n.update(t),n}function Ite(e){if(e)return Ote(e)?{captureContext:e}:Ate(e)?{captureContext:e}:e}function Ote(e){return e instanceof xs||typeof e=="function"}const kte=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Ate(e){return Object.keys(e).some(t=>kte.includes(t))}function t9(e,t){return Uh().captureException(e,Ite(t))}function Rte(e,t){Uh().addBreadcrumb(e,t)}function Dte(e,t){Uh().setContext(e,t)}function rs(){return Uh().getClient()}function Wy(){return Uh().getScope()}function n9(e){return e.transaction}function Mte(e,t,n){const r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},l=Ss({environment:r.environment||NT,release:r.release,user_segment:s,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",l),l}function Lte(e){const t=rs();if(!t)return{};const n=Mte(Yl(e).trace_id||"",t,Wy()),r=n9(e);if(!r)return n;const i=r&&r._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:s,source:l}=r.metadata;s!=null&&(n.sample_rate=`${s}`);const a=Yl(r);return l&&l!=="url"&&(n.transaction=a.description),n.sampled=String(bte(r)),t.emit&&t.emit("createDsc",n),n}function r9(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=t;Fte(e,t),r&&Bte(e,r),Ute(e,n),Nte(e,i),jte(e,s)}function Rk(e,t){const{extra:n,tags:r,user:i,contexts:s,level:l,sdkProcessingMetadata:a,breadcrumbs:o,fingerprint:c,eventProcessors:h,attachments:u,propagationContext:f,transactionName:d,span:p}=t;Tf(e,"extra",n),Tf(e,"tags",r),Tf(e,"user",i),Tf(e,"contexts",s),Tf(e,"sdkProcessingMetadata",a),l&&(e.level=l),d&&(e.transactionName=d),p&&(e.span=p),o.length&&(e.breadcrumbs=[...e.breadcrumbs,...o]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),h.length&&(e.eventProcessors=[...e.eventProcessors,...h]),u.length&&(e.attachments=[...e.attachments,...u]),e.propagationContext={...e.propagationContext,...f}}function Tf(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function Fte(e,t){const{extra:n,tags:r,user:i,contexts:s,level:l,transactionName:a}=t,o=Ss(n);o&&Object.keys(o).length&&(e.extra={...o,...e.extra});const c=Ss(r);c&&Object.keys(c).length&&(e.tags={...c,...e.tags});const h=Ss(i);h&&Object.keys(h).length&&(e.user={...h,...e.user});const u=Ss(s);u&&Object.keys(u).length&&(e.contexts={...u,...e.contexts}),l&&(e.level=l),a&&(e.transaction=a)}function Nte(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function jte(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function Bte(e,t){e.contexts={trace:yte(t),...e.contexts};const n=n9(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Lte(t),...e.sdkProcessingMetadata};const r=Yl(n).description;r&&(e.tags={transaction:r,...e.tags})}}function Ute(e,t){e.fingerprint=e.fingerprint?Ree(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const $te=100;let Wb;class xs{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Dk()}static clone(t){return t?t.clone():new xs}clone(){const t=new xs;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&zy(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const n=t(this);return n instanceof xs?n:this}return t instanceof xs?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):RT(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Dk(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:$te;if(r<=0)return this;const i={timestamp:Hy(),...t},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:i,_extra:s,_user:l,_level:a,_fingerprint:o,_eventProcessors:c,_propagationContext:h,_sdkProcessingMetadata:u,_transactionName:f,_span:d}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:i,extra:s,user:l,level:a,fingerprint:o||[],eventProcessors:c,propagationContext:h,sdkProcessingMetadata:u,transactionName:f,span:d}}applyToEvent(t,n={},r=[]){r9(t,this.getScopeData());const i=[...r,...e9(),...this._eventProcessors];return av(i,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:qr();if(!this._client)return mt.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureMessage(t,n,r){const i=r&&r.event_id?r.event_id:qr();if(!this._client)return mt.warn("No client configured on scope - will not capture message!"),i;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i},this),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:qr();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(mt.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Gte(){return Wb||(Wb=new xs),Wb}function Dk(){return{traceId:qr(),spanId:qr().substring(16)}}const Vte="7.100.1",i9=parseFloat(Vte),Hte=100;class s9{constructor(t,n,r,i=i9){this._version=i;let s;n?s=n:(s=new xs,s.setClient(t));let l;r?l=r:(l=new xs,l.setClient(t)),this._stack=[{scope:s}],t&&this.bindClient(t),this._isolationScope=l}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(i){throw this.popScope(),i}return DT(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:qr(),i=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:i,...n,event_id:r}),r}captureMessage(t,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:qr(),s=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i}),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:qr();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:l=Hte}=i.getOptions&&i.getOptions()||{};if(l<=0)return;const o={timestamp:Hy(),...t},c=s?$d(()=>s(o,n)):o;c!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",c,n),r.addBreadcrumb(c,l))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=Mk(this);try{t(this)}finally{Mk(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return c0&&mt.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return c0&&!r&&(this.getClient()?mt.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):mt.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&gte(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=NT}=r&&r.getOptions()||{},{userAgent:l}=mn.navigator||{},a=pte({release:i,environment:s,user:n.getUser(),...l&&{userAgent:l},...t}),o=n.getSession&&n.getSession();return o&&o.status==="ok"&&zy(o,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(t,...n){const i=Yy().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,n);c0&&mt.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function Yy(){return mn.__SENTRY__=mn.__SENTRY__||{extensions:{},hub:void 0},mn}function Mk(e){const t=Yy(),n=Mw(t);return o9(t,e),n}function Uh(){const e=Yy();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return Wte(e)}function zte(){return Uh().getIsolationScope()}function Wte(e=Yy()){return(!Yte(e)||Mw(e).isOlderThan(i9))&&o9(e,new s9),Mw(e)}function Yte(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Mw(e){return QL("hub",()=>new s9,e)}function o9(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}const Xte="sentry.source";function qte(e){const t=rs();!t||!t.addEventProcessor||t.addEventProcessor(e)}function Kte(e,t){const n=t&&Zte(t)?t.getClient():t,r=n&&n.getDsn(),i=n&&n.getOptions().tunnel;return Jte(e,r)||Qte(e,i)}function Qte(e,t){return t?Lk(e)===Lk(t):!1}function Jte(e,t){return t?e.includes(t.host):!1}function Lk(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Zte(e){return e.getClient!==void 0}const ene=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,to=mn,tne=(e,t,n)=>{let r,i;return s=>{t.value>=0&&(s||n)&&(i=t.value-(r||0),(i||r===void 0)&&(r=t.value,t.delta=i,e(t)))}},nne=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,rne=()=>{const e=to.performance.timing,t=to.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},a9=()=>to.__WEB_VITALS_POLYFILL__?to.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||rne()):to.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],l9=()=>{const e=a9();return e&&e.activationStart||0},ine=(e,t)=>{const n=a9();let r="navigate";return n&&(to.document.prerendering||l9()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:nne(),navigationType:r}},c9=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(i=>{t(i.getEntries())});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},u9=(e,t)=>{const n=r=>{(r.type==="pagehide"||to.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)};let u0=-1;const sne=()=>to.document.visibilityState==="hidden"&&!to.document.prerendering?0:1/0,one=()=>{u9(({timeStamp:e})=>{u0=e},!0)},ane=()=>(u0<0&&(u0=sne(),one()),{get firstHiddenTime(){return u0}}),Fk={},lne=e=>{const t=ane(),n=ine("LCP");let r;const i=l=>{const a=l[l.length-1];if(a){const o=Math.max(a.startTime-l9(),0);o<t.firstHiddenTime&&(n.value=o,n.entries=[a],r())}},s=c9("largest-contentful-paint",i);if(s){r=tne(e,n);const l=()=>{Fk[n.id]||(i(s.takeRecords()),s.disconnect(),Fk[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,l,{once:!0,capture:!0})}),u9(l,!0),l}},rd={},lv={};let h9;function cne(e,t=!1){return fne("lcp",e,hne,h9,t)}function une(e,t){return d9(e,t),lv[e]||(dne(e),lv[e]=!0),p9(e,t)}function f9(e,t){const n=rd[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(i){ene&&mt.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${FT(r)}
Error:`,i)}}function hne(){return lne(e=>{f9("lcp",{metric:e}),h9=e})}function fne(e,t,n,r,i=!1){d9(e,t);let s;return lv[e]||(s=n(),lv[e]=!0),r&&t({metric:r}),p9(e,t,i?s:void 0)}function dne(e){const t={};e==="event"&&(t.durationThreshold=0),c9(e,n=>{f9(e,{entries:n})},t)}function d9(e,t){rd[e]=rd[e]||[],rd[e].push(t)}function p9(e,t,n){return()=>{n&&n();const r=rd[e];if(!r)return;const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}const Ht=mn,jT="sentryReplaySession",pne="replay_event",BT="Unable to send Replay",gne=3e5,mne=9e5,vne=5e3,yne=5500,_ne=6e4,bne=5e3,Sne=3,Nk=15e4,tm=5e3,xne=3e3,wne=300,UT=2e7,Cne=4999,Tne=15e3,jk=36e5;function Ene(e,t){return e??t()}function cv(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...l)=>n.call(t,...l)),t=void 0)}return n}var $n;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})($n||($n={}));function Pne(e){return e.nodeType===e.ELEMENT_NODE}function id(e){const t=cv([e,"optionalAccess",n=>n.host]);return cv([t,"optionalAccess",n=>n.shadowRoot])===e}function sd(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Ine(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function One(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function uv(e){try{const t=e.rules||e.cssRules;return t?Ine(Array.from(t,g9).join("")):null}catch{return null}}function g9(e){let t;if(Ane(e))try{t=uv(e.styleSheet)||One(e)}catch{}else if(Rne(e)&&e.selectorText.includes(":"))return kne(e.cssText);return t||e.cssText}function kne(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function Ane(e){return"styleSheet"in e}function Rne(e){return"selectorText"in e}class m9{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;const n=cv([this,"access",r=>r.getMeta,"call",r=>r(t),"optionalAccess",r=>r.id]);return Ene(n,()=>-1)}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(n,i)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Dne(){return new m9}function Xy({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Gd({isMasked:e,element:t,value:n,maskInputFn:r}){let i=n||"";return e?(r&&(i=r(i,t)),"*".repeat(i.length)):i}function rh(e){return e.toLowerCase()}function Lw(e){return e.toUpperCase()}const Bk="__rrweb_original__";function Mne(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let i=0;i<e.height;i+=n){const s=t.getImageData,l=Bk in s?s[Bk]:s;if(new Uint32Array(l.call(t,r,i,Math.min(n,e.width-r),Math.min(n,e.height-i)).data.buffer).some(o=>o!==0))return!1}return!0}function $T(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?rh(t):null}function hv(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}let Lne=1;const Fne=new RegExp("[^a-z0-9-_:]"),Vd=-2;function GT(){return Lne++}function Nne(e){if(e instanceof HTMLFormElement)return"form";const t=rh(e.tagName);return Fne.test(t)?"div":t}function jne(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Mc,Uk;const Bne=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Une=/^(?:[a-z+]+:)?\/\//i,$ne=/^www\..*/i,Gne=/^(data:)([^,]*),(.*)/i;function fv(e,t){return(e||"").replace(Bne,(n,r,i,s,l,a)=>{const o=i||l||a,c=r||s||"";if(!o)return n;if(Une.test(o)||$ne.test(o))return`url(${c}${o}${c})`;if(Gne.test(o))return`url(${c}${o}${c})`;if(o[0]==="/")return`url(${c}${jne(t)+o}${c})`;const h=t.split("/"),u=o.split("/");h.pop();for(const f of u)f!=="."&&(f===".."?h.pop():h.push(f));return`url(${c}${h.join("/")}${c})`})}const Vne=/^[^ \t\n\r\u000c]+/,Hne=/^[, \t\n\r\u000c]+/;function zne(e,t){if(t.trim()==="")return t;let n=0;function r(s){let l;const a=s.exec(t.substring(n));return a?(l=a[0],n+=l.length,l):""}const i=[];for(;r(Hne),!(n>=t.length);){let s=r(Vne);if(s.slice(-1)===",")s=du(e,s.substring(0,s.length-1)),i.push(s);else{let l="";s=du(e,s);let a=!1;for(;;){const o=t.charAt(n);if(o===""){i.push((s+l).trim());break}else if(a)o===")"&&(a=!1);else if(o===","){n+=1,i.push((s+l).trim());break}else o==="("&&(a=!0);l+=o,n+=1}}}return i.join(", ")}function du(e,t){if(!t||t.trim()==="")return t;const n=e.createElement("a");return n.href=t,n.href}function Wne(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function VT(){const e=document.createElement("a");return e.href="",e.href}function v9(e,t,n,r,i,s){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?du(e,r):n==="srcset"?zne(e,r):n==="style"?fv(r,VT()):t==="object"&&n==="data"?du(e,r):typeof s=="function"?s(n,r,i):r)}function y9(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Yne(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let i=e.classList.length;i--;){const s=e.classList[i];if(t.test(s))return!0}if(n)return e.matches(n)}catch{}return!1}function Xne(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Ol(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Ol(e.parentNode,t,n,r+1)}function pu(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Xne(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function ih(e,t,n,r,i,s){try{const l=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(l===null)return!1;if(l.tagName==="INPUT"){const c=l.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(c))return!0}let a=-1,o=-1;if(s){if(o=Ol(l,pu(r,i)),o<0)return!0;a=Ol(l,pu(t,n),o>=0?o:1/0)}else{if(a=Ol(l,pu(t,n)),a<0)return!1;o=Ol(l,pu(r,i),a>=0?a:1/0)}return a>=0?o>=0?a<=o:!0:o>=0?!1:!!s}catch{}return!!s}function qne(e,t,n){const r=e.contentWindow;if(!r)return;let i=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const a=setTimeout(()=>{i||(t(),i=!0)},n);e.addEventListener("load",()=>{clearTimeout(a),i=!0,t()});return}const l="about:blank";if(r.location.href!==l||e.src===l||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function Kne(e,t,n){let r=!1,i;try{i=e.sheet}catch{return}if(i)return;const s=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(s),r=!0,t()})}function Qne(e,t){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:l,maskAllText:a,maskAttributeFn:o,maskTextClass:c,unmaskTextClass:h,maskTextSelector:u,unmaskTextSelector:f,inlineStylesheet:d,maskInputOptions:p={},maskTextFn:m,maskInputFn:g,dataURLOptions:v={},inlineImages:_,recordCanvas:y,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,x=Jne(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:$n.Document,childNodes:[],compatMode:e.compatMode}:{type:$n.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:$n.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:x};case e.ELEMENT_NODE:return ere(e,{doc:n,blockClass:i,blockSelector:s,unblockSelector:l,inlineStylesheet:d,maskAttributeFn:o,maskInputOptions:p,maskInputFn:g,dataURLOptions:v,inlineImages:_,recordCanvas:y,keepIframeSrcFn:b,newlyAddedElement:S,rootId:x,maskAllText:a,maskTextClass:c,unmaskTextClass:h,maskTextSelector:u,unmaskTextSelector:f});case e.TEXT_NODE:return Zne(e,{maskAllText:a,maskTextClass:c,unmaskTextClass:h,maskTextSelector:u,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:p,maskInputFn:g,rootId:x});case e.CDATA_SECTION_NODE:return{type:$n.CDATA,textContent:"",rootId:x};case e.COMMENT_NODE:return{type:$n.Comment,textContent:e.textContent||"",rootId:x};default:return!1}}function Jne(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function Zne(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:i,maskTextSelector:s,unmaskTextSelector:l,maskTextFn:a,maskInputOptions:o,maskInputFn:c,rootId:h}=t,u=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const d=u==="STYLE"?!0:void 0,p=u==="SCRIPT"?!0:void 0,m=u==="TEXTAREA"?!0:void 0;if(d&&f){try{e.nextSibling||e.previousSibling||cv([e,"access",v=>v.parentNode,"access",v=>v.sheet,"optionalAccess",v=>v.cssRules])&&(f=uv(e.parentNode.sheet))}catch(v){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${v}`,e)}f=fv(f,VT())}p&&(f="SCRIPT_PLACEHOLDER");const g=ih(e,r,s,i,l,n);if(!d&&!p&&!m&&f&&g&&(f=a?a(f):f.replace(/[\S]/g,"*")),m&&f&&(o.textarea||g)&&(f=c?c(f,e.parentNode):f.replace(/[\S]/g,"*")),u==="OPTION"&&f){const v=Xy({type:null,tagName:u,maskInputOptions:o});f=Gd({isMasked:ih(e,r,s,i,l,v),element:e,value:f,maskInputFn:c})}return{type:$n.Text,textContent:f||"",isStyle:d,rootId:h}}function ere(e,t){const{doc:n,blockClass:r,blockSelector:i,unblockSelector:s,inlineStylesheet:l,maskInputOptions:a={},maskAttributeFn:o,maskInputFn:c,dataURLOptions:h={},inlineImages:u,recordCanvas:f,keepIframeSrcFn:d,newlyAddedElement:p=!1,rootId:m,maskAllText:g,maskTextClass:v,unmaskTextClass:_,maskTextSelector:y,unmaskTextSelector:b}=t,S=Yne(e,r,i,s),x=Nne(e);let C={};const w=e.attributes.length;for(let I=0;I<w;I++){const R=e.attributes[I];R.name&&!y9(x,R.name,R.value)&&(C[R.name]=v9(n,x,rh(R.name),R.value,e,o))}if(x==="link"&&l){const I=Array.from(n.styleSheets).find(j=>j.href===e.href);let R=null;I&&(R=uv(I)),R&&(delete C.rel,delete C.href,C._cssText=fv(R,I.href))}if(x==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const I=uv(e.sheet);I&&(C._cssText=fv(I,VT()))}if(x==="input"||x==="textarea"||x==="select"||x==="option"){const I=e,R=$T(I),j=hv(I,Lw(x),R),G=I.checked;if(R!=="submit"&&R!=="button"&&j){const B=ih(I,v,y,_,b,Xy({type:R,tagName:Lw(x),maskInputOptions:a}));C.value=Gd({isMasked:B,element:I,value:j,maskInputFn:c})}G&&(C.checked=G)}if(x==="option"&&(e.selected&&!a.select?C.selected=!0:delete C.selected),x==="canvas"&&f){if(e.__context==="2d")Mne(e)||(C.rr_dataURL=e.toDataURL(h.type,h.quality));else if(!("__context"in e)){const I=e.toDataURL(h.type,h.quality),R=document.createElement("canvas");R.width=e.width,R.height=e.height;const j=R.toDataURL(h.type,h.quality);I!==j&&(C.rr_dataURL=I)}}if(x==="img"&&u){Mc||(Mc=n.createElement("canvas"),Uk=Mc.getContext("2d"));const I=e,R=I.crossOrigin;I.crossOrigin="anonymous";const j=()=>{I.removeEventListener("load",j);try{Mc.width=I.naturalWidth,Mc.height=I.naturalHeight,Uk.drawImage(I,0,0),C.rr_dataURL=Mc.toDataURL(h.type,h.quality)}catch(G){console.warn(`Cannot inline img src=${I.currentSrc}! Error: ${G}`)}R?C.crossOrigin=R:I.removeAttribute("crossorigin")};I.complete&&I.naturalWidth!==0?j():I.addEventListener("load",j)}if((x==="audio"||x==="video")&&(C.rr_mediaState=e.paused?"paused":"played",C.rr_mediaCurrentTime=e.currentTime),p||(e.scrollLeft&&(C.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(C.rr_scrollTop=e.scrollTop)),S){const{width:I,height:R}=e.getBoundingClientRect();C={class:C.class,rr_width:`${I}px`,rr_height:`${R}px`}}x==="iframe"&&!d(C.src)&&(e.contentDocument||(C.rr_src=C.src),delete C.src);let k;try{customElements.get(x)&&(k=!0)}catch{}return{type:$n.Element,tagName:x,attributes:C,childNodes:[],isSVG:Wne(e)||void 0,needBlock:S,rootId:m,isCustom:k}}function Vt(e){return e==null?"":e.toLowerCase()}function tre(e,t){if(t.comment&&e.type===$n.Comment)return!0;if(e.type===$n.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Vt(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Vt(e.attributes.name)==="application-name"||Vt(e.attributes.rel)==="icon"||Vt(e.attributes.rel)==="apple-touch-icon"||Vt(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Vt(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Vt(e.attributes.property).match(/^(og|twitter|fb):/)||Vt(e.attributes.name).match(/^(og|twitter):/)||Vt(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Vt(e.attributes.name)==="robots"||Vt(e.attributes.name)==="googlebot"||Vt(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Vt(e.attributes.name)==="author"||Vt(e.attributes.name)==="generator"||Vt(e.attributes.name)==="framework"||Vt(e.attributes.name)==="publisher"||Vt(e.attributes.name)==="progid"||Vt(e.attributes.property).match(/^article:/)||Vt(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Vt(e.attributes.name)==="google-site-verification"||Vt(e.attributes.name)==="yandex-verification"||Vt(e.attributes.name)==="csrf-token"||Vt(e.attributes.name)==="p:domain_verify"||Vt(e.attributes.name)==="verify-v1"||Vt(e.attributes.name)==="verification"||Vt(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function gu(e,t){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:l,maskAllText:a,maskTextClass:o,unmaskTextClass:c,maskTextSelector:h,unmaskTextSelector:u,skipChild:f=!1,inlineStylesheet:d=!0,maskInputOptions:p={},maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:_,dataURLOptions:y={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:x,onIframeLoad:C,iframeLoadTimeout:w=5e3,onStylesheetLoad:k,stylesheetLoadTimeout:I=5e3,keepIframeSrcFn:R=()=>!1,newlyAddedElement:j=!1}=t;let{preserveWhiteSpace:G=!0}=t;const B=Qne(e,{doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:l,maskTextClass:o,unmaskTextClass:c,maskTextSelector:h,unmaskTextSelector:u,inlineStylesheet:d,maskInputOptions:p,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,dataURLOptions:y,inlineImages:b,recordCanvas:S,keepIframeSrcFn:R,newlyAddedElement:j});if(!B)return console.warn(e,"not serialized"),null;let $;r.hasNode(e)?$=r.getId(e):tre(B,_)||!G&&B.type===$n.Text&&!B.isStyle&&!B.textContent.replace(/^\s+|\s+$/gm,"").length?$=Vd:$=GT();const V=Object.assign(B,{id:$});if(r.add(e,V),$===Vd)return null;x&&x(e);let W=!f;if(V.type===$n.Element){W=W&&!V.needBlock,delete V.needBlock;const M=e.shadowRoot;M&&sd(M)&&(V.isShadowHost=!0)}if((V.type===$n.Document||V.type===$n.Element)&&W){_.headWhitespace&&V.type===$n.Element&&V.tagName==="head"&&(G=!1);const M={doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:l,maskTextClass:o,unmaskTextClass:c,maskTextSelector:h,unmaskTextSelector:u,skipChild:f,inlineStylesheet:d,maskInputOptions:p,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:_,dataURLOptions:y,inlineImages:b,recordCanvas:S,preserveWhiteSpace:G,onSerialize:x,onIframeLoad:C,iframeLoadTimeout:w,onStylesheetLoad:k,stylesheetLoadTimeout:I,keepIframeSrcFn:R};for(const P of Array.from(e.childNodes)){const O=gu(P,M);O&&V.childNodes.push(O)}if(Pne(e)&&e.shadowRoot)for(const P of Array.from(e.shadowRoot.childNodes)){const O=gu(P,M);O&&(sd(e.shadowRoot)&&(O.isShadow=!0),V.childNodes.push(O))}}return e.parentNode&&id(e.parentNode)&&sd(e.parentNode)&&(V.isShadow=!0),V.type===$n.Element&&V.tagName==="iframe"&&qne(e,()=>{const M=e.contentDocument;if(M&&C){const P=gu(M,{doc:M,mirror:r,blockClass:i,blockSelector:s,unblockSelector:l,maskAllText:a,maskTextClass:o,unmaskTextClass:c,maskTextSelector:h,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:p,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:_,dataURLOptions:y,inlineImages:b,recordCanvas:S,preserveWhiteSpace:G,onSerialize:x,onIframeLoad:C,iframeLoadTimeout:w,onStylesheetLoad:k,stylesheetLoadTimeout:I,keepIframeSrcFn:R});P&&C(e,P)}},w),V.type===$n.Element&&V.tagName==="link"&&V.attributes.rel==="stylesheet"&&Kne(e,()=>{if(k){const M=gu(e,{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:l,maskAllText:a,maskTextClass:o,unmaskTextClass:c,maskTextSelector:h,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:p,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:_,dataURLOptions:y,inlineImages:b,recordCanvas:S,preserveWhiteSpace:G,onSerialize:x,onIframeLoad:C,iframeLoadTimeout:w,onStylesheetLoad:k,stylesheetLoadTimeout:I,keepIframeSrcFn:R});M&&k(e,M)}},I),V}function nre(e,t){const{mirror:n=new m9,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:s=null,maskAllText:l=!1,maskTextClass:a="rr-mask",unmaskTextClass:o=null,maskTextSelector:c=null,unmaskTextSelector:h=null,inlineStylesheet:u=!0,inlineImages:f=!1,recordCanvas:d=!1,maskAllInputs:p=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOM:_=!1,dataURLOptions:y,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:x,iframeLoadTimeout:C,onStylesheetLoad:w,stylesheetLoadTimeout:k,keepIframeSrcFn:I=()=>!1}=t||{};return gu(e,{doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:l,maskTextClass:a,unmaskTextClass:o,maskTextSelector:c,unmaskTextSelector:h,skipChild:!1,inlineStylesheet:u,maskInputOptions:p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:p===!1?{}:p,maskAttributeFn:m,maskTextFn:g,maskInputFn:v,slimDOMOptions:_===!0||_==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:_==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:_===!1?{}:_,dataURLOptions:y,inlineImages:f,recordCanvas:d,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:x,iframeLoadTimeout:C,onStylesheetLoad:w,stylesheetLoadTimeout:k,keepIframeSrcFn:I,newlyAddedElement:!1})}function Qo(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...l)=>n.call(t,...l)),t=void 0)}return n}function Sr(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Wc=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let $k={map:{},getId(){return console.error(Wc),-1},getNode(){return console.error(Wc),null},removeNodeFromMap(){console.error(Wc)},has(){return console.error(Wc),!1},reset(){console.error(Wc)}};typeof window<"u"&&window.Proxy&&window.Reflect&&($k=new Proxy($k,{get(e,t,n){return t==="map"&&console.error(Wc),Reflect.get(e,t,n)}}));function Hd(e,t,n={}){let r=null,i=0;return function(...s){const l=Date.now();!i&&n.leading===!1&&(i=l);const a=t-(l-i),o=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),i=l,e.apply(o,s)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{i=n.leading===!1?0:Date.now(),r=null,e.apply(o,s)},a))}}function _9(e,t,n,r,i=window){const s=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set(l){setTimeout(()=>{n.set.call(this,l)},0),s&&s.set&&s.set.call(this,l)}}),()=>_9(e,t,s||{},!0)}function HT(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],i=n(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=i,()=>{e[t]=r}}catch{return()=>{}}}let dv=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(dv=()=>new Date().getTime());function b9(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:Qo([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||Qo([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||Qo([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:Qo([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||Qo([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||Qo([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function S9(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function x9(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Ui(e,t,n,r,i){if(!e)return!1;const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!s)return!1;const l=pu(t,n);if(!i){const c=r&&s.matches(r);return l(s)&&!c}const a=Ol(s,l);let o=-1;return a<0?!1:(r&&(o=Ol(s,pu(null,r))),a>-1&&o<0?!0:a<o)}function rre(e,t){return t.getId(e)!==-1}function Yb(e,t){return t.getId(e)===Vd}function w9(e,t){if(id(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?w9(e.parentNode,t):!0:!0}function Fw(e){return!!e.changedTouches}function ire(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function C9(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function T9(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Nw(e){return!!Qo([e,"optionalAccess",t=>t.shadowRoot])}class sre{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return dte(this.styleIDMap.get(t),()=>-1)}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function E9(e){let t=null;return Qo([e,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function ore(e){let t=e,n;for(;n=E9(t);)t=n;return t}function are(e){const t=e.ownerDocument;if(!t)return!1;const n=ore(e);return t.contains(n)}function P9(e){const t=e.ownerDocument;return t?t.contains(e)||are(e):!1}let Xb;function lre(){if(Xb)return Xb;const e=window.document;let t=window.requestAnimationFrame;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(t=r.requestAnimationFrame),e.head.removeChild(n)}catch{}return Xb=t.bind(window)}function cre(...e){return lre()(...e)}var lt=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(lt||{}),ct=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(ct||{}),mr=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(mr||{}),Us=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Us||{});function ure(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...l)=>n.call(t,...l)),t=void 0)}return n}function Gk(e){return"__ln"in e}class hre{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=ure([n,"optionalAccess",i=>i.next])||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Gk(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Gk(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Vk=(e,t)=>`${e}@${t}`;class fre{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new hre,i=o=>{let c=o,h=Vd;for(;h===Vd;)c=c&&c.nextSibling,h=c&&this.mirror.getId(c);return h},s=o=>{if(!o.parentNode||!P9(o))return;const c=id(o.parentNode)?this.mirror.getId(E9(o)):this.mirror.getId(o.parentNode),h=i(o);if(c===-1||h===-1)return r.addNode(o);const u=gu(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{C9(f,this.mirror)&&this.iframeManager.addIframe(f),T9(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Nw(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(f,d)=>{this.iframeManager.attachIframe(f,d),this.shadowDomManager.observeAttachShadow(f)},onStylesheetLoad:(f,d)=>{this.stylesheetManager.attachLinkElement(f,d)}});u&&(t.push({parentId:c,nextId:h,node:u}),n.add(u.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const o of this.movedSet)Hk(this.removes,o,this.mirror)&&!this.movedSet.has(o.parentNode)||s(o);for(const o of this.addedSet)!zk(this.droppedSet,o)&&!Hk(this.removes,o,this.mirror)||zk(this.movedSet,o)?s(o):this.droppedSet.add(o);let l=null;for(;r.length;){let o=null;if(l){const c=this.mirror.getId(l.value.parentNode),h=i(l.value);c!==-1&&h!==-1&&(o=l)}if(!o){let c=r.tail;for(;c;){const h=c;if(c=c.previous,h){const u=this.mirror.getId(h.value.parentNode);if(i(h.value)===-1)continue;if(u!==-1){o=h;break}else{const d=h.value;if(d.parentNode&&d.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const p=d.parentNode.host;if(this.mirror.getId(p)!==-1){o=h;break}}}}}}if(!o){for(;r.head;)r.removeNode(r.head.value);break}l=o.previous,r.removeNode(o.value),s(o.value)}const a={texts:this.texts.map(o=>({id:this.mirror.getId(o.node),value:o.value})).filter(o=>!n.has(o.id)).filter(o=>this.mirror.has(o.id)),attributes:this.attributes.map(o=>{const{attributes:c}=o;if(typeof c.style=="string"){const h=JSON.stringify(o.styleDiff),u=JSON.stringify(o._unchangedStyles);h.length<c.style.length&&(h+u).split("var(").length===c.style.split("var(").length&&(c.style=o.styleDiff)}return{id:this.mirror.getId(o.node),attributes:c}}).filter(o=>!n.has(o.id)).filter(o=>this.mirror.has(o.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(Yb(t.target,this.mirror))return;let n;try{n=document.implementation.createHTMLDocument()}catch{n=this.doc}switch(t.type){case"characterData":{const r=t.target.textContent;!Ui(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:ih(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{const r=t.target;let i=t.attributeName,s=t.target.getAttribute(i);if(i==="value"){const a=$T(r),o=r.tagName;s=hv(r,o,a);const c=Xy({maskInputOptions:this.maskInputOptions,tagName:o,type:a}),h=ih(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=Gd({isMasked:h,element:r,value:s,maskInputFn:this.maskInputFn})}if(Ui(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let l=this.attributes.find(a=>a.node===t.target);if(r.tagName==="IFRAME"&&i==="src"&&!this.keepIframeSrcFn(s))if(!r.contentDocument)i="rr_src";else return;if(l||(l={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(l)),i==="type"&&r.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!y9(r.tagName,i)&&(l.attributes[i]=v9(this.doc,rh(r.tagName),rh(i),s,r,this.maskAttributeFn),i==="style")){const a=n.createElement("span");t.oldValue&&a.setAttribute("style",t.oldValue);for(const o of Array.from(r.style)){const c=r.style.getPropertyValue(o),h=r.style.getPropertyPriority(o);c!==a.style.getPropertyValue(o)||h!==a.style.getPropertyPriority(o)?h===""?l.styleDiff[o]=c:l.styleDiff[o]=[c,h]:l._unchangedStyles[o]=[c,h]}for(const o of Array.from(a.style))r.style.getPropertyValue(o)===""&&(l.styleDiff[o]=!1)}break}case"childList":{if(Ui(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{const i=this.mirror.getId(r),s=id(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ui(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Yb(r,this.mirror)||!rre(r,this.mirror)||(this.addedSet.has(r)?(jw(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&i===-1||w9(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[Vk(i,s)]?jw(this.movedSet,r):this.removes.push({parentId:s,id:i,isShadow:id(t.target)&&sd(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Yb(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Vk(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ui(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),Nw(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function jw(e,t){e.delete(t),t.childNodes.forEach(n=>jw(e,n))}function Hk(e,t,n){return e.length===0?!1:I9(e,t,n)}function I9(e,t,n){const{parentNode:r}=t;if(!r)return!1;const i=n.getId(r);return e.some(s=>s.id===i)?!0:I9(e,r,n)}function zk(e,t){return e.size===0?!1:O9(e,t)}function O9(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:O9(e,n):!1}let od;function dre(e){od=e}function pre(){od=void 0}const xt=e=>od?(...n)=>{try{return e(...n)}catch(r){if(od&&od(r)===!0)return()=>{};throw r}}:e;function gs(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...l)=>n.call(t,...l)),t=void 0)}return n}const mu=[];function Cp(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function k9(e,t){const n=new fre;mu.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const i=gs([window,"optionalAccess",l=>l.Zone,"optionalAccess",l=>l.__symbol__,"optionalCall",l=>l("MutationObserver")]);i&&window[i]&&(r=window[i]);const s=new r(xt(l=>{e.onMutation&&e.onMutation(l)===!1||n.processMutations.bind(n)(l)}));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function gre({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const i=typeof t.mousemove=="number"?t.mousemove:50,s=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let l=[],a;const o=Hd(xt(u=>{const f=Date.now()-a;e(l.map(d=>(d.timeOffset-=f,d)),u),l=[],a=null}),s),c=xt(Hd(xt(u=>{const f=Cp(u),{clientX:d,clientY:p}=Fw(u)?u.changedTouches[0]:u;a||(a=dv()),l.push({x:d,y:p,id:r.getId(f),timeOffset:dv()-a}),o(typeof DragEvent<"u"&&u instanceof DragEvent?ct.Drag:u instanceof MouseEvent?ct.MouseMove:ct.TouchMove)}),i,{trailing:!1})),h=[Sr("mousemove",c,n),Sr("touchmove",c,n),Sr("drag",c,n)];return xt(()=>{h.forEach(u=>u())})}function mre({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:l}){if(l.mouseInteraction===!1)return()=>{};const a=l.mouseInteraction===!0||l.mouseInteraction===void 0?{}:l.mouseInteraction,o=[];let c=null;const h=u=>f=>{const d=Cp(f);if(Ui(d,r,i,s,!0))return;let p=null,m=u;if("pointerType"in f){switch(f.pointerType){case"mouse":p=Us.Mouse;break;case"touch":p=Us.Touch;break;case"pen":p=Us.Pen;break}p===Us.Touch?mr[u]===mr.MouseDown?m="TouchStart":mr[u]===mr.MouseUp&&(m="TouchEnd"):Us.Pen}else Fw(f)&&(p=Us.Touch);p!==null?(c=p,(m.startsWith("Touch")&&p===Us.Touch||m.startsWith("Mouse")&&p===Us.Mouse)&&(p=null)):mr[u]===mr.Click&&(p=c,c=null);const g=Fw(f)?f.changedTouches[0]:f;if(!g)return;const v=n.getId(d),{clientX:_,clientY:y}=g;xt(e)({type:mr[m],id:v,x:_,y,...p!==null&&{pointerType:p}})};return Object.keys(mr).filter(u=>Number.isNaN(Number(u))&&!u.endsWith("_Departed")&&a[u]!==!1).forEach(u=>{let f=rh(u);const d=h(u);if(window.PointerEvent)switch(mr[u]){case mr.MouseDown:case mr.MouseUp:f=f.replace("mouse","pointer");break;case mr.TouchStart:case mr.TouchEnd:return}o.push(Sr(f,d,t))}),xt(()=>{o.forEach(u=>u())})}function A9({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:l}){const a=xt(Hd(xt(o=>{const c=Cp(o);if(!c||Ui(c,r,i,s,!0))return;const h=n.getId(c);if(c===t&&t.defaultView){const u=b9(t.defaultView);e({id:h,x:u.left,y:u.top})}else e({id:h,x:c.scrollLeft,y:c.scrollTop})}),l.scroll||100));return Sr("scroll",a,t)}function vre({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const i=xt(Hd(xt(()=>{const s=S9(),l=x9();(n!==s||r!==l)&&(e({width:Number(l),height:Number(s)}),n=s,r=l)}),200));return Sr("resize",i,t)}const yre=["INPUT","TEXTAREA","SELECT"],Wk=new WeakMap;function _re({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,ignoreClass:l,ignoreSelector:a,maskInputOptions:o,maskInputFn:c,sampling:h,userTriggeredOnInput:u,maskTextClass:f,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:m}){function g(C){let w=Cp(C);const k=C.isTrusted,I=w&&Lw(w.tagName);if(I==="OPTION"&&(w=w.parentElement),!w||!I||yre.indexOf(I)<0||Ui(w,r,i,s,!0))return;const R=w;if(R.classList.contains(l)||a&&R.matches(a))return;const j=$T(w);let G=hv(R,I,j),B=!1;const $=Xy({maskInputOptions:o,tagName:I,type:j}),V=ih(w,f,p,d,m,$);(j==="radio"||j==="checkbox")&&(B=w.checked),G=Gd({isMasked:V,element:w,value:G,maskInputFn:c}),v(w,u?{text:G,isChecked:B,userTriggered:k}:{text:G,isChecked:B});const W=w.name;j==="radio"&&W&&B&&t.querySelectorAll(`input[type="radio"][name="${W}"]`).forEach(M=>{if(M!==w){const P=Gd({isMasked:V,element:M,value:hv(M,I,j),maskInputFn:c});v(M,u?{text:P,isChecked:!B,userTriggered:!1}:{text:P,isChecked:!B})}})}function v(C,w){const k=Wk.get(C);if(!k||k.text!==w.text||k.isChecked!==w.isChecked){Wk.set(C,w);const I=n.getId(C);xt(e)({...w,id:I})}}const y=(h.input==="last"?["change"]:["input","change"]).map(C=>Sr(C,xt(g),t)),b=t.defaultView;if(!b)return()=>{y.forEach(C=>C())};const S=b.Object.getOwnPropertyDescriptor(b.HTMLInputElement.prototype,"value"),x=[[b.HTMLInputElement.prototype,"value"],[b.HTMLInputElement.prototype,"checked"],[b.HTMLSelectElement.prototype,"value"],[b.HTMLTextAreaElement.prototype,"value"],[b.HTMLSelectElement.prototype,"selectedIndex"],[b.HTMLOptionElement.prototype,"selected"]];return S&&S.set&&y.push(...x.map(C=>_9(C[0],C[1],{set(){xt(g)({target:this,isTrusted:!1})}},!1,b))),xt(()=>{y.forEach(C=>C())})}function pv(e){const t=[];function n(r,i){if(nm("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||nm("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||nm("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||nm("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const l=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(l)}else if(r.parentStyleSheet){const l=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(l)}return i}return n(e,t)}function Jo(e,t,n){let r,i;return e?(e.ownerNode?r=t.getId(e.ownerNode):i=n.getId(e),{styleId:i,id:r}):{}}function bre({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:xt((h,u,f)=>{const[d,p]=f,{id:m,styleId:g}=Jo(u,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,adds:[{rule:d,index:p}]}),h.apply(u,f)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:xt((h,u,f)=>{const[d]=f,{id:p,styleId:m}=Jo(u,t,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,removes:[{index:d}]}),h.apply(u,f)})});let l;r.CSSStyleSheet.prototype.replace&&(l=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:xt((h,u,f)=>{const[d]=f,{id:p,styleId:m}=Jo(u,t,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,replace:d}),h.apply(u,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:xt((h,u,f)=>{const[d]=f,{id:p,styleId:m}=Jo(u,t,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,replaceSync:d}),h.apply(u,f)})}));const o={};rm("CSSGroupingRule")?o.CSSGroupingRule=r.CSSGroupingRule:(rm("CSSMediaRule")&&(o.CSSMediaRule=r.CSSMediaRule),rm("CSSConditionRule")&&(o.CSSConditionRule=r.CSSConditionRule),rm("CSSSupportsRule")&&(o.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(o).forEach(([h,u])=>{c[h]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=new Proxy(c[h].insertRule,{apply:xt((f,d,p)=>{const[m,g]=p,{id:v,styleId:_}=Jo(d.parentStyleSheet,t,n.styleMirror);return(v&&v!==-1||_&&_!==-1)&&e({id:v,styleId:_,adds:[{rule:m,index:[...pv(d),g||0]}]}),f.apply(d,p)})}),u.prototype.deleteRule=new Proxy(c[h].deleteRule,{apply:xt((f,d,p)=>{const[m]=p,{id:g,styleId:v}=Jo(d.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||v&&v!==-1)&&e({id:g,styleId:v,removes:[{index:[...pv(d),m]}]}),f.apply(d,p)})})}),xt(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=s,l&&(r.CSSStyleSheet.prototype.replace=l),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(o).forEach(([h,u])=>{u.prototype.insertRule=c[h].insertRule,u.prototype.deleteRule=c[h].deleteRule})})}function R9({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const i=n.nodeName==="#document"?gs([n,"access",l=>l.defaultView,"optionalAccess",l=>l.Document]):gs([n,"access",l=>l.ownerDocument,"optionalAccess",l=>l.defaultView,"optionalAccess",l=>l.ShadowRoot]),s=gs([i,"optionalAccess",l=>l.prototype])?Object.getOwnPropertyDescriptor(gs([i,"optionalAccess",l=>l.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!i||!s?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return gs([s,"access",l=>l.get,"optionalAccess",l=>l.call,"call",l=>l(this)])},set(l){const a=gs([s,"access",o=>o.set,"optionalAccess",o=>o.call,"call",o=>o(this,l)]);if(r!==null&&r!==-1)try{t.adoptStyleSheets(l,r)}catch{}return a}}),xt(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function Sre({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:xt((a,o,c)=>{const[h,u,f]=c;if(n.has(h))return s.apply(o,[h,u,f]);const{id:d,styleId:p}=Jo(gs([o,"access",m=>m.parentRule,"optionalAccess",m=>m.parentStyleSheet]),t,r.styleMirror);return(d&&d!==-1||p&&p!==-1)&&e({id:d,styleId:p,set:{property:h,value:u,priority:f},index:pv(o.parentRule)}),a.apply(o,c)})});const l=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:xt((a,o,c)=>{const[h]=c;if(n.has(h))return l.apply(o,[h]);const{id:u,styleId:f}=Jo(gs([o,"access",d=>d.parentRule,"optionalAccess",d=>d.parentStyleSheet]),t,r.styleMirror);return(u&&u!==-1||f&&f!==-1)&&e({id:u,styleId:f,remove:{property:h},index:pv(o.parentRule)}),a.apply(o,c)})}),xt(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=l})}function xre({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:i,sampling:s,doc:l}){const a=xt(c=>Hd(xt(h=>{const u=Cp(h);if(!u||Ui(u,t,n,r,!0))return;const{currentTime:f,volume:d,muted:p,playbackRate:m}=u;e({type:c,id:i.getId(u),currentTime:f,volume:d,muted:p,playbackRate:m})}),s.media||500)),o=[Sr("play",a(0),l),Sr("pause",a(1),l),Sr("seeked",a(2),l),Sr("volumechange",a(3),l),Sr("ratechange",a(4),l)];return xt(()=>{o.forEach(c=>c())})}function wre({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],i=new WeakMap,s=n.FontFace;n.FontFace=function(o,c,h){const u=new s(o,c,h);return i.set(u,{family:o,buffer:typeof c!="string",descriptors:h,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),u};const l=HT(t.fonts,"add",function(a){return function(o){return setTimeout(xt(()=>{const c=i.get(o);c&&(e(c),i.delete(o))}),0),a.apply(this,[o])}});return r.push(()=>{n.FontFace=s}),r.push(l),xt(()=>{r.forEach(a=>a())})}function Cre(e){const{doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,selectionCb:l}=e;let a=!0;const o=xt(()=>{const c=t.getSelection();if(!c||a&&gs([c,"optionalAccess",f=>f.isCollapsed]))return;a=c.isCollapsed||!1;const h=[],u=c.rangeCount||0;for(let f=0;f<u;f++){const d=c.getRangeAt(f),{startContainer:p,startOffset:m,endContainer:g,endOffset:v}=d;Ui(p,r,i,s,!0)||Ui(g,r,i,s,!0)||h.push({start:n.getId(p),startOffset:m,end:n.getId(g),endOffset:v})}l({ranges:h})});return o(),Sr("selectionchange",o)}function Tre({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:HT(n.customElements,"define",function(i){return function(s,l,a){try{t({define:{name:s}})}catch{}return i.apply(this,[s,l,a])}})}function Ere(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=k9(e,e.doc),i=gre(e),s=mre(e),l=A9(e),a=vre(e,{win:n}),o=_re(e),c=xre(e),h=bre(e,{win:n}),u=R9(e,e.doc),f=Sre(e,{win:n}),d=e.collectFonts?wre(e):()=>{},p=Cre(e),m=Tre(e),g=[];for(const v of e.plugins)g.push(v.observer(v.callback,n,v.options));return xt(()=>{mu.forEach(v=>v.reset()),r.disconnect(),i(),s(),l(),a(),o(),c(),h(),u(),f(),d(),p(),m(),g.forEach(v=>v())})}function nm(e){return typeof window[e]<"u"}function rm(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Bw{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,i){const s=r||this.getIdToRemoteIdMap(t),l=i||this.getRemoteIdToIdMap(t);let a=s.get(n);return a||(a=this.generateIdFn(),s.set(n,a),l.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),i=this.getRemoteIdToIdMap(t);return n.map(s=>this.getId(t,s,r,i))}getRemoteId(t,n,r){const i=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const s=i.get(n);return s||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(i=>this.getRemoteId(t,i,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}function Yk(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],s=e[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(t=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...l)=>n.call(t,...l)),t=void 0)}return n}class Pre{constructor(){this.crossOriginIframeMirror=new Bw(GT),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Ire{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Bw(GT),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Bw(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Yk([this,"access",r=>r.loadListener,"optionalCall",r=>r(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const i=this.crossOriginIframeMap.get(t.source);if(!i)return;const s=this.transformCrossOriginEvent(i,n.data.event);s&&this.wrappedEmit(s,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case lt.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:lt.IncrementalSnapshot,data:{source:ct.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case lt.Meta:case lt.Load:case lt.DomContentLoaded:return!1;case lt.Plugin:return n;case lt.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case lt.IncrementalSnapshot:switch(n.data.source){case ct.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const i=this.crossOriginIframeRootIdMap.get(t);i&&this.patchRootIdOnNode(r.node,i)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case ct.Drag:case ct.TouchMove:case ct.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case ct.ViewportResize:return!1;case ct.MediaInteraction:case ct.MouseInteraction:case ct.Scroll:case ct.CanvasMutation:case ct.Input:return this.replaceIds(n.data,t,["id"]),n;case ct.StyleSheetRule:case ct.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case ct.Font:return n;case ct.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case ct.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),Yk([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(i=>{this.replaceStyleIds(i,t,["styleId"])})]),n}}return!1}replace(t,n,r,i){for(const s of i)!Array.isArray(n[s])&&typeof n[s]!="number"||(Array.isArray(n[s])?n[s]=t.getIds(r,n[s]):n[s]=t.getId(r,n[s]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==$n.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class Ore{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class kre{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!sd(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const r=k9({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(A9({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(R9({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(HT(t.prototype,"attachShadow",function(i){return function(s){const l=i.call(this,s);return this.shadowRoot&&P9(this)&&r.addShadowRoot(this.shadowRoot,n),l}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Xk{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class Are{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new sre,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},i=[];for(const s of t){let l;this.styleMirror.has(s)?l=this.styleMirror.getId(s):(l=this.styleMirror.add(s),i.push({styleId:l,rules:Array.from(s.rules||CSSRule,(a,o)=>({rule:g9(a),index:o}))})),r.styleIds.push(l)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Rre{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){cre(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(i=>i!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function An(e){const t=e;return t.timestamp=dv(),t}let gv;const Di=Dne();function Sa(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:l=null,ignoreClass:a="rr-ignore",ignoreSelector:o=null,maskAllText:c=!1,maskTextClass:h="rr-mask",unmaskTextClass:u=null,maskTextSelector:f=null,unmaskTextSelector:d=null,inlineStylesheet:p=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:v,maskAttributeFn:_,maskInputFn:y,maskTextFn:b,packFn:S,sampling:x={},dataURLOptions:C={},mousemoveWait:w,recordCanvas:k=!1,recordCrossOriginIframes:I=!1,recordAfter:R=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:j=!1,collectFonts:G=!1,inlineImages:B=!1,plugins:$,keepIframeSrcFn:V=()=>!1,ignoreCSSAttributes:W=new Set([]),errorHandler:M,onMutation:P,getCanvasManager:O}=e;dre(M);const A=I?window.parent===window:!0;let D=!1;if(!A)try{window.parent.document&&(D=!1)}catch{D=!0}if(A&&!t)throw new Error("emit function is required");w!==void 0&&x.mousemove===void 0&&(x.mousemove=w),Di.reset();const X=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},N=v===!0||v==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:v==="all",headMetaDescKeywords:v==="all"}:v||{};ire();let F,z=0;const L=fe=>{for(const be of $||[])be.eventProcessor&&(fe=be.eventProcessor(fe));return S&&!D&&(fe=S(fe)),fe},H=(fe,be)=>{if(zb([mu,"access",pe=>pe[0],"optionalAccess",pe=>pe.isFrozen,"call",pe=>pe()])&&fe.type!==lt.FullSnapshot&&!(fe.type===lt.IncrementalSnapshot&&fe.data.source===ct.Mutation)&&mu.forEach(pe=>pe.unfreeze()),A)zb([t,"optionalCall",pe=>pe(L(fe),be)]);else if(D){const pe={type:"rrweb",event:L(fe),origin:window.location.origin,isCheckout:be};window.parent.postMessage(pe,"*")}if(fe.type===lt.FullSnapshot)F=fe,z=0;else if(fe.type===lt.IncrementalSnapshot){if(fe.data.source===ct.Mutation&&fe.data.isAttachIframe)return;z++;const pe=r&&z>=r,se=n&&fe.timestamp-F.timestamp>n;(pe||se)&&he(!0)}},K=fe=>{H(An({type:lt.IncrementalSnapshot,data:{source:ct.Mutation,...fe}}))},Z=fe=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.Scroll,...fe}})),ee=fe=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.CanvasMutation,...fe}})),ae=fe=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.AdoptedStyleSheet,...fe}})),te=new Are({mutationCb:K,adoptedStyleSheetCb:ae}),J=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Pre:new Ire({mirror:Di,mutationCb:K,stylesheetManager:te,recordCrossOriginIframes:I,wrappedEmit:H});for(const fe of $||[])fe.getMirror&&fe.getMirror({nodeMirror:Di,crossOriginIframeMirror:J.crossOriginIframeMirror,crossOriginIframeStyleMirror:J.crossOriginIframeStyleMirror});const ne=new Rre,ie=Mre(O,{mirror:Di,win:window,mutationCb:fe=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.CanvasMutation,...fe}})),recordCanvas:k,blockClass:i,blockSelector:s,unblockSelector:l,sampling:x.canvas,dataURLOptions:C,errorHandler:M}),re=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Ore:new kre({mutationCb:K,scrollCb:Z,bypassOptions:{onMutation:P,blockClass:i,blockSelector:s,unblockSelector:l,maskAllText:c,maskTextClass:h,unmaskTextClass:u,maskTextSelector:f,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:X,dataURLOptions:C,maskAttributeFn:_,maskTextFn:b,maskInputFn:y,recordCanvas:k,inlineImages:B,sampling:x,slimDOMOptions:N,iframeManager:J,stylesheetManager:te,canvasManager:ie,keepIframeSrcFn:V,processedNodeManager:ne},mirror:Di}),he=(fe=!1)=>{H(An({type:lt.Meta,data:{href:window.location.href,width:x9(),height:S9()}}),fe),te.reset(),re.init(),mu.forEach(pe=>pe.lock());const be=nre(document,{mirror:Di,blockClass:i,blockSelector:s,unblockSelector:l,maskAllText:c,maskTextClass:h,unmaskTextClass:u,maskTextSelector:f,unmaskTextSelector:d,inlineStylesheet:p,maskAllInputs:X,maskAttributeFn:_,maskInputFn:y,maskTextFn:b,slimDOM:N,dataURLOptions:C,recordCanvas:k,inlineImages:B,onSerialize:pe=>{C9(pe,Di)&&J.addIframe(pe),T9(pe,Di)&&te.trackLinkElement(pe),Nw(pe)&&re.addShadowRoot(pe.shadowRoot,document)},onIframeLoad:(pe,se)=>{J.attachIframe(pe,se),re.observeAttachShadow(pe)},onStylesheetLoad:(pe,se)=>{te.attachLinkElement(pe,se)},keepIframeSrcFn:V});if(!be)return console.warn("Failed to snapshot the document");H(An({type:lt.FullSnapshot,data:{node:be,initialOffset:b9(window)}})),mu.forEach(pe=>pe.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&te.adoptStyleSheets(document.adoptedStyleSheets,Di.getId(document))};gv=he;try{const fe=[],be=se=>xt(Ere)({onMutation:P,mutationCb:K,mousemoveCb:(me,Re)=>H(An({type:lt.IncrementalSnapshot,data:{source:Re,positions:me}})),mouseInteractionCb:me=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.MouseInteraction,...me}})),scrollCb:Z,viewportResizeCb:me=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.ViewportResize,...me}})),inputCb:me=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.Input,...me}})),mediaInteractionCb:me=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.MediaInteraction,...me}})),styleSheetRuleCb:me=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.StyleSheetRule,...me}})),styleDeclarationCb:me=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.StyleDeclaration,...me}})),canvasMutationCb:ee,fontCb:me=>H(An({type:lt.IncrementalSnapshot,data:{source:ct.Font,...me}})),selectionCb:me=>{H(An({type:lt.IncrementalSnapshot,data:{source:ct.Selection,...me}}))},customElementCb:me=>{H(An({type:lt.IncrementalSnapshot,data:{source:ct.CustomElement,...me}}))},blockClass:i,ignoreClass:a,ignoreSelector:o,maskAllText:c,maskTextClass:h,unmaskTextClass:u,maskTextSelector:f,unmaskTextSelector:d,maskInputOptions:X,inlineStylesheet:p,sampling:x,recordCanvas:k,inlineImages:B,userTriggeredOnInput:j,collectFonts:G,doc:se,maskAttributeFn:_,maskInputFn:y,maskTextFn:b,keepIframeSrcFn:V,blockSelector:s,unblockSelector:l,slimDOMOptions:N,dataURLOptions:C,mirror:Di,iframeManager:J,stylesheetManager:te,shadowDomManager:re,processedNodeManager:ne,canvasManager:ie,ignoreCSSAttributes:W,plugins:zb([$,"optionalAccess",me=>me.filter,"call",me=>me(Re=>Re.observer),"optionalAccess",me=>me.map,"call",me=>me(Re=>({observer:Re.observer,options:Re.options,callback:ze=>H(An({type:lt.Plugin,data:{plugin:Re.name,payload:ze}}))}))])||[]},{});J.addLoadListener(se=>{try{fe.push(be(se.contentDocument))}catch(me){console.warn(me)}});const pe=()=>{he(),fe.push(be(document))};return document.readyState==="interactive"||document.readyState==="complete"?pe():(fe.push(Sr("DOMContentLoaded",()=>{H(An({type:lt.DomContentLoaded,data:{}})),R==="DOMContentLoaded"&&pe()})),fe.push(Sr("load",()=>{H(An({type:lt.Load,data:{}})),R==="load"&&pe()},window))),()=>{fe.forEach(se=>se()),ne.destroy(),gv=void 0,pre()}}catch(fe){console.warn(fe)}}function Dre(e){if(!gv)throw new Error("please take full snapshot after start recording");gv(e)}Sa.mirror=Di;Sa.takeFullSnapshot=Dre;function Mre(e,t){try{return e?e(t):new Xk}catch{return console.warn("Unable to initialize CanvasManager"),new Xk}}const Lre=3,Fre=5;function zT(e){return e>9999999999?e:e*1e3}function qb(e){return e>9999999999?e/1e3:e}function Tp(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:lt.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:qo(t,10,1e3)}}),t.category==="console")))}const Nre="button,a";function D9(e){return e.closest(Nre)||e}function M9(e){const t=L9(e);return!t||!(t instanceof Element)?t:D9(t)}function L9(e){return jre(e)?e.target:e}function jre(e){return typeof e=="object"&&!!e&&"target"in e}let Zo;function Bre(e){return Zo||(Zo=[],Ure()),Zo.push(e),()=>{const t=Zo?Zo.indexOf(e):-1;t>-1&&Zo.splice(t,1)}}function Ure(){bs(Ht,"open",function(e){return function(...t){if(Zo)try{Zo.forEach(n=>n())}catch{}return e.apply(Ht,t)}})}function $re(e,t,n){e.handleClick(t,n)}class Gre{constructor(t,n,r=Tp){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=Bre(()=>{this._lastMutation=qk()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(Hre(n,this._ignoreSelector)||!zre(t))return;const r={timestamp:qb(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(i=>i.node===r.node&&Math.abs(i.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=qb(t)}registerScroll(t=Date.now()){this._lastScroll=qb(t)}registerClick(t){const n=D9(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=qk();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const i=this._clicks.indexOf(r);i>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(i,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,i=t.mutationAfter&&t.mutationAfter<=this._threshold,s=!r&&!i,{clickCount:l,clickBreadcrumb:a}=t;if(s){const o=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,c=o<this._timeout*1e3?"mutation":"timeout",h={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Ht.location.href,route:n.getCurrentRoute(),timeAfterClickMs:o,endReason:c,clickCount:l||1}};this._addBreadcrumbEvent(n,h);return}if(l>1){const o={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Ht.location.href,route:n.getCurrentRoute(),clickCount:l,metric:!0}};this._addBreadcrumbEvent(n,o)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const Vre=["A","BUTTON","INPUT"];function Hre(e,t){return!!(!Vre.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function zre(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function qk(){return Date.now()/1e3}function Wre(e,t){try{if(!Yre(t))return;const{source:n}=t.data;if(n===ct.Mutation&&e.registerMutation(t.timestamp),n===ct.Scroll&&e.registerScroll(t.timestamp),Xre(t)){const{type:r,id:i}=t.data,s=Sa.mirror.getNode(i);s instanceof HTMLElement&&r===mr.Click&&e.registerClick(s)}}catch{}}function Yre(e){return e.type===Lre}function Xre(e){return e.data.source===ct.MouseInteraction}function ws(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var mv;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(mv||(mv={}));const qre=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Kre(e){const t={};for(const n in e)if(qre.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const Qre=e=>t=>{if(!e.isEnabled())return;const n=Jre(t);if(!n)return;const r=t.name==="click",i=r?t.event:void 0;r&&e.clickDetector&&i&&i.target&&!i.altKey&&!i.metaKey&&!i.ctrlKey&&!i.shiftKey&&$re(e.clickDetector,n,M9(t.event)),Tp(e,n)};function F9(e,t){const n=Sa.mirror.getId(e),r=n&&Sa.mirror.getNode(n),i=r&&Sa.mirror.getMeta(r),s=i&&eie(i)?i:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map(l=>l.type===mv.Text&&l.textContent).filter(Boolean).map(l=>l.trim()).join(""),attributes:Kre(s.attributes)}}:{}}}function Jre(e){const{target:t,message:n}=Zre(e);return ws({category:`ui.${e.name}`,...F9(t,n)})}function Zre(e){const t=e.name==="click";let n,r=null;try{r=t?M9(e.event):L9(e.event),n=LT(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function eie(e){return e.type===mv.Element}function tie(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=nie(t);n&&Tp(e,n)}function nie(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:i,key:s,target:l}=e;if(!l||rie(l)||!s)return null;const a=t||r||i,o=s.length===1;if(!a&&o)return null;const c=LT(l,{maxStringLength:200})||"<unknown>",h=F9(l,c);return ws({category:"ui.keyDown",message:c,data:{...h.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:i,key:s}})}function rie(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const Kk={resource:lie,paint:oie,navigation:aie};function iie(e){return e.map(sie).filter(Boolean)}function sie(e){return Kk[e.entryType]?Kk[e.entryType](e):null}function sh(e){return((ite||Ht.performance.timeOrigin)+e)/1e3}function oie(e){const{duration:t,entryType:n,name:r,startTime:i}=e,s=sh(i);return{type:n,name:r,start:s,end:s+t,data:void 0}}function aie(e){const{entryType:t,name:n,decodedBodySize:r,duration:i,domComplete:s,encodedBodySize:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:o,domInteractive:c,loadEventStart:h,loadEventEnd:u,redirectCount:f,startTime:d,transferSize:p,type:m}=e;return i===0?null:{type:`${t}.${m}`,start:sh(d),end:sh(s),name:n,data:{size:p,decodedBodySize:r,encodedBodySize:l,duration:i,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:o,loadEventStart:h,loadEventEnd:u,domComplete:s,redirectCount:f}}}function lie(e){const{entryType:t,initiatorType:n,name:r,responseEnd:i,startTime:s,decodedBodySize:l,encodedBodySize:a,responseStatus:o,transferSize:c}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:sh(s),end:sh(i),name:r,data:{size:c,statusCode:o,decodedBodySize:l,encodedBodySize:a}}}function cie(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,i=e.value,s=sh(i);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:s,end:s,data:{value:i,size:i,nodeId:r?Sa.mirror.getId(r):void 0}}}function uie(e){function t(i){e.performanceEntries.includes(i)||e.performanceEntries.push(i)}function n({entries:i}){i.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(i=>{r.push(une(i,n))}),r.push(cne(({metric:i})=>{e.replayPerformanceEntries.push(cie(i))})),()=>{r.forEach(i=>i())}}const Ft=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,hie='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function fie(){const e=new Blob([hie]);return URL.createObjectURL(e)}function br(e,t){Ft&&(mt.info(e),t&&N9(e))}function Lu(e,t){Ft&&(mt.info(e),t&&setTimeout(()=>{N9(e)},0))}function N9(e){Rte({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class WT extends Error{constructor(){super(`Event buffer exceeded maximum size of ${UT}.`)}}class j9{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>UT)throw new WT;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?zT(t):null}}class die{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){br("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((i,s)=>{const l=({data:a})=>{const o=a;if(o.method===t&&o.id===r){if(this._worker.removeEventListener("message",l),!o.success){Ft&&mt.error("[Replay]",o.response),s(new Error("Error in compression worker"));return}i(o.response)}};this._worker.addEventListener("message",l),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class pie{constructor(t){this._worker=new die(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=zT(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>UT?Promise.reject(new WT):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{Ft&&mt.warn('[Replay] Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class gie{constructor(t){this._fallback=new j9,this._compression=new pie(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{br("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n}=this._fallback,r=[];for(const i of t)r.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(i){Ft&&mt.warn("[Replay] Failed to add events when switching buffers.",i)}}}function mie({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=vie(t);if(n)return n}return br("[Replay] Using simple buffer"),new j9}function vie(e){try{const t=e||yie();if(!t)return;br(`[Replay] Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new gie(n)}catch{br("[Replay] Failed to create compression worker")}}function yie(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?fie():""}function YT(){try{return"sessionStorage"in Ht&&!!Ht.sessionStorage}catch{return!1}}function _ie(e){bie(),e.session=void 0}function bie(){if(YT())try{Ht.sessionStorage.removeItem(jT)}catch{}}function B9(e){return e===void 0?!1:Math.random()<e}function U9(e){const t=Date.now(),n=e.id||qr(),r=e.started||t,i=e.lastActivity||t,s=e.segmentId||0,l=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:i,segmentId:s,sampled:l,previousSessionId:a}}function XT(e){if(YT())try{Ht.sessionStorage.setItem(jT,JSON.stringify(e))}catch{}}function Sie(e,t){return B9(e)?"session":t?"buffer":!1}function Qk({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const i=Sie(e,t),s=U9({sampled:i,previousSessionId:r});return n&&XT(s),s}function xie(e){if(!YT())return null;try{const t=Ht.sessionStorage.getItem(jT);if(!t)return null;const n=JSON.parse(t);return Lu("[Replay] Loading existing session",e),U9(n)}catch{return null}}function Uw(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function $9(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Uw(e.started,t,r)||Uw(e.lastActivity,n,r)}function G9(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!$9(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Kb({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},i){const s=i.stickySession&&xie(e);return s?G9(s,{sessionIdleExpire:t,maxReplayDuration:n})?(Lu("[Replay] Session in sessionStorage is expired, creating new one..."),Qk(i,{previousSessionId:s.id})):s:(Lu("[Replay] Creating new session",e),Qk(i,{previousSessionId:r}))}function wie(e){return e.type===lt.Custom}function qT(e,t,n){return H9(e,t)?(V9(e,t,n),!0):!1}function Cie(e,t,n){return H9(e,t)?V9(e,t,n):Promise.resolve(null)}async function V9(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=e.getOptions(),i=Tie(t,r.beforeAddRecordingEvent);return i?await e.eventBuffer.addEvent(i):void 0}catch(r){const i=r&&r instanceof WT?"addEventSizeExceeded":"addEvent";Ft&&mt.error(r),await e.stop({reason:i});const s=rs();s&&s.recordDroppedEvent("internal_sdk_error","replay")}}function H9(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=zT(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(br(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1):!0}function Tie(e,t){try{if(typeof t=="function"&&wie(e))return t(e)}catch(n){return Ft&&mt.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return e}function KT(e){return!e.type}function $w(e){return e.type==="transaction"}function Eie(e){return e.type==="replay_event"}function Jk(e){return e.type==="feedback"}function z9(e){const t=Oie();return(n,r)=>{if(!e.isEnabled()||!KT(n)&&!$w(n))return;const i=r&&r.statusCode;if(!(t&&(!i||i<200||i>=300))){if($w(n)){Pie(e,n);return}Iie(e,n)}}}function Pie(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function Iie(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||setTimeout(()=>{e.sendBufferedReplayOrFlush()})}function Oie(){const e=rs();if(!e)return!1;const t=e.getTransport();return t&&t.send.__sentry__baseTransport__||!1}function kie(e){return t=>{!e.isEnabled()||!KT(t)||Aie(e,t)}}function Aie(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=ws({category:"replay.hydrate-error"});Tp(e,r)}}function Rie(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function Die(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:lt.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function Mie(e,t){return e.recordingMode!=="buffer"||t.message===BT||!t.exception||t.type?!1:B9(e.getOptions().errorSampleRate)}function Lie(e,t=!1){const n=t?z9(e):void 0;return Object.assign((r,i)=>e.isEnabled()?Eie(r)?(delete r.breadcrumbs,r):!KT(r)&&!$w(r)&&!Jk(r)||!e.checkAndHandleExpiredSession()?r:Jk(r)?(e.flush(),r.contexts.feedback.replay_id=e.getSessionId(),Die(e,r),r):Rie(r,i)&&!e.getOptions()._experiments.captureExceptions?(Ft&&mt.log("[Replay] Ignoring error from rrweb internals",r),null):((Mie(e,r)||e.recordingMode==="session")&&(r.tags={...r.tags,replayId:e.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function qy(e,t){return t.map(({type:n,start:r,end:i,name:s,data:l})=>{const a=e.throttledAddEvent({type:lt.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:s,startTimestamp:r,endTimestamp:i,data:l}}});return typeof a=="string"?Promise.resolve(null):a})}function Fie(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function Nie(e){return t=>{if(!e.isEnabled())return;const n=Fie(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(qy(e,[n]),!1)))}}function jie(e,t){return Ft&&e.getOptions()._experiments.traceInternals?!1:Kte(t,rs())}function Ky(e,t){e.isEnabled()&&t!==null&&(jie(e,t.name)||e.addUpdate(()=>(qy(e,[t]),!0)))}function Bie(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:i}=e;if(!n)return null;const{method:s,url:l}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:l,data:{method:s,statusCode:i?i.status:void 0}}}function Uie(e){return t=>{if(!e.isEnabled())return;const n=Bie(t);Ky(e,n)}}function $ie(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,i=r[fu];if(!t||!n||!i)return null;const{method:s,url:l,status_code:a}=i;return l===void 0?null:{type:"resource.xhr",name:l,start:t/1e3,end:n/1e3,data:{method:s,statusCode:a}}}function Gie(e){return t=>{if(!e.isEnabled())return;const n=$ie(t);Ky(e,n)}}function Qy(e,t){if(e)try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=q9(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function W9(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Y9(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[q9(e)];if(!e)return[void 0]}catch{return Ft&&mt.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Ft&&mt.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function vv(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function X9(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:i,method:s,statusCode:l,request:a,response:o}=t;return{type:e,start:n/1e3,end:r/1e3,name:i,data:Ss({method:s,statusCode:l,request:a,response:o})}}function zd(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function xa(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:i,warnings:s}=Vie(n);return r.body=i,s&&s.length>0&&(r._meta={warnings:s}),r}function Gw(e,t){return Object.keys(e).reduce((n,r)=>{const i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=e[r]),n},{})}function q9(e){return new URLSearchParams(e).toString()}function Vie(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Nk,n=Hie(e);if(t){const r=e.slice(0,Nk);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function Hie(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function yv(e,t){const n=zie(e);return bee(n,t)}function zie(e,t=Ht.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Ht.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function Wie(e,t,n){try{const r=await Xie(e,t,n),i=X9("resource.fetch",r);Ky(n.replay,i)}catch(r){Ft&&mt.error("[Replay] Failed to capture fetch breadcrumb",r)}}function Yie(e,t,n){const{input:r,response:i}=t,s=r?K9(r):void 0,l=Qy(s,n.textEncoder),a=i?W9(i.headers.get("content-length")):void 0;l!==void 0&&(e.data.request_body_size=l),a!==void 0&&(e.data.response_body_size=a)}async function Xie(e,t,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r}=t,{url:l,method:a,status_code:o=0,request_body_size:c,response_body_size:h}=e.data,u=yv(l,n.networkDetailAllowUrls)&&!yv(l,n.networkDetailDenyUrls),f=u?qie(n,t.input,c):zd(c),d=await Kie(u,n,t.response,h);return{startTimestamp:i,endTimestamp:s,url:l,method:a,statusCode:o,request:f,response:d}}function qie({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const i=n?Zie(n,t):{};if(!e)return xa(i,r,void 0);const s=K9(n),[l,a]=Y9(s),o=xa(i,r,l);return a?vv(o,a):o}async function Kie(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},i,s){if(!e&&s!==void 0)return zd(s);const l=i?Q9(i.headers,r):{};if(!i||!t&&s!==void 0)return xa(l,s,void 0);const[a,o]=await Jie(i),c=Qie(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:s,captureDetails:e,headers:l});return o?vv(c,o):c}function Qie(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:i,headers:s}){try{const l=e&&e.length&&r===void 0?Qy(e,n):r;return i?t?xa(s,l,e):xa(s,l,void 0):zd(l)}catch(l){return Ft&&mt.warn("[Replay] Failed to serialize response body",l),xa(s,r,void 0)}}async function Jie(e){const t=ese(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await tse(t)]}catch(n){return Ft&&mt.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}function K9(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function Q9(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function Zie(e,t){return e.length===1&&typeof e[0]!="string"?Zk(e[0],t):e.length===2?Zk(e[1],t):{}}function Zk(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Q9(n,t):Array.isArray(n)?{}:Gw(n,t):{}}function ese(e){try{return e.clone()}catch(t){Ft&&mt.warn("[Replay] Failed to clone response body",t)}}function tse(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error("Timeout while trying to read response body")),500);nse(e).then(i=>t(i),i=>n(i)).finally(()=>clearTimeout(r))})}async function nse(e){return await e.text()}async function rse(e,t,n){try{const r=sse(e,t,n),i=X9("resource.xhr",r);Ky(n.replay,i)}catch(r){Ft&&mt.error("[Replay] Failed to capture xhr breadcrumb",r)}}function ise(e,t,n){const{xhr:r,input:i}=t;if(!r)return;const s=Qy(i,n.textEncoder),l=r.getResponseHeader("content-length")?W9(r.getResponseHeader("content-length")):cse(r.response,r.responseType,n.textEncoder);s!==void 0&&(e.data.request_body_size=s),l!==void 0&&(e.data.response_body_size=l)}function sse(e,t,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r,input:l,xhr:a}=t,{url:o,method:c,status_code:h=0,request_body_size:u,response_body_size:f}=e.data;if(!o)return null;if(!a||!yv(o,n.networkDetailAllowUrls)||yv(o,n.networkDetailDenyUrls)){const x=zd(u),C=zd(f);return{startTimestamp:i,endTimestamp:s,url:o,method:c,statusCode:h,request:x,response:C}}const d=a[fu],p=d?Gw(d.request_headers,n.networkRequestHeaders):{},m=Gw(ose(a),n.networkResponseHeaders),[g,v]=n.networkCaptureBodies?Y9(l):[void 0],[_,y]=n.networkCaptureBodies?ase(a):[void 0],b=xa(p,u,g),S=xa(m,f,_);return{startTimestamp:i,endTimestamp:s,url:o,method:c,statusCode:h,request:v?vv(b,v):b,response:y?vv(S,y):S}}function ose(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[i,s]=r.split(": ");return n[i.toLowerCase()]=s,n},{}):{}}function ase(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return lse(e.response,e.responseType)}catch(n){t.push(n)}return Ft&&mt.warn("[Replay] Failed to get xhr response body",...t),[void 0]}function lse(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch{return Ft&&mt.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Ft&&mt.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function cse(e,t,n){try{const r=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return Qy(r,n)}catch{return}}function use(e){const t=rs();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:l,networkResponseHeaders:a}=e.getOptions(),o={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:l,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",(c,h)=>hse(o,c,h)):($ee(Uie(e)),Xee(Gie(e)))}catch{}}function hse(e,t,n){if(t.data)try{fse(t)&&pse(n)&&(ise(t,n,e),rse(t,n,e)),dse(t)&&gse(n)&&(Yie(t,n,e),Wie(t,n,e))}catch{Ft&&mt.warn("Error when enriching network breadcrumb")}}function fse(e){return e.category==="xhr"}function dse(e){return e.category==="fetch"}function pse(e){return e&&e.xhr}function gse(e){return e&&e.response}let e5=null;function mse(e){return!!e.category}const vse=e=>t=>{if(!e.isEnabled())return;const n=yse(t);n&&Tp(e,n)};function yse(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();return e5===t||!t||(e5=t,!mse(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))?null:t.category==="console"?_se(t):ws(t)}function _se(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return ws(e);let n=!1;const r=t.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>tm?(n=!0,`${i.slice(0,tm)}`):i;if(typeof i=="object")try{const s=qo(i,7);return JSON.stringify(s).length>tm?(n=!0,`${JSON.stringify(s,null,2).slice(0,tm)}`):s}catch{}return i});return ws({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function bse(e){const t=Wy(),n=rs();t.addScopeListener(vse(e)),Mee(Qre(e)),zee(Nie(e)),use(e);const r=Lie(e,!t5(n));n&&n.addEventProcessor?n.addEventProcessor(r):qte(r),t5(n)&&(n.on("beforeSendEvent",kie(e)),n.on("afterSendEvent",z9(e)),n.on("createDsc",i=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(i.replay_id=s)}),n.on("startTransaction",i=>{e.lastTransaction=i}),n.on("finishTransaction",i=>{e.lastTransaction=i}),n.on("beforeSendFeedback",(i,s)=>{const l=e.getSessionId();s&&s.includeReplay&&e.isEnabled()&&l&&(e.flush(),i.contexts&&i.contexts.feedback&&(i.contexts.feedback.replay_id=l))}))}function t5(e){return!!(e&&e.on)}async function Sse(e){try{return Promise.all(qy(e,[xse(Ht.performance.memory)]))}catch{return[]}}function xse(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function wse(e,t,n){let r,i,s;const l=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return o(),r=e(),r}function o(){i!==void 0&&clearTimeout(i),s!==void 0&&clearTimeout(s),i=s=void 0}function c(){return i!==void 0||s!==void 0?a():r}function h(){return i&&clearTimeout(i),i=setTimeout(a,t),l&&s===void 0&&(s=setTimeout(a,l)),r}return h.cancel=o,h.flush=c,h}function Cse(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){Ft&&mt.warn("[Replay] Received replay event after session expired.");return}const i=r||!t;t=!0,e.clickDetector&&Wre(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&i&&e.setInitialState(),!qT(e,n,i))return!0;if(!i)return!1;if(Ese(e,i),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){const s=e.eventBuffer.getEarliestTimestamp();s&&(br(`[Replay] Updating session start time to earliest event in buffer to ${new Date(s)}`,e.getOptions()._experiments.traceInternals),e.session.started=s,e.getOptions().stickySession&&XT(e.session))}return e.recordingMode==="session"&&e.flush(),!0})}}function Tse(e){const t=e.getOptions();return{type:lt.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Ese(e,t){!t||!e.session||e.session.segmentId!==0||qT(e,Tse(e),!1)}function Pse(e,t,n,r){return ste(ate(e,ote(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function Ise({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const s=new TextEncoder().encode(r);n=new Uint8Array(s.length+e.length),n.set(s),n.set(e,s.length)}return n}async function Ose({client:e,scope:t,replayId:n,event:r}){const i=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,s={event_id:n,integrations:i};e.emit&&e.emit("preprocessEvent",r,s);const l=await Ste(e.getOptions(),r,s,t,e,zte());if(!l)return null;l.platform=l.platform||"javascript";const a=e.getSdkMetadata&&e.getSdkMetadata(),{name:o,version:c}=a&&a.sdk||{};return l.sdk={...l.sdk,name:o||"sentry.javascript.unknown",version:c||"0.0.0"},l}async function kse({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:i,session:s}){const l=Ise({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:o,traceIds:c,initialTimestamp:h}=r,u=rs(),f=Wy(),d=u&&u.getTransport(),p=u&&u.getDsn();if(!u||!d||!p||!s.sampled)return;const m={type:pne,replay_start_timestamp:h/1e3,timestamp:i/1e3,error_ids:o,trace_ids:c,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},g=await Ose({scope:f,client:u,replayId:t,event:m});if(!g){u.recordDroppedEvent("event_processor","replay",m),br("An event processor returned `null`, will not send event.");return}delete g.sdkProcessingMetadata;const v=Pse(g,l,p,u.getOptions().tunnel);let _;try{_=await d.send(v)}catch(b){const S=new Error(BT);try{S.cause=b}catch{}throw S}if(!_)return _;if(typeof _.statusCode=="number"&&(_.statusCode<200||_.statusCode>=300))throw new J9(_.statusCode);const y=fte({},_);if(hte(y,"replay"))throw new Z9(y);return _}class J9 extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Z9 extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function e7(e,t={count:0,interval:bne}){const{recordingData:n,options:r}=e;if(n.length)try{return await kse(e),!0}catch(i){if(i instanceof J9||i instanceof Z9)throw i;if(Dte("Replays",{_retryCount:t.count}),Ft&&r._experiments&&r._experiments.captureExceptions&&t9(i),t.count>=Sne){const s=new Error(`${BT} - max retries exceeded`);try{s.cause=i}catch{}throw s}return t.interval*=++t.count,new Promise((s,l)=>{setTimeout(async()=>{try{await e7(e,t),s(!0)}catch(a){l(a)}},t.interval)})}}const t7="__THROTTLED",Ase="__SKIPPED";function Rse(e,t,n){const r=new Map,i=a=>{const o=a-n;r.forEach((c,h)=>{h<o&&r.delete(h)})},s=()=>[...r.values()].reduce((a,o)=>a+o,0);let l=!1;return(...a)=>{const o=Math.floor(Date.now()/1e3);if(i(o),s()>=t){const h=l;return l=!0,h?Ase:t7}l=!1;const c=r.get(o)||0;return r.set(o,c+1),e(...a)}}class ea{constructor({options:t,recordingOptions:n}){ea.prototype.__init.call(this),ea.prototype.__init2.call(this),ea.prototype.__init3.call(this),ea.prototype.__init4.call(this),ea.prototype.__init5.call(this),ea.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:gne,sessionIdleExpire:mne},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=wse(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Rse((l,a)=>Cie(this,l,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:i}=this.getOptions(),s=r?{threshold:Math.min(xne,r),timeout:r,scrollTimeout:wne,ignoreSelector:i?i.join(","):""}:void 0;s&&(this.clickDetector=new Gre(this,s))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(t),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Lu(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Lu("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const t=Kb({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Lu("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=Kb({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Sa({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:_ne},emit:Cse(this),onMutation:this._onMutationHandler,...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{br(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,_ie(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),br("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),br("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();br("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Uw(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${Ht.location.pathname}${Ht.location.hash}${Ht.location.search}`,n=`${Ht.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===t7){const i=ws({category:"replay.throttled"});this.addUpdate(()=>!qT(this,{type:Fre,timestamp:i.timestamp||0,data:{tag:"breadcrumb",payload:i,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastTransaction||Wy().getTransaction(),r=(t&&Yl(t).data||{})[Xte];if(!(!t||!r||!["route","custom"].includes(r)))return Yl(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=mie({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){Ft&&mt.error("[Replay]",t),Ft&&this._options._experiments&&this._options._experiments.captureExceptions&&t9(t)}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=Kb({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return G9(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Ht.document.addEventListener("visibilitychange",this._handleVisibilityChange),Ht.addEventListener("blur",this._handleWindowBlur),Ht.addEventListener("focus",this._handleWindowFocus),Ht.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(bse(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=uie(this)}_removeListeners(){try{Ht.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Ht.removeEventListener("blur",this._handleWindowBlur),Ht.removeEventListener("focus",this._handleWindowFocus),Ht.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{Ht.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=ws({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=ws({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{tie(this,t)}}_doChangeToBackgroundTasks(t){!this.session||$9(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){br("[Replay] Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:lt.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){const t=iie(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(qy(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){Ft&&mt.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await Sse(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await e7({replayId:t,recordingData:s,segmentId:i,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=rs();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){Ft&&mt.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,i=Date.now()-n;this._debouncedFlush.cancel();const s=i<this._options.minReplayDuration,l=i>this._options.maxReplayDuration+5e3;if(s||l){br(`[Replay] Session duration (${Math.floor(i/1e3)}s) is too ${s?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),s&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&br("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(o){Ft&&mt.error(o)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&XT(this.session)}__init6(){this._onMutationHandler=t=>{const n=t.length,r=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=r&&n>r;if(n>i||s){const l=ws({category:"replay.mutations",data:{count:n,limit:s}});this._createCustomBreadcrumb(l)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function Ef(e,t,n,r){const i=typeof r=="string"?r.split(","):[],s=[...e,...i,...t];return typeof n<"u"&&(typeof n=="string"&&s.push(`.${n}`),$d(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),s.join(",")}function Dse({mask:e,unmask:t,block:n,unblock:r,ignore:i,blockClass:s,blockSelector:l,maskTextClass:a,maskTextSelector:o,ignoreClass:c}){const h=['base[href="/"]'],u=Ef(e,[".sentry-mask","[data-sentry-mask]"],a,o),f=Ef(t,[".sentry-unmask","[data-sentry-unmask]"]),d={maskTextSelector:u,unmaskTextSelector:f,blockSelector:Ef(n,[".sentry-block","[data-sentry-block]",...h],s,l),unblockSelector:Ef(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Ef(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],c)};return s instanceof RegExp&&(d.blockClass=s),a instanceof RegExp&&(d.maskTextClass=a),d}function Mse({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:i,value:s}){return!r||i.unmaskTextSelector&&e.matches(i.unmaskTextSelector)?s:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s}const n5='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Lse=["content-length","content-type","accept"];let r5=!1;class Jy{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=vne,flushMaxDelay:n=yne,minReplayDuration:r=Cne,maxReplayDuration:i=jk,stickySession:s=!0,useCompression:l=!0,workerUrl:a,_experiments:o={},sessionSampleRate:c,errorSampleRate:h,maskAllText:u=!0,maskAllInputs:f=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:p=750,mutationLimit:m=1e4,slowClickTimeout:g=7e3,slowClickIgnoreSelectors:v=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:y=[],networkCaptureBodies:b=!0,networkRequestHeaders:S=[],networkResponseHeaders:x=[],mask:C=[],maskAttributes:w=["title","placeholder"],unmask:k=[],block:I=[],unblock:R=[],ignore:j=[],maskFn:G,beforeAddRecordingEvent:B,beforeErrorSampling:$,blockClass:V,blockSelector:W,maskInputOptions:M,maskTextClass:P,maskTextSelector:O,ignoreClass:A}={}){this.name=Jy.id;const D=Dse({mask:C,unmask:k,block:I,unblock:R,ignore:j,blockClass:V,blockSelector:W,maskTextClass:P,maskTextSelector:O,ignoreClass:A});if(this._recordingOptions={maskAllInputs:f,maskAllText:u,maskInputOptions:{...M||{},password:!0},maskTextFn:G,maskInputFn:G,maskAttributeFn:(X,N,F)=>Mse({maskAttributes:w,maskAllText:u,privacyOptions:D,key:X,value:N,el:F}),...D,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:X=>{try{X.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,Tne),maxReplayDuration:Math.min(i,jk),stickySession:s,sessionSampleRate:c,errorSampleRate:h,useCompression:l,workerUrl:a,blockAllMedia:d,maskAllInputs:f,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:m,slowClickTimeout:g,slowClickIgnoreSelectors:v,networkDetailAllowUrls:_,networkDetailDenyUrls:y,networkCaptureBodies:b,networkRequestHeaders:i5(S),networkResponseHeaders:i5(x),beforeAddRecordingEvent:B,beforeErrorSampling:$,_experiments:o},typeof c=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),typeof h=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${h} })`),this._initialOptions.errorSampleRate=h),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${n5}`:n5),this._isInitialized&&kk())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return r5}set _isInitialized(t){r5=t}setupOnce(){kk()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(t)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const t=Fse(this._initialOptions);this._replay=new ea({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const n=rs().getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}Jy.__initStatic();function Fse(e){const t=rs(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Ss(e)};return n?(e.sessionSampleRate==null&&e.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&$d(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):($d(()=>{console.warn("SDK client is not available.")}),r)}function i5(e){return[...Lse,...e.map(t=>t.toLowerCase())]}const Nse=Object.prototype.toString;function jse(e){switch(Nse.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Bse(e,Error)}}function Bse(e,t){try{return e instanceof t}catch{return!1}}function im(e){return e&&e.Math==Math?e:void 0}const Vw=typeof globalThis=="object"&&im(globalThis)||typeof window=="object"&&im(window)||typeof self=="object"&&im(self)||typeof global=="object"&&im(global)||function(){return this}()||{},Use=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$se="Sentry Logger ",s5=["debug","info","warn","error","log","assert","trace"],o5={};function Gse(e){if(!("console"in Vw))return e();const t=Vw.console,n={},r=Object.keys(o5);r.forEach(i=>{const s=o5[i];n[i]=t[i],t[i]=s});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function Vse(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Use?s5.forEach(n=>{t[n]=(...r)=>{e&&Gse(()=>{Vw.console[n](`${$se}[${n}]:`,...r)})}}):s5.forEach(n=>{t[n]=()=>{}}),t}const Hse=Vse(),a5="7.100.1",zse="sentry.source",Wse="sentry.op",Yse="sentry.origin";function Xse(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:a5})),version:a5}),e._metadata=i}function qse(e){const t={...e};Xse(t,"react"),uee(t)}var n7={exports:{}},Dt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn=typeof Symbol=="function"&&Symbol.for,QT=Qn?Symbol.for("react.element"):60103,JT=Qn?Symbol.for("react.portal"):60106,Zy=Qn?Symbol.for("react.fragment"):60107,e1=Qn?Symbol.for("react.strict_mode"):60108,t1=Qn?Symbol.for("react.profiler"):60114,n1=Qn?Symbol.for("react.provider"):60109,r1=Qn?Symbol.for("react.context"):60110,ZT=Qn?Symbol.for("react.async_mode"):60111,i1=Qn?Symbol.for("react.concurrent_mode"):60111,s1=Qn?Symbol.for("react.forward_ref"):60112,o1=Qn?Symbol.for("react.suspense"):60113,Kse=Qn?Symbol.for("react.suspense_list"):60120,a1=Qn?Symbol.for("react.memo"):60115,l1=Qn?Symbol.for("react.lazy"):60116,Qse=Qn?Symbol.for("react.block"):60121,Jse=Qn?Symbol.for("react.fundamental"):60117,Zse=Qn?Symbol.for("react.responder"):60118,eoe=Qn?Symbol.for("react.scope"):60119;function ni(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case QT:switch(e=e.type,e){case ZT:case i1:case Zy:case t1:case e1:case o1:return e;default:switch(e=e&&e.$$typeof,e){case r1:case s1:case l1:case a1:case n1:return e;default:return t}}case JT:return t}}}function r7(e){return ni(e)===i1}Dt.AsyncMode=ZT;Dt.ConcurrentMode=i1;Dt.ContextConsumer=r1;Dt.ContextProvider=n1;Dt.Element=QT;Dt.ForwardRef=s1;Dt.Fragment=Zy;Dt.Lazy=l1;Dt.Memo=a1;Dt.Portal=JT;Dt.Profiler=t1;Dt.StrictMode=e1;Dt.Suspense=o1;Dt.isAsyncMode=function(e){return r7(e)||ni(e)===ZT};Dt.isConcurrentMode=r7;Dt.isContextConsumer=function(e){return ni(e)===r1};Dt.isContextProvider=function(e){return ni(e)===n1};Dt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===QT};Dt.isForwardRef=function(e){return ni(e)===s1};Dt.isFragment=function(e){return ni(e)===Zy};Dt.isLazy=function(e){return ni(e)===l1};Dt.isMemo=function(e){return ni(e)===a1};Dt.isPortal=function(e){return ni(e)===JT};Dt.isProfiler=function(e){return ni(e)===t1};Dt.isStrictMode=function(e){return ni(e)===e1};Dt.isSuspense=function(e){return ni(e)===o1};Dt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Zy||e===i1||e===t1||e===e1||e===o1||e===Kse||typeof e=="object"&&e!==null&&(e.$$typeof===l1||e.$$typeof===a1||e.$$typeof===n1||e.$$typeof===r1||e.$$typeof===s1||e.$$typeof===Jse||e.$$typeof===Zse||e.$$typeof===eoe||e.$$typeof===Qse)};Dt.typeOf=ni;n7.exports=Dt;var toe=n7.exports,eE=toe,noe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},roe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ioe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},tE={};tE[eE.ForwardRef]=ioe;tE[eE.Memo]=i7;function l5(e){return eE.isMemo(e)?i7:tE[e.$$typeof]||noe}var soe=Object.defineProperty,ooe=Object.getOwnPropertyNames,c5=Object.getOwnPropertySymbols,aoe=Object.getOwnPropertyDescriptor,loe=Object.getPrototypeOf,u5=Object.prototype;function s7(e,t,n){if(typeof t!="string"){if(u5){var r=loe(t);r&&r!==u5&&s7(e,r,n)}var i=ooe(t);c5&&(i=i.concat(c5(t)));for(var s=l5(e),l=l5(t),a=0;a<i.length;++a){var o=i[a];if(!roe[o]&&!(n&&n[o])&&!(l&&l[o])&&!(s&&s[o])){var c=aoe(t,o);try{soe(e,o,c)}catch{}}}}return e}var coe=s7;const uoe=Tr(coe),hoe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,h5="/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/errorboundary.tsx";function foe(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}const doe="unknown",f5={componentStack:null,error:null,eventId:null};function poe(e,t){const n=new WeakMap;function r(i,s){if(!n.has(i)){if(i.cause)return n.set(i,!0),r(i.cause,s);i.cause=s}}r(e,t)}class nE extends T.Component{constructor(t){super(t),nE.prototype.__init.call(this),this.state=f5,this._openFallbackReportDialog=!0;const n=Kn();n&&n.on&&t.showDialog&&(this._openFallbackReportDialog=!1,n.on("afterSendEvent",r=>{!r.type&&r.event_id===this._lastEventId&&bk({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,{componentStack:n}){const{beforeCapture:r,onError:i,showDialog:s,dialogOptions:l}=this.props;tL(a=>{if(foe(T.version)&&jse(t)){const c=new Error(t.message);c.name=`React ErrorBoundary ${t.name}`,c.stack=n,poe(t,c)}r&&r(a,t,n);const o=bT(t,{captureContext:{contexts:{react:{componentStack:n}}},mechanism:{handled:!1}});i&&i(t,n,o),s&&(this._lastEventId=o,this._openFallbackReportDialog&&bk({...l,eventId:o})),this.setState({error:t,componentStack:n,eventId:o})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:n,eventId:r}=this.state,{onUnmount:i}=this.props;i&&i(t,n,r)}__init(){this.resetErrorBoundary=()=>{const{onReset:t}=this.props,{error:n,componentStack:r,eventId:i}=this.state;t&&t(n,r,i),this.setState(f5)}}render(){const{fallback:t,children:n}=this.props,r=this.state;if(r.error){let i;return typeof t=="function"?i=t({error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):i=t,T.isValidElement(i)?i:(t&&hoe&&Hse.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}function goe(e,t){const n=e.displayName||e.name||doe,r=i=>T.createElement(nE,{...t,__self:this,__source:{fileName:h5,lineNumber:238}},T.createElement(e,{...i,__self:this,__source:{fileName:h5,lineNumber:239}}));return r.displayName=`errorBoundary(${n})`,uoe(r,e),r}function moe(e,t,n,r,i,s){return(l,a=!0,o=!0)=>{const c=gt&&gt.location&&gt.location.pathname;a&&c&&l({name:c,attributes:{[zse]:"url",[Wse]:"pageload",[Yse]:"auto.pageload.react.reactrouter_v6"}})}}function h3e(e){return e!=null}function voe(e){return!!e}function o7(e){return e instanceof Error}const d5=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","fetch failed","Network request failed"]);function a7(e){return!(e instanceof Error)||(e==null?void 0:e.name)!=="TypeError"||typeof(e==null?void 0:e.message)!="string"?!1:(e==null?void 0:e.message)==="Load failed"?typeof e.stack>"u":typeof e=="string"?d5.has(e):d5.has(e==null?void 0:e.message)}var l7=(e=>(e.STUDIO="https://6c71bdc0042790e4ea0b514fdb42a1fb@o1051960.ingest.sentry.io/4505964310495233",e.PAYMENTS="https://1e6db961a54d5b6959e674837618abc0@o1051960.ingest.sentry.io/4506433930133504",e))(l7||{});const f3e=goe;var yoe=(e=>(e.PaymentsDialog="PaymentsDialog",e.OneClickUpgradeButton="OneClickUpgradeButton",e.OneClickUpgradeToggle="OneClickUpgradeToggle",e.OneClickYearlyExtension="OneClickYearlyExtension",e))(yoe||{});const _oe=["PaymentsDialog","OneClickUpgradeButton","OneClickUpgradeToggle","OneClickYearlyExtension"];function boe(e){if(typeof window<"u"&&window.CF_PAYMENTS_SENTRY_INITIALIZED)return;const t=["top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage","ResizeObserver loop limit exceeded","Invalid or expired OTP","Failed to execute 'exitFullscreen' on 'Document': Document not active","Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed.","Cannot read properties of null (reading 'document')","UET is not defined","Unreachable hosts - your application id may be incorrect",'Blocked a frame with origin "https://studio.creativefabrica.com"','Uncaught, unspecified "error" event. ([object Object])',"Identifier 'originalPrompt' has already been declared","loadingAfgInterstitial is not defined","tgetT is not defined"],n=[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/eatdifferent\.com\.woopra-ns\.com/i,/static\.woopra\.com\/js\/woopra\.js/i,/extensions\//i,/^chrome:\/\//i,/^chrome-extension:\/\//i,/127\.0\.0\.1:4001\/isrunning/i,/webappstoolbarba\.texthelp\.com\//i,/metrics\.itunes\.apple\.com\.edgesuite\.net\//i,/api.amplitude/i,/miscellaneous_bindings/i,/jid1-ejhbjdxm9zr4tq/i,/clarity\.js/i],r=[new eZ({tracePropagationTargets:[/creativefabrica\.com/],routingInstrumentation:moe()}),new Jy({maskAllText:!0,blockAllMedia:!0})].filter(voe),i=new URLSearchParams(window.location.search).get("sentry_debug")!==null;qse({ignoreErrors:t,debug:i,denyUrls:n,enabled:!1,environment:"production",dsn:e,beforeSend(s,l){var a;if(e==="https://6c71bdc0042790e4ea0b514fdb42a1fb@o1051960.ingest.sentry.io/4505964310495233"){const o=l==null?void 0:l.originalException;return a7(o)?null:s}return e==="https://1e6db961a54d5b6959e674837618abc0@o1051960.ingest.sentry.io/4506433930133504"&&((a=s.tags)!=null&&a.component)&&_oe.includes(s.tags.component)?s:null},integrations:r,tracesSampleRate:1/200,tracePropagationTargets:[/creativefabrica\.com/],replaysSessionSampleRate:0,replaysOnErrorSampleRate:1}),typeof window<"u"&&(window.CF_PAYMENTS_SENTRY_INITIALIZED=!0)}function hc(e){const t=()=>e().then(r=>({default:r}));return{component:T.lazy(t),preload:t}}var Soe=!0,Qb="Invariant failed";function ri(e,t){if(!e){if(Soe)throw new Error(Qb);var n=typeof t=="function"?t():t,r=n?"".concat(Qb,": ").concat(n):Qb;throw new Error(r)}}const xoe="cfToken",c7="https://graphql-gw.creativefabrica.com/query",p5={}.NEXT_PUBLIC_LOCAL_AUTH_TOKEN||{}.VITE_LOCAL_AUTH_TOKEN,woe={}.NEXT_PUBLIC_WP_COOKIE_NAME||"wordpress_logged_in_ac3575f3effc9e01556832fcfd15e097";ri(c7,"GRAPHQL_URL must be set inside packages/codegen/fetcher.ts");ri(woe,"WP_COOKIE_NAME must be set inside packages/codegen/fetcher.ts");function Coe(){try{const e=localStorage.getItem(xoe);if(e)return e}catch{}return p5||null}async function Toe(e,t,n,r){const i=new Headers(n);i.append("accept","application/json, multipart/mixed"),i.append("content-type","application/json");const s=Coe();s&&i.append("Authorization",`Bearer ${s}`);const a=await(await fetch(c7,{...r,method:"POST",credentials:"include",headers:i,body:JSON.stringify({query:e,variables:t})})).json();return Eoe(a.errors),a.data}function Eoe(e){if(!Array.isArray(e))return;const t=new Set;for(const r of e)t.has(r.message)||(t.add(r.message),console.error(r.message));const{message:n}=e[0]||{};if(n)throw new Error(n)}function oe(e,t,n,r){return function(){return Toe(e,t,n,r)}}const rE=`
    fragment UserFields on User {
  id
  avatarUrl
  firstName
  lastName
  email
  slug
  firstName
  lastName
  stripeCustomerId
  isEligibleForYearlyUpgrade
  isEligibleForFreeTrial
  roles
  subscriptions {
    allAccess
  }
  flags {
    isNew
    isGAdsSignup
    identifyUser
  }
}
    `,Poe=`
    fragment AuthResponseFields on AuthResponse {
  token
  user {
    ...UserFields
  }
}
    ${rE}`,Ioe=`
    fragment LoginResponseFields on LoginResponse {
  token
  user {
    ...UserFields
  }
}
    ${rE}`,Ooe=`
    fragment RegisterResponseFields on RegisterResponse {
  token
  user {
    ...UserFields
  }
}
    ${rE}`,iE=`
    query User {
  me {
    ...AuthResponseFields
    errors {
      code
      message
    }
  }
}
    ${Poe}`,Ki=(e,t)=>Ot(e===void 0?["User"]:["User",e],oe(iE,e),t);Ki.document=iE;Ki.getKey=e=>e===void 0?["User"]:["User",e];Ki.rootKey="User";Ki.fetcher=(e,t)=>oe(iE,e,t);const u7=`
    mutation LogIn($input: LoginInput!) {
  login(input: $input) {
    ...LoginResponseFields
    challenge {
      type
      otp
    }
    errors {
      code
      message
    }
  }
}
    ${Ioe}`,h7=e=>Ke(["LogIn"],t=>oe(u7,t)(),e);h7.getKey=()=>["LogIn"];h7.fetcher=(e,t)=>oe(u7,e,t);const f7=`
    mutation Register($input: RegisterInput!) {
  register(input: $input) {
    ...RegisterResponseFields
    challenge {
      type
      otp
    }
    errors {
      code
      message
    }
  }
}
    ${Ooe}`,d7=e=>Ke(["Register"],t=>oe(f7,t)(),e);d7.getKey=()=>["Register"];d7.fetcher=(e,t)=>oe(f7,e,t);const sE=`
    query UserId {
  me {
    user {
      id
    }
  }
}
    `,Ra=(e,t)=>Ot(e===void 0?["UserId"]:["UserId",e],oe(sE,e),t);Ra.document=sE;Ra.getKey=e=>e===void 0?["UserId"]:["UserId",e];Ra.rootKey="UserId";Ra.fetcher=(e,t)=>oe(sE,e,t);const oE=`
    query UserSubscriptionsGraphics {
  me {
    user {
      subscriptions {
        graphics
      }
    }
  }
}
    `,c1=(e,t)=>Ot(e===void 0?["UserSubscriptionsGraphics"]:["UserSubscriptionsGraphics",e],oe(oE,e),t);c1.document=oE;c1.getKey=e=>e===void 0?["UserSubscriptionsGraphics"]:["UserSubscriptionsGraphics",e];c1.rootKey="UserSubscriptionsGraphics";c1.fetcher=(e,t)=>oe(oE,e,t);var oh=1e3,ah=oh*60,lh=ah*60,Xl=lh*24,koe=Xl*7,Aoe=Xl*365.25,Roe=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return Doe(e);if(n==="number"&&isFinite(e))return t.long?Loe(e):Moe(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Doe(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Aoe;case"weeks":case"week":case"w":return n*koe;case"days":case"day":case"d":return n*Xl;case"hours":case"hour":case"hrs":case"hr":case"h":return n*lh;case"minutes":case"minute":case"mins":case"min":case"m":return n*ah;case"seconds":case"second":case"secs":case"sec":case"s":return n*oh;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function Moe(e){var t=Math.abs(e);return t>=Xl?Math.round(e/Xl)+"d":t>=lh?Math.round(e/lh)+"h":t>=ah?Math.round(e/ah)+"m":t>=oh?Math.round(e/oh)+"s":e+"ms"}function Loe(e){var t=Math.abs(e);return t>=Xl?sm(e,t,Xl,"day"):t>=lh?sm(e,t,lh,"hour"):t>=ah?sm(e,t,ah,"minute"):t>=oh?sm(e,t,oh,"second"):e+" ms"}function sm(e,t,n,r){var i=t>=n*1.5;return Math.round(e/n)+" "+r+(i?"s":"")}const u1=Tr(Roe),Foe={keepPreviousData:!0,staleTime:u1("15s")};function h1(){return Ki(void 0,{...Foe,select(e){var t;return(t=e.me)==null?void 0:t.user}})}function Noe({children:e}){return e}function d3e(){const e=Cy();function t(n){e.setQueryData(Ki.getKey(),n)}return{setUserQuery:t}}function p3e(){const e=Cy();async function t(){e.invalidateQueries(Ki.getKey()),await e.refetchQueries(Ki.getKey()).catch(()=>null)}return{refetchUserQuery:t}}const joe="AW-878812378",g5="G-77VM5LCGS9",Boe="137038477",Uoe="1104013239621163";function $oe(){return E.jsxs(E.Fragment,{children:[E.jsx(Goe,{}),E.jsx(Voe,{}),E.jsx(Hoe,{})]})}function Goe(){var t,n;const e=Ki();return E.jsxs(Ml,{children:[E.jsx("script",{type:"text/javascript",src:`//www.googletagmanager.com/gtag/js?id=${g5}`}),e.isSuccess?E.jsx("script",{type:"text/javascript",children:`
            window.dataLayer = window.dataLayer || [];
            function gtag(){window.dataLayer.push(arguments);}
            window.gtag = gtag;
            gtag('js', new Date());
        
            ${`gtag('config', '${joe}');`}
            gtag('config', '${g5}', {
                ${(n=(t=e.data.me)==null?void 0:t.user)!=null&&n.id?`'user_id': '${e.data.me.user.id}'`:""}
            });
          `}):null]})}function Voe(){return E.jsx(Ml,{children:E.jsx("script",{type:"text/javascript",children:`
           (function(w,d,t,r,u)
           {
               var f,n,i;
               w[u]=w[u]||[],f=function()
           {
               var o={ti:"${Boe}"};
               o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")
           },
               n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function()
           {
               var s=this.readyState;
               s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)
           },
               i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)
           })
           (window,document,"script","https://bat.bing.com/bat.js","uetq");
        `})})}function Hoe(){return E.jsxs(E.Fragment,{children:[E.jsx("div",{id:"fb-root"}),E.jsx(Ml,{children:E.jsx("script",{type:"text/javascript",children:`
            !(function (f, b, e, v, n, t, s) {
              if (f.fbq) return;
              n = f.fbq = function () {
                n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments);
              };
              if (!f._fbq) f._fbq = n;
              n.push = n;
              n.loaded = !0;
              n.version = '2.0';
              n.queue = [];
              t = b.createElement(e);
              t.async = !0;
              t.src = v;
              s = b.getElementsByTagName(e)[0];
              s.parentNode.insertBefore(t, s);
            })(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');
            fbq('init', '${Uoe}');
            fbq('track', 'PageView');
          `})})]})}function f1(){throw new Error("Cycle detected")}function d1(){if(wa>1)wa--;else{for(var e,t=!1;ad!==void 0;){var n=ad;for(ad=void 0,Hw++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&g7(n))try{n.c()}catch(i){t||(e=i,t=!0)}n=r}}if(Hw=0,wa--,t)throw e}}function g3e(e){if(wa>0)return e();wa++;try{return e()}finally{d1()}}var hn=void 0,ad=void 0,wa=0,Hw=0,_v=0;function p7(e){if(hn!==void 0){var t=e.n;if(t===void 0||t.t!==hn)return t={i:0,S:e,p:hn.s,n:void 0,t:hn,e:void 0,x:void 0,r:t},hn.s!==void 0&&(hn.s.n=t),hn.s=t,e.n=t,32&hn.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=hn.s,t.n=void 0,hn.s.n=t,hn.s=t),t}}function rr(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}rr.prototype.h=function(){return!0};rr.prototype.S=function(e){this.t!==e&&e.e===void 0&&(e.x=this.t,this.t!==void 0&&(this.t.e=e),this.t=e)};rr.prototype.U=function(e){if(this.t!==void 0){var t=e.e,n=e.x;t!==void 0&&(t.x=n,e.e=void 0),n!==void 0&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}};rr.prototype.subscribe=function(e){var t=this;return lE(function(){var n=t.value,r=32&this.f;this.f&=-33;try{e(n)}finally{this.f|=r}})};rr.prototype.valueOf=function(){return this.value};rr.prototype.toString=function(){return this.value+""};rr.prototype.toJSON=function(){return this.value};rr.prototype.peek=function(){return this.v};Object.defineProperty(rr.prototype,"value",{get:function(){var e=p7(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(hn instanceof Ha&&function(){throw new Error("Computed cannot have side-effects")}(),e!==this.v){Hw>100&&f1(),this.v=e,this.i++,_v++,wa++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{d1()}}}});function zoe(e){return new rr(e)}function g7(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function m7(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function v7(e){for(var t=e.s,n=void 0;t!==void 0;){var r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}e.s=n}function Ha(e){rr.call(this,void 0),this.x=e,this.s=void 0,this.g=_v-1,this.f=4}(Ha.prototype=new rr).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===_v))return!0;if(this.g=_v,this.f|=1,this.i>0&&!g7(this))return this.f&=-2,!0;var e=hn;try{m7(this),hn=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return hn=e,v7(this),this.f&=-2,!0};Ha.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}rr.prototype.S.call(this,e)};Ha.prototype.U=function(e){if(this.t!==void 0&&(rr.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};Ha.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};Ha.prototype.peek=function(){if(this.h()||f1(),16&this.f)throw this.v;return this.v};Object.defineProperty(Ha.prototype,"value",{get:function(){1&this.f&&f1();var e=p7(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function Woe(e){return new Ha(e)}function y7(e){var t=e.u;if(e.u=void 0,typeof t=="function"){wa++;var n=hn;hn=void 0;try{t()}catch(r){throw e.f&=-2,e.f|=8,aE(e),r}finally{hn=n,d1()}}}function aE(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,y7(e)}function Yoe(e){if(hn!==this)throw new Error("Out-of-order effect");v7(this),hn=e,this.f&=-2,8&this.f&&aE(this),d1()}function Ep(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Ep.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};Ep.prototype.S=function(){1&this.f&&f1(),this.f|=1,this.f&=-9,y7(this),m7(this),wa++;var e=hn;return hn=this,Yoe.bind(this,e)};Ep.prototype.N=function(){2&this.f||(this.f|=2,this.o=ad,ad=this)};Ep.prototype.d=function(){this.f|=8,1&this.f||aE(this)};function lE(e){var t=new Ep(e);try{t.c()}catch(n){throw t.d(),n}return t.d.bind(t)}var _7={exports:{}},cE={};/**
 * @license React
 * react-jsx-dev-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xoe=Symbol.for("react.fragment");cE.Fragment=Xoe;cE.jsxDEV=void 0;_7.exports=cE;var qoe=_7.exports;const Koe=Tr(qoe);var b7=[],Qoe=Symbol.for("react.element");Object.defineProperties(rr.prototype,{$$typeof:{configurable:!0,value:Qoe},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});function m3e(e){var t=T.useRef(e);return t.current=e,T.useMemo(function(){return Woe(function(){return t.current()})},b7)}function v3e(e){var t=T.useRef(e);t.current=e,T.useEffect(function(){return lE(function(){return t.current()})},b7)}var Jb,Joe=Symbol.for("react.element");function al(e){return typeof e!="function"?e:function(t,n){if(typeof t=="string"&&n)for(var r in n){var i=n[r];r!=="children"&&i instanceof rr&&(n[r]=i.value)}return e.call.apply(e,[e,t,n].concat([].slice.call(arguments,2)))}}function S7(e){Jb&&Jb(),Jb=e&&e.S()}var Zoe=function(){return S7()};Object.defineProperties(rr.prototype,{$$typeof:{configurable:!0,value:Joe},type:{configurable:!0,value:function(e){return e.data.value}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});var Zb=null,eS=!1,om=null,m5=new Map;function v5(e){if(!e)return 1;var t,n=m5.get(e);if(n!==void 0)return n;var r=e.useCallback.toString();if(e.useReducer===e.useEffect)t=1;else if(e.useEffect===e.useImperativeHandle)t=32;else if(/Invalid/.test(r))t=2;else if(/updateCallback/.test(r)||/\[0\]/.test(r)&&/\[1\]/.test(r)){var i=e.useReducer.toString();/rerenderReducer/.test(i)||/return\s*\[\w+,/.test(i)?t=16:t=8}else t=4;return m5.set(e,t),t}(function(){Object.defineProperty(T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return om},set:function(e){if(eS)om=e;else{var t=v5(om),n=v5(e);om=e,function(r,i){return 1&r&&28&i?!0:2&r||2&i?!1:!!(16&i)}(t,n)?(eS=!0,Zb=function(){var r=T.useRef();r.current==null&&(r.current=function(){var s,l,a=0,o=lE(function(){s=this});return s.c=function(){a=a+1|0,l&&l()},{updater:s,subscribe:function(c){return l=c,function(){a=a+1|0,l=void 0,o()}},getSnapshot:function(){return a}}}());var i=r.current;return nT.useSyncExternalStore(i.subscribe,i.getSnapshot,i.getSnapshot),S7(i.updater),Zoe}(),eS=!1):function(r,i){return!!(28&r&&1&i)}(t,n)&&(Zb==null||Zb())}}}),function(){var e=UH,t=Koe;Jt.createElement=al(Jt.createElement),t.jsx&&(t.jsx=al(t.jsx)),e.jsx&&(e.jsx=al(e.jsx)),t.jsxs&&(t.jsxs=al(t.jsxs)),e.jsxs&&(e.jsxs=al(e.jsxs)),t.jsxDEV&&(t.jsxDEV=al(t.jsxDEV)),e.jsxDEV&&(e.jsxDEV=al(e.jsxDEV))}()})();function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be.apply(this,arguments)}function ht(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function eae(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function x7(...e){return t=>e.forEach(n=>eae(n,t))}function It(...e){return T.useCallback(x7(...e),e)}function fc(e,t=[]){let n=[];function r(s,l){const a=T.createContext(l),o=n.length;n=[...n,l];function c(u){const{scope:f,children:d,...p}=u,m=(f==null?void 0:f[e][o])||a,g=T.useMemo(()=>p,Object.values(p));return T.createElement(m.Provider,{value:g},d)}function h(u,f){const d=(f==null?void 0:f[e][o])||a,p=T.useContext(d);if(p)return p;if(l!==void 0)return l;throw new Error(`\`${u}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,h]}const i=()=>{const s=n.map(l=>T.createContext(l));return function(a){const o=(a==null?void 0:a[e])||s;return T.useMemo(()=>({[`__scope${e}`]:{...a,[e]:o}}),[a,o])}};return i.scopeName=e,[r,tae(i,...t)]}function tae(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const l=r.reduce((a,{useScope:o,scopeName:c})=>{const u=o(s)[`__scope${c}`];return{...a,...u}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}const fr=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},nae=$D["useId".toString()]||(()=>{});let rae=0;function Fu(e){const[t,n]=T.useState(nae());return fr(()=>{e||n(r=>r??String(rae++))},[e]),e||(t?`radix-${t}`:"")}function Oi(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function Wd({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=iae({defaultProp:t,onChange:n}),s=e!==void 0,l=s?e:r,a=Oi(n),o=T.useCallback(c=>{if(s){const u=typeof c=="function"?c(e):c;u!==e&&a(u)}else i(c)},[s,e,i,a]);return[l,o]}function iae({defaultProp:e,onChange:t}){const n=T.useState(e),[r]=n,i=T.useRef(r),s=Oi(t);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const Qi=T.forwardRef((e,t)=>{const{children:n,...r}=e,i=T.Children.toArray(n),s=i.find(sae);if(s){const l=s.props.children,a=i.map(o=>o===s?T.Children.count(l)>1?T.Children.only(null):T.isValidElement(l)?l.props.children:null:o);return T.createElement(zw,Be({},r,{ref:t}),T.isValidElement(l)?T.cloneElement(l,void 0,a):null)}return T.createElement(zw,Be({},r,{ref:t}),n)});Qi.displayName="Slot";const zw=T.forwardRef((e,t)=>{const{children:n,...r}=e;return T.isValidElement(n)?T.cloneElement(n,{...oae(r,n.props),ref:t?x7(t,n.ref):n.ref}):T.Children.count(n)>1?T.Children.only(null):null});zw.displayName="SlotClone";const w7=({children:e})=>T.createElement(T.Fragment,null,e);function sae(e){return T.isValidElement(e)&&e.type===w7}function oae(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const aae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Nt=aae.reduce((e,t)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...l}=r,a=s?Qi:t;return T.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),T.createElement(a,Be({},l,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function C7(e,t){e&&ac.flushSync(()=>e.dispatchEvent(t))}function T7(e,t=globalThis==null?void 0:globalThis.document){const n=Oi(e);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const Ww="dismissableLayer.update",lae="dismissableLayer.pointerDownOutside",cae="dismissableLayer.focusOutside";let y5;const uae=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),E7=T.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:a,onDismiss:o,...c}=e,h=T.useContext(uae),[u,f]=T.useState(null),d=(n=u==null?void 0:u.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=T.useState({}),m=It(t,w=>f(w)),g=Array.from(h.layers),[v]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),_=g.indexOf(v),y=u?g.indexOf(u):-1,b=h.layersWithOutsidePointerEventsDisabled.size>0,S=y>=_,x=hae(w=>{const k=w.target,I=[...h.branches].some(R=>R.contains(k));!S||I||(s==null||s(w),a==null||a(w),w.defaultPrevented||o==null||o())},d),C=fae(w=>{const k=w.target;[...h.branches].some(R=>R.contains(k))||(l==null||l(w),a==null||a(w),w.defaultPrevented||o==null||o())},d);return T7(w=>{y===h.layers.size-1&&(i==null||i(w),!w.defaultPrevented&&o&&(w.preventDefault(),o()))},d),T.useEffect(()=>{if(u)return r&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(y5=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(u)),h.layers.add(u),_5(),()=>{r&&h.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=y5)}},[u,d,r,h]),T.useEffect(()=>()=>{u&&(h.layers.delete(u),h.layersWithOutsidePointerEventsDisabled.delete(u),_5())},[u,h]),T.useEffect(()=>{const w=()=>p({});return document.addEventListener(Ww,w),()=>document.removeEventListener(Ww,w)},[]),T.createElement(Nt.div,Be({},c,{ref:m,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:ht(e.onFocusCapture,C.onFocusCapture),onBlurCapture:ht(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ht(e.onPointerDownCapture,x.onPointerDownCapture)}))});function hae(e,t=globalThis==null?void 0:globalThis.document){const n=Oi(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){P7(lae,n,o,{discrete:!0})};const o={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function fae(e,t=globalThis==null?void 0:globalThis.document){const n=Oi(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&P7(cae,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _5(){const e=new CustomEvent(Ww);document.dispatchEvent(e)}function P7(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?C7(i,s):i.dispatchEvent(s)}const tS="focusScope.autoFocusOnMount",nS="focusScope.autoFocusOnUnmount",b5={bubbles:!1,cancelable:!0},I7=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...l}=e,[a,o]=T.useState(null),c=Oi(i),h=Oi(s),u=T.useRef(null),f=It(t,m=>o(m)),d=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let m=function(y){if(d.paused||!a)return;const b=y.target;a.contains(b)?u.current=b:Uo(u.current,{select:!0})},g=function(y){if(d.paused||!a)return;const b=y.relatedTarget;b!==null&&(a.contains(b)||Uo(u.current,{select:!0}))},v=function(y){const b=document.activeElement;for(const S of y)S.removedNodes.length>0&&(a!=null&&a.contains(b)||Uo(a))};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const _=new MutationObserver(v);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),_.disconnect()}}},[r,a,d.paused]),T.useEffect(()=>{if(a){x5.add(d);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(tS,b5);a.addEventListener(tS,c),a.dispatchEvent(v),v.defaultPrevented||(dae(yae(O7(a)),{select:!0}),document.activeElement===m&&Uo(a))}return()=>{a.removeEventListener(tS,c),setTimeout(()=>{const v=new CustomEvent(nS,b5);a.addEventListener(nS,h),a.dispatchEvent(v),v.defaultPrevented||Uo(m??document.body,{select:!0}),a.removeEventListener(nS,h),x5.remove(d)},0)}}},[a,c,h,d]);const p=T.useCallback(m=>{if(!n&&!r||d.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(g&&v){const _=m.currentTarget,[y,b]=pae(_);y&&b?!m.shiftKey&&v===b?(m.preventDefault(),n&&Uo(y,{select:!0})):m.shiftKey&&v===y&&(m.preventDefault(),n&&Uo(b,{select:!0})):v===_&&m.preventDefault()}},[n,r,d.paused]);return T.createElement(Nt.div,Be({tabIndex:-1},l,{ref:f,onKeyDown:p}))});function dae(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Uo(r,{select:t}),document.activeElement!==n)return}function pae(e){const t=O7(e),n=S5(t,e),r=S5(t.reverse(),e);return[n,r]}function O7(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function S5(e,t){for(const n of e)if(!gae(n,{upTo:t}))return n}function gae(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function mae(e){return e instanceof HTMLInputElement&&"select"in e}function Uo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&mae(e)&&t&&e.select()}}const x5=vae();function vae(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=w5(e,t),e.unshift(t)},remove(t){var n;e=w5(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function w5(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function yae(e){return e.filter(t=>t.tagName!=="A")}const k7=T.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=e;return r?lY.createPortal(T.createElement(Nt.div,Be({},i,{ref:t})),r):null});function _ae(e,t){return T.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const Pp=e=>{const{present:t,children:n}=e,r=bae(t),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=It(r.ref,i.ref);return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};Pp.displayName="Presence";function bae(e){const[t,n]=T.useState(),r=T.useRef({}),i=T.useRef(e),s=T.useRef("none"),l=e?"mounted":"unmounted",[a,o]=_ae(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=am(r.current);s.current=a==="mounted"?c:"none"},[a]),fr(()=>{const c=r.current,h=i.current;if(h!==e){const f=s.current,d=am(c);e?o("MOUNT"):d==="none"||(c==null?void 0:c.display)==="none"?o("UNMOUNT"):o(h&&f!==d?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,o]),fr(()=>{if(t){const c=u=>{const d=am(r.current).includes(u.animationName);u.target===t&&d&&ac.flushSync(()=>o("ANIMATION_END"))},h=u=>{u.target===t&&(s.current=am(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",c),t.addEventListener("animationend",c),()=>{t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",c),t.removeEventListener("animationend",c)}}else o("ANIMATION_END")},[t,o]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function am(e){return(e==null?void 0:e.animationName)||"none"}let rS=0;function A7(){T.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:C5()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:C5()),rS++,()=>{rS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),rS--}},[])}function C5(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var sa=function(){return sa=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},sa.apply(this,arguments)};function Sae(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function xae(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var h0="right-scroll-bar-position",f0="width-before-scroll-bar",wae="with-scroll-bars-hidden",Cae="--removed-body-scroll-bar-size";function Tae(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Eae(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}function Pae(e,t){return Eae(t||null,function(n){return e.forEach(function(r){return Tae(r,n)})})}var bv=function(){return bv=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},bv.apply(this,arguments)};function Iae(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Oae(e){return e}function kae(e,t){t===void 0&&(t=Oae);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var l=t(s,r);return n.push(l),function(){n=n.filter(function(a){return a!==l})}},assignSyncMedium:function(s){for(r=!0;n.length;){var l=n;n=[],l.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var l=[];if(n.length){var a=n;n=[],a.forEach(s),l=n}var o=function(){var h=l;l=[],h.forEach(s)},c=function(){return Promise.resolve().then(o)};c(),n={push:function(h){l.push(h),c()},filter:function(h){return l=l.filter(h),n}}}};return i}function Aae(e){e===void 0&&(e={});var t=kae(null);return t.options=bv({async:!0,ssr:!1},e),t}var R7=function(e){var t=e.sideCar,n=Iae(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,bv({},n))};R7.isSideCarExport=!0;function Rae(e,t){return e.useMedium(t),R7}var D7=Aae(),iS=function(){},p1=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:iS,onWheelCapture:iS,onTouchMoveCapture:iS}),i=r[0],s=r[1],l=e.forwardProps,a=e.children,o=e.className,c=e.removeScrollBar,h=e.enabled,u=e.shards,f=e.sideCar,d=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,v=g===void 0?"div":g,_=Sae(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),y=f,b=Pae([n,t]),S=sa(sa({},_),i);return T.createElement(T.Fragment,null,h&&T.createElement(y,{sideCar:D7,removeScrollBar:c,shards:u,noIsolation:d,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n}),l?T.cloneElement(T.Children.only(a),sa(sa({},S),{ref:b})):T.createElement(v,sa({},S,{className:o,ref:b}),a))});p1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};p1.classNames={fullWidth:f0,zeroRight:h0};var T5,Dae=function(){if(T5)return T5;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Mae(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Dae();return t&&e.setAttribute("nonce",t),e}function Lae(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Fae(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Nae=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Mae())&&(Lae(t,n),Fae(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jae=function(){var e=Nae();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},M7=function(){var e=jae(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Bae={left:0,top:0,right:0,gap:0},sS=function(e){return parseInt(e||"",10)||0},Uae=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[sS(n),sS(r),sS(i)]},$ae=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Bae;var t=Uae(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Gae=M7(),Vae=function(e,t,n,r){var i=e.left,s=e.top,l=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(wae,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(h0,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(f0,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(h0," .").concat(h0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(f0," .").concat(f0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(Cae,": ").concat(a,`px;
  }
`)},Hae=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r,s=T.useMemo(function(){return $ae(i)},[i]);return T.createElement(Gae,{styles:Vae(s,!t,i,n?"":"!important")})},Yw=!1;if(typeof window<"u")try{var lm=Object.defineProperty({},"passive",{get:function(){return Yw=!0,!0}});window.addEventListener("test",lm,lm),window.removeEventListener("test",lm,lm)}catch{Yw=!1}var Lc=Yw?{passive:!1}:!1,zae=function(e){return e.tagName==="TEXTAREA"},L7=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!zae(e)&&n[t]==="visible")},Wae=function(e){return L7(e,"overflowY")},Yae=function(e){return L7(e,"overflowX")},E5=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=F7(e,n);if(r){var i=N7(e,n),s=i[1],l=i[2];if(s>l)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Xae=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},qae=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},F7=function(e,t){return e==="v"?Wae(t):Yae(t)},N7=function(e,t){return e==="v"?Xae(t):qae(t)},Kae=function(e,t){return e==="h"&&t==="rtl"?-1:1},Qae=function(e,t,n,r,i){var s=Kae(e,window.getComputedStyle(t).direction),l=s*r,a=n.target,o=t.contains(a),c=!1,h=l>0,u=0,f=0;do{var d=N7(e,a),p=d[0],m=d[1],g=d[2],v=m-g-s*p;(p||v)&&F7(e,a)&&(u+=v,f+=p),a=a.parentNode}while(!o&&a!==document.body||o&&(t.contains(a)||t===a));return(h&&(i&&u===0||!i&&l>u)||!h&&(i&&f===0||!i&&-l>f))&&(c=!0),c},cm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},P5=function(e){return[e.deltaX,e.deltaY]},I5=function(e){return e&&"current"in e?e.current:e},Jae=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Zae=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ele=0,Fc=[];function tle(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(ele++)[0],s=T.useState(function(){return M7()})[0],l=T.useRef(e);T.useEffect(function(){l.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=xae([e.lockRef.current],(e.shards||[]).map(I5),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=T.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!l.current.allowPinchZoom;var v=cm(m),_=n.current,y="deltaX"in m?m.deltaX:_[0]-v[0],b="deltaY"in m?m.deltaY:_[1]-v[1],S,x=m.target,C=Math.abs(y)>Math.abs(b)?"h":"v";if("touches"in m&&C==="h"&&x.type==="range")return!1;var w=E5(C,x);if(!w)return!0;if(w?S=C:(S=C==="v"?"h":"v",w=E5(C,x)),!w)return!1;if(!r.current&&"changedTouches"in m&&(y||b)&&(r.current=S),!S)return!0;var k=r.current||S;return Qae(k,g,m,k==="h"?y:b,!0)},[]),o=T.useCallback(function(m){var g=m;if(!(!Fc.length||Fc[Fc.length-1]!==s)){var v="deltaY"in g?P5(g):cm(g),_=t.current.filter(function(S){return S.name===g.type&&S.target===g.target&&Jae(S.delta,v)})[0];if(_&&_.should){g.cancelable&&g.preventDefault();return}if(!_){var y=(l.current.shards||[]).map(I5).filter(Boolean).filter(function(S){return S.contains(g.target)}),b=y.length>0?a(g,y[0]):!l.current.noIsolation;b&&g.cancelable&&g.preventDefault()}}},[]),c=T.useCallback(function(m,g,v,_){var y={name:m,delta:g,target:v,should:_};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(b){return b!==y})},1)},[]),h=T.useCallback(function(m){n.current=cm(m),r.current=void 0},[]),u=T.useCallback(function(m){c(m.type,P5(m),m.target,a(m,e.lockRef.current))},[]),f=T.useCallback(function(m){c(m.type,cm(m),m.target,a(m,e.lockRef.current))},[]);T.useEffect(function(){return Fc.push(s),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:f}),document.addEventListener("wheel",o,Lc),document.addEventListener("touchmove",o,Lc),document.addEventListener("touchstart",h,Lc),function(){Fc=Fc.filter(function(m){return m!==s}),document.removeEventListener("wheel",o,Lc),document.removeEventListener("touchmove",o,Lc),document.removeEventListener("touchstart",h,Lc)}},[]);var d=e.removeScrollBar,p=e.inert;return T.createElement(T.Fragment,null,p?T.createElement(s,{styles:Zae(i)}):null,d?T.createElement(Hae,{gapMode:"margin"}):null)}const nle=Rae(D7,tle);var j7=T.forwardRef(function(e,t){return T.createElement(p1,sa({},e,{ref:t,sideCar:nle}))});j7.classNames=p1.classNames;const B7=j7;var rle=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Nc=new WeakMap,um=new WeakMap,hm={},oS=0,U7=function(e){return e&&(e.host||U7(e.parentNode))},ile=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=U7(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},sle=function(e,t,n,r){var i=ile(t,Array.isArray(e)?e:[e]);hm[n]||(hm[n]=new WeakMap);var s=hm[n],l=[],a=new Set,o=new Set(i),c=function(u){!u||a.has(u)||(a.add(u),c(u.parentNode))};i.forEach(c);var h=function(u){!u||o.has(u)||Array.prototype.forEach.call(u.children,function(f){if(a.has(f))h(f);else{var d=f.getAttribute(r),p=d!==null&&d!=="false",m=(Nc.get(f)||0)+1,g=(s.get(f)||0)+1;Nc.set(f,m),s.set(f,g),l.push(f),m===1&&p&&um.set(f,!0),g===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}})};return h(t),a.clear(),oS++,function(){l.forEach(function(u){var f=Nc.get(u)-1,d=s.get(u)-1;Nc.set(u,f),s.set(u,d),f||(um.has(u)||u.removeAttribute(r),um.delete(u)),d||u.removeAttribute(n)}),oS--,oS||(Nc=new WeakMap,Nc=new WeakMap,um=new WeakMap,hm={})}},$7=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||rle(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),sle(r,i,n,"aria-hidden")):function(){return null}};const G7="Dialog",[V7,y3e]=fc(G7),[ole,Io]=V7(G7),ale=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:l=!0}=e,a=T.useRef(null),o=T.useRef(null),[c=!1,h]=Wd({prop:r,defaultProp:i,onChange:s});return T.createElement(ole,{scope:t,triggerRef:a,contentRef:o,contentId:Fu(),titleId:Fu(),descriptionId:Fu(),open:c,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(u=>!u),[h]),modal:l},n)},lle="DialogTrigger",cle=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Io(lle,n),s=It(t,i.triggerRef);return T.createElement(Nt.button,Be({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":uE(i.open)},r,{ref:s,onClick:ht(e.onClick,i.onOpenToggle)}))}),H7="DialogPortal",[ule,z7]=V7(H7,{forceMount:void 0}),hle=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=Io(H7,t);return T.createElement(ule,{scope:t,forceMount:n},T.Children.map(r,l=>T.createElement(Pp,{present:n||s.open},T.createElement(k7,{asChild:!0,container:i},l))))},Xw="DialogOverlay",fle=T.forwardRef((e,t)=>{const n=z7(Xw,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Io(Xw,e.__scopeDialog);return s.modal?T.createElement(Pp,{present:r||s.open},T.createElement(dle,Be({},i,{ref:t}))):null}),dle=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Io(Xw,n);return T.createElement(B7,{as:Qi,allowPinchZoom:!0,shards:[i.contentRef]},T.createElement(Nt.div,Be({"data-state":uE(i.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),Yd="DialogContent",ple=T.forwardRef((e,t)=>{const n=z7(Yd,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=Io(Yd,e.__scopeDialog);return T.createElement(Pp,{present:r||s.open},s.modal?T.createElement(gle,Be({},i,{ref:t})):T.createElement(mle,Be({},i,{ref:t})))}),gle=T.forwardRef((e,t)=>{const n=Io(Yd,e.__scopeDialog),r=T.useRef(null),i=It(t,n.contentRef,r);return T.useEffect(()=>{const s=r.current;if(s)return $7(s)},[]),T.createElement(W7,Be({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ht(e.onCloseAutoFocus,s=>{var l;s.preventDefault(),(l=n.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:ht(e.onPointerDownOutside,s=>{const l=s.detail.originalEvent,a=l.button===0&&l.ctrlKey===!0;(l.button===2||a)&&s.preventDefault()}),onFocusOutside:ht(e.onFocusOutside,s=>s.preventDefault())}))}),mle=T.forwardRef((e,t)=>{const n=Io(Yd,e.__scopeDialog),r=T.useRef(!1),i=T.useRef(!1);return T.createElement(W7,Be({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var l;if((l=e.onCloseAutoFocus)===null||l===void 0||l.call(e,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var l,a;(l=e.onInteractOutside)===null||l===void 0||l.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),W7=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...l}=e,a=Io(Yd,n),o=T.useRef(null),c=It(t,o);return A7(),T.createElement(T.Fragment,null,T.createElement(I7,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},T.createElement(E7,Be({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":uE(a.open)},l,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),vle="DialogClose",yle=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Io(vle,n);return T.createElement(Nt.button,Be({type:"button"},r,{ref:t,onClick:ht(e.onClick,()=>i.onOpenChange(!1))}))});function uE(e){return e?"open":"closed"}const _le=ale,g1=cle,m1=hle,ble=fle,Sle=ple,xle=yle,Y7=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),v1=T.createContext({}),y1=T.createContext(null),_1=typeof document<"u",hE=_1?T.useLayoutEffect:T.useEffect,X7=T.createContext({strict:!1}),fE=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),wle="framerAppearId",q7="data-"+fE(wle);function Cle(e,t,n,r){const{visualElement:i}=T.useContext(v1),s=T.useContext(X7),l=T.useContext(y1),a=T.useContext(Y7).reducedMotion,o=T.useRef();r=r||s.renderer,!o.current&&r&&(o.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:a}));const c=o.current;T.useInsertionEffect(()=>{c&&c.update(n,l)});const h=T.useRef(!!(n[q7]&&!window.HandoffComplete));return hE(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),T.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),c}function vu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Tle(e,t,n){return T.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):vu(n)&&(n.current=r))},[t])}function Xd(e){return typeof e=="string"||Array.isArray(e)}function b1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const dE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pE=["initial",...dE];function S1(e){return b1(e.animate)||pE.some(t=>Xd(e[t]))}function K7(e){return!!(S1(e)||e.variants)}function Ele(e,t){if(S1(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Xd(n)?n:void 0,animate:Xd(r)?r:void 0}}return e.inherit!==!1?t:{}}function Ple(e){const{initial:t,animate:n}=Ele(e,T.useContext(v1));return T.useMemo(()=>({initial:t,animate:n}),[O5(t),O5(n)])}function O5(e){return Array.isArray(e)?e.join(" "):e}const k5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qd={};for(const e in k5)qd[e]={isEnabled:t=>k5[e].some(n=>!!t[n])};function Ile(e){for(const t in e)qd[t]={...qd[t],...e[t]}}const gE=T.createContext({}),Q7=T.createContext({}),Ole=Symbol.for("motionComponentSymbol");function kle({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&Ile(e);function s(a,o){let c;const h={...T.useContext(Y7),...a,layoutId:Ale(a)},{isStatic:u}=h,f=Ple(a),d=r(a,u);if(!u&&_1){f.visualElement=Cle(i,d,h,t);const p=T.useContext(Q7),m=T.useContext(X7).strict;f.visualElement&&(c=f.visualElement.loadFeatures(h,m,e,p))}return T.createElement(v1.Provider,{value:f},c&&f.visualElement?T.createElement(c,{visualElement:f.visualElement,...h}):null,n(i,a,Tle(d,f.visualElement,o),d,u,f.visualElement))}const l=T.forwardRef(s);return l[Ole]=i,l}function Ale({layoutId:e}){const t=T.useContext(gE).id;return t&&e!==void 0?t+"-"+e:e}function Rle(e){function t(r,i={}){return kle(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const Dle=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mE(e){return typeof e!="string"||e.includes("-")?!1:!!(Dle.indexOf(e)>-1||/[A-Z]/.test(e))}const Sv={};function Mle(e){Object.assign(Sv,e)}const Ip=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dc=new Set(Ip);function J7(e,{layout:t,layoutId:n}){return dc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Sv[e]||e==="opacity")}const Ur=e=>!!(e&&e.getVelocity),Lle={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fle=Ip.length;function Nle(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let s="";for(let l=0;l<Fle;l++){const a=Ip[l];if(e[a]!==void 0){const o=Lle[a]||a;s+=`${o}(${e[a]}) `}}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,r?"":s):n&&r&&(s="none"),s}const Z7=e=>t=>typeof t=="string"&&t.startsWith(e),eF=Z7("--"),qw=Z7("var(--"),jle=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Ble=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Da=(e,t,n)=>Math.min(Math.max(n,e),t),pc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ld={...pc,transform:e=>Da(0,1,e)},fm={...pc,default:1},cd=e=>Math.round(e*1e5)/1e5,x1=/(-)?([\d]*\.?[\d])+/g,tF=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Ule=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Op(e){return typeof e=="string"}const kp=e=>({test:t=>Op(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),$o=kp("deg"),Os=kp("%"),Xe=kp("px"),$le=kp("vh"),Gle=kp("vw"),A5={...Os,parse:e=>Os.parse(e)/100,transform:e=>Os.transform(e*100)},R5={...pc,transform:Math.round},nF={borderWidth:Xe,borderTopWidth:Xe,borderRightWidth:Xe,borderBottomWidth:Xe,borderLeftWidth:Xe,borderRadius:Xe,radius:Xe,borderTopLeftRadius:Xe,borderTopRightRadius:Xe,borderBottomRightRadius:Xe,borderBottomLeftRadius:Xe,width:Xe,maxWidth:Xe,height:Xe,maxHeight:Xe,size:Xe,top:Xe,right:Xe,bottom:Xe,left:Xe,padding:Xe,paddingTop:Xe,paddingRight:Xe,paddingBottom:Xe,paddingLeft:Xe,margin:Xe,marginTop:Xe,marginRight:Xe,marginBottom:Xe,marginLeft:Xe,rotate:$o,rotateX:$o,rotateY:$o,rotateZ:$o,scale:fm,scaleX:fm,scaleY:fm,scaleZ:fm,skew:$o,skewX:$o,skewY:$o,distance:Xe,translateX:Xe,translateY:Xe,translateZ:Xe,x:Xe,y:Xe,z:Xe,perspective:Xe,transformPerspective:Xe,opacity:ld,originX:A5,originY:A5,originZ:Xe,zIndex:R5,fillOpacity:ld,strokeOpacity:ld,numOctaves:R5};function vE(e,t,n,r){const{style:i,vars:s,transform:l,transformOrigin:a}=e;let o=!1,c=!1,h=!0;for(const u in t){const f=t[u];if(eF(u)){s[u]=f;continue}const d=nF[u],p=Ble(f,d);if(dc.has(u)){if(o=!0,l[u]=p,!h)continue;f!==(d.default||0)&&(h=!1)}else u.startsWith("origin")?(c=!0,a[u]=p):i[u]=p}if(t.transform||(o||r?i.transform=Nle(e.transform,n,h,r):i.transform&&(i.transform="none")),c){const{originX:u="50%",originY:f="50%",originZ:d=0}=a;i.transformOrigin=`${u} ${f} ${d}`}}const yE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rF(e,t,n){for(const r in t)!Ur(t[r])&&!J7(r,n)&&(e[r]=t[r])}function Vle({transformTemplate:e},t,n){return T.useMemo(()=>{const r=yE();return vE(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function Hle(e,t,n){const r=e.style||{},i={};return rF(i,r,e),Object.assign(i,Vle(e,t,n)),e.transformValues?e.transformValues(i):i}function zle(e,t,n){const r={},i=Hle(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const Wle=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xv(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Wle.has(e)}let iF=e=>!xv(e);function Yle(e){e&&(iF=t=>t.startsWith("on")?!xv(t):e(t))}try{Yle(require("@emotion/is-prop-valid").default)}catch{}function Xle(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(iF(i)||n===!0&&xv(i)||!t&&!xv(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function D5(e,t,n){return typeof e=="string"?e:Xe.transform(t+n*e)}function qle(e,t,n){const r=D5(t,e.x,e.width),i=D5(n,e.y,e.height);return`${r} ${i}`}const Kle={offset:"stroke-dashoffset",array:"stroke-dasharray"},Qle={offset:"strokeDashoffset",array:"strokeDasharray"};function Jle(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?Kle:Qle;e[s.offset]=Xe.transform(-r);const l=Xe.transform(t),a=Xe.transform(n);e[s.array]=`${l} ${a}`}function _E(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:l,pathSpacing:a=1,pathOffset:o=0,...c},h,u,f){if(vE(e,c,h,f),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:p,dimensions:m}=e;d.transform&&(m&&(p.transform=d.transform),delete d.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=qle(m,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),l!==void 0&&Jle(d,l,a,o,!1)}const sF=()=>({...yE(),attrs:{}}),bE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Zle(e,t,n,r){const i=T.useMemo(()=>{const s=sF();return _E(s,t,{enableHardwareAcceleration:!1},bE(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};rF(s,e.style,e),i.style={...s,...i.style}}return i}function ece(e=!1){return(n,r,i,{latestValues:s},l)=>{const o=(mE(n)?Zle:zle)(r,s,l,n),h={...Xle(r,typeof n=="string",e),...o,ref:i},{children:u}=r,f=T.useMemo(()=>Ur(u)?u.get():u,[u]);return T.createElement(n,{...h,children:f})}}function oF(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const aF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lF(e,t,n,r){oF(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(aF.has(i)?i:fE(i),t.attrs[i])}function SE(e,t){const{style:n}=e,r={};for(const i in n)(Ur(n[i])||t.style&&Ur(t.style[i])||J7(i,e))&&(r[i]=n[i]);return r}function cF(e,t){const n=SE(e,t);for(const r in e)if(Ur(e[r])||Ur(t[r])){const i=Ip.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function xE(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function uF(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const wv=e=>Array.isArray(e),tce=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),nce=e=>wv(e)?e[e.length-1]||0:e;function d0(e){const t=Ur(e)?e.get():e;return tce(t)?t.toValue():t}function rce({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,s){const l={latestValues:ice(r,i,s,e),renderState:t()};return n&&(l.mount=a=>n(r,a,l)),l}const hF=e=>(t,n)=>{const r=T.useContext(v1),i=T.useContext(y1),s=()=>rce(e,t,r,i);return n?s():uF(s)};function ice(e,t,n,r){const i={},s=r(e,{});for(const f in s)i[f]=d0(s[f]);let{initial:l,animate:a}=e;const o=S1(e),c=K7(e);t&&c&&!o&&e.inherit!==!1&&(l===void 0&&(l=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||l===!1;const u=h?a:l;return u&&typeof u!="boolean"&&!b1(u)&&(Array.isArray(u)?u:[u]).forEach(d=>{const p=xE(e,d);if(!p)return;const{transitionEnd:m,transition:g,...v}=p;for(const _ in v){let y=v[_];if(Array.isArray(y)){const b=h?y.length-1:0;y=y[b]}y!==null&&(i[_]=y)}for(const _ in m)i[_]=m[_]}),i}const pn=e=>e;class M5{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function sce(e){let t=new M5,n=new M5,r=0,i=!1,s=!1;const l=new WeakSet,a={schedule:(o,c=!1,h=!1)=>{const u=h&&i,f=u?t:n;return c&&l.add(o),f.add(o)&&u&&i&&(r=t.order.length),o},cancel:o=>{n.remove(o),l.delete(o)},process:o=>{if(i){s=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let c=0;c<r;c++){const h=t.order[c];h(o),l.has(h)&&(a.schedule(h),e())}i=!1,s&&(s=!1,a.process(o))}};return a}const dm=["prepare","read","update","preRender","render","postRender"],oce=40;function ace(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=dm.reduce((u,f)=>(u[f]=sce(()=>n=!0),u),{}),l=u=>s[u].process(i),a=()=>{const u=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(u-i.timestamp,oce),1),i.timestamp=u,i.isProcessing=!0,dm.forEach(l),i.isProcessing=!1,n&&t&&(r=!1,e(a))},o=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:dm.reduce((u,f)=>{const d=s[f];return u[f]=(p,m=!1,g=!1)=>(n||o(),d.schedule(p,m,g)),u},{}),cancel:u=>dm.forEach(f=>s[f].cancel(u)),state:i,steps:s}}const{schedule:Wt,cancel:_o,state:cr,steps:aS}=ace(typeof requestAnimationFrame<"u"?requestAnimationFrame:pn,!0),lce={useVisualState:hF({scrapeMotionValuesFromProps:cF,createRenderState:sF,onMount:(e,t,{renderState:n,latestValues:r})=>{Wt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Wt.render(()=>{_E(n,r,{enableHardwareAcceleration:!1},bE(t.tagName),e.transformTemplate),lF(t,n)})}})},cce={useVisualState:hF({scrapeMotionValuesFromProps:SE,createRenderState:yE})};function uce(e,{forwardMotionProps:t=!1},n,r){return{...mE(e)?lce:cce,preloadedFeatures:n,useRender:ece(t),createVisualElement:r,Component:e}}function Ks(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const fF=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function w1(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const hce=e=>t=>fF(t)&&e(t,w1(t));function no(e,t,n,r){return Ks(e,t,hce(n),r)}const fce=(e,t)=>n=>t(e(n)),Ca=(...e)=>e.reduce(fce);function dF(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const L5=dF("dragHorizontal"),F5=dF("dragVertical");function pF(e){let t=!1;if(e==="y")t=F5();else if(e==="x")t=L5();else{const n=L5(),r=F5();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function gF(){const e=pF(!0);return e?(e(),!1):!0}class za{constructor(t){this.isMounted=!1,this.node=t}update(){}}function N5(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(s,l)=>{if(s.pointerType==="touch"||gF())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&Wt.update(()=>a[r](s,l))};return no(e.current,n,i,{passive:!e.getProps()[r]})}class dce extends za{mount(){this.unmount=Ca(N5(this.node,!0),N5(this.node,!1))}unmount(){}}class pce extends za{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ca(Ks(this.node.current,"focus",()=>this.onFocus()),Ks(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const mF=(e,t)=>t?e===t?!0:mF(e,t.parentElement):!1;function lS(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,w1(n))}class gce extends za{constructor(){super(...arguments),this.removeStartListeners=pn,this.removeEndListeners=pn,this.removeAccessibleListeners=pn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=no(window,"pointerup",(a,o)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:u}=this.node.getProps();Wt.update(()=>{!u&&!mF(this.node.current,a.target)?h&&h(a,o):c&&c(a,o)})},{passive:!(r.onTap||r.onPointerUp)}),l=no(window,"pointercancel",(a,o)=>this.cancelPress(a,o),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ca(s,l),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const l=a=>{a.key!=="Enter"||!this.checkPressEnd()||lS("up",(o,c)=>{const{onTap:h}=this.node.getProps();h&&Wt.update(()=>h(o,c))})};this.removeEndListeners(),this.removeEndListeners=Ks(this.node.current,"keyup",l),lS("down",(a,o)=>{this.startPress(a,o)})},n=Ks(this.node.current,"keydown",t),r=()=>{this.isPressing&&lS("cancel",(s,l)=>this.cancelPress(s,l))},i=Ks(this.node.current,"blur",r);this.removeAccessibleListeners=Ca(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Wt.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!gF()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Wt.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=no(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Ks(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ca(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Kw=new WeakMap,cS=new WeakMap,mce=e=>{const t=Kw.get(e.target);t&&t(e)},vce=e=>{e.forEach(mce)};function yce({root:e,...t}){const n=e||document;cS.has(n)||cS.set(n,{});const r=cS.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(vce,{root:e,...t})),r[i]}function _ce(e,t,n){const r=yce(t);return Kw.set(e,n),r.observe(e),()=>{Kw.delete(e),r.unobserve(e)}}const bce={some:0,all:1};class Sce extends za{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:bce[i]},a=o=>{const{isIntersecting:c}=o;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:u}=this.node.getProps(),f=c?h:u;f&&f(o)};return _ce(this.node.current,l,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(xce(t,n))&&this.startObserver()}unmount(){}}function xce({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const wce={inView:{Feature:Sce},tap:{Feature:gce},focus:{Feature:pce},hover:{Feature:dce}};function vF(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Cce(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Tce(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function C1(e,t,n){const r=e.getProps();return xE(r,t,n!==void 0?n:r.custom,Cce(e),Tce(e))}let Ece=pn,wE=pn;const Ta=e=>e*1e3,ro=e=>e/1e3,Pce={current:!1},yF=e=>Array.isArray(e)&&typeof e[0]=="number";function _F(e){return!!(!e||typeof e=="string"&&bF[e]||yF(e)||Array.isArray(e)&&e.every(_F))}const Hf=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,bF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hf([0,.65,.55,1]),circOut:Hf([.55,0,1,.45]),backIn:Hf([.31,.01,.66,-.59]),backOut:Hf([.33,1.53,.69,.99])};function SF(e){if(e)return yF(e)?Hf(e):Array.isArray(e)?e.map(SF):bF[e]}function Ice(e,t,n,{delay:r=0,duration:i,repeat:s=0,repeatType:l="loop",ease:a,times:o}={}){const c={[t]:n};o&&(c.offset=o);const h=SF(a);return Array.isArray(h)&&(c.easing=h),e.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:l==="reverse"?"alternate":"normal"})}function Oce(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const xF=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,kce=1e-7,Ace=12;function Rce(e,t,n,r,i){let s,l,a=0;do l=t+(n-t)/2,s=xF(l,r,i)-e,s>0?n=l:t=l;while(Math.abs(s)>kce&&++a<Ace);return l}function $h(e,t,n,r){if(e===t&&n===r)return pn;const i=s=>Rce(s,0,1,e,n);return s=>s===0||s===1?s:xF(i(s),t,r)}const Dce=$h(.42,0,1,1),Mce=$h(0,0,.58,1),wF=$h(.42,0,.58,1),Lce=e=>Array.isArray(e)&&typeof e[0]!="number",CF=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,TF=e=>t=>1-e(1-t),CE=e=>1-Math.sin(Math.acos(e)),EF=TF(CE),Fce=CF(CE),PF=$h(.33,1.53,.69,.99),TE=TF(PF),Nce=CF(TE),jce=e=>(e*=2)<1?.5*TE(e):.5*(2-Math.pow(2,-10*(e-1))),Bce={linear:pn,easeIn:Dce,easeInOut:wF,easeOut:Mce,circIn:CE,circInOut:Fce,circOut:EF,backIn:TE,backInOut:Nce,backOut:PF,anticipate:jce},j5=e=>{if(Array.isArray(e)){wE(e.length===4);const[t,n,r,i]=e;return $h(t,n,r,i)}else if(typeof e=="string")return Bce[e];return e},EE=(e,t)=>n=>!!(Op(n)&&Ule.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),IF=(e,t,n)=>r=>{if(!Op(r))return r;const[i,s,l,a]=r.match(x1);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(l),alpha:a!==void 0?parseFloat(a):1}},Uce=e=>Da(0,255,e),uS={...pc,transform:e=>Math.round(Uce(e))},kl={test:EE("rgb","red"),parse:IF("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+uS.transform(e)+", "+uS.transform(t)+", "+uS.transform(n)+", "+cd(ld.transform(r))+")"};function $ce(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Qw={test:EE("#"),parse:$ce,transform:kl.transform},yu={test:EE("hsl","hue"),parse:IF("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Os.transform(cd(t))+", "+Os.transform(cd(n))+", "+cd(ld.transform(r))+")"},vr={test:e=>kl.test(e)||Qw.test(e)||yu.test(e),parse:e=>kl.test(e)?kl.parse(e):yu.test(e)?yu.parse(e):Qw.parse(e),transform:e=>Op(e)?e:e.hasOwnProperty("red")?kl.transform(e):yu.transform(e)},an=(e,t,n)=>-n*e+n*t+e;function hS(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Gce({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,l=0;if(!t)i=s=l=n;else{const a=n<.5?n*(1+t):n+t-n*t,o=2*n-a;i=hS(o,a,e+1/3),s=hS(o,a,e),l=hS(o,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(l*255),alpha:r}}const fS=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Vce=[Qw,kl,yu],Hce=e=>Vce.find(t=>t.test(e));function B5(e){const t=Hce(e);let n=t.parse(e);return t===yu&&(n=Gce(n)),n}const OF=(e,t)=>{const n=B5(e),r=B5(t),i={...n};return s=>(i.red=fS(n.red,r.red,s),i.green=fS(n.green,r.green,s),i.blue=fS(n.blue,r.blue,s),i.alpha=an(n.alpha,r.alpha,s),kl.transform(i))};function zce(e){var t,n;return isNaN(e)&&Op(e)&&(((t=e.match(x1))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(tF))===null||n===void 0?void 0:n.length)||0)>0}const kF={regex:jle,countKey:"Vars",token:"${v}",parse:pn},AF={regex:tF,countKey:"Colors",token:"${c}",parse:vr.parse},RF={regex:x1,countKey:"Numbers",token:"${n}",parse:pc.parse};function dS(e,{regex:t,countKey:n,token:r,parse:i}){const s=e.tokenised.match(t);s&&(e["num"+n]=s.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...s.map(i)))}function Cv(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&dS(n,kF),dS(n,AF),dS(n,RF),n}function DF(e){return Cv(e).values}function MF(e){const{values:t,numColors:n,numVars:r,tokenised:i}=Cv(e),s=t.length;return l=>{let a=i;for(let o=0;o<s;o++)o<r?a=a.replace(kF.token,l[o]):o<r+n?a=a.replace(AF.token,vr.transform(l[o])):a=a.replace(RF.token,cd(l[o]));return a}}const Wce=e=>typeof e=="number"?0:e;function Yce(e){const t=DF(e);return MF(e)(t.map(Wce))}const Ma={test:zce,parse:DF,createTransformer:MF,getAnimatableNone:Yce},LF=(e,t)=>n=>`${n>0?t:e}`;function FF(e,t){return typeof e=="number"?n=>an(e,t,n):vr.test(e)?OF(e,t):e.startsWith("var(")?LF(e,t):jF(e,t)}const NF=(e,t)=>{const n=[...e],r=n.length,i=e.map((s,l)=>FF(s,t[l]));return s=>{for(let l=0;l<r;l++)n[l]=i[l](s);return n}},Xce=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=FF(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},jF=(e,t)=>{const n=Ma.createTransformer(t),r=Cv(e),i=Cv(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Ca(NF(r.values,i.values),n):LF(e,t)},Kd=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},U5=(e,t)=>n=>an(e,t,n);function qce(e){return typeof e=="number"?U5:typeof e=="string"?vr.test(e)?OF:jF:Array.isArray(e)?NF:typeof e=="object"?Xce:U5}function Kce(e,t,n){const r=[],i=n||qce(e[0]),s=e.length-1;for(let l=0;l<s;l++){let a=i(e[l],e[l+1]);if(t){const o=Array.isArray(t)?t[l]||pn:t;a=Ca(o,a)}r.push(a)}return r}function BF(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(wE(s===t.length),s===1)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=Kce(t,r,i),a=l.length,o=c=>{let h=0;if(a>1)for(;h<e.length-2&&!(c<e[h+1]);h++);const u=Kd(e[h],e[h+1],c);return l[h](u)};return n?c=>o(Da(e[0],e[s-1],c)):o}function Qce(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Kd(0,t,r);e.push(an(n,1,i))}}function Jce(e){const t=[0];return Qce(t,e.length-1),t}function Zce(e,t){return e.map(n=>n*t)}function eue(e,t){return e.map(()=>t||wF).splice(0,e.length-1)}function Tv({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=Lce(r)?r.map(j5):j5(r),s={done:!1,value:t[0]},l=Zce(n&&n.length===t.length?n:Jce(t),e),a=BF(l,t,{ease:Array.isArray(i)?i:eue(t,i)});return{calculatedDuration:e,next:o=>(s.value=a(o),s.done=o>=e,s)}}function UF(e,t){return t?e*(1e3/t):0}const tue=5;function $F(e,t,n){const r=Math.max(t-tue,0);return UF(n-e(r),t-r)}const pS=.001,nue=.01,$5=10,rue=.05,iue=1;function sue({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,s;Ece(e<=Ta($5));let l=1-t;l=Da(rue,iue,l),e=Da(nue,$5,ro(e)),l<1?(i=c=>{const h=c*l,u=h*e,f=h-n,d=Jw(c,l),p=Math.exp(-u);return pS-f/d*p},s=c=>{const u=c*l*e,f=u*n+n,d=Math.pow(l,2)*Math.pow(c,2)*e,p=Math.exp(-u),m=Jw(Math.pow(c,2),l);return(-i(c)+pS>0?-1:1)*((f-d)*p)/m}):(i=c=>{const h=Math.exp(-c*e),u=(c-n)*e+1;return-pS+h*u},s=c=>{const h=Math.exp(-c*e),u=(n-c)*(e*e);return h*u});const a=5/e,o=aue(i,s,a);if(e=Ta(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(o,2)*r;return{stiffness:c,damping:l*2*Math.sqrt(r*c),duration:e}}}const oue=12;function aue(e,t,n){let r=n;for(let i=1;i<oue;i++)r=r-e(r)/t(r);return r}function Jw(e,t){return e*Math.sqrt(1-t*t)}const lue=["duration","bounce"],cue=["stiffness","damping","mass"];function G5(e,t){return t.some(n=>e[n]!==void 0)}function uue(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!G5(e,cue)&&G5(e,lue)){const n=sue(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function GF({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],s=e[e.length-1],l={done:!1,value:i},{stiffness:a,damping:o,mass:c,duration:h,velocity:u,isResolvedFromDuration:f}=uue({...r,velocity:-ro(r.velocity||0)}),d=u||0,p=o/(2*Math.sqrt(a*c)),m=s-i,g=ro(Math.sqrt(a/c)),v=Math.abs(m)<5;n||(n=v?.01:2),t||(t=v?.005:.5);let _;if(p<1){const y=Jw(g,p);_=b=>{const S=Math.exp(-p*g*b);return s-S*((d+p*g*m)/y*Math.sin(y*b)+m*Math.cos(y*b))}}else if(p===1)_=y=>s-Math.exp(-g*y)*(m+(d+g*m)*y);else{const y=g*Math.sqrt(p*p-1);_=b=>{const S=Math.exp(-p*g*b),x=Math.min(y*b,300);return s-S*((d+p*g*m)*Math.sinh(x)+y*m*Math.cosh(x))/y}}return{calculatedDuration:f&&h||null,next:y=>{const b=_(y);if(f)l.done=y>=h;else{let S=d;y!==0&&(p<1?S=$F(_,y,b):S=0);const x=Math.abs(S)<=n,C=Math.abs(s-b)<=t;l.done=x&&C}return l.value=l.done?s:b,l}}}function V5({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:l,min:a,max:o,restDelta:c=.5,restSpeed:h}){const u=e[0],f={done:!1,value:u},d=w=>a!==void 0&&w<a||o!==void 0&&w>o,p=w=>a===void 0?o:o===void 0||Math.abs(a-w)<Math.abs(o-w)?a:o;let m=n*t;const g=u+m,v=l===void 0?g:l(g);v!==g&&(m=v-u);const _=w=>-m*Math.exp(-w/r),y=w=>v+_(w),b=w=>{const k=_(w),I=y(w);f.done=Math.abs(k)<=c,f.value=f.done?v:I};let S,x;const C=w=>{d(f.value)&&(S=w,x=GF({keyframes:[f.value,p(f.value)],velocity:$F(y,w,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return C(0),{calculatedDuration:null,next:w=>{let k=!1;return!x&&S===void 0&&(k=!0,b(w),C(w)),S!==void 0&&w>S?x.next(w-S):(!k&&b(w),f)}}}const hue=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Wt.update(t,!0),stop:()=>_o(t),now:()=>cr.isProcessing?cr.timestamp:performance.now()}},H5=2e4;function z5(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<H5;)t+=n,r=e.next(t);return t>=H5?1/0:t}const fue={decay:V5,inertia:V5,tween:Tv,keyframes:Tv,spring:GF};function Ev({autoplay:e=!0,delay:t=0,driver:n=hue,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:l=0,repeatType:a="loop",onPlay:o,onStop:c,onComplete:h,onUpdate:u,...f}){let d=1,p=!1,m,g;const v=()=>{g=new Promise(A=>{m=A})};v();let _;const y=fue[i]||Tv;let b;y!==Tv&&typeof r[0]!="number"&&(b=BF([0,100],r,{clamp:!1}),r=[0,100]);const S=y({...f,keyframes:r});let x;a==="mirror"&&(x=y({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",w=null,k=null,I=null;S.calculatedDuration===null&&s&&(S.calculatedDuration=z5(S));const{calculatedDuration:R}=S;let j=1/0,G=1/0;R!==null&&(j=R+l,G=j*(s+1)-l);let B=0;const $=A=>{if(k===null)return;d>0&&(k=Math.min(k,A)),d<0&&(k=Math.min(A-G/d,k)),w!==null?B=w:B=Math.round(A-k)*d;const D=B-t*(d>=0?1:-1),X=d>=0?D<0:D>G;B=Math.max(D,0),C==="finished"&&w===null&&(B=G);let N=B,F=S;if(s){const K=Math.min(B,G)/j;let Z=Math.floor(K),ee=K%1;!ee&&K>=1&&(ee=1),ee===1&&Z--,Z=Math.min(Z,s+1),!!(Z%2)&&(a==="reverse"?(ee=1-ee,l&&(ee-=l/j)):a==="mirror"&&(F=x)),N=Da(0,1,ee)*j}const z=X?{done:!1,value:r[0]}:F.next(N);b&&(z.value=b(z.value));let{done:L}=z;!X&&R!==null&&(L=d>=0?B>=G:B<=0);const H=w===null&&(C==="finished"||C==="running"&&L);return u&&u(z.value),H&&M(),z},V=()=>{_&&_.stop(),_=void 0},W=()=>{C="idle",V(),m(),v(),k=I=null},M=()=>{C="finished",h&&h(),V(),m()},P=()=>{if(p)return;_||(_=n($));const A=_.now();o&&o(),w!==null?k=A-w:(!k||C==="finished")&&(k=A),C==="finished"&&v(),I=k,w=null,C="running",_.start()};e&&P();const O={then(A,D){return g.then(A,D)},get time(){return ro(B)},set time(A){A=Ta(A),B=A,w!==null||!_||d===0?w=A:k=_.now()-A/d},get duration(){const A=S.calculatedDuration===null?z5(S):S.calculatedDuration;return ro(A)},get speed(){return d},set speed(A){A===d||!_||(d=A,O.time=ro(B))},get state(){return C},play:P,pause:()=>{C="paused",w=B},stop:()=>{p=!0,C!=="idle"&&(C="idle",c&&c(),W())},cancel:()=>{I!==null&&$(I),W()},complete:()=>{C="finished"},sample:A=>(k=0,$(A))};return O}function due(e){let t;return()=>(t===void 0&&(t=e()),t)}const pue=due(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),gue=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),pm=10,mue=2e4,vue=(e,t)=>t.type==="spring"||e==="backgroundColor"||!_F(t.ease);function yue(e,t,{onUpdate:n,onComplete:r,...i}){if(!(pue()&&gue.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let l=!1,a,o,c=!1;const h=()=>{o=new Promise(y=>{a=y})};h();let{keyframes:u,duration:f=300,ease:d,times:p}=i;if(vue(t,i)){const y=Ev({...i,repeat:0,delay:0});let b={done:!1,value:u[0]};const S=[];let x=0;for(;!b.done&&x<mue;)b=y.sample(x),S.push(b.value),x+=pm;p=void 0,u=S,f=x-pm,d="linear"}const m=Ice(e.owner.current,t,u,{...i,duration:f,ease:d,times:p}),g=()=>{c=!1,m.cancel()},v=()=>{c=!0,Wt.update(g),a(),h()};return m.onfinish=()=>{c||(e.set(Oce(u,i)),r&&r(),v())},{then(y,b){return o.then(y,b)},attachTimeline(y){return m.timeline=y,m.onfinish=null,pn},get time(){return ro(m.currentTime||0)},set time(y){m.currentTime=Ta(y)},get speed(){return m.playbackRate},set speed(y){m.playbackRate=y},get duration(){return ro(f)},play:()=>{l||(m.play(),_o(g))},pause:()=>m.pause(),stop:()=>{if(l=!0,m.playState==="idle")return;const{currentTime:y}=m;if(y){const b=Ev({...i,autoplay:!1});e.setWithVelocity(b.sample(y-pm).value,b.sample(y).value,pm)}v()},complete:()=>{c||m.finish()},cancel:v}}function _ue({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:pn,pause:pn,stop:pn,then:s=>(s(),Promise.resolve()),cancel:pn,complete:pn});return t?Ev({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const bue={type:"spring",stiffness:500,damping:25,restSpeed:10},Sue=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),xue={type:"keyframes",duration:.8},wue={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cue=(e,{keyframes:t})=>t.length>2?xue:dc.has(e)?e.startsWith("scale")?Sue(t[1]):bue:wue,Zw=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ma.test(t)||t==="0")&&!t.startsWith("url(")),Tue=new Set(["brightness","contrast","saturate","opacity"]);function Eue(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(x1)||[];if(!r)return e;const i=n.replace(r,"");let s=Tue.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Pue=/([a-z-]*)\(.*?\)/g,e2={...Ma,getAnimatableNone:e=>{const t=e.match(Pue);return t?t.map(Eue).join(" "):e}},Iue={...nF,color:vr,backgroundColor:vr,outlineColor:vr,fill:vr,stroke:vr,borderColor:vr,borderTopColor:vr,borderRightColor:vr,borderBottomColor:vr,borderLeftColor:vr,filter:e2,WebkitFilter:e2},PE=e=>Iue[e];function VF(e,t){let n=PE(e);return n!==e2&&(n=Ma),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const HF=e=>/^0[^.\s]+$/.test(e);function Oue(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||HF(e)}function kue(e,t,n,r){const i=Zw(t,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const l=r.from!==void 0?r.from:e.get();let a;const o=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?l:s[c-1]),Oue(s[c])&&o.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&o.length&&a)for(let c=0;c<o.length;c++){const h=o[c];s[h]=VF(t,a)}return s}function Aue({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:l,repeatDelay:a,from:o,elapsed:c,...h}){return!!Object.keys(h).length}function IE(e,t){return e[t]||e.default||e}const Rue={skipAnimations:!1},OE=(e,t,n,r={})=>i=>{const s=IE(r,e)||{},l=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Ta(l);const o=kue(t,e,n,s),c=o[0],h=o[o.length-1],u=Zw(e,c),f=Zw(e,h);let d={keyframes:o,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{t.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(Aue(s)||(d={...d,...Cue(e,d)}),d.duration&&(d.duration=Ta(d.duration)),d.repeatDelay&&(d.repeatDelay=Ta(d.repeatDelay)),!u||!f||Pce.current||s.type===!1||Rue.skipAnimations)return _ue(d);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=yue(t,e,d);if(p)return p}return Ev(d)};function Pv(e){return!!(Ur(e)&&e.add)}const zF=e=>/^\-?\d*\.?\d+$/.test(e);function kE(e,t){e.indexOf(t)===-1&&e.push(t)}function AE(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function _3e([...e],t,n){const r=t<0?e.length+t:t;if(r>=0&&r<e.length){const i=n<0?e.length+n:n,[s]=e.splice(t,1);e.splice(i,0,s)}return e}class RE{constructor(){this.subscriptions=[]}add(t){return kE(this.subscriptions,t),()=>AE(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const l=this.subscriptions[s];l&&l(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Due=e=>!isNaN(parseFloat(e)),W5={current:void 0};class Mue{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:l}=cr;this.lastUpdated!==l&&(this.timeDelta=s,this.lastUpdated=l,Wt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Wt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Due(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new RE);const r=this.events[t].add(n);return t==="change"?()=>{r(),Wt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return W5.current&&W5.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?UF(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ch(e,t){return new Mue(e,t)}const WF=e=>t=>t.test(e),Lue={test:e=>e==="auto",parse:e=>e},YF=[pc,Xe,Os,$o,Gle,$le,Lue],Pf=e=>YF.find(WF(e)),Fue=[...YF,vr,Ma],Nue=e=>Fue.find(WF(e));function jue(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ch(n))}function DE(e,t){const n=C1(e,t);let{transitionEnd:r={},transition:i={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const l in s){const a=nce(s[l]);jue(e,l,a)}}function t2(e,t){[...t].reverse().forEach(r=>{const i=e.getVariant(r);i&&DE(e,i),e.variantChildren&&e.variantChildren.forEach(s=>{t2(s,t)})})}function b3e(e,t){if(Array.isArray(t))return t2(e,t);if(typeof t=="string")return t2(e,[t]);DE(e,t)}function Bue(e,t,n){var r,i;const s=Object.keys(t).filter(a=>!e.hasValue(a)),l=s.length;if(l)for(let a=0;a<l;a++){const o=s[a],c=t[o];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(i=(r=n[o])!==null&&r!==void 0?r:e.readValue(o))!==null&&i!==void 0?i:t[o]),h!=null&&(typeof h=="string"&&(zF(h)||HF(h))?h=parseFloat(h):!Nue(h)&&Ma.test(c)&&(h=VF(o,c)),e.addValue(o,ch(h,{owner:e})),n[o]===void 0&&(n[o]=h),h!==null&&e.setBaseTarget(o,h))}}function Uue(e,t){return t?(t[e]||t.default||t).from:void 0}function $ue(e,t,n){const r={};for(const i in e){const s=Uue(i,t);if(s!==void 0)r[i]=s;else{const l=n.getValue(i);l&&(r[i]=l.get())}}return r}function Gue({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Vue(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function XF(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:l,...a}=e.makeTargetAnimatable(t);const o=e.getValue("willChange");r&&(s=r);const c=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const u in a){const f=e.getValue(u),d=a[u];if(!f||d===void 0||h&&Gue(h,u))continue;const p={delay:n,elapsed:0,...IE(s||{},u)};if(window.HandoffAppearAnimations){const v=e.getProps()[q7];if(v){const _=window.HandoffAppearAnimations(v,u,f,Wt);_!==null&&(p.elapsed=_,p.isHandoff=!0)}}let m=!p.isHandoff&&!Vue(f,d);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(m=!1),f.animation&&(m=!1),m)continue;f.start(OE(u,f,d,e.shouldReduceMotion&&dc.has(u)?{type:!1}:p));const g=f.animation;Pv(o)&&(o.add(u),g.then(()=>o.remove(u))),c.push(g)}return l&&Promise.all(c).then(()=>{l&&DE(e,l)}),c}function n2(e,t,n={}){const r=C1(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(XF(e,r,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(o=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:u}=i;return Hue(e,t,c+o,h,u,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[o,c]=a==="beforeChildren"?[s,l]:[l,s];return o().then(()=>c())}else return Promise.all([s(),l(n.delay)])}function Hue(e,t,n=0,r=0,i=1,s){const l=[],a=(e.variantChildren.size-1)*r,o=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(e.variantChildren).sort(zue).forEach((c,h)=>{c.notify("AnimationStart",t),l.push(n2(c,t,{...s,delay:n+o(h)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(l)}function zue(e,t){return e.sortNodePosition(t)}function Wue(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>n2(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=n2(e,t,n);else{const i=typeof t=="function"?C1(e,t,n.custom):t;r=Promise.all(XF(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Yue=[...dE].reverse(),Xue=dE.length;function que(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Wue(e,n,r)))}function Kue(e){let t=que(e);const n=Jue();let r=!0;const i=(o,c)=>{const h=C1(e,c);if(h){const{transition:u,transitionEnd:f,...d}=h;o={...o,...d,...f}}return o};function s(o){t=o(e)}function l(o,c){const h=e.getProps(),u=e.getVariantContext(!0)||{},f=[],d=new Set;let p={},m=1/0;for(let v=0;v<Xue;v++){const _=Yue[v],y=n[_],b=h[_]!==void 0?h[_]:u[_],S=Xd(b),x=_===c?y.isActive:null;x===!1&&(m=v);let C=b===u[_]&&b!==h[_]&&S;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),y.protectedKeys={...p},!y.isActive&&x===null||!b&&!y.prevProp||b1(b)||typeof b=="boolean")continue;let k=Que(y.prevProp,b)||_===c&&y.isActive&&!C&&S||v>m&&S,I=!1;const R=Array.isArray(b)?b:[b];let j=R.reduce(i,{});x===!1&&(j={});const{prevResolvedValues:G={}}=y,B={...G,...j},$=V=>{k=!0,d.has(V)&&(I=!0,d.delete(V)),y.needsAnimating[V]=!0};for(const V in B){const W=j[V],M=G[V];if(p.hasOwnProperty(V))continue;let P=!1;wv(W)&&wv(M)?P=!vF(W,M):P=W!==M,P?W!==void 0?$(V):d.add(V):W!==void 0&&d.has(V)?$(V):y.protectedKeys[V]=!0}y.prevProp=b,y.prevResolvedValues=j,y.isActive&&(p={...p,...j}),r&&e.blockInitialAnimation&&(k=!1),k&&(!C||I)&&f.push(...R.map(V=>({animation:V,options:{type:_,...o}})))}if(d.size){const v={};d.forEach(_=>{const y=e.getBaseTarget(_);y!==void 0&&(v[_]=y)}),f.push({animation:v})}let g=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(f):Promise.resolve()}function a(o,c,h){var u;if(n[o].isActive===c)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(d=>{var p;return(p=d.animationState)===null||p===void 0?void 0:p.setActive(o,c)}),n[o].isActive=c;const f=l(h,o);for(const d in n)n[d].protectedKeys={};return f}return{animateChanges:l,setActive:a,setAnimateFunction:s,getState:()=>n}}function Que(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!vF(t,e):!1}function ll(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jue(){return{animate:ll(!0),whileInView:ll(),whileHover:ll(),whileTap:ll(),whileDrag:ll(),whileFocus:ll(),exit:ll()}}class Zue extends za{constructor(t){super(t),t.animationState||(t.animationState=Kue(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),b1(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let ehe=0;class the extends za{constructor(){super(...arguments),this.id=ehe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const nhe={animation:{Feature:Zue},exit:{Feature:the}},Y5=(e,t)=>Math.abs(e-t);function rhe(e,t){const n=Y5(e.x,t.x),r=Y5(e.y,t.y);return Math.sqrt(n**2+r**2)}class qF{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=mS(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,d=rhe(u.offset,{x:0,y:0})>=3;if(!f&&!d)return;const{point:p}=u,{timestamp:m}=cr;this.history.push({...p,timestamp:m});const{onStart:g,onMove:v}=this.handlers;f||(g&&g(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,u)},this.handlePointerMove=(u,f)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=gS(f,this.transformPagePoint),Wt.update(this.updatePoint,!0)},this.handlePointerUp=(u,f)=>{this.end();const{onEnd:d,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=mS(u.type==="pointercancel"?this.lastMoveEventInfo:gS(f,this.transformPagePoint),this.history);this.startEvent&&d&&d(u,g),p&&p(u,g)},!fF(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const l=w1(t),a=gS(l,this.transformPagePoint),{point:o}=a,{timestamp:c}=cr;this.history=[{...o,timestamp:c}];const{onSessionStart:h}=n;h&&h(t,mS(a,this.history)),this.removeListeners=Ca(no(this.contextWindow,"pointermove",this.handlePointerMove),no(this.contextWindow,"pointerup",this.handlePointerUp),no(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),_o(this.updatePoint)}}function gS(e,t){return t?{point:t(e.point)}:e}function X5(e,t){return{x:e.x-t.x,y:e.y-t.y}}function mS({point:e},t){return{point:e,delta:X5(e,KF(t)),offset:X5(e,ihe(t)),velocity:she(t,.1)}}function ihe(e){return e[0]}function KF(e){return e[e.length-1]}function she(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=KF(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Ta(t)));)n--;if(!r)return{x:0,y:0};const s=ro(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const l={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Qr(e){return e.max-e.min}function r2(e,t=0,n=.01){return Math.abs(e-t)<=n}function q5(e,t,n,r=.5){e.origin=r,e.originPoint=an(t.min,t.max,e.origin),e.scale=Qr(n)/Qr(t),(r2(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=an(n.min,n.max,e.origin)-e.originPoint,(r2(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ud(e,t,n,r){q5(e.x,t.x,n.x,r?r.originX:void 0),q5(e.y,t.y,n.y,r?r.originY:void 0)}function K5(e,t,n){e.min=n.min+t.min,e.max=e.min+Qr(t)}function ohe(e,t,n){K5(e.x,t.x,n.x),K5(e.y,t.y,n.y)}function Q5(e,t,n){e.min=t.min-n.min,e.max=e.min+Qr(t)}function hd(e,t,n){Q5(e.x,t.x,n.x),Q5(e.y,t.y,n.y)}function ahe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?an(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?an(n,e,r.max):Math.min(e,n)),e}function J5(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function lhe(e,{top:t,left:n,bottom:r,right:i}){return{x:J5(e.x,n,i),y:J5(e.y,t,r)}}function Z5(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function che(e,t){return{x:Z5(e.x,t.x),y:Z5(e.y,t.y)}}function uhe(e,t){let n=.5;const r=Qr(e),i=Qr(t);return i>r?n=Kd(t.min,t.max-r,e.min):r>i&&(n=Kd(e.min,e.max-i,t.min)),Da(0,1,n)}function hhe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const i2=.35;function fhe(e=i2){return e===!1?e=0:e===!0&&(e=i2),{x:e3(e,"left","right"),y:e3(e,"top","bottom")}}function e3(e,t,n){return{min:t3(e,t),max:t3(e,n)}}function t3(e,t){return typeof e=="number"?e:e[t]||0}const n3=()=>({translate:0,scale:1,origin:0,originPoint:0}),_u=()=>({x:n3(),y:n3()}),r3=()=>({min:0,max:0}),Rn=()=>({x:r3(),y:r3()});function fi(e){return[e("x"),e("y")]}function QF({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function dhe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function phe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vS(e){return e===void 0||e===1}function s2({scale:e,scaleX:t,scaleY:n}){return!vS(e)||!vS(t)||!vS(n)}function vl(e){return s2(e)||JF(e)||e.z||e.rotate||e.rotateX||e.rotateY}function JF(e){return i3(e.x)||i3(e.y)}function i3(e){return e&&e!=="0%"}function Iv(e,t,n){const r=e-n,i=t*r;return n+i}function s3(e,t,n,r,i){return i!==void 0&&(e=Iv(e,i,r)),Iv(e,n,r)+t}function o2(e,t=0,n=1,r,i){e.min=s3(e.min,t,n,r,i),e.max=s3(e.max,t,n,r,i)}function ZF(e,{x:t,y:n}){o2(e.x,t.translate,t.scale,t.originPoint),o2(e.y,n.translate,n.scale,n.originPoint)}function ghe(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,l;for(let a=0;a<i;a++){s=n[a],l=s.projectionDelta;const o=s.instance;o&&o.style&&o.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&bu(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,ZF(e,l)),r&&vl(s.latestValues)&&bu(e,s.latestValues))}t.x=o3(t.x),t.y=o3(t.y)}function o3(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ta(e,t){e.min=e.min+t,e.max=e.max+t}function a3(e,t,[n,r,i]){const s=t[i]!==void 0?t[i]:.5,l=an(e.min,e.max,s);o2(e,t[n],t[r],l,t.scale)}const mhe=["x","scaleX","originX"],vhe=["y","scaleY","originY"];function bu(e,t){a3(e.x,t,mhe),a3(e.y,t,vhe)}function eN(e,t){return QF(phe(e.getBoundingClientRect(),t))}function yhe(e,t,n){const r=eN(e,n),{scroll:i}=t;return i&&(ta(r.x,i.offset.x),ta(r.y,i.offset.y)),r}const tN=({current:e})=>e?e.ownerDocument.defaultView:null,_he=new WeakMap;class bhe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(w1(h,"page").point)},s=(h,u)=>{const{drag:f,dragPropagation:d,onDragStart:p}=this.getProps();if(f&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=pF(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fi(g=>{let v=this.getAxisMotionValue(g).get()||0;if(Os.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const y=_.layout.layoutBox[g];y&&(v=Qr(y)*(parseFloat(v)/100))}}this.originPoint[g]=v}),p&&Wt.update(()=>p(h,u),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},l=(h,u)=>{const{dragPropagation:f,dragDirectionLock:d,onDirectionLock:p,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:g}=u;if(d&&this.currentDirection===null){this.currentDirection=She(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,g),this.updateAxis("y",u.point,g),this.visualElement.render(),m&&m(h,u)},a=(h,u)=>this.stop(h,u),o=()=>fi(h=>{var u;return this.getAnimationState(h)==="paused"&&((u=this.getAxisMotionValue(h).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new qF(t,{onSessionStart:i,onStart:s,onMove:l,onSessionEnd:a,resumeAnimation:o},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:tN(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Wt.update(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!gm(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let l=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(l=ahe(l,this.constraints[t],this.elastic[t])),s.set(l)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&vu(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=lhe(i.layoutBox,n):this.constraints=!1,this.elastic=fhe(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&fi(l=>{this.getAxisMotionValue(l)&&(this.constraints[l]=hhe(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!vu(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=yhe(r,i.root,this.visualElement.getTransformPagePoint());let l=che(i.layout.layoutBox,s);if(n){const a=n(dhe(l));this.hasMutatedConstraints=!!a,a&&(l=QF(a))}return l}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:l,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},c=fi(h=>{if(!gm(h,n,this.currentDirection))return;let u=o&&o[h]||{};l&&(u={min:0,max:0});const f=i?200:1e6,d=i?40:1e7,p={type:"inertia",velocity:r?t[h]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(h,p)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(OE(t,r,0,n))}stopAnimation(){fi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fi(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){fi(n=>{const{drag:r}=this.getProps();if(!gm(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:a}=i.layout.layoutBox[n];s.set(t[n]-an(l,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!vu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};fi(l=>{const a=this.getAxisMotionValue(l);if(a){const o=a.get();i[l]=uhe({min:o,max:o},this.constraints[l])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fi(l=>{if(!gm(l,t,null))return;const a=this.getAxisMotionValue(l),{min:o,max:c}=this.constraints[l];a.set(an(o,c,i[l]))})}addListeners(){if(!this.visualElement.current)return;_he.set(this.visualElement,this);const t=this.visualElement.current,n=no(t,"pointerdown",o=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(o)}),r=()=>{const{dragConstraints:o}=this.getProps();vu(o)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const l=Ks(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:o,hasLayoutChanged:c})=>{this.isDragging&&c&&(fi(h=>{const u=this.getAxisMotionValue(h);u&&(this.originPoint[h]+=o[h].translate,u.set(u.get()+o[h].translate))}),this.visualElement.render())});return()=>{l(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:l=i2,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:l,dragMomentum:a}}}function gm(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function She(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class xhe extends za{constructor(t){super(t),this.removeGroupControls=pn,this.removeListeners=pn,this.controls=new bhe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pn}unmount(){this.removeGroupControls(),this.removeListeners()}}const l3=e=>(t,n)=>{e&&Wt.update(()=>e(t,n))};class whe extends za{constructor(){super(...arguments),this.removePointerDownListener=pn}onPointerDown(t){this.session=new qF(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tN(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:l3(t),onStart:l3(n),onMove:r,onEnd:(s,l)=>{delete this.session,i&&Wt.update(()=>i(s,l))}}}mount(){this.removePointerDownListener=no(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Che(){const e=T.useContext(y1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=T.useId();return T.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}const p0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function c3(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const If={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Xe.test(e))e=parseFloat(e);else return e;const n=c3(e,t.target.x),r=c3(e,t.target.y);return`${n}% ${r}%`}},The={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Ma.parse(e);if(i.length>5)return r;const s=Ma.createTransformer(e),l=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,o=n.y.scale*t.y;i[0+l]/=a,i[1+l]/=o;const c=an(a,o,.5);return typeof i[2+l]=="number"&&(i[2+l]/=c),typeof i[3+l]=="number"&&(i[3+l]/=c),s(i)}};class Ehe extends Jt.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;Mle(Phe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),p0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,l=r.projection;return l&&(l.isPresent=s,i||t.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?l.promote():l.relegate()||Wt.postRender(()=>{const a=l.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function nN(e){const[t,n]=Che(),r=T.useContext(gE);return Jt.createElement(Ehe,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(Q7),isPresent:t,safeToRemove:n})}const Phe={borderRadius:{...If,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:If,borderTopRightRadius:If,borderBottomLeftRadius:If,borderBottomRightRadius:If,boxShadow:The},rN=["TopLeft","TopRight","BottomLeft","BottomRight"],Ihe=rN.length,u3=e=>typeof e=="string"?parseFloat(e):e,h3=e=>typeof e=="number"||Xe.test(e);function Ohe(e,t,n,r,i,s){i?(e.opacity=an(0,n.opacity!==void 0?n.opacity:1,khe(r)),e.opacityExit=an(t.opacity!==void 0?t.opacity:1,0,Ahe(r))):s&&(e.opacity=an(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let l=0;l<Ihe;l++){const a=`border${rN[l]}Radius`;let o=f3(t,a),c=f3(n,a);if(o===void 0&&c===void 0)continue;o||(o=0),c||(c=0),o===0||c===0||h3(o)===h3(c)?(e[a]=Math.max(an(u3(o),u3(c),r),0),(Os.test(c)||Os.test(o))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=an(t.rotate||0,n.rotate||0,r))}function f3(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const khe=iN(0,.5,EF),Ahe=iN(.5,.95,pn);function iN(e,t,n){return r=>r<e?0:r>t?1:n(Kd(e,t,r))}function d3(e,t){e.min=t.min,e.max=t.max}function ui(e,t){d3(e.x,t.x),d3(e.y,t.y)}function p3(e,t,n,r,i){return e-=t,e=Iv(e,1/n,r),i!==void 0&&(e=Iv(e,1/i,r)),e}function Rhe(e,t=0,n=1,r=.5,i,s=e,l=e){if(Os.test(t)&&(t=parseFloat(t),t=an(l.min,l.max,t/100)-l.min),typeof t!="number")return;let a=an(s.min,s.max,r);e===s&&(a-=t),e.min=p3(e.min,t,n,a,i),e.max=p3(e.max,t,n,a,i)}function g3(e,t,[n,r,i],s,l){Rhe(e,t[n],t[r],t[i],t.scale,s,l)}const Dhe=["x","scaleX","originX"],Mhe=["y","scaleY","originY"];function m3(e,t,n,r){g3(e.x,t,Dhe,n?n.x:void 0,r?r.x:void 0),g3(e.y,t,Mhe,n?n.y:void 0,r?r.y:void 0)}function v3(e){return e.translate===0&&e.scale===1}function sN(e){return v3(e.x)&&v3(e.y)}function Lhe(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function oN(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function y3(e){return Qr(e.x)/Qr(e.y)}class Fhe{constructor(){this.members=[]}add(t){kE(this.members,t),t.scheduleRender()}remove(t){if(AE(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _3(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:o,rotateX:c,rotateY:h}=n;o&&(r+=`rotate(${o}deg) `),c&&(r+=`rotateX(${c}deg) `),h&&(r+=`rotateY(${h}deg) `)}const l=e.x.scale*t.x,a=e.y.scale*t.y;return(l!==1||a!==1)&&(r+=`scale(${l}, ${a})`),r||"none"}const Nhe=(e,t)=>e.depth-t.depth;class jhe{constructor(){this.children=[],this.isDirty=!1}add(t){kE(this.children,t),this.isDirty=!0}remove(t){AE(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Nhe),this.isDirty=!1,this.children.forEach(t)}}function Bhe(e,t){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(_o(r),e(s-t))};return Wt.read(r,!0),()=>_o(r)}function Uhe(e){window.MotionDebug&&window.MotionDebug.record(e)}function $he(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Ghe(e,t,n){const r=Ur(e)?e:ch(e);return r.start(OE("",r,t,n)),r.animation}const b3=["","X","Y","Z"],Vhe={visibility:"hidden"},S3=1e3;let Hhe=0;const yl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function aN({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},a=t==null?void 0:t()){this.id=Hhe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,yl.totalNodes=yl.resolvedTargetDeltas=yl.recalculatedProjection=0,this.nodes.forEach(Yhe),this.nodes.forEach(Jhe),this.nodes.forEach(Zhe),this.nodes.forEach(Xhe),Uhe(yl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new jhe)}addEventListener(l,a){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new RE),this.eventHandlers.get(l).add(a)}notifyListeners(l,...a){const o=this.eventHandlers.get(l);o&&o.notify(...a)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$he(l),this.instance=l;const{layoutId:o,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||o)&&(this.isLayoutDirty=!0),e){let u;const f=()=>this.root.updateBlockedByResize=!1;e(l,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=Bhe(f,250),p0.hasAnimatedSinceResize&&(p0.hasAnimatedSinceResize=!1,this.nodes.forEach(w3))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&h&&(o||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeTargetChanged:d,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||h.getDefaultTransition()||ife,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=h.getProps(),_=!this.targetLayout||!oN(this.targetLayout,p)||d,y=!f&&d;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,y);const b={...IE(m,"layout"),onPlay:g,onComplete:v};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||w3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_o(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(efe),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const u=this.path[h];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:o}=this.options;if(a===void 0&&!o)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(x3);return}this.isUpdating||this.nodes.forEach(Khe),this.isUpdating=!1,this.nodes.forEach(Qhe),this.nodes.forEach(zhe),this.nodes.forEach(Whe),this.clearAllSnapshots();const a=performance.now();cr.delta=Da(0,1e3/60,a-cr.timestamp),cr.timestamp=a,cr.isProcessing=!0,aS.update.process(cr),aS.preRender.process(cr),aS.render.process(cr),cr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(qhe),this.sharedNodes.forEach(tfe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let o=0;o<this.path.length;o++)this.path[o].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:l,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!sN(this.projectionDelta),o=this.getTransformTemplate(),c=o?o(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;l&&(a||vl(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const a=this.measurePageBox();let o=this.removeElementScroll(a);return l&&(o=this.removeTransform(o)),sfe(o),{animationId:this.root.animationId,measuredBox:a,layoutBox:o,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Rn();const a=l.measureViewportBox(),{scroll:o}=this.root;return o&&(ta(a.x,o.offset.x),ta(a.y,o.offset.y)),a}removeElementScroll(l){const a=Rn();ui(a,l);for(let o=0;o<this.path.length;o++){const c=this.path[o],{scroll:h,options:u}=c;if(c!==this.root&&h&&u.layoutScroll){if(h.isRoot){ui(a,l);const{scroll:f}=this.root;f&&(ta(a.x,-f.offset.x),ta(a.y,-f.offset.y))}ta(a.x,h.offset.x),ta(a.y,h.offset.y)}}return a}applyTransform(l,a=!1){const o=Rn();ui(o,l);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&bu(o,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),vl(h.latestValues)&&bu(o,h.latestValues)}return vl(this.latestValues)&&bu(o,this.latestValues),o}removeTransform(l){const a=Rn();ui(a,l);for(let o=0;o<this.path.length;o++){const c=this.path[o];if(!c.instance||!vl(c.latestValues))continue;s2(c.latestValues)&&c.updateSnapshot();const h=Rn(),u=c.measurePageBox();ui(h,u),m3(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return vl(this.latestValues)&&m3(a,this.latestValues),a}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var a;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(l||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=cr.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),hd(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Rn(),this.targetWithTransforms=Rn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ohe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ui(this.target,this.layout.layoutBox),ZF(this.target,this.targetDelta)):ui(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),hd(this.relativeTargetOrigin,this.target,d.target),ui(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}yl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||s2(this.parent.latestValues)||JF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===cr.timestamp&&(c=!1),c)return;const{layout:h,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||u))return;ui(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,d=this.treeScale.y;ghe(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=_u(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=_u(),this.projectionDeltaWithTransform=_u());const m=this.projectionTransform;ud(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=_3(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==f||this.treeScale.y!==d)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),yl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),l){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(l,a=!1){const o=this.snapshot,c=o?o.latestValues:{},h={...this.latestValues},u=_u();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Rn(),d=o?o.source:void 0,p=this.layout?this.layout.source:void 0,m=d!==p,g=this.getStack(),v=!g||g.members.length<=1,_=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(rfe));this.animationProgress=0;let y;this.mixTargetDelta=b=>{const S=b/1e3;C3(u.x,l.x,S),C3(u.y,l.y,S),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hd(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nfe(this.relativeTarget,this.relativeTargetOrigin,f,S),y&&Lhe(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Rn()),ui(y,this.relativeTarget)),m&&(this.animationValues=h,Ohe(h,c,this.latestValues,S,_,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_o(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wt.update(()=>{p0.hasAnimatedSinceResize=!0,this.currentAnimation=Ghe(0,S3,{...l,onUpdate:a=>{this.mixTargetDelta(a),l.onUpdate&&l.onUpdate(a)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(S3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:a,target:o,layout:c,latestValues:h}=l;if(!(!a||!o||!c)){if(this!==l&&this.layout&&c&&lN(this.options.animationType,this.layout.layoutBox,c.layoutBox)){o=this.target||Rn();const u=Qr(this.layout.layoutBox.x);o.x.min=l.target.x.min,o.x.max=o.x.min+u;const f=Qr(this.layout.layoutBox.y);o.y.min=l.target.y.min,o.y.max=o.y.min+f}ui(a,o),bu(a,h),ud(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(l,a){this.sharedNodes.has(l)||this.sharedNodes.set(l,new Fhe),this.sharedNodes.get(l).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:a,preserveFollowOpacity:o}={}){const c=this.getStack();c&&c.promote(this,o),l&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetRotation(){const{visualElement:l}=this.options;if(!l)return;let a=!1;const{latestValues:o}=l;if((o.rotate||o.rotateX||o.rotateY||o.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<b3.length;h++){const u="rotate"+b3[h];o[u]&&(c[u]=o[u],l.setStaticValue(u,0))}l.render();for(const h in c)l.setStaticValue(h,c[h]);l.scheduleRender()}getProjectionStyles(l){var a,o;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Vhe;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=d0(l==null?void 0:l.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=d0(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!vl(this.latestValues)&&(m.transform=h?h({},""):"none",this.hasProjected=!1),m}const f=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=_3(this.projectionDeltaWithTransform,this.treeScale,f),h&&(c.transform=h(f,c.transform));const{x:d,y:p}=this.projectionDelta;c.transformOrigin=`${d.origin*100}% ${p.origin*100}% 0`,u.animationValues?c.opacity=u===this?(o=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&o!==void 0?o:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in Sv){if(f[m]===void 0)continue;const{correct:g,applyTo:v}=Sv[m],_=c.transform==="none"?f[m]:g(f[m],u);if(v){const y=v.length;for(let b=0;b<y;b++)c[v[b]]=_}else c[m]=_}return this.options.layoutId&&(c.pointerEvents=u===this?d0(l==null?void 0:l.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var a;return(a=l.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(x3),this.root.sharedNodes.clear()}}}function zhe(e){e.updateLayout()}function Whe(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,l=n.source!==e.layout.source;s==="size"?fi(u=>{const f=l?n.measuredBox[u]:n.layoutBox[u],d=Qr(f);f.min=r[u].min,f.max=f.min+d}):lN(s,n.layoutBox,r)&&fi(u=>{const f=l?n.measuredBox[u]:n.layoutBox[u],d=Qr(r[u]);f.max=f.min+d,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+d)});const a=_u();ud(a,r,n.layoutBox);const o=_u();l?ud(o,e.applyTransform(i,!0),n.measuredBox):ud(o,r,n.layoutBox);const c=!sN(a);let h=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:d}=u;if(f&&d){const p=Rn();hd(p,n.layoutBox,f.layoutBox);const m=Rn();hd(m,r,d.layoutBox),oN(p,m)||(h=!0),u.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:o,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Yhe(e){yl.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Xhe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qhe(e){e.clearSnapshot()}function x3(e){e.clearMeasurements()}function Khe(e){e.isLayoutDirty=!1}function Qhe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function w3(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Jhe(e){e.resolveTargetDelta()}function Zhe(e){e.calcProjection()}function efe(e){e.resetRotation()}function tfe(e){e.removeLeadSnapshot()}function C3(e,t,n){e.translate=an(t.translate,0,n),e.scale=an(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function T3(e,t,n,r){e.min=an(t.min,n.min,r),e.max=an(t.max,n.max,r)}function nfe(e,t,n,r){T3(e.x,t.x,n.x,r),T3(e.y,t.y,n.y,r)}function rfe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ife={duration:.45,ease:[.4,0,.1,1]},E3=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),P3=E3("applewebkit/")&&!E3("chrome/")?Math.round:pn;function I3(e){e.min=P3(e.min),e.max=P3(e.max)}function sfe(e){I3(e.x),I3(e.y)}function lN(e,t,n){return e==="position"||e==="preserve-aspect"&&!r2(y3(t),y3(n),.2)}const ofe=aN({attachResizeListener:(e,t)=>Ks(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yS={current:void 0},cN=aN({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!yS.current){const e=new ofe({});e.mount(window),e.setOptions({layoutScroll:!0}),yS.current=e}return yS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),afe={pan:{Feature:whe},drag:{Feature:xhe,ProjectionNode:cN,MeasureLayout:nN}},lfe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function cfe(e){const t=lfe.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function a2(e,t,n=1){const[r,i]=cfe(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const l=s.trim();return zF(l)?parseFloat(l):l}else return qw(i)?a2(i,t,n+1):i}function ufe(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const s=i.get();if(!qw(s))return;const l=a2(s,r);l&&i.set(l)});for(const i in t){const s=t[i];if(!qw(s))continue;const l=a2(s,r);l&&(t[i]=l,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:t,transitionEnd:n}}const hfe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),uN=e=>hfe.has(e),ffe=e=>Object.keys(e).some(uN),O3=e=>e===pc||e===Xe,k3=(e,t)=>parseFloat(e.split(", ")[t]),A3=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return k3(i[1],t);{const s=r.match(/^matrix\((.+)\)$/);return s?k3(s[1],e):0}},dfe=new Set(["x","y","z"]),pfe=Ip.filter(e=>!dfe.has(e));function gfe(e){const t=[];return pfe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const uh={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:A3(4,13),y:A3(5,14)};uh.translateX=uh.x;uh.translateY=uh.y;const mfe=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:l}=s,a={};l==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(c=>{a[c]=uh[c](r,s)}),t.render();const o=t.measureViewportBox();return n.forEach(c=>{const h=t.getValue(c);h&&h.jump(a[c]),e[c]=uh[c](o,s)}),e},vfe=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(uN);let s=[],l=!1;const a=[];if(i.forEach(o=>{const c=e.getValue(o);if(!e.hasValue(o))return;let h=n[o],u=Pf(h);const f=t[o];let d;if(wv(f)){const p=f.length,m=f[0]===null?1:0;h=f[m],u=Pf(h);for(let g=m;g<p&&f[g]!==null;g++)d?wE(Pf(f[g])===d):d=Pf(f[g])}else d=Pf(f);if(u!==d)if(O3(u)&&O3(d)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof f=="string"?t[o]=parseFloat(f):Array.isArray(f)&&d===Xe&&(t[o]=f.map(parseFloat))}else u!=null&&u.transform&&(d!=null&&d.transform)&&(h===0||f===0)?h===0?c.set(d.transform(h)):t[o]=u.transform(f):(l||(s=gfe(e),l=!0),a.push(o),r[o]=r[o]!==void 0?r[o]:t[o],c.jump(f))}),a.length){const o=a.indexOf("height")>=0?window.pageYOffset:null,c=mfe(t,e,a);return s.length&&s.forEach(([h,u])=>{e.getValue(h).set(u)}),e.render(),_1&&o!==null&&window.scrollTo({top:o}),{target:c,transitionEnd:r}}else return{target:t,transitionEnd:r}};function yfe(e,t,n,r){return ffe(t)?vfe(e,t,n,r):{target:t,transitionEnd:r}}const _fe=(e,t,n,r)=>{const i=ufe(e,t,r);return t=i.target,r=i.transitionEnd,yfe(e,t,n,r)},l2={current:null},hN={current:!1};function bfe(){if(hN.current=!0,!!_1)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>l2.current=e.matches;e.addListener(t),t()}else l2.current=!1}function Sfe(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],l=n[i];if(Ur(s))e.addValue(i,s),Pv(r)&&r.add(i);else if(Ur(l))e.addValue(i,ch(s,{owner:e})),Pv(r)&&r.remove(i);else if(l!==s)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=e.getStaticValue(i);e.addValue(i,ch(a!==void 0?a:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const R3=new WeakMap,fN=Object.keys(qd),xfe=fN.length,D3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],wfe=pE.length;class Cfe{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Wt.render(this.render,!1,!0);const{latestValues:a,renderState:o}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=o,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.isControllingVariants=S1(n),this.isVariantNode=K7(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const u in h){const f=h[u];a[u]!==void 0&&Ur(f)&&(f.set(a[u],!1),Pv(c)&&c.add(u))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,R3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),hN.current||bfe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:l2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){R3.delete(this.current),this.projection&&this.projection.unmount(),_o(this.notifyUpdate),_o(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=dc.has(t),i=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Wt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),s()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,s){let l,a;for(let o=0;o<xfe;o++){const c=fN[o],{isEnabled:h,Feature:u,ProjectionNode:f,MeasureLayout:d}=qd[c];f&&(l=f),h(n)&&(!this.features[c]&&u&&(this.features[c]=new u(this)),d&&(a=d))}if((this.type==="html"||this.type==="svg")&&!this.projection&&l){this.projection=new l(this.latestValues,this.parent&&this.parent.projection);const{layoutId:o,layout:c,drag:h,dragConstraints:u,layoutScroll:f,layoutRoot:d}=n;this.projection.setOptions({layoutId:o,layout:c,alwaysMeasureLayout:!!h||u&&vu(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:d})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<D3.length;r++){const i=D3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=t["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Sfe(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<wfe;r++){const i=pE[r],s=this.props[i];(Xd(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ch(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=xE(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ur(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new RE),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class dN extends Cfe{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},s){let l=$ue(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),l&&(l=i(l))),s){Bue(this,r,l);const a=_fe(this,r,l,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function Tfe(e){return window.getComputedStyle(e)}class Efe extends dN{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(dc.has(n)){const r=PE(n);return r&&r.default||0}else{const r=Tfe(t),i=(eF(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return eN(t,n)}build(t,n,r,i){vE(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return SE(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ur(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){oF(t,n,r,i)}}class Pfe extends dN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(dc.has(n)){const r=PE(n);return r&&r.default||0}return n=aF.has(n)?n:fE(n),t.getAttribute(n)}measureInstanceViewportBox(){return Rn()}scrapeMotionValuesFromProps(t,n){return cF(t,n)}build(t,n,r,i){_E(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){lF(t,n,r,i)}mount(t){this.isSVGTag=bE(t.tagName),super.mount(t)}}const Ife=(e,t)=>mE(e)?new Pfe(t,{enableHardwareAcceleration:!1}):new Efe(t,{enableHardwareAcceleration:!0}),Ofe={layout:{ProjectionNode:cN,MeasureLayout:nN}},kfe={...nhe,...wce,...afe,...Ofe},Qs=Rle((e,t)=>uce(e,t,kfe,Ife));function pN(){const e=T.useRef(!1);return hE(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Afe(){const e=pN(),[t,n]=T.useState(0),r=T.useCallback(()=>{e.current&&n(t+1)},[t]);return[T.useCallback(()=>Wt.postRender(r),[r]),t]}class Rfe extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Dfe({children:e,isPresent:t}){const n=T.useId(),r=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0});return T.useInsertionEffect(()=>{const{width:s,height:l,top:a,left:o}=i.current;if(t||!r.current||!s||!l)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${l}px !important;
            top: ${a}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),T.createElement(Rfe,{isPresent:t,childRef:r,sizeRef:i},T.cloneElement(e,{ref:r}))}const _S=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:l})=>{const a=uF(Mfe),o=T.useId(),c=T.useMemo(()=>({id:o,initial:t,isPresent:n,custom:i,onExitComplete:h=>{a.set(h,!0);for(const u of a.values())if(!u)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[n]);return T.useMemo(()=>{a.forEach((h,u)=>a.set(u,!1))},[n]),T.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),l==="popLayout"&&(e=T.createElement(Dfe,{isPresent:n},e)),T.createElement(y1.Provider,{value:c},e)};function Mfe(){return new Map}function Lfe(e){return T.useEffect(()=>()=>e(),[])}const _l=e=>e.key||"";function Ffe(e,t){e.forEach(n=>{const r=_l(n);t.set(r,n)})}function Nfe(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const jfe=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:l="sync"})=>{const a=T.useContext(gE).forceRender||Afe()[0],o=pN(),c=Nfe(e);let h=c;const u=T.useRef(new Map).current,f=T.useRef(h),d=T.useRef(new Map).current,p=T.useRef(!0);if(hE(()=>{p.current=!1,Ffe(c,d),f.current=h}),Lfe(()=>{p.current=!0,d.clear(),u.clear()}),p.current)return T.createElement(T.Fragment,null,h.map(_=>T.createElement(_S,{key:_l(_),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:l},_)));h=[...h];const m=f.current.map(_l),g=c.map(_l),v=m.length;for(let _=0;_<v;_++){const y=m[_];g.indexOf(y)===-1&&!u.has(y)&&u.set(y,void 0)}return l==="wait"&&u.size&&(h=[]),u.forEach((_,y)=>{if(g.indexOf(y)!==-1)return;const b=d.get(y);if(!b)return;const S=m.indexOf(y);let x=_;if(!x){const C=()=>{u.delete(y);const w=Array.from(d.keys()).filter(k=>!g.includes(k));if(w.forEach(k=>d.delete(k)),f.current=c.filter(k=>{const I=_l(k);return I===y||w.includes(I)}),!u.size){if(o.current===!1)return;a(),r&&r()}};x=T.createElement(_S,{key:_l(b),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:s,mode:l},b),u.set(y,x)}h.splice(S,0,x)}),h=h.map(_=>{const y=_.key;return u.has(y)?_:T.createElement(_S,{key:_l(_),isPresent:!0,presenceAffectsLayout:s,mode:l},_)}),T.createElement(T.Fragment,null,u.size?h:h.map(_=>T.cloneElement(_)))},ME="-";function Bfe(e){const t=$fe(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;function i(l){const a=l.split(ME);return a[0]===""&&a.length!==1&&a.shift(),gN(a,t)||Ufe(l)}function s(l,a){const o=n[l]||[];return a&&r[l]?[...o,...r[l]]:o}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function gN(e,t){var l;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?gN(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(ME);return(l=t.validators.find(({validator:a})=>a(s)))==null?void 0:l.classGroupId}const M3=/^\[(.+)\]$/;function Ufe(e){if(M3.test(e)){const t=M3.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function $fe(e){const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Vfe(Object.entries(e.classGroups),n).forEach(([s,l])=>{c2(l,r,s,t)}),r}function c2(e,t,n,r){e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:L3(t,i);s.classGroupId=n;return}if(typeof i=="function"){if(Gfe(i)){c2(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,l])=>{c2(l,L3(t,s),n,r)})})}function L3(e,t){let n=e;return t.split(ME).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function Gfe(e){return e.isThemeGetter}function Vfe(e,t){return t?e.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([l,a])=>[t+l,a])):s);return[n,i]}):e}function Hfe(e){if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;function i(s,l){n.set(s,l),t++,t>e&&(t=0,r=n,n=new Map)}return{get(s){let l=n.get(s);if(l!==void 0)return l;if((l=r.get(s))!==void 0)return i(s,l),l},set(s,l){n.has(s)?n.set(s,l):i(s,l)}}}const mN="!";function zfe(e){const t=e.separator,n=t.length===1,r=t[0],i=t.length;return function(l){const a=[];let o=0,c=0,h;for(let m=0;m<l.length;m++){let g=l[m];if(o===0){if(g===r&&(n||l.slice(m,m+i)===t)){a.push(l.slice(c,m)),c=m+i;continue}if(g==="/"){h=m;continue}}g==="["?o++:g==="]"&&o--}const u=a.length===0?l:l.substring(c),f=u.startsWith(mN),d=f?u.substring(1):u,p=h&&h>c?h-c:void 0;return{modifiers:a,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:p}}}function Wfe(e){if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t}function Yfe(e){return{cache:Hfe(e.cacheSize),splitModifiers:zfe(e),...Bfe(e)}}const Xfe=/\s+/;function qfe(e,t){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,s=new Set;return e.trim().split(Xfe).map(l=>{const{modifiers:a,hasImportantModifier:o,baseClassName:c,maybePostfixModifierPosition:h}=n(l);let u=r(h?c.substring(0,h):c),f=!!h;if(!u){if(!h)return{isTailwindClass:!1,originalClassName:l};if(u=r(c),!u)return{isTailwindClass:!1,originalClassName:l};f=!1}const d=Wfe(a).join(":");return{isTailwindClass:!0,modifierId:o?d+mN:d,classGroupId:u,originalClassName:l,hasPostfixModifier:f}}).reverse().filter(l=>{if(!l.isTailwindClass)return!0;const{modifierId:a,classGroupId:o,hasPostfixModifier:c}=l,h=a+o;return s.has(h)?!1:(s.add(h),i(o,c).forEach(u=>s.add(a+u)),!0)}).reverse().map(l=>l.originalClassName).join(" ")}function Kfe(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=vN(t))&&(r&&(r+=" "),r+=n);return r}function vN(e){if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=vN(e[r]))&&(n&&(n+=" "),n+=t);return n}function F3(e,...t){let n,r,i,s=l;function l(o){const c=t.reduce((h,u)=>u(h),e());return n=Yfe(c),r=n.cache.get,i=n.cache.set,s=a,a(o)}function a(o){const c=r(o);if(c)return c;const h=qfe(o,n);return i(o,h),h}return function(){return s(Kfe.apply(null,arguments))}}function Xt(e){const t=n=>n[e]||[];return t.isThemeGetter=!0,t}const yN=/^\[(?:([a-z-]+):)?(.+)\]$/i,Qfe=/^\d+\/\d+$/,Jfe=new Set(["px","full","screen"]),Zfe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ede=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tde=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nde=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rde=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function js(e){return Al(e)||Jfe.has(e)||Qfe.test(e)}function Fo(e){return Gh(e,"length",hde)}function Al(e){return!!e&&!Number.isNaN(Number(e))}function mm(e){return Gh(e,"number",Al)}function Of(e){return!!e&&Number.isInteger(Number(e))}function ide(e){return e.endsWith("%")&&Al(e.slice(0,-1))}function ot(e){return yN.test(e)}function No(e){return Zfe.test(e)}const sde=new Set(["length","size","percentage"]);function ode(e){return Gh(e,sde,_N)}function ade(e){return Gh(e,"position",_N)}const lde=new Set(["image","url"]);function cde(e){return Gh(e,lde,dde)}function ude(e){return Gh(e,"",fde)}function kf(){return!0}function Gh(e,t,n){const r=yN.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1}function hde(e){return ede.test(e)&&!tde.test(e)}function _N(){return!1}function fde(e){return nde.test(e)}function dde(e){return rde.test(e)}function N3(){const e=Xt("colors"),t=Xt("spacing"),n=Xt("blur"),r=Xt("brightness"),i=Xt("borderColor"),s=Xt("borderRadius"),l=Xt("borderSpacing"),a=Xt("borderWidth"),o=Xt("contrast"),c=Xt("grayscale"),h=Xt("hueRotate"),u=Xt("invert"),f=Xt("gap"),d=Xt("gradientColorStops"),p=Xt("gradientColorStopPositions"),m=Xt("inset"),g=Xt("margin"),v=Xt("opacity"),_=Xt("padding"),y=Xt("saturate"),b=Xt("scale"),S=Xt("sepia"),x=Xt("skew"),C=Xt("space"),w=Xt("translate"),k=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",ot,t],j=()=>[ot,t],G=()=>["",js,Fo],B=()=>["auto",Al,ot],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"],M=()=>["start","end","center","between","around","evenly","stretch"],P=()=>["","0",ot],O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>[Al,mm],D=()=>[Al,ot];return{cacheSize:500,separator:":",theme:{colors:[kf],spacing:[js,Fo],blur:["none","",No,ot],brightness:A(),borderColor:[e],borderRadius:["none","","full",No,ot],borderSpacing:j(),borderWidth:G(),contrast:A(),grayscale:P(),hueRotate:D(),invert:P(),gap:j(),gradientColorStops:[e],gradientColorStopPositions:[ide,Fo],inset:R(),margin:R(),opacity:A(),padding:j(),saturate:A(),scale:A(),sepia:P(),skew:D(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",ot]}],container:["container"],columns:[{columns:[No]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),ot]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Of,ot]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ot]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Of,ot]}],"grid-cols":[{"grid-cols":[kf]}],"col-start-end":[{col:["auto",{span:["full",Of,ot]},ot]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[kf]}],"row-start-end":[{row:["auto",{span:[Of,ot]},ot]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ot]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ot,t]}],"min-w":[{"min-w":[ot,t,"min","max","fit"]}],"max-w":[{"max-w":[ot,t,"none","full","min","max","fit","prose",{screen:[No]},No]}],h:[{h:[ot,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ot,t,"auto","min","max","fit"]}],"font-size":[{text:["base",No,Fo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mm]}],"font-family":[{font:[kf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ot]}],"line-clamp":[{"line-clamp":["none",Al,mm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",js,ot]}],"list-image":[{"list-image":["none",ot]}],"list-style-type":[{list:["none","disc","decimal",ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",js,Fo]}],"underline-offset":[{"underline-offset":["auto",js,ot]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),ade]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ode]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cde]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[d]}],"gradient-via":[{via:[d]}],"gradient-to":[{to:[d]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:V()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[js,ot]}],"outline-w":[{outline:[js,Fo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[js,Fo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",No,ude]}],"shadow-color":[{shadow:[kf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":W()}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[o]}],"drop-shadow":[{"drop-shadow":["","none",No,ot]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[o]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ot]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",ot]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Of,ot]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ot]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[js,Fo,mm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}function pde(e,{cacheSize:t,prefix:n,separator:r,extend:i={},override:s={}}){g0(e,"cacheSize",t),g0(e,"prefix",n),g0(e,"separator",r);for(const l in s)gde(e[l],s[l]);for(const l in i)mde(e[l],i[l]);return e}function g0(e,t,n){n!==void 0&&(e[t]=n)}function gde(e,t){if(t)for(const n in t)g0(e,n,t[n])}function mde(e,t){if(t)for(const n in t){const r=t[n];r!==void 0&&(e[n]=(e[n]||[]).concat(r))}}function vde(e,...t){return typeof e=="function"?F3(N3,e,...t):F3(()=>pde(N3(),e),...t)}function x3e(...e){return e.filter(Boolean).join(" ")}const yde=vde({extend:{classGroups:{"font-size":["text-xxs","text-xs","text-sm","text-base","text-lg","text-xl","text-10","text-12","text-13","text-14","text-16","text-20","text-24"]}}});function Fe(...e){return yde(e.filter(Boolean))}const _de="/assets/alert-triangle-630226e2.svg",bde="/assets/backward-07197e8d.svg",Sde="/assets/boards-icon-587daefa.svg",xde="/assets/brush-02-2881de82.svg",wde="/assets/building-07-af67d1b4.svg",Cde="/assets/check-square-e74e8184.svg",bN="/assets/check-1080c587.svg",SN="/assets/chevron-down-a137959a.svg",xN="/assets/chevron-left-5fdab79c.svg",Tde="/assets/chevron-right-859a1a40.svg",Ede="/assets/chevron-up-29d3b178.svg",Pde="/assets/clock-rewind-2e2c7c57.svg",Ide="/assets/contrast-02-8f7cef33.svg",wN="/assets/copy-01c34977.svg",Ode="/assets/crown-81ce513c.svg",kde="/assets/cursor-02-69e41b25.svg",Ade="/assets/dots-horizontal-54e8c214.svg",Rde="/assets/dots-vertical-25222aa5.svg",Dde="/assets/download-02-43f8aa7d.svg",Mde="/assets/download-cloud-02-4cdc771b.svg",Lde="/assets/download-cloud-209d554d.svg",Fde="/assets/edit-7e20fd0a.svg",Nde="/assets/expand-05-9ab1901f.svg",jde="/assets/expand-87b943a1.svg",Bde="/assets/file-06-83eb3cd3.svg",Ude="/assets/file-heart-03-6e85df9d.svg",$de="/assets/file-plus-985d152f.svg",Gde="/assets/file-settings-772d0185.svg",Vde="/assets/file-settings-alert-bc547eb0.svg",Hde="/assets/flow-icon-19d1e62b.svg",zde="/assets/folder-plus-406ab3af.svg",Wde="/assets/folder-c1754535.svg",Yde="/assets/forward-5301943b.svg",Xde="/assets/genie-chat-ba2a9788.svg",qde="/assets/genie-icon-5f151f73.svg",Kde="/assets/grid-01-59740f5a.svg",Qde="/assets/hamburger-3d34131a.svg",Jde="/assets/height-09530976.svg",Zde="/assets/help-circle-1c0ff22d.svg",epe="/assets/home-55bbf421.svg",tpe="/assets/image-01-5979308a.svg",npe="/assets/image-plus-f8057bf1.svg",rpe="/assets/image-c0456e8e.svg",ipe="/assets/import-file-ba47f0d0.svg",spe="/assets/layers-three-01-b6e03d8b.svg",ope="/assets/layout-alt-02-5bf010a0.svg",ape="/assets/list-3cff769c.svg",lpe="/assets/log-in-03-3f22e12d.svg",cpe="/assets/magic-wand-01-70f4e059.svg",upe="/assets/message-text-square-02-ec3047a0.svg",hpe="/assets/minus-83fc0170.svg",fpe="/assets/page-25b43bdc.svg",dpe="/assets/palette-5891082d.svg",ppe="/assets/pen-tool-b44e46e4.svg",gpe="/assets/play-square-5d28fb25.svg",CN="/assets/plus-78cd8cc3.svg",mpe="/assets/ratio-horizontal-72a083d7.svg",vpe="/assets/ratio-vertical-694b9ab6.svg",ype="/assets/redo-db475f56.svg",_pe="/assets/save-02-4815bcd1.svg",bpe="/assets/save-03-e8578538.svg",Spe="/assets/scale-fit-5628c1f8.svg",xpe="/assets/scale-57ed545b.svg",wpe="/assets/screen-divide-54f079d5.svg",Cpe="/assets/search-sm-f4c7cdbd.svg",Tpe="/assets/search-b8d881cd.svg",Epe="/assets/send-01-04460c28.svg",Ppe="/assets/settings-02-beaf895f.svg",Ipe="/assets/settings-03-6bbb5a54.svg",Ope="/assets/settings-04-1f963871.svg",kpe="/assets/share-01-c662225f.svg",TN="/assets/spinner-a32ae13b.svg",Ape="/assets/credit-card-01-797571e1.svg",Rpe="/assets/edit-04-d9438a8a.svg",Dpe="/assets/square-6a1e5cfe.svg",Mpe="/assets/studio-icon-adceb26b.svg",Lpe="/assets/tag-44ae38c1.svg",Fpe="/assets/thumbs-down-filled-5fc13a0b.svg",Npe="/assets/thumbs-down-62ce0898.svg",jpe="/assets/thumbs-up-filled-8b8a829a.svg",Bpe="/assets/thumbs-up-a9ee1857.svg",Upe="/assets/tick-553c3304.svg",$pe="/assets/to-back-8f3430f9.svg",Gpe="/assets/to-front-7412a394.svg",Vpe="/assets/transfer-icon-bea8ee01.svg",EN="/assets/trash-0fb49a88.svg",Hpe="/assets/undo-3d4a8442.svg",PN="/assets/user-01-b7ef4d1c.svg",zpe="/assets/user-left-01-d41b1126.svg",Wpe="/assets/user-plus-01-d80352f6.svg",Ype="/assets/user-right-01-e3ba6c17.svg",Xpe="/assets/users-right-2a34cd06.svg",qpe="/assets/users-01-ea88a364.svg",Kpe="/assets/users-plus-bc7f4d2c.svg",Qpe="/assets/users-minus-405d1875.svg",Jpe="/assets/vectorizer-icon-21c81d18.svg",Zpe="/assets/width-a5842fd7.svg",IN="/assets/x-close-8db2a8f6.svg",ege="/assets/wand-19a1af6f.svg",tge="/assets/cursor-04-dd9612f0.svg",nge="/assets/arrow-step-up-8b8d93b1.svg",rge="/assets/arrow-step-down-ca375e72.svg",ige="/assets/file-heart-02-61a1e59b.svg",sge="/assets/cloud-checkmark-1ab439a0.svg",oge="/assets/studio-outline-c1cd80a3.svg",ON="/assets/upload-cloud-01-b8fb2e46.svg",age="/assets/refresh-cw-01-487b0f50.svg",lge="/assets/cross-0882d478.svg",cge="/assets/package-aca68a01.svg",uge="/assets/file-check-02-fbf2e18f.svg",kN="/assets/file-02-b33e05ae.svg",hge="/assets/copy-06-7229452d.svg",fge="/assets/repeat-03-c56fec74.svg",dge="/assets/loading-01-bdeabfde.svg",pge="/assets/arrow-down-a36c4830.svg",gge="/assets/arrow-up-40ee3047.svg",AN="/assets/align-bottom-01-e75c69ac.svg",mge="/assets/condense-bbf77095.svg",vge="/assets/heart-0f602ebd.svg",yge="/assets/heart-filled-6aaad112.svg",_ge="/assets/flow-coin-99f4f065.svg",bge="/assets/slash-circle-294a862e.svg",Sge="/assets/upload-04-375c2516.svg",xge="/assets/coin-star-3e415408.svg",wge="/assets/link-03-ea7443d2.svg",Cge="/assets/group-43d9acd6.svg",Tge="/assets/eye-subtract-f6915c99.svg",Ege="/assets/file-01-5f6a7d93.svg",Pge="/assets/film-02-858d62ff.svg",Ige="/assets/music-note-01-255ff58e.svg",Oge="/assets/share-03-56f4441b.svg",kge="/assets/arrow-narrow-up-right-a5e6f021.svg",Age="/assets/pause-square-0e111b19.svg",Rge="/assets/mute-d757b713.svg",Dge="/assets/volume-max-2deb76a3.svg";function de({src:e,...t}){return E.jsx("svg",{viewBox:"0 0 16 16",width:16,height:16,...t,children:E.jsx("use",{xlinkHref:e+"#img",href:e+"#img"})})}function w3e(e){return E.jsx(de,{src:ppe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function u2(e){return E.jsx(de,{src:ege,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function C3e(e){return E.jsx(de,{src:wde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function T3e(e){return E.jsx(de,{src:Sde,...e,width:"26",height:"22",viewBox:"0 0 26 22"})}function E3e(e){return E.jsx(de,{src:Cde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function LE(e){return E.jsx(de,{src:SN,...e,width:"16",height:"17",viewBox:"0 0 16 17"})}LE.src=SN;function Mge(e){return E.jsx(de,{src:xN,...e,width:"17",height:"16",viewBox:"0 0 17 16"})}Mge.src=xN;function P3e(e){return E.jsx(de,{src:Tde,...e,width:"17",height:"16",viewBox:"0 0 17 16"})}function Lge(e){return E.jsx(de,{src:Ede,...e})}function I3e(e){return E.jsx(de,{src:Lde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function O3e(e){return E.jsx(de,{src:Mde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function k3e({width:e=24,height:t=24,...n}){return E.jsx(de,{src:Fde,...n,width:e,height:t,viewBox:"0 0 24 24"})}function A3e(e){return E.jsx(de,{src:Rpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function R3e(e){return E.jsx(de,{src:Hde,...e,width:"24",height:"25",viewBox:"0 0 24 25"})}function D3e(e){return E.jsx(de,{src:Wde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function M3e(e){return E.jsx(de,{src:zde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function L3e(e){return E.jsx(de,{src:npe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function F3e(e){return E.jsx(de,{src:rpe,...e,width:"16",height:"17",viewBox:"0 0 16 17"})}function N3e(e){return E.jsx(de,{src:fpe,...e})}function j3e(e){return E.jsx(de,{src:Dpe,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function B3e(e){return E.jsx(de,{src:wpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function U3e(e){return E.jsx(de,{src:xpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function $3e(e){return E.jsx(de,{src:Spe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function G3e(e){return E.jsx(de,{src:Jpe,...e,width:"20",height:"22",viewBox:"0 0 20 22"})}function Ov(e){return E.jsx(de,{src:IN,...e,width:"17",height:"16",viewBox:"0 0 17 16"})}Ov.src=IN;function Ap(e){return E.jsx(de,{src:TN,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}Ap.src=TN;function V3e(e){return E.jsx(de,{src:Hpe,...e,width:"25",height:"24",viewBox:"0 0 25 24"})}function H3e(e){return E.jsx(de,{src:ype,...e,width:"25",height:"24",viewBox:"0 0 25 24"})}function z3e(e){return E.jsx(de,{src:jde,...e,width:"20",height:"20",viewBox:"0 0 20 20"})}function Fge(e){return E.jsx(de,{src:CN,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}Fge.src=CN;function W3e(e){return E.jsx(de,{src:hpe,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function Y3e(e){return E.jsx(de,{src:bde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function X3e(e){return E.jsx(de,{src:Yde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function q3e(e){return E.jsx(de,{src:$pe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function K3e(e){return E.jsx(de,{src:Gpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function Q3e({width:e=24,height:t=24,...n}){return E.jsx(de,{src:Upe,...n,width:e,height:t,viewBox:"0 0 24 24"})}function J3e(e){return E.jsx(de,{src:Tpe,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function Z3e(e){return E.jsx(de,{src:Cpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function eAe(e){return E.jsx(de,{src:spe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function tAe(e){return E.jsx(de,{src:Ipe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function nAe(e){return E.jsx(de,{src:Ope,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function rAe(e){return E.jsx(de,{src:kpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function RN(e){return E.jsx(de,{src:bN,...e,width:"20",height:"20",viewBox:"0 0 20 20"})}RN.src=bN;function iAe(e){return E.jsx(de,{src:Ppe,...e,width:"24",height:"25",viewBox:"0 0 24 25"})}function sAe(e){return E.jsx(de,{src:Mpe,...e,width:"28",height:"28",viewBox:"0 0 28 28"})}function oAe(e){return E.jsx(de,{src:Lpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function aAe(e){return E.jsx(de,{src:Vpe,...e,width:"20",height:"22",viewBox:"0 0 20 22"})}function lAe({width:e=24,height:t=24,...n}){return E.jsx(de,{src:EN,...n,width:e,height:t,viewBox:"0 0 24 24"})}function Nge(e){return E.jsx(de,{src:kde,...e,width:"24",height:"25",viewBox:"0 0 24 25"})}function cAe(e){return E.jsx(de,{src:xde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function uAe(e){return E.jsx(de,{src:Ide,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function hAe(e){return E.jsx(de,{src:Rde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function Qd(e){return E.jsx(de,{src:_de,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function fAe(e){return E.jsx(de,{src:Xde,...e,width:"22",height:"24",viewBox:"0 0 22 24"})}function dAe(e){return E.jsx(de,{src:qde,...e,width:"22",height:"24",viewBox:"0 0 22 24"})}function pAe(e){return E.jsx(de,{src:Bpe,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function gAe(e){return E.jsx(de,{src:jpe,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function mAe(e){return E.jsx(de,{src:Npe,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function vAe(e){return E.jsx(de,{src:Fpe,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function yAe(e){return E.jsx(de,{src:Ade,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function _Ae(e){return E.jsx(de,{src:epe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function bAe(e){return E.jsx(de,{src:Qde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function SAe(e){return E.jsx(de,{src:$de,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function xAe(e){return E.jsx(de,{src:Gde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function wAe(e){return E.jsx(de,{src:Vde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function CAe(e){return E.jsx(de,{src:ipe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function TAe(e){return E.jsx(de,{src:Dde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function EAe(e){return E.jsx(de,{src:Pde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function PAe(e){return E.jsx(de,{src:upe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function IAe(e){return E.jsx(de,{src:Zde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function OAe(e){return E.jsx(de,{src:wN,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function kAe(e){return E.jsx(de,{src:_pe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function AAe(e){return E.jsx(de,{src:bpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function RAe(e){return E.jsx(de,{src:Epe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function DAe(e){return E.jsx(de,{src:Ude,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function MAe(e){return E.jsx(de,{src:Kde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function LAe(e){return E.jsx(de,{src:ape,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function jge(e){return E.jsx(de,{src:lpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function FAe(e){return E.jsx(de,{src:dpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function NAe(e){return E.jsx(de,{src:Wpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function jAe(e){return E.jsx(de,{src:zpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function BAe(e){return E.jsx(de,{src:qpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function UAe(e){return E.jsx(de,{src:Kpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function $Ae(e){return E.jsx(de,{src:Qpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function GAe(e){return E.jsx(de,{src:Ype,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function VAe(e){return E.jsx(de,{src:Xpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function HAe(e){return E.jsx(de,{src:ope,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function zAe(e){return E.jsx(de,{src:Bde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function WAe(e){return E.jsx(de,{src:tpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function YAe(e){return E.jsx(de,{src:gpe,...e,width:"20",height:"20",viewBox:"0 0 20 20"})}function XAe(e){return E.jsx(de,{src:mpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function qAe(e){return E.jsx(de,{src:vpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function KAe(e){return E.jsx(de,{src:Zpe,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function QAe(e){return E.jsx(de,{src:Jde,...e})}function Bge(e){return E.jsx(de,{src:PN,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}Bge.src=PN;function JAe(e){return E.jsx(de,{src:cpe,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function ZAe(e){return E.jsx(de,{src:Ode,...e,width:"14",height:"14",viewBox:"0 0 14 14"})}function eRe(e){return E.jsx(de,{src:Nde,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function tRe(e){return E.jsx(de,{src:tge,...e,width:"20",height:"20",viewBox:"0 0 20 20"})}function nRe(e){return E.jsx(de,{src:nge,...e,width:"8",height:"6",viewBox:"0 0 8 6"})}function rRe(e){return E.jsx(de,{src:rge,...e,width:"8",height:"6",viewBox:"0 0 8 6"})}function iRe(e){return E.jsx(de,{src:ige,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function sRe(e){return E.jsx(de,{src:sge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function oRe(e){return E.jsx(de,{src:oge,...e,width:"22",height:"22",viewBox:"0 0 22 22"})}function aRe(e){return E.jsx(de,{src:ON,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function lRe(e){return E.jsx(de,{src:age,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function cRe({width:e=16,height:t=16,...n}){return E.jsx(de,{src:lge,...n,width:e,height:t,viewBox:"0 0 16 16"})}function uRe(e){return E.jsx(de,{src:cge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function hRe(e){return E.jsx(de,{src:uge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function fRe(e){return E.jsx(de,{src:kN,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function dRe(e){return E.jsx(de,{src:hge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function pRe(e){return E.jsx(de,{src:fge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function gRe(e){return E.jsx(de,{src:dge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function mRe(e){return E.jsx(de,{src:pge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function vRe(e){return E.jsx(de,{src:gge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function yRe(e){return E.jsx(de,{src:Ape,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function _Re(e){return E.jsx(de,{src:AN,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function bRe(e){return E.jsx(de,{src:mge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function SRe(e){return E.jsx(de,{src:vge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function xRe(e){return E.jsx(de,{src:yge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function wRe(e){return E.jsx(de,{src:_ge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function CRe(e){return E.jsx(de,{src:bge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function TRe(e){return E.jsx(de,{src:Sge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function ERe(e){return E.jsx(de,{src:xge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function PRe(e){return E.jsx(de,{src:wge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function IRe(e){return E.jsx(de,{src:Tge,...e,width:"12",height:"10",viewBox:"0 0 12 10"})}function ORe(e){return E.jsx(de,{src:Ege,...e,width:"18",height:"22",viewBox:"0 0 18 22"})}function kRe(e){return E.jsx(de,{src:Pge,...e,width:"22",height:"22",viewBox:"0 0 22 22"})}function ARe(e){return E.jsx(de,{src:Ige,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function RRe(e){return E.jsx(de,{src:Oge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function DRe(e){return E.jsx(de,{src:kge,...e,width:"22",height:"22",viewBox:"0 0 22 22"})}function MRe(e){return E.jsx(de,{src:Age,...e,width:"20",height:"20",viewBox:"0 0 20 20"})}function LRe(e){return E.jsx(de,{src:Rge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function FRe(e){return E.jsx(de,{src:Dge,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function Uge({children:e,variant:t="secondary",...n},r){return E.jsxs("button",{...n,ref:r,className:Fe("group flex h-[24px] w-[24px] items-center justify-center rounded-full p-[4px]","hover:bg-gray-700 hover:text-gray-700","outline-none focus-visible:ring-2 focus-visible:ring-violet-500",t==="primary"&&"hover:bg-gray-700 hover:text-gray-300 focus:bg-gray-900 focus:text-gray-400 active:bg-gray-900 active:text-gray-400",n.className),children:[e,E.jsx(Ov,{className:"group-hover:text-service-white"})]})}const $ge=T.forwardRef(Uge),DN=T.createContext(null);function MN(){const e=T.useContext(DN);if(!e)throw new Error("useDialog must be used within a Dialog");return e}function Rp({open:e,onOpenChange:t,defaultOpen:n,children:r}){const[i,s]=T.useState(n??!1),l=e!==void 0&&t!==void 0;l&&n===void 0&&{}.DEV&&console.warn("You are controlling Dialog.Root and not defining `defaultOpen`. This means the dialog will not be open by default. Please set `defaultOpen`");const a=T.useMemo(()=>({open:l?e:i,onOpenChange:l?t:s,handleClose:()=>l?t(!1):s(!1)}),[l,t,i,e]);return E.jsx(DN.Provider,{value:a,children:E.jsx(_le,{open:a.open,onOpenChange:a.onOpenChange,children:r})})}function LN(e){return E.jsx(xle,{asChild:!0,children:E.jsx($ge,{...e,className:Fe("absolute right-2 top-2 text-gray-400",e.className)})})}function Gge({zIndex:e,overlayZIndex:t,dismissable:n=!0,initial:r=!0,children:i,className:s,...l},a){const{open:o,onOpenChange:c}=MN();function h(f){n&&f.target===f.currentTarget&&c(!1)}function u(f){n||f.preventDefault()}return E.jsxs(jfe,{initial:r,children:[o?E.jsx(Qs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{ease:"easeOut",duration:.15}},style:{zIndex:e},className:"relative",children:E.jsx(ble,{forceMount:!0,className:"fixed inset-0 bg-[#272B2F] bg-opacity-80",style:{zIndex:t}})},"overlay"):null,o?E.jsx(Sle,{asChild:!0,forceMount:!0,onEscapeKeyDown:u,onClick:h,ref:a,...l,children:E.jsx(Qs.div,{initial:{opacity:0,scale:.975},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9875,transition:{ease:"easeOut",duration:.2}},className:Fe("fixed inset-0 flex h-[100dvh] w-screen items-center justify-center outline-none",s),style:{zIndex:e?e+1:void 0},children:i})},"content"):null]})}const Dp=T.forwardRef(Gge);function Vge(){return E.jsx(E.Fragment,{children:E.jsx(Wge,{})})}const FN=zoe(!1),Hge=e=>FN.value=e,zge=hc(()=>Ve(()=>import("./index-f1b25b88.js"),["assets/index-f1b25b88.js","assets/index-2431b2d0.js","assets/index-cc47a534.js","assets/social-22364841.js","assets/img-f5456793.js","assets/index-7dad8cc3.js","assets/button-176a6d23.js"]).then(e=>e.PaymentsDialog));function Wge(){return E.jsx(Rp,{open:FN.value,onOpenChange:Hge,defaultOpen:!1,children:E.jsx(m1,{forceMount:!0,children:E.jsx(T.Suspense,{fallback:null,children:E.jsx(Dp,{dismissable:!1,zIndex:70,children:E.jsx(zge.component,{})})})})})}function Yge({size:e="medium",gesture:t="none",variant:n="fill",asChild:r,...i},s){const l=Fe("rounded-2 text-14 outline-none",i.disabled&&"cursor-not-allowed",j3.sizes[e],j3.variants[n],i.className),a=qge(t),o=r?Qi:"button";return E.jsx(o,{...a,...i,className:l,ref:s})}function Xge(e){const t=Qi;return E.jsx(t,{...e,className:Fe("h-[24px] w-[24px]",e.className)})}const En=Object.assign(T.forwardRef(Yge),{Icon:Xge}),j3={variants:{fill:["text-service-white-white bg-violet-500","hover:bg-[#6844C9]","active:bg-[#552DC1] active:text-service-white-white focus:bg-violet-500 focus:text-service-white-white","disabled:bg-gray-700 disabled:text-gray-400 disabled:hover:bg-gray-700 disabled:hover:text-gray-400"].join(" "),invisible:["bg-transparent","hover:text-violet-500","active:text-[#552DC1] focus:text-[#552DC1]","disabled:bg-transparent disabled:text-gray-400-400 disabled:hover:bg-transparent disabled:hover:text-gray-400-400"].join(" "),dark:["bg-transparent text-gray-50","hover:bg-[#6844C9] hover:text-service-white-white","active:bg-[#552DC1] active:text-service-white-white focus:bg-[#552DC1] focus:text-service-white-white","disabled:bg-gray-700 disabled:text-gray-400 disabled:hover:bg-gray-700 disabled:hover:text-gray-400"].join(" "),gray:["bg-gray-500-300 text-gray-50","hover:text-service-white-white hover:bg-[#6844C9]","active:text-service-white-white active:bg-[#552DC1] focus:text-service-white-white focus:bg-[#552DC1]","disabled:bg-gray-700 disabled:text-gray-400 disabled:hover:bg-gray-700 disabled:hover:text-gray-400"].join(" "),outline:["bg-transparent text-gray-50 border border-gray-700 text-gray-50","hover:border-violet-500 hover:text-violet-500 active:text-[#552DC1]","active:border-[#552DC1] focus:border-[#552DC1]","disabled:bg-transparent disabled:text-gray-400-400 disabled:border-gray-400-400"].join(" "),danger:["text-service-white-white bg-red-100","hover:bg-[#AF1133]","active:bg-[#990827] focus:bg-[#990827]","disabled:bg-gray-700 disabled:text-gray-400 disabled:hover:bg-gray-700 disabled:hover:text-gray-400"].join(" ")},sizes:{small:"h-[34px] flex items-center px-[16px]",medium:"h-[42px] flex items-center px-[16px]"}};function qge(e){return e==="scale"?{whileHover:{scale:1.1},whileTap:{scale:1.05}}:{}}const Kge="/assets/SPARK_Studio-fb2a02ad.svg";function Qge({src:e,...t}){return E.jsx("svg",{...t,className:Fe("h-auto w-full",t.className),children:E.jsx("use",{xlinkHref:e+"#img",href:e+"#img"})})}function NN(e){return E.jsx(Qge,{src:Kge,width:"139",height:"49",viewBox:"0 0 139 49",...e})}const Fl=new Map,Jd=new Map;function Mp(e,t={}){return JSON.stringify({type:e,options:t})}function Jge(e,t,n){const r=Mp(t,n);function i(l){(Jd.get(e).get(r)??[]).forEach(c=>c(l))}const s=Fl.get(e)||new Map;s.set(r,i),Fl.set(e,s),e.addEventListener(t,i,n)}function Zge(e,t,n){const r=Fl.get(e);if(!r)return;const i=Mp(t,n),s=r.get(i);s&&(e.removeEventListener(t,s),r.delete(i),Fl.set(e,r))}function eme(e,t,n,r){const i=Jd.get(e)||new Map,s=Mp(t,r),l=i.get(s),a=l?[...l,n]:[n];i.set(s,a),Jd.set(e,i)}function tme(e,t,n,r){const i=Jd.get(e);if(!i)return;const s=Mp(t,r),l=i.get(s)??[],a=l?l.filter(o=>o!==n):[];a!=null&&a.length?(i.set(s,a),Jd.set(e,i)):Zge(e,t,r)}const nme={passive:!0};function rme(e,t,n,r=nme){Fl.get(e)||Fl.set(e,new Map);const i=Fl.get(e),s=Mp(t,r);return i!=null&&i.get(s)||Jge(e,t,r),eme(e,t,n,r),()=>{tme(e,t,n,r)}}function jN(e,t,n,r){return rme(e,t,n,r)}function ime(e){return e?new Promise((t,n)=>{const r=new Image;r.setAttribute("crossorigin","anonymous"),r.crossOrigin="anonymous",r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}):Promise.reject("No src provided")}function NRe(e){return e.includes("?")?`${e}&__corsfix=1`:`${e}?__corsfix=1`}function sme(e,t){const n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]);let s=i.length;const l=new Uint8Array(s);for(;s--;)l[s]=i.charCodeAt(s);return new File([l],t,{type:r})}async function ome(e){const n=await(await fetch(e)).blob();return new Promise((r,i)=>{const s=new FileReader;s.readAsDataURL(n),s.onloadend=()=>{const l=s.result;r(l)},s.onerror=i})}const jRe=()=>"EyeDropper"in window;function BRe({name:e,value:t,expiresIn:n,domain:r}){let i="";if(n){const l=new Date;l.setTime(l.getTime()+n),i="; expires="+l.toUTCString()}let s="";r&&(s=";domain="+r),document.cookie=e+"="+(t||"")+i+s+";path=/;"}function URe(e){if(typeof document>"u")return"";const t=e+"=",r=decodeURIComponent(document.cookie).split(";");for(let i=0;i<r.length;i++){let s=r[i];for(;s.charAt(0)===" ";)s=s.substring(1);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return""}function $Re(...e){const t=new FormData;for(const n of e.reverse())if(n)for(const[r,i]of Array.from(n.entries()))t.has(r)||t.append(r,i);return t}function GRe(e){return new Promise(t=>setTimeout(t,e))}function VRe(e){return+e.toFixed(4)}function ame(e){return requestAnimationFrame(()=>requestAnimationFrame(e))}function HRe(){var e,t,n;return((e=document.activeElement)==null?void 0:e.tagName)==="INPUT"||((t=document.activeElement)==null?void 0:t.tagName)==="TEXTAREA"||((n=document.activeElement)==null?void 0:n.contentEditable)==="true"}function zRe(e){var o;const n=new DOMParser().parseFromString(e,"image/svg+xml"),r=n.documentElement instanceof SVGElement?n.documentElement:lme(n),i=parseInt(r.getAttribute("width")??""),s=parseInt(r.getAttribute("height")??"");if(i&&s)return e;const l=r,a=(o=l==null?void 0:l.viewBox)==null?void 0:o.baseVal;return a&&(r.setAttribute("width",`${a.width}`),r.setAttribute("height",`${a.height}`)),r.outerHTML}function lme(e){const t=e.querySelector("svg");if(!t)throw new Error("Could not find SVG element");return t}function WRe(e){try{return requestIdleCallback(e)}catch{}setTimeout(e,0)}function hh(e,t,n,r){T.useEffect(()=>{const i=typeof e=="function"?e():e.current;if(n&&i)return jN(i,t,n,r)},[e,t,n,r])}hh.window=()=>window;hh.document=()=>document;function YRe(e,t,n){return hh(hh.window,e,t,n)}const BN="cf-studio-mobile-guard";let B3=localStorage.getItem(BN)==="true";function cme({children:e}){const[t,n]=T.useState(U3());hh(hh.window,"resize",T.useCallback(()=>n(U3()),[]));function r(i){B3=!0,localStorage.setItem(BN,"true"),n(i)}return E.jsxs(E.Fragment,{children:[E.jsx(Rp,{open:B3?!1:t,onOpenChange:r,defaultOpen:t,children:E.jsx(Dp,{zIndex:100,children:E.jsxs("div",{className:"bg-service-white-white rounded-4 relative flex flex-col items-center px-4 py-8 text-[#272b2f]",children:[E.jsx(LN,{className:"absolute right-0 top-0 m-2"}),E.jsx(Qs.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3},children:E.jsx(NN,{className:"mx-auto mb-5 h-auto max-w-[90px] text-violet-500"})}),E.jsx(Qs.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.6},children:E.jsx("img",{src:"/images/vectorizer.svg",width:"446",height:"446",className:"mx-auto mb-5 h-auto max-w-[175px]"})}),E.jsx(Qs.p,{className:"mx-auto mb-8 max-w-[320px] text-center [text-wrap:balance]",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.9},children:"Please note that Studio is best experienced on a computer or laptop. The mobile experience might not be optimal."}),E.jsx(Qs.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:1},children:E.jsx(g1,{asChild:!0,children:E.jsx(En,{gesture:"scale",children:"Continue"})})})]})})}),e]})}function U3(){return window.innerWidth<768}const h2="cf-studio-dark-mode",ume=new Set(["dark","light"]);function hme(){const e=UN();f2(e)}function UN(){const e=localStorage.getItem(h2);return ume.has(e)?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function f2(e){if(e==="light"){localStorage.setItem(h2,e),document.documentElement.classList.remove("dark");return}localStorage.setItem(h2,e),document.documentElement.classList.add("dark")}const $N=T.createContext(null);function fme({children:e}){const[t,n]=T.useState(UN());function r(){const s=t==="dark"?"light":"dark";n(s),f2(s)}function i(s){n(s),f2(s)}return E.jsx($N.Provider,{value:{preference:t,togglePreference:r,setPreference:i},children:e})}function XRe(){return T.useContext($N)}const Ji=new ez({defaultOptions:{mutations:{onError(e,t,n){var r;a7(e)||o7(e)&&!((r=String(e.message))!=null&&r.startsWith("CF_"))&&console.error(e,n)}}}});var dme=(e=>(e.Eur="eur",e.Gbp="gbp",e.Usd="usd",e))(dme||{}),pme=(e=>(e.Challenge2fa="challenge2fa",e.ChallengeOtp="challengeOtp",e))(pme||{}),gme=(e=>(e.AwaitingAdminApproval="AwaitingAdminApproval",e.Unknown="Unknown",e.Updated="Updated",e))(gme||{}),mme=(e=>(e.Aud="aud",e.Cad="cad",e.Cny="cny",e.Dkk="dkk",e.Eur="eur",e.Gbp="gbp",e.Jpy="jpy",e.Pln="pln",e.Usd="usd",e))(mme||{}),vme=(e=>(e.Analog="analog",e.Glitch="glitch",e.LessSaturated="lessSaturated",e.MoreSaturated="moreSaturated",e.None="none",e.Pixelate="pixelate",e.Poster="poster",e.Sepia="sepia",e.Sketch="sketch",e.ThreeDGlasses="threeDGlasses",e))(vme||{}),yme=(e=>(e.High="high",e.Low="low",e))(yme||{}),_me=(e=>(e.CfVanillaClipart512x001="CFVanillaClipart512x001",e.Deliberate="deliberate",e.Openjourney="openjourney",e.Photoreal="photoreal",e.Protogen="protogen",e.Redshift="redshift",e.Synthwave="synthwave",e.Vectorartz="vectorartz",e))(_me||{}),bme=(e=>(e.Animation="animation",e.Full="full",e.Pattern="pattern",e.Transparent="transparent",e))(bme||{}),Sme=(e=>(e.Private="private",e.Public="public",e))(Sme||{}),xme=(e=>(e.Studio="studio",e))(xme||{}),wme=(e=>(e.Negative="negative",e.Positive="positive",e.Unspecified="unspecified",e))(wme||{}),Cme=(e=>(e.Bot="bot",e.User="user",e))(Cme||{}),Tme=(e=>(e.Audio="audio",e.Error="error",e.File="file",e.ForbiddenTopic="forbiddenTopic",e.Image="image",e.NegativeFeedback="negativeFeedback",e.NegativeSentiment="negativeSentiment",e.PositiveFeedback="positiveFeedback",e.ProposedReply="proposedReply",e.Text="text",e.Update="update",e.Video="video",e))(Tme||{}),Eme=(e=>(e.Accepted="Accepted",e.AlreadyInvited="AlreadyInvited",e.AwaitingAdminApproval="AwaitingAdminApproval",e.Invited="Invited",e.Unknown="Unknown",e))(Eme||{}),Pme=(e=>(e.Teams="teams",e.Users="users",e))(Pme||{}),gi=(e=>(e.Fabric="Fabric",e.Polotno="Polotno",e))(gi||{}),Ime=(e=>(e.CreateTime="createTime",e.DeleteTime="deleteTime",e.LastViewTime="lastViewTime",e.Name="name",e.Unknown="unknown",e.UpdateTime="updateTime",e))(Ime||{}),Ome=(e=>(e.Admin="Admin",e.Editor="Editor",e.NoAccess="NoAccess",e.Owner="Owner",e.Unknown="Unknown",e.Viewer="Viewer",e))(Ome||{}),kme=(e=>(e.Asc="asc",e.Desc="desc",e))(kme||{}),_i=(e=>(e.Landscape_4_3="landscape_4_3",e.Landscape_16_9="landscape_16_9",e.Portrait_3_4="portrait_3_4",e.Portrait_9_16="portrait_9_16",e.Square="square",e))(_i||{}),Ame=(e=>(e.AppOnboarding="appOnboarding",e.UserLogin="userLogin",e))(Ame||{}),Rme=(e=>(e.Content="content",e.Editor="editor",e.Name="name",e))(Rme||{}),Dme=(e=>(e.Color="color",e.Label="label",e))(Dme||{}),Mme=(e=>(e.AllAccessMonthly="allAccessMonthly",e.AllAccessMonthlyFreeTrial="allAccessMonthlyFreeTrial",e.AllAccessYearly="allAccessYearly",e.AllAccessYearlyFreeTrial="allAccessYearlyFreeTrial",e.AllAccessYearlyPromo="allAccessYearlyPromo",e))(Mme||{}),Lme=(e=>(e.AllAccessYearly="allAccessYearly",e.AllAccessYearlyPromo="allAccessYearlyPromo",e))(Lme||{}),Fme=(e=>(e.CreatedAt="createdAt",e.Unknown="unknown",e))(Fme||{}),Nme=(e=>(e.OneDay="ONE_DAY",e.OneMonth="ONE_MONTH",e.OneWeek="ONE_WEEK",e.OneYear="ONE_YEAR",e.TenMinutes="TEN_MINUTES",e.ThreeDays="THREE_DAYS",e))(Nme||{});function $3(e,t){const n=new URL(e);return n.pathname=t,n}function kv(e,t){const n=new URL(e);return t.forEach(r=>{n.searchParams.delete(r)}),n}function G3(e){return e.pathname+e.search+e.hash}function GN(e){window.history.replaceState(null,"",e.toString())}const V3=e=>{let t;const n=new Set,r=(h,u)=>{const f=typeof h=="function"?h(t):h;if(!Object.is(f,t)){const d=t;t=u??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,d))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{n.clear()}},c=t=e(r,i,o);return o},jme=e=>e?V3(e):V3;var VN={exports:{}},HN={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1=T,Bme=nT;function Ume(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $me=typeof Object.is=="function"?Object.is:Ume,Gme=Bme.useSyncExternalStore,Vme=T1.useRef,Hme=T1.useEffect,zme=T1.useMemo,Wme=T1.useDebugValue;HN.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Vme(null);if(s.current===null){var l={hasValue:!1,value:null};s.current=l}else l=s.current;s=zme(function(){function o(d){if(!c){if(c=!0,h=d,d=r(d),i!==void 0&&l.hasValue){var p=l.value;if(i(p,d))return u=p}return u=d}if(p=u,$me(h,d))return p;var m=r(d);return i!==void 0&&i(p,m)?p:(h=d,u=m)}var c=!1,h,u,f=n===void 0?null:n;return[function(){return o(t())},f===null?void 0:function(){return o(f())}]},[t,n,r,i]);var a=Gme(e,s[0],s[1]);return Hme(function(){l.hasValue=!0,l.value=a},[a]),Wme(a),a};VN.exports=HN;var Yme=VN.exports;const Xme=Tr(Yme),{useDebugValue:qme}=Jt,{useSyncExternalStoreWithSelector:Kme}=Xme;const Qme=e=>e;function Jme(e,t=Qme,n){const r=Kme(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return qme(r),r}const H3=e=>{const t=typeof e=="function"?jme(e):e,n=(r,i)=>Jme(t,r,i);return Object.assign(n,t),n},zN=e=>e?H3(e):H3,WN=T.createContext(null);function qRe(){return T.useContext(WN)}var YN=(e=>(e.sparkAi="spark-ai",e.graphics="graphics",e.text="text",e.elements="elements",e.photos="photos",e.background="background",e.patterns="patterns",e.templates="templates",e.brandHub="brand-hub",e.uploads="uploads",e.draw="draw",e.help="help",e))(YN||{});const d2=zN(()=>({activeBar:null}));function XN(e){if(!e||typeof e=="object"){d2.setState({activeBar:e});return}d2.setState({activeBar:{tab:e}})}function FE(){return{activeBar:d2(t=>t.activeBar),navigateToBar:XN}}function KRe({children:e,size:t="medium",variant:n="secondary"}){T.useEffect(()=>{function i(){const a=new URLSearchParams(window.location.search).get("navigation-bar");if(a&&new Set(Object.values(YN)).has(a)){const c=new URL(window.location.href),h=kv(c,["navigation-bar"]);return GN(h),{tab:a,state:null}}return null}const s=i();s&&XN(s)},[]);const r=T.useMemo(()=>({size:t,variant:n}),[t,n]);return E.jsx(WN.Provider,{value:r,children:e})}function z3(e){return(e==null?void 0:e.tab)==="spark-ai"}function QRe(e){return(e==null?void 0:e.tab)==="text"}function ds(e,t,n){const[r,i]=T.useState(()=>{try{const l=window.sessionStorage.getItem(e)||"";return n&&window.sessionStorage.setItem(e,JSON.stringify(t)),n?t??JSON.parse(l):JSON.parse(l)??t}catch{return t}});return[r,l=>{try{i(l),window.sessionStorage.setItem(e,JSON.stringify(l))}catch{}}]}const Zme="/assets/bold-7709f380.svg",e0e="/assets/italic-ffe1bcb0.svg",t0e="/assets/underline-a0cdc175.svg",n0e="/assets/letter-spacing-02-8735fcea.svg",r0e="/assets/line-height-c85f50b1.svg",i0e="/assets/align-center-dca53ef9.svg",s0e="/assets/align-left-50afe44f.svg",o0e="/assets/align-right-abbb17a8.svg",a0e="/assets/align-justify-82a66305.svg",l0e="/assets/lock-unlocked-01-402cc803.svg",c0e="/assets/lock-01-e7471bc7.svg",u0e="/assets/lock-unlocked-03-242a103f.svg",h0e="/assets/lock-03-78ea0961.svg",f0e="/assets/align-horizontal-centre-01-cae785d4.svg",d0e="/assets/align-left-01-a3c3a7e8.svg",p0e="/assets/align-right-01-cd2b87dc.svg",g0e="/assets/align-top-arrow-01-11f96b83.svg",m0e="/assets/align-vertical-center-01-dec0653f.svg",v0e="/assets/distribute-spacing-vertical-ef1feabc.svg",y0e="/assets/distribute-spacing-horizontal-b3e906c1.svg",_0e="/assets/dropper-56b31a64.svg",b0e="/assets/eye-3c0592bc.svg",qN="/assets/eye-off-09b1e0b6.svg",S0e="/assets/repeat-02-bca43a80.svg",x0e="/assets/image-03-7631eb1a.svg",w0e="/assets/shuffle-01-2fdd9b8d.svg",C0e="/assets/eraser-c08ff608.svg",T0e="/assets/hand-4969e15a.svg",E0e="/assets/frame-f86ad12b.svg",P0e="/assets/zoom-in-1c21cf1d.svg",I0e="/assets/zoom-out-89eb94a7.svg",O0e="/assets/flip-backward-c1d5cc35.svg",k0e="/assets/share-05-60f4a738.svg",A0e="/assets/brush-xl-166bde31.svg",R0e="/assets/brush-s-3c773717.svg",D0e="/assets/arrow-narrow-left-e4d97cb1.svg",M0e="/assets/arrow-narrow-right-27e83a30.svg",L0e="/assets/upload-failed-61332ccc.svg",F0e="/assets/crop-01-6ed4dc2f.svg",N0e="/assets/crop-custom-6482ef77.svg",j0e="/assets/crop-original-7bd6026a.svg",B0e="/assets/crop-square-f537a0e5.svg",U0e="/assets/crop-circle-757fcf42.svg",$0e="/assets/crop-portrait-28dbecab.svg",G0e="/assets/crop-landscape-43823520.svg",V0e="/assets/crop-wide-88b9cbb9.svg",H0e="/assets/opacity-transparent-11b44c8c.svg",z0e="/assets/ungroup-2686b20e.svg",W0e="/assets/dots-grid-0d3a8bf3.svg",Y0e="/assets/sun-e4a463e7.svg",X0e="/assets/moon-01-32cc997d.svg",q0e="/assets/type-01-3f90c4b2.svg",K0e="/assets/type-capitals-9ef0df6d.svg",Q0e="/assets/transformation-circle-c0c7c730.svg",J0e="/assets/transformation-flag-279a7663.svg",Z0e="/assets/transformation-arc-lower-697129de.svg",eve="/assets/transformation-arc-upper-df5ab279.svg",tve="/assets/transformation-arc-c91b095c.svg",nve="/assets/transformation-arch-4ae78274.svg",rve="/assets/transformation-bulge-88b8bd9c.svg",ive="/assets/transformation-fish-7350de09.svg",sve="/assets/transformation-inflate-12891292.svg",ove="/assets/transformation-rise-85bc32c7.svg",ave="/assets/transformation-squeeze-730f4677.svg",lve="/assets/transformation-wave-lower-be42ca0c.svg",cve="/assets/transformation-wave-upper-3a009b6b.svg",uve="/assets/reflect-horizontal-b14ea731.svg",hve="/assets/reflect-vertical-c30482c9.svg",fve="/assets/copy-07-3a49cdb5.svg",dve="/assets/ratio-square-solid-b5c71202.svg",pve="/assets/ratio-portrait-4x3-solid-c8502722.svg",gve="/assets/ratio-portrait-16x9-solid-fe0e0e9f.svg",mve="/assets/ratio-landscape-4x3-solid-ca39ab28.svg",vve="/assets/ratio-landscape-16x9-solid-370e16a6.svg";function Te({src:e,...t}){return E.jsx("svg",{viewBox:"0 0 24 24",width:24,height:24,...t,className:Fe("h-auto w-full",t.className),children:E.jsx("use",{xlinkHref:e+"#img",href:e+"#img"})})}function JRe(e){return E.jsx(Te,{src:Zme,...e})}function ZRe(e){return E.jsx(Te,{src:e0e,...e})}function eDe(e){return E.jsx(Te,{src:t0e,...e})}function tDe(e){return E.jsx(Te,{src:n0e,...e})}function nDe(e){return E.jsx(Te,{src:r0e,...e})}function rDe(e){return E.jsx(Te,{src:i0e,...e})}function iDe(e){return E.jsx(Te,{src:s0e,...e})}function sDe(e){return E.jsx(Te,{src:o0e,...e})}function oDe(e){return E.jsx(Te,{src:a0e,...e})}function aDe(e){return E.jsx(Te,{src:wN,...e})}function lDe(e){return E.jsx(Te,{src:l0e,...e})}function cDe(e){return E.jsx(Te,{src:c0e,...e})}function uDe(e){return E.jsx(Te,{src:u0e,...e,viewBox:"0 0 16 16",width:"16",height:"16"})}function hDe(e){return E.jsx(Te,{src:h0e,...e,viewBox:"0 0 16 16",width:"16",height:"16"})}function KN(e){return E.jsx(Te,{src:EN,...e})}function fDe(e){return E.jsx(Te,{src:AN,...e})}function dDe(e){return E.jsx(Te,{src:f0e,...e})}function pDe(e){return E.jsx(Te,{src:d0e,...e})}function gDe(e){return E.jsx(Te,{src:p0e,...e})}function mDe(e){return E.jsx(Te,{src:g0e,...e})}function vDe(e){return E.jsx(Te,{src:m0e,...e})}function yDe(e){return E.jsx(Te,{src:v0e,...e})}function _De(e){return E.jsx(Te,{src:y0e,...e})}function bDe(e){return E.jsx(Te,{src:_0e,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function SDe(e){return E.jsx(Te,{src:kN,...e})}function xDe(e){return E.jsx(Te,{src:b0e,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}function yve(e){return E.jsx(Te,{src:qN,...e,width:"16",height:"16",viewBox:"0 0 16 16"})}yve.src=qN;function NE(e){return E.jsx(Te,{src:S0e,...e})}function wDe(e){return E.jsx(Te,{src:x0e,...e})}function _ve(e){return E.jsx(Te,{src:w0e,...e})}function bve(e){return E.jsx(Te,{src:C0e,...e})}function Sve(e){return E.jsx(Te,{src:T0e,...e})}function xve(e){return E.jsx(Te,{src:E0e,...e})}function wve(e){return E.jsx(Te,{src:P0e,...e})}function Cve(e){return E.jsx(Te,{src:I0e,...e})}function jE(e){return E.jsx(Te,{src:O0e,...e})}function Tve(e){return E.jsx(Te,{src:k0e,...e})}function QN(e){return E.jsx(Te,{src:ON,...e})}function Eve(e){return E.jsx(Te,{src:A0e,...e})}function JN(e){return E.jsx(Te,{src:R0e,...e})}function Pve(e){return E.jsx(Te,{src:D0e,...e})}function Ive(e){return E.jsx(Te,{src:M0e,...e})}function CDe(e){return E.jsx(Te,{src:L0e,...e})}function TDe(e){return E.jsx(Te,{src:F0e,...e})}function EDe(e){return E.jsx(Te,{src:N0e,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function PDe(e){return E.jsx(Te,{src:j0e,...e})}function IDe(e){return E.jsx(Te,{src:B0e,...e})}function ODe(e){return E.jsx(Te,{src:U0e,...e})}function kDe(e){return E.jsx(Te,{src:$0e,...e})}function ADe(e){return E.jsx(Te,{src:G0e,...e})}function RDe(e){return E.jsx(Te,{src:V0e,...e})}function DDe(e){return E.jsx(Te,{src:H0e,...e})}function MDe(e){return E.jsx(Te,{src:Cge,...e})}function LDe(e){return E.jsx(Te,{src:z0e,...e})}function FDe(e){return E.jsx(Te,{src:W0e,...e})}function NDe(e){return E.jsx(Te,{src:Y0e,...e})}function jDe(e){return E.jsx(Te,{src:X0e,...e})}function BDe(e){return E.jsx(Te,{src:q0e,...e})}function UDe(e){return E.jsx(Te,{src:K0e,...e})}function $De(e){return E.jsx(Te,{src:Q0e,...e,width:"40",height:"41",viewBox:"0 0 40 41"})}function GDe(e){return E.jsx(Te,{src:J0e,...e,width:"40",height:"21",viewBox:"0 0 40 21"})}function VDe(e){return E.jsx(Te,{src:Z0e,...e,width:"40",height:"23",viewBox:"0 0 40 23"})}function HDe(e){return E.jsx(Te,{src:eve,...e,width:"40",height:"25",viewBox:"0 0 40 25"})}function zDe(e){return E.jsx(Te,{src:tve,...e,width:"40",height:"21",viewBox:"0 0 40 21"})}function WDe(e){return E.jsx(Te,{src:nve,...e,width:"40",height:"15",viewBox:"0 0 40 15"})}function YDe(e){return E.jsx(Te,{src:rve,...e,width:"40",height:"19",viewBox:"0 0 40 19"})}function XDe(e){return E.jsx(Te,{src:ive,...e,width:"40",height:"18",viewBox:"0 0 40 18"})}function qDe(e){return E.jsx(Te,{src:sve,...e,width:"40",height:"8",viewBox:"0 0 40 8"})}function KDe(e){return E.jsx(Te,{src:ove,...e,width:"34",height:"25",viewBox:"0 0 34 25"})}function QDe(e){return E.jsx(Te,{src:ave,...e,width:"40",height:"9",viewBox:"0 0 40 9"})}function JDe(e){return E.jsx(Te,{src:lve,...e,width:"40",height:"19",viewBox:"0 0 40 19"})}function ZDe(e){return E.jsx(Te,{src:cve,...e,width:"40",height:"20",viewBox:"0 0 40 20"})}function e6e(e){return E.jsx(Te,{src:uve,...e})}function t6e(e){return E.jsx(Te,{src:hve,...e})}function n6e(e){return E.jsx(Te,{src:fve,...e})}function Ove(e){return E.jsx(Te,{src:dve,...e,width:"20",height:"20",viewBox:"0 0 20 20"})}function kve(e){return E.jsx(Te,{src:pve,...e})}function Ave(e){return E.jsx(Te,{src:gve,...e})}function Rve(e){return E.jsx(Te,{src:mve,...e})}function Dve(e){return E.jsx(Te,{src:vve,...e})}const Mve="/assets/spark-element-generation-4539ec66.svg",Lve="/assets/spark-image-generation-b233f148.svg",Fve="/assets/spark-imagemix-61fce2bd.svg",Nve="/assets/spark-outpainting-c68958e1.svg",jve="/assets/spark-inpainting-31b0ff0d.svg";function Lp({src:e,...t}){return E.jsx("svg",{viewBox:"0 0 16 16",width:16,height:16,...t,children:E.jsx("use",{xlinkHref:e+"#img",href:e+"#img"})})}function Bve(e){return E.jsx(Lp,{src:Mve,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function Uve(e){return E.jsx(Lp,{src:Lve,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function Av(e){return E.jsx(Lp,{src:Fve,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function p2(e){return E.jsx(Lp,{src:Nve,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}function g2(e){return E.jsx(Lp,{src:jve,...e,width:"24",height:"24",viewBox:"0 0 24 24"})}const ZN={ease:$h(0,.1,.1,1)};function ej(e){return E.jsx("img",{src:Ap.src,width:"16",height:"16",...e,className:Fe("h-[23px] w-[23px] animate-spin [filter:invert(1)]",e.className)})}const m2="dismissableLayer.update",$ve="dismissableLayer.pointerDownOutside",Gve="dismissableLayer.focusOutside";let W3;const Vve=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Hve=T.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:a,onDismiss:o,...c}=e,h=T.useContext(Vve),[u,f]=T.useState(null),d=(n=u==null?void 0:u.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=T.useState({}),m=It(t,w=>f(w)),g=Array.from(h.layers),[v]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),_=g.indexOf(v),y=u?g.indexOf(u):-1,b=h.layersWithOutsidePointerEventsDisabled.size>0,S=y>=_,x=zve(w=>{const k=w.target,I=[...h.branches].some(R=>R.contains(k));!S||I||(s==null||s(w),a==null||a(w),w.defaultPrevented||o==null||o())},d),C=Wve(w=>{const k=w.target;[...h.branches].some(R=>R.contains(k))||(l==null||l(w),a==null||a(w),w.defaultPrevented||o==null||o())},d);return T7(w=>{y===h.layers.size-1&&(i==null||i(w),!w.defaultPrevented&&o&&(w.preventDefault(),o()))},d),T.useEffect(()=>{if(u)return r&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(W3=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(u)),h.layers.add(u),Y3(),()=>{r&&h.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=W3)}},[u,d,r,h]),T.useEffect(()=>()=>{u&&(h.layers.delete(u),h.layersWithOutsidePointerEventsDisabled.delete(u),Y3())},[u,h]),T.useEffect(()=>{const w=()=>p({});return document.addEventListener(m2,w),()=>document.removeEventListener(m2,w)},[]),T.createElement(Nt.div,Be({},c,{ref:m,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:ht(e.onFocusCapture,C.onFocusCapture),onBlurCapture:ht(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ht(e.onPointerDownCapture,x.onPointerDownCapture)}))});function zve(e,t=globalThis==null?void 0:globalThis.document){const n=Oi(e),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){tj($ve,n,o,{discrete:!0})};const o={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Wve(e,t=globalThis==null?void 0:globalThis.document){const n=Oi(e),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&tj(Gve,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Y3(){const e=new CustomEvent(m2);document.dispatchEvent(e)}function tj(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?C7(i,s):i.dispatchEvent(s)}function Vh(e){return e.split("-")[1]}function BE(e){return e==="y"?"height":"width"}function io(e){return e.split("-")[0]}function gc(e){return["top","bottom"].includes(io(e))?"x":"y"}function X3(e,t,n){let{reference:r,floating:i}=e;const s=r.x+r.width/2-i.width/2,l=r.y+r.height/2-i.height/2,a=gc(t),o=BE(a),c=r[o]/2-i[o]/2,h=a==="x";let u;switch(io(t)){case"top":u={x:s,y:r.y-i.height};break;case"bottom":u={x:s,y:r.y+r.height};break;case"right":u={x:r.x+r.width,y:l};break;case"left":u={x:r.x-i.width,y:l};break;default:u={x:r.x,y:r.y}}switch(Vh(t)){case"start":u[a]-=c*(n&&h?-1:1);break;case"end":u[a]+=c*(n&&h?-1:1)}return u}const Yve=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:l}=n,a=s.filter(Boolean),o=await(l.isRTL==null?void 0:l.isRTL(t));let c=await l.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:u}=X3(c,r,o),f=r,d={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:_,y,data:b,reset:S}=await v({x:h,y:u,initialPlacement:r,placement:f,strategy:i,middlewareData:d,rects:c,platform:l,elements:{reference:e,floating:t}});h=_??h,u=y??u,d={...d,[g]:{...d[g],...b}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:h,y:u}=X3(c,f,o)),m=-1)}return{x:h,y:u,placement:f,strategy:i,middlewareData:d}};function bo(e,t){return typeof e=="function"?e(t):e}function nj(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Rv(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function Zd(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:l,elements:a,strategy:o}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:u="floating",altBoundary:f=!1,padding:d=0}=bo(t,e),p=nj(d),m=a[f?u==="floating"?"reference":"floating":u],g=Rv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:o})),v=u==="floating"?{...l.floating,x:r,y:i}:l.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),y=await(s.isElement==null?void 0:s.isElement(_))&&await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1},b=Rv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:_,strategy:o}):v);return{top:(g.top-b.top+p.top)/y.y,bottom:(b.bottom-g.bottom+p.bottom)/y.y,left:(g.left-b.left+p.left)/y.x,right:(b.right-g.right+p.right)/y.x}}const ep=Math.min,bl=Math.max;function v2(e,t,n){return bl(e,ep(t,n))}const q3=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:l,elements:a}=t,{element:o,padding:c=0}=bo(e,t)||{};if(o==null)return{};const h=nj(c),u={x:n,y:r},f=gc(i),d=BE(f),p=await l.getDimensions(o),m=f==="y",g=m?"top":"left",v=m?"bottom":"right",_=m?"clientHeight":"clientWidth",y=s.reference[d]+s.reference[f]-u[f]-s.floating[d],b=u[f]-s.reference[f],S=await(l.getOffsetParent==null?void 0:l.getOffsetParent(o));let x=S?S[_]:0;x&&await(l.isElement==null?void 0:l.isElement(S))||(x=a.floating[_]||s.floating[d]);const C=y/2-b/2,w=x/2-p[d]/2-1,k=ep(h[g],w),I=ep(h[v],w),R=k,j=x-p[d]-I,G=x/2-p[d]/2+C,B=v2(R,G,j),$=Vh(i)!=null&&G!=B&&s.reference[d]/2-(G<R?k:I)-p[d]/2<0?G<R?R-G:j-G:0;return{[f]:u[f]-$,data:{[f]:B,centerOffset:G-B+$}}}}),rj=["top","right","bottom","left"];rj.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const Xve={left:"right",right:"left",bottom:"top",top:"bottom"};function Dv(e){return e.replace(/left|right|bottom|top/g,t=>Xve[t])}function qve(e,t,n){n===void 0&&(n=!1);const r=Vh(e),i=gc(e),s=BE(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(l=Dv(l)),{main:l,cross:Dv(l)}}const Kve={start:"end",end:"start"};function bS(e){return e.replace(/start|end/g,t=>Kve[t])}const ij=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:l,platform:a,elements:o}=t,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:u,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:p=!0,...m}=bo(e,t),g=io(r),v=io(l)===l,_=await(a.isRTL==null?void 0:a.isRTL(o.floating)),y=u||(v||!p?[Dv(l)]:function(R){const j=Dv(R);return[bS(R),j,bS(j)]}(l));u||d==="none"||y.push(...function(R,j,G,B){const $=Vh(R);let V=function(W,M,P){const O=["left","right"],A=["right","left"],D=["top","bottom"],X=["bottom","top"];switch(W){case"top":case"bottom":return P?M?A:O:M?O:A;case"left":case"right":return M?D:X;default:return[]}}(io(R),G==="start",B);return $&&(V=V.map(W=>W+"-"+$),j&&(V=V.concat(V.map(bS)))),V}(l,p,d,_));const b=[l,...y],S=await Zd(t,m),x=[];let C=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&x.push(S[g]),h){const{main:R,cross:j}=qve(r,s,_);x.push(S[R],S[j])}if(C=[...C,{placement:r,overflows:x}],!x.every(R=>R<=0)){var w,k;const R=(((w=i.flip)==null?void 0:w.index)||0)+1,j=b[R];if(j)return{data:{index:R,overflows:C},reset:{placement:j}};let G=(k=C.filter(B=>B.overflows[0]<=0).sort((B,$)=>B.overflows[1]-$.overflows[1])[0])==null?void 0:k.placement;if(!G)switch(f){case"bestFit":{var I;const B=(I=C.map($=>[$.placement,$.overflows.filter(V=>V>0).reduce((V,W)=>V+W,0)]).sort(($,V)=>$[1]-V[1])[0])==null?void 0:I[0];B&&(G=B);break}case"initialPlacement":G=l}if(r!==G)return{reset:{placement:G}}}return{}}}};function K3(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Q3(e){return rj.some(t=>e[t]>=0)}const sj=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=bo(e,t);switch(r){case"referenceHidden":{const s=K3(await Zd(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Q3(s)}}}case"escaped":{const s=K3(await Zd(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:s,escaped:Q3(s)}}}default:return{}}}}},oj=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(s,l){const{placement:a,platform:o,elements:c}=s,h=await(o.isRTL==null?void 0:o.isRTL(c.floating)),u=io(a),f=Vh(a),d=gc(a)==="x",p=["left","top"].includes(u)?-1:1,m=h&&d?-1:1,g=bo(l,s);let{mainAxis:v,crossAxis:_,alignmentAxis:y}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return f&&typeof y=="number"&&(_=f==="end"?-1*y:y),d?{x:_*m,y:v*p}:{x:v*p,y:_*m}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function aj(e){return e==="x"?"y":"x"}const lj=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:l=!1,limiter:a={fn:g=>{let{x:v,y:_}=g;return{x:v,y:_}}},...o}=bo(e,t),c={x:n,y:r},h=await Zd(t,o),u=gc(io(i)),f=aj(u);let d=c[u],p=c[f];if(s){const g=u==="y"?"bottom":"right";d=v2(d+h[u==="y"?"top":"left"],d,d-h[g])}if(l){const g=f==="y"?"bottom":"right";p=v2(p+h[f==="y"?"top":"left"],p,p-h[g])}const m=a.fn({...t,[u]:d,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},cj=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:l}=t,{offset:a=0,mainAxis:o=!0,crossAxis:c=!0}=bo(e,t),h={x:n,y:r},u=gc(i),f=aj(u);let d=h[u],p=h[f];const m=bo(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(o){const y=u==="y"?"height":"width",b=s.reference[u]-s.floating[y]+g.mainAxis,S=s.reference[u]+s.reference[y]-g.mainAxis;d<b?d=b:d>S&&(d=S)}if(c){var v,_;const y=u==="y"?"width":"height",b=["top","left"].includes(io(i)),S=s.reference[f]-s.floating[y]+(b&&((v=l.offset)==null?void 0:v[f])||0)+(b?0:g.crossAxis),x=s.reference[f]+s.reference[y]+(b?0:((_=l.offset)==null?void 0:_[f])||0)-(b?g.crossAxis:0);p<S?p=S:p>x&&(p=x)}return{[u]:d,[f]:p}}}},uj=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:l=()=>{},...a}=bo(e,t),o=await Zd(t,a),c=io(n),h=Vh(n),u=gc(n)==="x",{width:f,height:d}=r.floating;let p,m;c==="top"||c==="bottom"?(p=c,m=h===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,p=h==="end"?"top":"bottom");const g=d-o[p],v=f-o[m],_=!t.middlewareData.shift;let y=g,b=v;if(u){const x=f-o.left-o.right;b=h||_?ep(v,x):x}else{const x=d-o.top-o.bottom;y=h||_?ep(g,x):x}if(_&&!h){const x=bl(o.left,0),C=bl(o.right,0),w=bl(o.top,0),k=bl(o.bottom,0);u?b=f-2*(x!==0||C!==0?x+C:bl(o.left,o.right)):y=d-2*(w!==0||k!==0?w+k:bl(o.top,o.bottom))}await l({...t,availableWidth:b,availableHeight:y});const S=await i.getDimensions(s.floating);return f!==S.width||d!==S.height?{reset:{rects:!0}}:{}}}};function Ei(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Hi(e){return Ei(e).getComputedStyle(e)}function hj(e){return e instanceof Ei(e).Node}function La(e){return hj(e)?(e.nodeName||"").toLowerCase():"#document"}function Zi(e){return e instanceof Ei(e).HTMLElement}function so(e){return e instanceof Ei(e).Element}function J3(e){return typeof ShadowRoot<"u"&&(e instanceof Ei(e).ShadowRoot||e instanceof ShadowRoot)}function tp(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Hi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Qve(e){return["table","td","th"].includes(La(e))}function y2(e){const t=UE(),n=Hi(e);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!t&&!!n.backdropFilter&&n.backdropFilter!=="none"||!t&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function UE(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function E1(e){return["html","body","#document"].includes(La(e))}const _2=Math.min,Nu=Math.max,Mv=Math.round,vm=Math.floor,ql=e=>({x:e,y:e});function fj(e){const t=Hi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Zi(e),s=i?e.offsetWidth:n,l=i?e.offsetHeight:r,a=Mv(n)!==s||Mv(r)!==l;return a&&(n=s,r=l),{width:n,height:r,$:a}}function $E(e){return so(e)?e:e.contextElement}function ju(e){const t=$E(e);if(!Zi(t))return ql(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=fj(t);let l=(s?Mv(n.width):n.width)/r,a=(s?Mv(n.height):n.height)/i;return l&&Number.isFinite(l)||(l=1),a&&Number.isFinite(a)||(a=1),{x:l,y:a}}const Z3=ql(0);function dj(e,t,n){var r,i;if(t===void 0&&(t=!0),!UE())return Z3;const s=e?Ei(e):window;return!n||t&&n!==s?Z3:{x:((r=s.visualViewport)==null?void 0:r.offsetLeft)||0,y:((i=s.visualViewport)==null?void 0:i.offsetTop)||0}}function Kl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=$E(e);let l=ql(1);t&&(r?so(r)&&(l=ju(r)):l=ju(e));const a=dj(s,n,r);let o=(i.left+a.x)/l.x,c=(i.top+a.y)/l.y,h=i.width/l.x,u=i.height/l.y;if(s){const f=Ei(s),d=r&&so(r)?Ei(r):r;let p=f.frameElement;for(;p&&r&&d!==f;){const m=ju(p),g=p.getBoundingClientRect(),v=getComputedStyle(p),_=g.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,y=g.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;o*=m.x,c*=m.y,h*=m.x,u*=m.y,o+=_,c+=y,p=Ei(p).frameElement}}return Rv({width:h,height:u,x:o,y:c})}function oo(e){return((hj(e)?e.ownerDocument:e.document)||window.document).documentElement}function P1(e){return so(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function pj(e){return Kl(oo(e)).left+P1(e).scrollLeft}function fh(e){if(La(e)==="html")return e;const t=e.assignedSlot||e.parentNode||J3(e)&&e.host||oo(e);return J3(t)?t.host:t}function gj(e){const t=fh(e);return E1(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zi(t)&&tp(t)?t:gj(t)}function Lv(e,t){var n;t===void 0&&(t=[]);const r=gj(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=Ei(r);return i?t.concat(s,s.visualViewport||[],tp(r)?r:[]):t.concat(r,Lv(r))}function eA(e,t,n){let r;if(t==="viewport")r=function(i,s){const l=Ei(i),a=oo(i),o=l.visualViewport;let c=a.clientWidth,h=a.clientHeight,u=0,f=0;if(o){c=o.width,h=o.height;const d=UE();(!d||d&&s==="fixed")&&(u=o.offsetLeft,f=o.offsetTop)}return{width:c,height:h,x:u,y:f}}(e,n);else if(t==="document")r=function(i){const s=oo(i),l=P1(i),a=i.ownerDocument.body,o=Nu(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),c=Nu(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let h=-l.scrollLeft+pj(i);const u=-l.scrollTop;return Hi(a).direction==="rtl"&&(h+=Nu(s.clientWidth,a.clientWidth)-o),{width:o,height:c,x:h,y:u}}(oo(e));else if(so(t))r=function(i,s){const l=Kl(i,!0,s==="fixed"),a=l.top+i.clientTop,o=l.left+i.clientLeft,c=Zi(i)?ju(i):ql(1);return{width:i.clientWidth*c.x,height:i.clientHeight*c.y,x:o*c.x,y:a*c.y}}(t,n);else{const i=dj(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Rv(r)}function mj(e,t){const n=fh(e);return!(n===t||!so(n)||E1(n))&&(Hi(n).position==="fixed"||mj(n,t))}function tA(e,t){return Zi(e)&&Hi(e).position!=="fixed"?t?t(e):e.offsetParent:null}function nA(e,t){const n=Ei(e);if(!Zi(e))return n;let r=tA(e,t);for(;r&&Qve(r)&&Hi(r).position==="static";)r=tA(r,t);return r&&(La(r)==="html"||La(r)==="body"&&Hi(r).position==="static"&&!y2(r))?n:r||function(i){let s=fh(i);for(;Zi(s)&&!E1(s);){if(y2(s))return s;s=fh(s)}return null}(e)||n}function Jve(e,t,n){const r=Zi(t),i=oo(t),s=n==="fixed",l=Kl(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const o=ql(0);if(r||!r&&!s)if((La(t)!=="body"||tp(i))&&(a=P1(t)),Zi(t)){const c=Kl(t,!0,s,t);o.x=c.x+t.clientLeft,o.y=c.y+t.clientTop}else i&&(o.x=pj(i));return{x:l.left+a.scrollLeft-o.x,y:l.top+a.scrollTop-o.y,width:l.width,height:l.height}}const Zve={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=n==="clippingAncestors"?function(c,h){const u=h.get(c);if(u)return u;let f=Lv(c).filter(g=>so(g)&&La(g)!=="body"),d=null;const p=Hi(c).position==="fixed";let m=p?fh(c):c;for(;so(m)&&!E1(m);){const g=Hi(m),v=y2(m);v||g.position!=="fixed"||(d=null),(p?!v&&!d:!v&&g.position==="static"&&d&&["absolute","fixed"].includes(d.position)||tp(m)&&!v&&mj(c,m))?f=f.filter(_=>_!==m):d=g,m=fh(m)}return h.set(c,f),f}(t,this._c):[].concat(n),l=[...s,r],a=l[0],o=l.reduce((c,h)=>{const u=eA(t,h,i);return c.top=Nu(u.top,c.top),c.right=_2(u.right,c.right),c.bottom=_2(u.bottom,c.bottom),c.left=Nu(u.left,c.left),c},eA(t,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Zi(n),s=oo(n);if(n===s)return t;let l={scrollLeft:0,scrollTop:0},a=ql(1);const o=ql(0);if((i||!i&&r!=="fixed")&&((La(n)!=="body"||tp(s))&&(l=P1(n)),Zi(n))){const c=Kl(n);a=ju(n),o.x=c.x+n.clientLeft,o.y=c.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-l.scrollLeft*a.x+o.x,y:t.y*a.y-l.scrollTop*a.y+o.y}},isElement:so,getDimensions:function(e){return fj(e)},getOffsetParent:nA,getDocumentElement:oo,getScale:ju,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||nA,s=this.getDimensions;return{reference:Jve(t,await i(n),r),floating:{x:0,y:0,...await s(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Hi(e).direction==="rtl"};function vj(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:o=!1}=r,c=$E(e),h=i||s?[...c?Lv(c):[],...Lv(t)]:[];h.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const u=c&&a?function(g,v){let _,y=null;const b=oo(g);function S(){clearTimeout(_),y&&y.disconnect(),y=null}return function x(C,w){C===void 0&&(C=!1),w===void 0&&(w=1),S();const{left:k,top:I,width:R,height:j}=g.getBoundingClientRect();if(C||v(),!R||!j)return;const G={rootMargin:-vm(I)+"px "+-vm(b.clientWidth-(k+R))+"px "+-vm(b.clientHeight-(I+j))+"px "+-vm(k)+"px",threshold:Nu(0,_2(1,w))||1};let B=!0;function $(V){const W=V[0].intersectionRatio;if(W!==w){if(!B)return x();W?x(!1,W):_=setTimeout(()=>{x(!1,1e-7)},100)}B=!1}try{y=new IntersectionObserver($,{...G,root:b.ownerDocument})}catch{y=new IntersectionObserver($,G)}y.observe(g)}(!0),S}(c,n):null;let f,d=-1,p=null;l&&(p=new ResizeObserver(g=>{let[v]=g;v&&v.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{p&&p.observe(t)})),n()}),c&&!o&&p.observe(c),p.observe(t));let m=o?Kl(e):null;return o&&function g(){const v=Kl(e);!m||v.x===m.x&&v.y===m.y&&v.width===m.width&&v.height===m.height||n(),m=v,f=requestAnimationFrame(g)}(),n(),()=>{h.forEach(g=>{i&&g.removeEventListener("scroll",n),s&&g.removeEventListener("resize",n)}),u&&u(),p&&p.disconnect(),p=null,o&&cancelAnimationFrame(f)}}const eye=(e,t,n)=>{const r=new Map,i={platform:Zve,...n},s={...i.platform,_c:r};return Yve(e,t,{...i,platform:s})},yj=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?q3({element:r.current,padding:i}).fn(n):{}:r?q3({element:r,padding:i}).fn(n):{}}}};var m0=typeof document<"u"?T.useLayoutEffect:T.useEffect;function Fv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Fv(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!Fv(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function _j(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rA(e,t){const n=_j(e);return Math.round(t*n)/n}function iA(e){const t=T.useRef(e);return m0(()=>{t.current=e}),t}function bj(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:l}={},transform:a=!0,whileElementsMounted:o,open:c}=e,[h,u]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,d]=T.useState(r);Fv(f,r)||d(r);const[p,m]=T.useState(null),[g,v]=T.useState(null),_=T.useCallback(V=>{V!=x.current&&(x.current=V,m(V))},[m]),y=T.useCallback(V=>{V!==C.current&&(C.current=V,v(V))},[v]),b=s||p,S=l||g,x=T.useRef(null),C=T.useRef(null),w=T.useRef(h),k=iA(o),I=iA(i),R=T.useCallback(()=>{if(!x.current||!C.current)return;const V={placement:t,strategy:n,middleware:f};I.current&&(V.platform=I.current),eye(x.current,C.current,V).then(W=>{const M={...W,isPositioned:!0};j.current&&!Fv(w.current,M)&&(w.current=M,ac.flushSync(()=>{u(M)}))})},[f,t,n,I]);m0(()=>{c===!1&&w.current.isPositioned&&(w.current.isPositioned=!1,u(V=>({...V,isPositioned:!1})))},[c]);const j=T.useRef(!1);m0(()=>(j.current=!0,()=>{j.current=!1}),[]),m0(()=>{if(b&&(x.current=b),S&&(C.current=S),b&&S){if(k.current)return k.current(b,S,R);R()}},[b,S,R,k]);const G=T.useMemo(()=>({reference:x,floating:C,setReference:_,setFloating:y}),[_,y]),B=T.useMemo(()=>({reference:b,floating:S}),[b,S]),$=T.useMemo(()=>{const V={position:n,left:0,top:0};if(!B.floating)return V;const W=rA(B.floating,h.x),M=rA(B.floating,h.y);return a?{...V,transform:"translate("+W+"px, "+M+"px)",..._j(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:M}},[n,a,B.floating,h.x,h.y]);return T.useMemo(()=>({...h,update:R,refs:G,elements:B,floatingStyles:$}),[h,R,G,B,$])}const tye=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return T.createElement(Nt.svg,Be({},s,{ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:T.createElement("polygon",{points:"0,0 30,0 15,10"}))}),Sj=tye;function GE(e){const[t,n]=T.useState(void 0);return fr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let l,a;if("borderBoxSize"in s){const o=s.borderBoxSize,c=Array.isArray(o)?o[0]:o;l=c.inlineSize,a=c.blockSize}else l=e.offsetWidth,a=e.offsetHeight;n({width:l,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}const xj="Popper",[wj,Cj]=fc(xj),[nye,Tj]=wj(xj),rye=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return T.createElement(nye,{scope:t,anchor:r,onAnchorChange:i},n)},iye="PopperAnchor",sye=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=Tj(iye,n),l=T.useRef(null),a=It(t,l);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:T.createElement(Nt.div,Be({},i,{ref:a}))}),Ej="PopperContent",[oye,aye]=wj(Ej),lye=T.forwardRef((e,t)=>{var n,r,i,s,l,a,o,c;const{__scopePopper:h,side:u="bottom",sideOffset:f=0,align:d="center",alignOffset:p=0,arrowPadding:m=0,avoidCollisions:g=!0,collisionBoundary:v=[],collisionPadding:_=0,sticky:y="partial",hideWhenDetached:b=!1,updatePositionStrategy:S="optimized",onPlaced:x,...C}=e,w=Tj(Ej,h),[k,I]=T.useState(null),R=It(t,ne=>I(ne)),[j,G]=T.useState(null),B=GE(j),$=(n=B==null?void 0:B.width)!==null&&n!==void 0?n:0,V=(r=B==null?void 0:B.height)!==null&&r!==void 0?r:0,W=u+(d!=="center"?"-"+d:""),M=typeof _=="number"?_:{top:0,right:0,bottom:0,left:0,..._},P=Array.isArray(v)?v:[v],O=P.length>0,A={padding:M,boundary:P.filter(fye),altBoundary:O},{refs:D,floatingStyles:X,placement:N,isPositioned:F,middlewareData:z}=bj({strategy:"fixed",placement:W,whileElementsMounted:(...ne)=>vj(...ne,{animationFrame:S==="always"}),elements:{reference:w.anchor},middleware:[oj({mainAxis:f+V,alignmentAxis:p}),g&&lj({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?cj():void 0,...A}),g&&ij({...A}),uj({...A,apply:({elements:ne,rects:ie,availableWidth:re,availableHeight:he})=>{const{width:fe,height:be}=ie.reference,pe=ne.floating.style;pe.setProperty("--radix-popper-available-width",`${re}px`),pe.setProperty("--radix-popper-available-height",`${he}px`),pe.setProperty("--radix-popper-anchor-width",`${fe}px`),pe.setProperty("--radix-popper-anchor-height",`${be}px`)}}),j&&yj({element:j,padding:m}),dye({arrowWidth:$,arrowHeight:V}),b&&sj({strategy:"referenceHidden",...A})]}),[L,H]=Pj(N),K=Oi(x);fr(()=>{F&&(K==null||K())},[F,K]);const Z=(i=z.arrow)===null||i===void 0?void 0:i.x,ee=(s=z.arrow)===null||s===void 0?void 0:s.y,ae=((l=z.arrow)===null||l===void 0?void 0:l.centerOffset)!==0,[te,J]=T.useState();return fr(()=>{k&&J(window.getComputedStyle(k).zIndex)},[k]),T.createElement("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:F?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(a=z.transformOrigin)===null||a===void 0?void 0:a.x,(o=z.transformOrigin)===null||o===void 0?void 0:o.y].join(" ")},dir:e.dir},T.createElement(oye,{scope:h,placedSide:L,onArrowChange:G,arrowX:Z,arrowY:ee,shouldHideArrow:ae},T.createElement(Nt.div,Be({"data-side":L,"data-align":H},C,{ref:R,style:{...C.style,animation:F?void 0:"none",opacity:(c=z.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),cye="PopperArrow",uye={top:"bottom",right:"left",bottom:"top",left:"right"},hye=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=aye(cye,r),l=uye[s.placedSide];return T.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},T.createElement(Sj,Be({},i,{ref:n,style:{...i.style,display:"block"}})))});function fye(e){return e!==null}const dye=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,s,l;const{placement:a,rects:o,middlewareData:c}=t,u=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=u?0:e.arrowWidth,d=u?0:e.arrowHeight,[p,m]=Pj(a),g={start:"0%",center:"50%",end:"100%"}[m],v=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,_=((s=(l=c.arrow)===null||l===void 0?void 0:l.y)!==null&&s!==void 0?s:0)+d/2;let y="",b="";return p==="bottom"?(y=u?g:`${v}px`,b=`${-d}px`):p==="top"?(y=u?g:`${v}px`,b=`${o.floating.height+d}px`):p==="right"?(y=`${-d}px`,b=u?g:`${_}px`):p==="left"&&(y=`${o.floating.width+d}px`,b=u?g:`${_}px`),{data:{x:y,y:b}}}});function Pj(e){const[t,n="center"]=e.split("-");return[t,n]}const pye=rye,gye=sye,mye=lye,vye=hye,Ij=T.forwardRef((e,t)=>T.createElement(Nt.span,Be({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),yye=Ij,[I1,r6e]=fc("Tooltip",[Cj]),O1=Cj(),_ye="TooltipProvider",bye=700,b2="tooltip.open",[Sye,VE]=I1(_ye),xye=e=>{const{__scopeTooltip:t,delayDuration:n=bye,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=e,[l,a]=T.useState(!0),o=T.useRef(!1),c=T.useRef(0);return T.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),T.createElement(Sye,{scope:t,isOpenDelayed:l,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:T.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:T.useCallback(h=>{o.current=h},[]),disableHoverableContent:i},s)},HE="Tooltip",[wye,k1]=I1(HE),Cye=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:l,delayDuration:a}=e,o=VE(HE,e.__scopeTooltip),c=O1(t),[h,u]=T.useState(null),f=Fu(),d=T.useRef(0),p=l??o.disableHoverableContent,m=a??o.delayDuration,g=T.useRef(!1),[v=!1,_]=Wd({prop:r,defaultProp:i,onChange:C=>{C?(o.onOpen(),document.dispatchEvent(new CustomEvent(b2))):o.onClose(),s==null||s(C)}}),y=T.useMemo(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),b=T.useCallback(()=>{window.clearTimeout(d.current),g.current=!1,_(!0)},[_]),S=T.useCallback(()=>{window.clearTimeout(d.current),_(!1)},[_]),x=T.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{g.current=!0,_(!0)},m)},[m,_]);return T.useEffect(()=>()=>window.clearTimeout(d.current),[]),T.createElement(pye,c,T.createElement(wye,{scope:t,contentId:f,open:v,stateAttribute:y,trigger:h,onTriggerChange:u,onTriggerEnter:T.useCallback(()=>{o.isOpenDelayed?x():b()},[o.isOpenDelayed,x,b]),onTriggerLeave:T.useCallback(()=>{p?S():window.clearTimeout(d.current)},[S,p]),onOpen:b,onClose:S,disableHoverableContent:p},n))},sA="TooltipTrigger",Tye=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=k1(sA,n),s=VE(sA,n),l=O1(n),a=T.useRef(null),o=It(t,a,i.onTriggerChange),c=T.useRef(!1),h=T.useRef(!1),u=T.useCallback(()=>c.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),T.createElement(gye,Be({asChild:!0},l),T.createElement(Nt.button,Be({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:o,onPointerMove:ht(e.onPointerMove,f=>{f.pointerType!=="touch"&&!h.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:ht(e.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:ht(e.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:ht(e.onFocus,()=>{c.current||i.onOpen()}),onBlur:ht(e.onBlur,i.onClose),onClick:ht(e.onClick,i.onClose)})))}),Eye="TooltipPortal",[i6e,Pye]=I1(Eye,{forceMount:void 0}),np="TooltipContent",Iye=T.forwardRef((e,t)=>{const n=Pye(np,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=e,l=k1(np,e.__scopeTooltip);return T.createElement(Pp,{present:r||l.open},l.disableHoverableContent?T.createElement(Oj,Be({side:i},s,{ref:t})):T.createElement(Oye,Be({side:i},s,{ref:t})))}),Oye=T.forwardRef((e,t)=>{const n=k1(np,e.__scopeTooltip),r=VE(np,e.__scopeTooltip),i=T.useRef(null),s=It(t,i),[l,a]=T.useState(null),{trigger:o,onClose:c}=n,h=i.current,{onPointerInTransitChange:u}=r,f=T.useCallback(()=>{a(null),u(!1)},[u]),d=T.useCallback((p,m)=>{const g=p.currentTarget,v={x:p.clientX,y:p.clientY},_=Mye(v,g.getBoundingClientRect()),y=Lye(v,_),b=Fye(m.getBoundingClientRect()),S=jye([...y,...b]);a(S),u(!0)},[u]);return T.useEffect(()=>()=>f(),[f]),T.useEffect(()=>{if(o&&h){const p=g=>d(g,h),m=g=>d(g,o);return o.addEventListener("pointerleave",p),h.addEventListener("pointerleave",m),()=>{o.removeEventListener("pointerleave",p),h.removeEventListener("pointerleave",m)}}},[o,h,d,f]),T.useEffect(()=>{if(l){const p=m=>{const g=m.target,v={x:m.clientX,y:m.clientY},_=(o==null?void 0:o.contains(g))||(h==null?void 0:h.contains(g)),y=!Nye(v,l);_?f():y&&(f(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[o,h,l,c,f]),T.createElement(Oj,Be({},e,{ref:s}))}),[kye,Aye]=I1(HE,{isInside:!1}),Oj=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:l,...a}=e,o=k1(np,n),c=O1(n),{onClose:h}=o;return T.useEffect(()=>(document.addEventListener(b2,h),()=>document.removeEventListener(b2,h)),[h]),T.useEffect(()=>{if(o.trigger){const u=f=>{const d=f.target;d!=null&&d.contains(o.trigger)&&h()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[o.trigger,h]),T.createElement(Hve,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u=>u.preventDefault(),onDismiss:h},T.createElement(mye,Be({"data-state":o.stateAttribute},c,a,{ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),T.createElement(w7,null,r),T.createElement(kye,{scope:n,isInside:!0},T.createElement(yye,{id:o.contentId,role:"tooltip"},i||r))))}),Rye="TooltipArrow",Dye=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=O1(n);return Aye(Rye,n).isInside?null:T.createElement(vye,Be({},i,r,{ref:t}))});function Mye(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Lye(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Fye(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function Nye(e,t){const{x:n,y:r}=e;let i=!1;for(let s=0,l=t.length-1;s<t.length;l=s++){const a=t[s].x,o=t[s].y,c=t[l].x,h=t[l].y;o>r!=h>r&&n<(c-a)*(r-o)/(h-o)+a&&(i=!i)}return i}function jye(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Bye(t)}function Bye(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const s=t[t.length-1],l=t[t.length-2];if((s.x-l.x)*(i.y-l.y)>=(s.y-l.y)*(i.x-l.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const s=n[n.length-1],l=n[n.length-2];if((s.x-l.x)*(i.y-l.y)>=(s.y-l.y)*(i.x-l.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}const Uye=xye,$ye=Cye,Gye=Tye,Vye=Iye,Hye=Dye;var dh=1e3,ph=dh*60,gh=ph*60,Ql=gh*24,zye=Ql*7,Wye=Ql*365.25,Yye=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return Xye(e);if(n==="number"&&isFinite(e))return t.long?Kye(e):qye(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Xye(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Wye;case"weeks":case"week":case"w":return n*zye;case"days":case"day":case"d":return n*Ql;case"hours":case"hour":case"hrs":case"hr":case"h":return n*gh;case"minutes":case"minute":case"mins":case"min":case"m":return n*ph;case"seconds":case"second":case"secs":case"sec":case"s":return n*dh;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function qye(e){var t=Math.abs(e);return t>=Ql?Math.round(e/Ql)+"d":t>=gh?Math.round(e/gh)+"h":t>=ph?Math.round(e/ph)+"m":t>=dh?Math.round(e/dh)+"s":e+"ms"}function Kye(e){var t=Math.abs(e);return t>=Ql?ym(e,t,Ql,"day"):t>=gh?ym(e,t,gh,"hour"):t>=ph?ym(e,t,ph,"minute"):t>=dh?ym(e,t,dh,"second"):e+" ms"}function ym(e,t,n,r){var i=t>=n*1.5;return Math.round(e/n)+" "+r+(i?"s":"")}const Qye=Tr(Yye),Jye=Qye("0.5s");function Zye({className:e}){return E.jsx("svg",{width:"24",height:"7",viewBox:"0 0 24 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:E.jsx("path",{d:"M 9.1716 4.6716 L 6.3431 1.8432 C 4.8429 0.3429 2.808 -0.5 0.6863 -0.5 H 23.3137 C 21.192 -0.5 19.1571 0.3429 17.6569 1.8431 L 14.8284 4.6716 C 13.2663 6.2337 10.7337 6.2337 9.1716 4.6716 Z",className:Fe("fill-service-black-white",e)})})}function rp({children:e,value:t,side:n="bottom",sideOffset:r=0,delay:i=Jye,open:s,className:l,arrowClassName:a,avoidCollisions:o}){return E.jsx(Uye,{delayDuration:i,children:E.jsxs($ye,{open:s,children:[E.jsx(Gye,{asChild:!0,children:e}),E.jsxs(Vye,{side:n,sideOffset:r,className:Fe("rounded-2 bg-service-black-white translate-y-px px-2 py-3 text-gray-50",l),avoidCollisions:o,children:[t,E.jsx(Hye,{asChild:!0,children:E.jsx(Zye,{className:a})})]})]})})}function _m({children:e,className:t}){return E.jsx("div",{className:Fe("shimmer-effect",t),children:e})}function kj({prompt:e,className:t,small:n=!1}){return E.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[E.jsxs("div",{className:Fe("mb-2 grid w-full grid-cols-2 gap-2"),children:[E.jsx(_m,{className:Fe("rounded-2 aspect-[1/1] bg-gray-700",t)}),E.jsx(_m,{className:Fe("rounded-2 aspect-[1/1] bg-gray-700",t)}),n?null:E.jsxs(E.Fragment,{children:[E.jsx(_m,{className:Fe("rounded-2 aspect-[1/1] bg-gray-700",t)}),E.jsx(_m,{className:Fe("rounded-2 aspect-[1/1] bg-gray-700",t)})]})]}),E.jsxs("div",{className:"rounded-2 border border-gray-700 bg-gray-900 p-4 text-center text-gray-50",children:[`It's hard work transforming those images from your head! Wait with us while we generate "`,e,'"']})]})}const zE=`
    query SparkFetchCrystallineList($input: SparkCrystallineListInput!) {
  sparkCrystallineList(input: $input) {
    list {
      id
      prompt
      images {
        id
        thumbnailUrl
        originalUrl
        state
      }
    }
    pagination {
      totalPages
      itemsPerPage
      currentPage
    }
    errors {
      message
      code
    }
  }
}
    `,Fp=(e,t)=>Ot(["SparkFetchCrystallineList",e],oe(zE,e),t);Fp.document=zE;Fp.getKey=e=>["SparkFetchCrystallineList",e];Fp.rootKey="SparkFetchCrystallineList";Fp.fetcher=(e,t)=>oe(zE,e,t);const WE=`
    query SparkFetchCrystallineItem($input: SparkCrystallineGetInput!) {
  sparkCrystalline(input: $input) {
    crystalline {
      id
      prompt
      images {
        id
        thumbnailUrl
        originalUrl
        state
      }
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,Np=(e,t)=>Ot(["SparkFetchCrystallineItem",e],oe(WE,e),t);Np.document=WE;Np.getKey=e=>["SparkFetchCrystallineItem",e];Np.rootKey="SparkFetchCrystallineItem";Np.fetcher=(e,t)=>oe(WE,e,t);const Aj=`
    mutation SparkGenerateCrystalline($input: SparkCrystallineGenerateInput!) {
  sparkCrystallineGenerate(input: $input) {
    crystalline {
      id
      images {
        id
        thumbnailUrl
        originalUrl
        state
      }
      prompt
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,YE=e=>Ke(["SparkGenerateCrystalline"],t=>oe(Aj,t)(),e);YE.getKey=()=>["SparkGenerateCrystalline"];YE.fetcher=(e,t)=>oe(Aj,e,t);const Rj=`
    mutation SparkDeleteCrystallineItem($input: SparkCrystallineDeleteInput!) {
  sparkCrystallineDelete(input: $input) {
    success
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,XE=e=>Ke(["SparkDeleteCrystallineItem"],t=>oe(Rj,t)(),e);XE.getKey=()=>["SparkDeleteCrystallineItem"];XE.fetcher=(e,t)=>oe(Rj,e,t);const Dj=`
    mutation SparkGenerateArt($input: SparkArtGenerateInput!) {
  sparkArtGenerate(input: $input) {
    art {
      id
      images {
        id
        thumbnailUrl
        originalUrl
        state
      }
      prompt
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,qE=e=>Ke(["SparkGenerateArt"],t=>oe(Dj,t)(),e);qE.getKey=()=>["SparkGenerateArt"];qE.fetcher=(e,t)=>oe(Dj,e,t);const KE=`
    query SparkFetchArtItem($input: SparkArtGetInput!) {
  sparkArt(input: $input) {
    art {
      id
      prompt
      images {
        id
        thumbnailUrl
        originalUrl
        state
      }
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,jp=(e,t)=>Ot(["SparkFetchArtItem",e],oe(KE,e),t);jp.document=KE;jp.getKey=e=>["SparkFetchArtItem",e];jp.rootKey="SparkFetchArtItem";jp.fetcher=(e,t)=>oe(KE,e,t);const QE=`
    query SparkFetchArtList($input: SparkArtListInput!) {
  sparkArtList(input: $input) {
    list {
      id
      prompt
      images {
        id
        thumbnailUrl
        originalUrl
        state
      }
    }
    pagination {
      totalPages
      itemsPerPage
      currentPage
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,Bp=(e,t)=>Ot(["SparkFetchArtList",e],oe(QE,e),t);Bp.document=QE;Bp.getKey=e=>["SparkFetchArtList",e];Bp.rootKey="SparkFetchArtList";Bp.fetcher=(e,t)=>oe(QE,e,t);const Mj=`
    mutation SparkDeleteArtItem($input: SparkArtDeleteInput!) {
  sparkArtDelete(input: $input) {
    success
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,JE=e=>Ke(["SparkDeleteArtItem"],t=>oe(Mj,t)(),e);JE.getKey=()=>["SparkDeleteArtItem"];JE.fetcher=(e,t)=>oe(Mj,e,t);const ZE=`
    query productsDownloadContentWithBackgroundRemoved($productId: ID!) {
  productsDownloadContentWithBackgroundRemoved(productId: $productId) {
    id
    generatedImageUrl
    sourceImageUrl
    state
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,Up=(e,t)=>Ot(["productsDownloadContentWithBackgroundRemoved",e],oe(ZE,e),t);Up.document=ZE;Up.getKey=e=>["productsDownloadContentWithBackgroundRemoved",e];Up.rootKey="productsDownloadContentWithBackgroundRemoved";Up.fetcher=(e,t)=>oe(ZE,e,t);const eP=`
    query downloadContentAssets($ids: [ID!]!) {
  contentDownloadAssets(ids: $ids) {
    assetId
    url
  }
}
    `,$p=(e,t)=>Ot(["downloadContentAssets",e],oe(eP,e),t);$p.document=eP;$p.getKey=e=>["downloadContentAssets",e];$p.rootKey="downloadContentAssets";$p.fetcher=(e,t)=>oe(eP,e,t);const Lj=`
    mutation SparkRemoveBackground($input: SparkRemoveBackgroundInput!) {
  sparkRemoveBackground(input: $input) {
    removedBackground {
      id
      generatedThumbnailUrl
      generatedImagelUrl
      sourceImageUrl
      sourceThumbnailUrl
      state
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,tP=e=>Ke(["SparkRemoveBackground"],t=>oe(Lj,t)(),e);tP.getKey=()=>["SparkRemoveBackground"];tP.fetcher=(e,t)=>oe(Lj,e,t);const nP=`
    query SparkFetchRemovedBackgroundeItem($input: SparkRemoveBackgroundGetInput!) {
  sparkRemovedBackground(input: $input) {
    removedBackground {
      id
      generatedThumbnailUrl
      generatedImagelUrl
      sourceImageUrl
      sourceThumbnailUrl
      state
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,Gp=(e,t)=>Ot(["SparkFetchRemovedBackgroundeItem",e],oe(nP,e),t);Gp.document=nP;Gp.getKey=e=>["SparkFetchRemovedBackgroundeItem",e];Gp.rootKey="SparkFetchRemovedBackgroundeItem";Gp.fetcher=(e,t)=>oe(nP,e,t);const Fj=`
    mutation SparkUpload($input: SparkUploadsCreateSignedUrlInput!) {
  sparkUploadsCreateSignedUrl(input: $input) {
    id
    signedUrl
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,rP=e=>Ke(["SparkUpload"],t=>oe(Fj,t)(),e);rP.getKey=()=>["SparkUpload"];rP.fetcher=(e,t)=>oe(Fj,e,t);const Nj=`
    mutation SparkImageMix($input: SparkImageMixGenerateInput!) {
  sparkImageMixGenerate(input: $input) {
    imageMix {
      id
      userId
      imageUrl
      prompt
      strength
      images {
        id
        thumbnailUrl
        originalUrl
        state
      }
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,iP=e=>Ke(["SparkImageMix"],t=>oe(Nj,t)(),e);iP.getKey=()=>["SparkImageMix"];iP.fetcher=(e,t)=>oe(Nj,e,t);const sP=`
    query SparkFetchImageMixItem($input: SparkImageMixGetInput!) {
  sparkImageMixGet(input: $input) {
    imageMix {
      id
      userId
      imageUrl
      prompt
      strength
      images {
        id
        thumbnailUrl
        originalUrl
        state
      }
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,Vp=(e,t)=>Ot(["SparkFetchImageMixItem",e],oe(sP,e),t);Vp.document=sP;Vp.getKey=e=>["SparkFetchImageMixItem",e];Vp.rootKey="SparkFetchImageMixItem";Vp.fetcher=(e,t)=>oe(sP,e,t);const oP=`
    query SparkFetchImageMixList($input: SparkImageMixListInput!) {
  sparkImageMixList(input: $input) {
    list {
      id
      userId
      imageUrl
      prompt
      strength
      images {
        id
        thumbnailUrl
        originalUrl
        state
      }
    }
    pagination {
      totalPages
      itemsPerPage
      currentPage
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,Hp=(e,t)=>Ot(["SparkFetchImageMixList",e],oe(oP,e),t);Hp.document=oP;Hp.getKey=e=>["SparkFetchImageMixList",e];Hp.rootKey="SparkFetchImageMixList";Hp.fetcher=(e,t)=>oe(oP,e,t);const jj=`
    mutation SparkDeleteImageMixItem($input: SparkImageMixDeleteInput!) {
  sparkImageMixDelete(input: $input) {
    success
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,aP=e=>Ke(["SparkDeleteImageMixItem"],t=>oe(jj,t)(),e);aP.getKey=()=>["SparkDeleteImageMixItem"];aP.fetcher=(e,t)=>oe(jj,e,t);const Bj=`
    mutation SparkDeleteImageMixAll {
  sparkImageMixDeleteAll {
    success
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,lP=e=>Ke(["SparkDeleteImageMixAll"],t=>oe(Bj,t)(),e);lP.getKey=()=>["SparkDeleteImageMixAll"];lP.fetcher=(e,t)=>oe(Bj,e,t);const cP=`
    query SparkFetchUploaded($input: SparkGetUploadedInput!) {
  sparkGetUploaded(input: $input) {
    imageUrl
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,zp=(e,t)=>Ot(["SparkFetchUploaded",e],oe(cP,e),t);zp.document=cP;zp.getKey=e=>["SparkFetchUploaded",e];zp.rootKey="SparkFetchUploaded";zp.fetcher=(e,t)=>oe(cP,e,t);const Uj=`
    mutation SparkInpaint($input: SparkInpaintImageInput!) {
  sparkInpaintImage(input: $input) {
    inpaint {
      id
      userId
      state
      prompt
      srcImageUrl
      srcInpaintAreaImageUrl
      srcThumbnailUrl
      thumbnailUrl
      imageUrl
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,uP=e=>Ke(["SparkInpaint"],t=>oe(Uj,t)(),e);uP.getKey=()=>["SparkInpaint"];uP.fetcher=(e,t)=>oe(Uj,e,t);const hP=`
    query SparkFetchInpaintItem($input: SparkInpaintGetInput!) {
  sparkInpaintGet(input: $input) {
    inpaint {
      id
      userId
      state
      prompt
      srcImageUrl
      srcInpaintAreaImageUrl
      srcThumbnailUrl
      thumbnailUrl
      imageUrl
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,Wp=(e,t)=>Ot(["SparkFetchInpaintItem",e],oe(hP,e),t);Wp.document=hP;Wp.getKey=e=>["SparkFetchInpaintItem",e];Wp.rootKey="SparkFetchInpaintItem";Wp.fetcher=(e,t)=>oe(hP,e,t);const fP=`
    query SparkFetchInpaintList($input: SparkInpaintListInput!) {
  sparkInpaintList(input: $input) {
    list {
      id
      userId
      state
      prompt
      srcImageUrl
      srcInpaintAreaImageUrl
      srcThumbnailUrl
      thumbnailUrl
      imageUrl
    }
    pagination {
      totalPages
      itemsPerPage
      currentPage
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,Yp=(e,t)=>Ot(["SparkFetchInpaintList",e],oe(fP,e),t);Yp.document=fP;Yp.getKey=e=>["SparkFetchInpaintList",e];Yp.rootKey="SparkFetchInpaintList";Yp.fetcher=(e,t)=>oe(fP,e,t);const $j=`
    mutation SparkDeleteInpaintItem($input: SparkInpaintDeleteInput!) {
  sparkInpaintDelete(input: $input) {
    success
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,dP=e=>Ke(["SparkDeleteInpaintItem"],t=>oe($j,t)(),e);dP.getKey=()=>["SparkDeleteInpaintItem"];dP.fetcher=(e,t)=>oe($j,e,t);const Gj=`
    mutation SparkDeleteInpaintAll {
  sparkInpaintDeleteAll {
    success
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,pP=e=>Ke(["SparkDeleteInpaintAll"],t=>oe(Gj,t)(),e);pP.getKey=()=>["SparkDeleteInpaintAll"];pP.fetcher=(e,t)=>oe(Gj,e,t);const Vj=`
    mutation SparkOutpaint($input: SparkOutpaintImageInput!) {
  sparkOutpaintImage(input: $input) {
    outpaint {
      id
      userId
      state
      prompt
      srcImageUrl
      srcThumbnailUrl
      increaseUp
      increaseDown
      increaseLeft
      increaseRight
      thumbnailUrl
      imageUrl
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,gP=e=>Ke(["SparkOutpaint"],t=>oe(Vj,t)(),e);gP.getKey=()=>["SparkOutpaint"];gP.fetcher=(e,t)=>oe(Vj,e,t);const mP=`
    query SparkFetchOutpaintItem($input: SparkOutpaintGetInput!) {
  sparkOutpaintGet(input: $input) {
    outpaint {
      id
      userId
      state
      prompt
      srcImageUrl
      srcThumbnailUrl
      increaseUp
      increaseDown
      increaseLeft
      increaseRight
      thumbnailUrl
      imageUrl
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,Xp=(e,t)=>Ot(["SparkFetchOutpaintItem",e],oe(mP,e),t);Xp.document=mP;Xp.getKey=e=>["SparkFetchOutpaintItem",e];Xp.rootKey="SparkFetchOutpaintItem";Xp.fetcher=(e,t)=>oe(mP,e,t);const vP=`
    query SparkFetchOutpaintList($input: SparkOutpaintListInput!) {
  sparkOutpaintList(input: $input) {
    list {
      id
      userId
      state
      prompt
      srcImageUrl
      srcThumbnailUrl
      increaseUp
      increaseDown
      increaseLeft
      increaseRight
      thumbnailUrl
      imageUrl
    }
    pagination {
      totalPages
      itemsPerPage
      currentPage
    }
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,qp=(e,t)=>Ot(["SparkFetchOutpaintList",e],oe(vP,e),t);qp.document=vP;qp.getKey=e=>["SparkFetchOutpaintList",e];qp.rootKey="SparkFetchOutpaintList";qp.fetcher=(e,t)=>oe(vP,e,t);const Hj=`
    mutation SparkDeleteOutpaintItem($input: SparkOutpaintDeleteInput!) {
  sparkOutpaintDelete(input: $input) {
    success
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,yP=e=>Ke(["SparkDeleteOutpaintItem"],t=>oe(Hj,t)(),e);yP.getKey=()=>["SparkDeleteOutpaintItem"];yP.fetcher=(e,t)=>oe(Hj,e,t);const zj=`
    mutation SparkDeleteOutpaintAll {
  sparkOutpaintDeleteAll {
    success
    errors {
      code
      message
      fields {
        field
        errors
      }
    }
  }
}
    `,_P=e=>Ke(["SparkDeleteOutpaintAll"],t=>oe(zj,t)(),e);_P.getKey=()=>["SparkDeleteOutpaintAll"];_P.fetcher=(e,t)=>oe(zj,e,t);function S2(){return Fp({input:{currentPage:1,itemsPerPage:30}})}const Wj={list:[],pagination:{totalPages:1,itemsPerPage:30,currentPage:1},errors:null},e1e={sparkArtList:Wj},t1e={sparkCrystallineList:Wj},Yj=T.createContext(null);function s6e({children:e}){const[t,n]=ds("spark-art-local",e1e),[r,i]=T.useState(t),[s,l]=ds("spark-crystalline-local",t1e),[a,o]=T.useState(s),c=T.useCallback(p=>{var v;const m=[p,...((v=r==null?void 0:r.sparkArtList)==null?void 0:v.list)||[]],g={sparkArtList:{...r==null?void 0:r.sparkArtList,list:m}};i(g),n(g)},[r,n]),h=T.useCallback(p=>{var v;const m=(((v=r==null?void 0:r.sparkArtList)==null?void 0:v.list)||[]).filter(({id:_})=>_!==p),g={sparkArtList:{...r==null?void 0:r.sparkArtList,list:m}};i(g),n(g)},[r,n]),u=T.useCallback(p=>{var v;const m=[p,...((v=a==null?void 0:a.sparkCrystallineList)==null?void 0:v.list)||[]],g={sparkCrystallineList:{...a==null?void 0:a.sparkCrystallineList,list:m}};o(g),l(g)},[a,l]),f=T.useCallback(p=>{var v;const m=(((v=a==null?void 0:a.sparkCrystallineList)==null?void 0:v.list)||[]).filter(({id:_})=>_!==p),g={sparkCrystallineList:{...a==null?void 0:a.sparkCrystallineList,list:m}};o(g),l(g)},[a,l]),d=T.useMemo(()=>({artData:r,updateSessionArtData:c,deleteSessionArtItem:h,crystallineData:a,updateSessionCrystallineData:u,deleteSessionCrystallineItem:f}),[r,c,h,a,u,f]);return E.jsx(Yj.Provider,{value:d,children:e})}const Kp=()=>{const e=T.useContext(Yj);if(!e)throw new Error("useSparkLocalData must be used within a <SparkLocalDataContextProvider /> component");return e};function Xj(){const{mutateAsync:e,...t}=YE(),{updateSessionCrystallineData:n}=Kp(),{updateCrystallineState:r}=pr();async function i(s){return new Promise((l,a)=>{async function o(){var d,p;const c=await e({input:{prompt:s}}),{errors:h}=(c==null?void 0:c.sparkCrystallineGenerate)??{};h!=null&&h.length&&a(h);const u=(p=(d=c==null?void 0:c.sparkCrystallineGenerate)==null?void 0:d.crystalline)==null?void 0:p.id;r({crystallineId:u,status:"generate"});function f(m){Np.fetcher({input:{id:m}})().then(({sparkCrystalline:g})=>{var y,b;if(((y=g==null?void 0:g.crystalline)==null?void 0:y.images.some(({state:S})=>S==="failed"))||!(g!=null&&g.crystalline)){a("Something went wrong. Please try again.");return}((b=g.crystalline)==null?void 0:b.images.every(({originalUrl:S})=>S!==""))?g.crystalline&&(n(g.crystalline),l(g.crystalline.images)):setTimeout(()=>{f(m)},2e3)})}u&&f(u)}o()})}return{generateCrystalline:i,rest:t}}const n1e={primary:"bg-gray-700 text-gray-300 placeholder:text-gray-300 ring-gray-800 focus:ring-primary-500 ring-gray-300",clear:"text-gray-800 placeholder:text-gray-300 focus:ring-violet-500 ring-gray-300"},oA=T.forwardRef(function(t,n){return E.jsx("div",{ref:n,...t,className:Fe("rounded-2 relative mt-2 shadow-sm",t.className)})}),r1e=T.forwardRef(function({variant:t,...n},r){return E.jsx("textarea",{ref:r,...n,className:Fe("rounded-2 block w-full border-0 px-3 py-1.5 text-sm leading-7 outline-none ring-1 ring-inset focus:ring-2",n1e[t??"clear"],n.className)})});function i1e({className:e,...t}){return E.jsx("div",{...t,className:Fe("pointer-events-none absolute inset-y-0 right-0 flex h-auto items-center px-3 text-current",e)})}function s1e({className:e,...t}){return E.jsx("div",{...t,className:Fe("pointer-events-none absolute inset-y-0 left-0 flex px-3 text-current",e)})}const aA=Object.assign(oA,{Root:oA,Field:r1e,IconRight:i1e,IconLeft:s1e});function qj({value:e,onChange:t}){const n=T.useRef(null),r=()=>{n.current&&(n.current.style.height="auto",n.current.style.height=n.current.scrollHeight+"px")};return T.useEffect(r,[e]),T.useEffect(()=>{setTimeout(r,100)},[]),E.jsx(aA.Root,{children:E.jsx(aA.Field,{value:e,variant:"primary",onChange:t,className:"resize-none overflow-hidden rounded-b-none ring-0 focus:ring-0",rows:3,"data-min-rows":3,ref:n,style:{transition:"height 200ms"}})})}function Kj(){const{mutateAsync:e,...t}=XE();async function n(r){return new Promise((i,s)=>{async function l(){const a=await e({input:{id:r}}),{errors:o}=(a==null?void 0:a.sparkCrystallineDelete)??{};o!=null&&o.length&&s(o),i()}l()})}return{deleteCrystalline:n,rest:t}}const _r=T.forwardRef(function({variant:t="primary",asChild:n,...r},i){const s=n?Qi:"button";return E.jsx(s,{type:"button",...r,ref:i,className:Fe("rounded-2 flex cursor-pointer items-center justify-center border-0 p-[5px]","outline-none focus-visible:ring-2 focus-visible:ring-violet-500",t==="primary"&&"hover:text-service-gray-900 focus-visible::text-service-white-white active:text-service-white-white group bg-gray-800 text-gray-300 hover:bg-gray-900 active:bg-violet-500",t==="violet"&&"text-service-white-white bg-violet-500",t==="transparent"&&"text-gray-400 hover:text-gray-50",t==="disabled"&&"cursor-not-allowed text-gray-600 opacity-50 outline-none",t==="inactive"&&"text-gray-600 opacity-50 outline-none hover:text-gray-100",r.className)})});var la=(e=>(e.PX="px",e.IN="in",e.CM="cm",e.MM="mm",e))(la||{}),o1e=(e=>(e.STANDARD="STANDARD",e.WEB="WEB",e.PRINT="PRINT",e))(o1e||{});const lA=[{id:"STANDARD",name:"Standard (72 DPI)",dpi:72,maxSizes:{px:11e3,in:152.77,cm:388.05,mm:3880.55}},{id:"WEB",name:"Web (72 DPI)",dpi:72,maxSizes:{px:11e3,in:152.77,cm:388.05,mm:3880.55}},{id:"PRINT",name:"Print (300 DPI)",dpi:300,maxSizes:{px:11e3,in:36.66,cm:93.13,mm:931.33}}],o6e=[{id:"px",name:"Pixels"},{id:"in",name:"Inches"},{id:"cm",name:"Centimeters"},{id:"mm",name:"Millimeters"}];var a1e=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(a1e||{});const l1e={fonts:[],pages:[{id:"new-banana-page",children:[],width:"auto",height:"auto",background:"white",bleed:0,duration:5e3}]};var c1e="Expected a function",cA=0/0,u1e="[object Symbol]",h1e=/^\s+|\s+$/g,f1e=/^[-+]0x[0-9a-f]+$/i,d1e=/^0b[01]+$/i,p1e=/^0o[0-7]+$/i,g1e=parseInt,m1e=typeof Wr=="object"&&Wr&&Wr.Object===Object&&Wr,v1e=typeof self=="object"&&self&&self.Object===Object&&self,y1e=m1e||v1e||Function("return this")(),_1e=Object.prototype,b1e=_1e.toString,S1e=Math.max,x1e=Math.min,SS=function(){return y1e.Date.now()};function w1e(e,t,n){var r,i,s,l,a,o,c=0,h=!1,u=!1,f=!0;if(typeof e!="function")throw new TypeError(c1e);t=uA(t)||0,x2(n)&&(h=!!n.leading,u="maxWait"in n,s=u?S1e(uA(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function d(x){var C=r,w=i;return r=i=void 0,c=x,l=e.apply(w,C),l}function p(x){return c=x,a=setTimeout(v,t),h?d(x):l}function m(x){var C=x-o,w=x-c,k=t-C;return u?x1e(k,s-w):k}function g(x){var C=x-o,w=x-c;return o===void 0||C>=t||C<0||u&&w>=s}function v(){var x=SS();if(g(x))return _(x);a=setTimeout(v,m(x))}function _(x){return a=void 0,f&&r?d(x):(r=i=void 0,l)}function y(){a!==void 0&&clearTimeout(a),c=0,r=o=i=a=void 0}function b(){return a===void 0?l:_(SS())}function S(){var x=SS(),C=g(x);if(r=arguments,i=this,o=x,C){if(a===void 0)return p(o);if(u)return a=setTimeout(v,t),d(o)}return a===void 0&&(a=setTimeout(v,t)),l}return S.cancel=y,S.flush=b,S}function x2(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function C1e(e){return!!e&&typeof e=="object"}function T1e(e){return typeof e=="symbol"||C1e(e)&&b1e.call(e)==u1e}function uA(e){if(typeof e=="number")return e;if(T1e(e))return cA;if(x2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=x2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(h1e,"");var n=d1e.test(e);return n||p1e.test(e)?g1e(e.slice(2),n?2:8):f1e.test(e)?cA:+e}var E1e=w1e;const hA=Tr(E1e),Qj=T.createContext(null);function a6e({children:e,store:t}){return E.jsx(Qj.Provider,{value:t,children:e})}function Pn(){return T.useContext(Qj)}function P1e(){function e(t){var i;const n=Array.isArray(t)?t:[t],r=!!((i=n[0])!=null&&i.locked);n.forEach(s=>s.set({draggable:r,contentEditable:r,styleEditable:r,resizable:r}))}return{onLock:e}}/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var e=function(){try{var n={},r=Object.defineProperty,i=r(n,n,n)&&r}catch{}return i}(),t=function(n){if(this==null)throw TypeError();var r=String(this),i=r.length,s=n?Number(n):0;if(s!=s&&(s=0),!(s<0||s>=i)){var l=r.charCodeAt(s),a;return l>=55296&&l<=56319&&i>s+1&&(a=r.charCodeAt(s+1),a>=56320&&a<=57343)?(l-55296)*1024+a-56320+65536:l}};e?e(String.prototype,"codePointAt",{value:t,configurable:!0,writable:!0}):String.prototype.codePointAt=t}();var bP=0,Jj=-3;function ip(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function I1e(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new ip,this.dtree=new ip}var Zj=new ip,eB=new ip,SP=new Uint8Array(30),xP=new Uint16Array(30),tB=new Uint8Array(30),nB=new Uint16Array(30),O1e=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fA=new ip,us=new Uint8Array(288+32);function rB(e,t,n,r){var i,s;for(i=0;i<n;++i)e[i]=0;for(i=0;i<30-n;++i)e[i+n]=i/n|0;for(s=r,i=0;i<30;++i)t[i]=s,s+=1<<e[i]}function k1e(e,t){var n;for(n=0;n<7;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;n<24;++n)e.trans[n]=256+n;for(n=0;n<144;++n)e.trans[24+n]=n;for(n=0;n<8;++n)e.trans[24+144+n]=280+n;for(n=0;n<112;++n)e.trans[24+144+8+n]=144+n;for(n=0;n<5;++n)t.table[n]=0;for(t.table[5]=32,n=0;n<32;++n)t.trans[n]=n}var dA=new Uint16Array(16);function xS(e,t,n,r){var i,s;for(i=0;i<16;++i)e.table[i]=0;for(i=0;i<r;++i)e.table[t[n+i]]++;for(e.table[0]=0,s=0,i=0;i<16;++i)dA[i]=s,s+=e.table[i];for(i=0;i<r;++i)t[n+i]&&(e.trans[dA[t[n+i]]++]=i)}function A1e(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=e.tag&1;return e.tag>>>=1,t}function ps(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function w2(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=0,r=0,i=0,s=e.tag;do r=2*r+(s&1),s>>>=1,++i,n+=t.table[i],r-=t.table[i];while(r>=0);return e.tag=s,e.bitcount-=i,t.trans[n+r]}function R1e(e,t,n){var r,i,s,l,a,o;for(r=ps(e,5,257),i=ps(e,5,1),s=ps(e,4,4),l=0;l<19;++l)us[l]=0;for(l=0;l<s;++l){var c=ps(e,3,0);us[O1e[l]]=c}for(xS(fA,us,0,19),a=0;a<r+i;){var h=w2(e,fA);switch(h){case 16:var u=us[a-1];for(o=ps(e,2,3);o;--o)us[a++]=u;break;case 17:for(o=ps(e,3,3);o;--o)us[a++]=0;break;case 18:for(o=ps(e,7,11);o;--o)us[a++]=0;break;default:us[a++]=h;break}}xS(t,us,0,r),xS(n,us,r,i)}function pA(e,t,n){for(;;){var r=w2(e,t);if(r===256)return bP;if(r<256)e.dest[e.destLen++]=r;else{var i,s,l,a;for(r-=257,i=ps(e,SP[r],xP[r]),s=w2(e,n),l=e.destLen-ps(e,tB[s],nB[s]),a=l;a<l+i;++a)e.dest[e.destLen++]=e.dest[a]}}}function D1e(e){for(var t,n,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],n=e.source[e.sourceIndex+3],n=256*n+e.source[e.sourceIndex+2],t!==(~n&65535))return Jj;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,bP}function M1e(e,t){var n=new I1e(e,t),r,i,s;do{switch(r=A1e(n),i=ps(n,2,0),i){case 0:s=D1e(n);break;case 1:s=pA(n,Zj,eB);break;case 2:R1e(n,n.ltree,n.dtree),s=pA(n,n.ltree,n.dtree);break;default:s=Jj}if(s!==bP)throw new Error("Data error")}while(!r);return n.destLen<n.dest.length?typeof n.dest.slice=="function"?n.dest.slice(0,n.destLen):n.dest.subarray(0,n.destLen):n.dest}k1e(Zj,eB);rB(SP,xP,4,3);rB(tB,nB,2,1);SP[28]=0;xP[28]=258;var L1e=M1e;function jc(e,t,n,r,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*r}function Wa(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Wa.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};Wa.prototype.addPoint=function(e,t){typeof e=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof t=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))};Wa.prototype.addX=function(e){this.addPoint(e,null)};Wa.prototype.addY=function(e){this.addPoint(null,e)};Wa.prototype.addBezier=function(e,t,n,r,i,s,l,a){var o=[e,t],c=[n,r],h=[i,s],u=[l,a];this.addPoint(e,t),this.addPoint(l,a);for(var f=0;f<=1;f++){var d=6*o[f]-12*c[f]+6*h[f],p=-3*o[f]+9*c[f]-9*h[f]+3*u[f],m=3*c[f]-3*o[f];if(p===0){if(d===0)continue;var g=-m/d;0<g&&g<1&&(f===0&&this.addX(jc(o[f],c[f],h[f],u[f],g)),f===1&&this.addY(jc(o[f],c[f],h[f],u[f],g)));continue}var v=Math.pow(d,2)-4*m*p;if(!(v<0)){var _=(-d+Math.sqrt(v))/(2*p);0<_&&_<1&&(f===0&&this.addX(jc(o[f],c[f],h[f],u[f],_)),f===1&&this.addY(jc(o[f],c[f],h[f],u[f],_)));var y=(-d-Math.sqrt(v))/(2*p);0<y&&y<1&&(f===0&&this.addX(jc(o[f],c[f],h[f],u[f],y)),f===1&&this.addY(jc(o[f],c[f],h[f],u[f],y)))}}};Wa.prototype.addQuad=function(e,t,n,r,i,s){var l=e+.6666666666666666*(n-e),a=t+2/3*(r-t),o=l+1/3*(i-e),c=a+1/3*(s-t);this.addBezier(e,t,l,a,o,c,i,s)};function Vn(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Vn.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})};Vn.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})};Vn.prototype.curveTo=Vn.prototype.bezierCurveTo=function(e,t,n,r,i,s){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:i,y:s})};Vn.prototype.quadTo=Vn.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})};Vn.prototype.close=Vn.prototype.closePath=function(){this.commands.push({type:"Z"})};Vn.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof Wa){var t=e;this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),this.close();return}Array.prototype.push.apply(this.commands,e)};Vn.prototype.getBoundingBox=function(){for(var e=new Wa,t=0,n=0,r=0,i=0,s=0;s<this.commands.length;s++){var l=this.commands[s];switch(l.type){case"M":e.addPoint(l.x,l.y),t=r=l.x,n=i=l.y;break;case"L":e.addPoint(l.x,l.y),r=l.x,i=l.y;break;case"Q":e.addQuad(r,i,l.x1,l.y1,l.x,l.y),r=l.x,i=l.y;break;case"C":e.addBezier(r,i,l.x1,l.y1,l.x2,l.y2,l.x,l.y),r=l.x,i=l.y;break;case"Z":r=t,i=n;break;default:throw new Error("Unexpected path command "+l.type)}}return e.isEmpty()&&e.addPoint(0,0),e};Vn.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];n.type==="M"?e.moveTo(n.x,n.y):n.type==="L"?e.lineTo(n.x,n.y):n.type==="C"?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):n.type==="Q"?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):n.type==="Z"&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())};Vn.prototype.toPathData=function(e){e=e!==void 0?e:2;function t(l){return Math.round(l)===l?""+Math.round(l):l.toFixed(e)}function n(){for(var l=arguments,a="",o=0;o<arguments.length;o+=1){var c=l[o];c>=0&&o>0&&(a+=" "),a+=t(c)}return a}for(var r="",i=0;i<this.commands.length;i+=1){var s=this.commands[i];s.type==="M"?r+="M"+n(s.x,s.y):s.type==="L"?r+="L"+n(s.x,s.y):s.type==="C"?r+="C"+n(s.x1,s.y1,s.x2,s.y2,s.x,s.y):s.type==="Q"?r+="Q"+n(s.x1,s.y1,s.x,s.y):s.type==="Z"&&(r+="Z")}return r};Vn.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&this.fill!=="black"&&(this.fill===null?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>",t};Vn.prototype.toDOMElement=function(e){var t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};function iB(e){throw new Error(e)}function gA(e,t){e||iB(t)}var qe={fail:iB,argument:gA,assert:gA},mA=32768,vA=2147483648,mh={},Ie={},Je={};function is(e){return function(){return e}}Ie.BYTE=function(e){return qe.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]};Je.BYTE=is(1);Ie.CHAR=function(e){return[e.charCodeAt(0)]};Je.CHAR=is(1);Ie.CHARARRAY=function(e){typeof e>"u"&&(e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t};Je.CHARARRAY=function(e){return typeof e>"u"?0:e.length};Ie.USHORT=function(e){return[e>>8&255,e&255]};Je.USHORT=is(2);Ie.SHORT=function(e){return e>=mA&&(e=-(2*mA-e)),[e>>8&255,e&255]};Je.SHORT=is(2);Ie.UINT24=function(e){return[e>>16&255,e>>8&255,e&255]};Je.UINT24=is(3);Ie.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]};Je.ULONG=is(4);Ie.LONG=function(e){return e>=vA&&(e=-(2*vA-e)),[e>>24&255,e>>16&255,e>>8&255,e&255]};Je.LONG=is(4);Ie.FIXED=Ie.ULONG;Je.FIXED=Je.ULONG;Ie.FWORD=Ie.SHORT;Je.FWORD=Je.SHORT;Ie.UFWORD=Ie.USHORT;Je.UFWORD=Je.USHORT;Ie.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255]};Je.LONGDATETIME=is(8);Ie.TAG=function(e){return qe.argument(e.length===4,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]};Je.TAG=is(4);Ie.Card8=Ie.BYTE;Je.Card8=Je.BYTE;Ie.Card16=Ie.USHORT;Je.Card16=Je.USHORT;Ie.OffSize=Ie.BYTE;Je.OffSize=Je.BYTE;Ie.SID=Ie.USHORT;Je.SID=Je.USHORT;Ie.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?(e=e-108,[(e>>8)+247,e&255]):e>=-1131&&e<=-108?(e=-e-108,[(e>>8)+251,e&255]):e>=-32768&&e<=32767?Ie.NUMBER16(e):Ie.NUMBER32(e)};Je.NUMBER=function(e){return Ie.NUMBER(e).length};Ie.NUMBER16=function(e){return[28,e>>8&255,e&255]};Je.NUMBER16=is(3);Ie.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,e&255]};Je.NUMBER32=is(5);Ie.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*r)/r).toString()}for(var i="",s=0,l=t.length;s<l;s+=1){var a=t[s];a==="e"?i+=t[++s]==="-"?"c":"b":a==="."?i+="a":a==="-"?i+="e":i+=a}i+=i.length&1?"f":"ff";for(var o=[30],c=0,h=i.length;c<h;c+=2)o.push(parseInt(i.substr(c,2),16));return o};Je.REAL=function(e){return Ie.REAL(e).length};Ie.NAME=Ie.CHARARRAY;Je.NAME=Je.CHARARRAY;Ie.STRING=Ie.CHARARRAY;Je.STRING=Je.CHARARRAY;mh.UTF8=function(e,t,n){for(var r=[],i=n,s=0;s<i;s++,t+=1)r[s]=e.getUint8(t);return String.fromCharCode.apply(null,r)};mh.UTF16=function(e,t,n){for(var r=[],i=n/2,s=0;s<i;s++,t+=2)r[s]=e.getUint16(t);return String.fromCharCode.apply(null,r)};Ie.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=r&255}return t};Je.UTF16=function(e){return e.length*2};var C2={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};mh.MACSTRING=function(e,t,n,r){var i=C2[r];if(i!==void 0){for(var s="",l=0;l<n;l++){var a=e.getUint8(t+l);a<=127?s+=String.fromCharCode(a):s+=i[a&127]}return s}};var bm=typeof WeakMap=="function"&&new WeakMap,Sm,F1e=function(e){if(!Sm){Sm={};for(var t in C2)Sm[t]=new String(t)}var n=Sm[e];if(n!==void 0){if(bm){var r=bm.get(n);if(r!==void 0)return r}var i=C2[e];if(i!==void 0){for(var s={},l=0;l<i.length;l++)s[i.charCodeAt(l)]=l+128;return bm&&bm.set(n,s),s}}};Ie.MACSTRING=function(e,t){var n=F1e(t);if(n!==void 0){for(var r=[],i=0;i<e.length;i++){var s=e.charCodeAt(i);if(s>=128&&(s=n[s],s===void 0))return;r[i]=s}return r}};Je.MACSTRING=function(e,t){var n=Ie.MACSTRING(e,t);return n!==void 0?n.length:0};function T2(e){return e>=-128&&e<=127}function N1e(e,t,n){for(var r=0,i=e.length;t<i&&r<64&&e[t]===0;)++t,++r;return n.push(128|r-1),t}function j1e(e,t,n){for(var r=0,i=e.length,s=t;s<i&&r<64;){var l=e[s];if(!T2(l)||l===0&&s+1<i&&e[s+1]===0)break;++s,++r}n.push(r-1);for(var a=t;a<s;++a)n.push(e[a]+256&255);return s}function B1e(e,t,n){for(var r=0,i=e.length,s=t;s<i&&r<64;){var l=e[s];if(l===0||T2(l)&&s+1<i&&T2(e[s+1]))break;++s,++r}n.push(64|r-1);for(var a=t;a<s;++a){var o=e[a];n.push(o+65536>>8&255,o+256&255)}return s}Ie.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var r=e[t];r===0?t=N1e(e,t,n):r>=-128&&r<=127?t=j1e(e,t,n):t=B1e(e,t,n)}return n};Ie.INDEX=function(e){for(var t=1,n=[t],r=[],i=0;i<e.length;i+=1){var s=Ie.OBJECT(e[i]);Array.prototype.push.apply(r,s),t+=s.length,n.push(t)}if(r.length===0)return[0,0];for(var l=[],a=1+Math.floor(Math.log(t)/Math.log(2))/8|0,o=[void 0,Ie.BYTE,Ie.USHORT,Ie.UINT24,Ie.ULONG][a],c=0;c<n.length;c+=1){var h=o(n[c]);Array.prototype.push.apply(l,h)}return Array.prototype.concat(Ie.Card16(e.length),Ie.OffSize(a),l,r)};Je.INDEX=function(e){return Ie.INDEX(e).length};Ie.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var s=parseInt(n[i],0),l=e[s];t=t.concat(Ie.OPERAND(l.value,l.type)),t=t.concat(Ie.OPERATOR(s))}return t};Je.DICT=function(e){return Ie.DICT(e).length};Ie.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]};Ie.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)qe.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(Ie.OPERAND(e[r],t[r]));else if(t==="SID")n=n.concat(Ie.NUMBER(e));else if(t==="offset")n=n.concat(Ie.NUMBER32(e));else if(t==="number")n=n.concat(Ie.NUMBER(e));else if(t==="real")n=n.concat(Ie.REAL(e));else throw new Error("Unknown operand type "+t);return n};Ie.OP=Ie.BYTE;Je.OP=Je.BYTE;var xm=typeof WeakMap=="function"&&new WeakMap;Ie.CHARSTRING=function(e){if(xm){var t=xm.get(e);if(t!==void 0)return t}for(var n=[],r=e.length,i=0;i<r;i+=1){var s=e[i];n=n.concat(Ie[s.type](s.value))}return xm&&xm.set(e,n),n};Je.CHARSTRING=function(e){return Ie.CHARSTRING(e).length};Ie.OBJECT=function(e){var t=Ie[e.type];return qe.argument(t!==void 0,"No encoding function for type "+e.type),t(e.value)};Je.OBJECT=function(e){var t=Je[e.type];return qe.argument(t!==void 0,"No sizeOf function for type "+e.type),t(e.value)};Ie.TABLE=function(e){for(var t=[],n=e.fields.length,r=[],i=[],s=0;s<n;s+=1){var l=e.fields[s],a=Ie[l.type];qe.argument(a!==void 0,"No encoding function for field type "+l.type+" ("+l.name+")");var o=e[l.name];o===void 0&&(o=l.value);var c=a(o);l.type==="TABLE"?(i.push(t.length),t=t.concat([0,0]),r.push(c)):t=t.concat(c)}for(var h=0;h<r.length;h+=1){var u=i[h],f=t.length;qe.argument(f<65536,"Table "+e.tableName+" too big."),t[u]=f>>8,t[u+1]=f&255,t=t.concat(r[h])}return t};Je.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;r<n;r+=1){var i=e.fields[r],s=Je[i.type];qe.argument(s!==void 0,"No sizeOf function for field type "+i.type+" ("+i.name+")");var l=e[i.name];l===void 0&&(l=i.value),t+=s(l),i.type==="TABLE"&&(t+=2)}return t};Ie.RECORD=Ie.TABLE;Je.RECORD=Je.TABLE;Ie.LITERAL=function(e){return e};Je.LITERAL=function(e){return e.length};function Xn(e,t,n){if(t.length&&(t[0].name!=="coverageFormat"||t[0].value===1))for(var r=0;r<t.length;r+=1){var i=t[r];this[i.name]=i.value}if(this.tableName=e,this.fields=t,n)for(var s=Object.keys(n),l=0;l<s.length;l+=1){var a=s[l],o=n[a];this[a]!==void 0&&(this[a]=o)}}Xn.prototype.encode=function(){return Ie.TABLE(this)};Xn.prototype.sizeOf=function(){return Je.TABLE(this)};function sp(e,t,n){n===void 0&&(n=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(var i=0;i<t.length;i++)r[i+1]={name:e+i,type:"USHORT",value:t[i]};return r}function E2(e,t,n){var r=t.length,i=new Array(r+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(var s=0;s<r;s++)i[s+1]={name:e+s,type:"TABLE",value:n(t[s],s)};return i}function op(e,t,n){var r=t.length,i=[];i[0]={name:e+"Count",type:"USHORT",value:r};for(var s=0;s<r;s++)i=i.concat(n(t[s],s));return i}function Nv(e){e.format===1?Xn.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(sp("glyph",e.glyphs))):e.format===2?Xn.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(op("rangeRecord",e.ranges,function(t){return[{name:"startGlyphID",type:"USHORT",value:t.start},{name:"endGlyphID",type:"USHORT",value:t.end},{name:"startCoverageIndex",type:"USHORT",value:t.index}]}))):qe.assert(!1,"Coverage format must be 1 or 2.")}Nv.prototype=Object.create(Xn.prototype);Nv.prototype.constructor=Nv;function jv(e){Xn.call(this,"scriptListTable",op("scriptRecord",e,function(t,n){var r=t.script,i=r.defaultLangSys;return qe.assert(!!i,"Unable to write GSUB: script "+t.tag+" has no default language system."),[{name:"scriptTag"+n,type:"TAG",value:t.tag},{name:"script"+n,type:"TABLE",value:new Xn("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Xn("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(sp("featureIndex",i.featureIndexes)))}].concat(op("langSys",r.langSysRecords,function(s,l){var a=s.langSys;return[{name:"langSysTag"+l,type:"TAG",value:s.tag},{name:"langSys"+l,type:"TABLE",value:new Xn("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(sp("featureIndex",a.featureIndexes)))}]})))}]}))}jv.prototype=Object.create(Xn.prototype);jv.prototype.constructor=jv;function Bv(e){Xn.call(this,"featureListTable",op("featureRecord",e,function(t,n){var r=t.feature;return[{name:"featureTag"+n,type:"TAG",value:t.tag},{name:"feature"+n,type:"TABLE",value:new Xn("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(sp("lookupListIndex",r.lookupListIndexes)))}]}))}Bv.prototype=Object.create(Xn.prototype);Bv.prototype.constructor=Bv;function Uv(e,t){Xn.call(this,"lookupListTable",E2("lookup",e,function(n){var r=t[n.lookupType];return qe.assert(!!r,"Unable to write GSUB lookup type "+n.lookupType+" tables."),new Xn("lookupTable",[{name:"lookupType",type:"USHORT",value:n.lookupType},{name:"lookupFlag",type:"USHORT",value:n.lookupFlag}].concat(E2("subtable",n.subtables,r)))}))}Uv.prototype=Object.create(Xn.prototype);Uv.prototype.constructor=Uv;var ke={Table:Xn,Record:Xn,Coverage:Nv,ScriptList:jv,FeatureList:Bv,LookupList:Uv,ushortList:sp,tableList:E2,recordList:op};function yA(e,t){return e.getUint8(t)}function $v(e,t){return e.getUint16(t,!1)}function U1e(e,t){return e.getInt16(t,!1)}function wP(e,t){return e.getUint32(t,!1)}function sB(e,t){var n=e.getInt16(t,!1),r=e.getUint16(t+2,!1);return n+r/65535}function $1e(e,t){for(var n="",r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n}function G1e(e,t,n){for(var r=0,i=0;i<n;i+=1)r<<=8,r+=e.getUint8(t+i);return r}function V1e(e,t,n){for(var r=[],i=t;i<n;i+=1)r.push(e.getUint8(i));return r}function H1e(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t}var z1e={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ce(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ce.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e};ce.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e};ce.prototype.parseCard8=ce.prototype.parseByte;ce.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e};ce.prototype.parseCard16=ce.prototype.parseUShort;ce.prototype.parseSID=ce.prototype.parseUShort;ce.prototype.parseOffset16=ce.prototype.parseUShort;ce.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e};ce.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e};ce.prototype.parseULong=function(){var e=wP(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e};ce.prototype.parseOffset32=ce.prototype.parseULong;ce.prototype.parseFixed=function(){var e=sB(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e};ce.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var i=0;i<e;i++)r+=String.fromCharCode(t.getUint8(n+i));return r};ce.prototype.parseTag=function(){return this.parseString(4)};ce.prototype.parseLongDateTime=function(){var e=wP(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e};ce.prototype.parseVersion=function(e){var t=$v(this.data,this.offset+this.relativeOffset),n=$v(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e===void 0&&(e=4096),t+n/e/10};ce.prototype.skip=function(e,t){t===void 0&&(t=1),this.relativeOffset+=z1e[e]*t};ce.prototype.parseULongList=function(e){e===void 0&&(e=this.parseULong());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint32(r),r+=4;return this.relativeOffset+=e*4,t};ce.prototype.parseOffset16List=ce.prototype.parseUShortList=function(e){e===void 0&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint16(r),r+=2;return this.relativeOffset+=e*2,t};ce.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getInt16(r),r+=2;return this.relativeOffset+=e*2,t};ce.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint8(r++);return this.relativeOffset+=e,t};ce.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n};ce.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n};ce.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var s={},l=0;l<r.length;l++){var a=r[l],o=t[a];s[a]=o.call(this)}n[i]=s}return n};ce.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var s={},l=0;l<r.length;l++){var a=r[l],o=t[a];s[a]=o.call(this)}n[i]=s}return n};ce.prototype.parseStruct=function(e){if(typeof e=="function")return e.call(this);for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r],s=e[i];n[i]=s.call(this)}return n};ce.prototype.parseValueRecord=function(e){if(e===void 0&&(e=this.parseUShort()),e!==0){var t={};return e&1&&(t.xPlacement=this.parseShort()),e&2&&(t.yPlacement=this.parseShort()),e&4&&(t.xAdvance=this.parseShort()),e&8&&(t.yAdvance=this.parseShort()),e&16&&(t.xPlaDevice=void 0,this.parseShort()),e&32&&(t.yPlaDevice=void 0,this.parseShort()),e&64&&(t.xAdvDevice=void 0,this.parseShort()),e&128&&(t.yAdvDevice=void 0,this.parseShort()),t}};ce.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),r=0;r<t;r++)n[r]=this.parseValueRecord(e);return n};ce.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new ce(this.data,this.offset+t).parseStruct(e)};ce.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new ce(this.data,this.offset+t).parseStruct(e)};ce.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),n=t.length,r=this.relativeOffset,i=new Array(n),s=0;s<n;s++){var l=t[s];if(l===0){i[s]=void 0;continue}if(this.relativeOffset=l,e){for(var a=this.parseOffset16List(),o=new Array(a.length),c=0;c<a.length;c++)this.relativeOffset=l+a[c],o[c]=e.call(this);i[s]=o}else i[s]=this.parseUShortList()}return this.relativeOffset=r,i};ce.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(t===1)return{format:1,glyphs:this.parseUShortList(n)};if(t===2){for(var r=new Array(n),i=0;i<n;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")};ce.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(t===2)return{format:2,ranges:this.parseRecordList({start:ce.uShort,end:ce.uShort,classId:ce.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")};ce.list=function(e,t){return function(){return this.parseList(e,t)}};ce.list32=function(e,t){return function(){return this.parseList32(e,t)}};ce.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}};ce.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}};ce.pointer=function(e){return function(){return this.parsePointer(e)}};ce.pointer32=function(e){return function(){return this.parsePointer32(e)}};ce.tag=ce.prototype.parseTag;ce.byte=ce.prototype.parseByte;ce.uShort=ce.offset16=ce.prototype.parseUShort;ce.uShortList=ce.prototype.parseUShortList;ce.uLong=ce.offset32=ce.prototype.parseULong;ce.uLongList=ce.prototype.parseULongList;ce.struct=ce.prototype.parseStruct;ce.coverage=ce.prototype.parseCoverage;ce.classDef=ce.prototype.parseClassDef;var _A={reserved:ce.uShort,reqFeatureIndex:ce.uShort,featureIndexes:ce.uShortList};ce.prototype.parseScriptList=function(){return this.parsePointer(ce.recordList({tag:ce.tag,script:ce.pointer({defaultLangSys:ce.pointer(_A),langSysRecords:ce.recordList({tag:ce.tag,langSys:ce.pointer(_A)})})}))||[]};ce.prototype.parseFeatureList=function(){return this.parsePointer(ce.recordList({tag:ce.tag,feature:ce.pointer({featureParams:ce.offset16,lookupListIndexes:ce.uShortList})}))||[]};ce.prototype.parseLookupList=function(e){return this.parsePointer(ce.list(ce.pointer(function(){var t=this.parseUShort();qe.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var n=this.parseUShort(),r=n&16;return{lookupType:t,lookupFlag:n,subtables:this.parseList(ce.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}})))||[]};ce.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var e=this.parseUShort(),t=this.parseUShort();qe.argument(e===1&&t<1,"GPOS/GSUB feature variations table unknown.");var n=this.parseRecordList32({conditionSetOffset:ce.offset32,featureTableSubstitutionOffset:ce.offset32});return n})||[]};var Ne={getByte:yA,getCard8:yA,getUShort:$v,getCard16:$v,getShort:U1e,getULong:wP,getFixed:sB,getTag:$1e,getOffset:G1e,getBytes:V1e,bytesToString:H1e,Parser:ce};function W1e(e,t){t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong();var n;e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(var r=0;r<n;r+=1)for(var i=t.parseULong(),s=t.parseULong(),l=t.parseULong(),a=i;a<=s;a+=1)e.glyphIndexMap[a]=l,l++}function Y1e(e,t,n,r,i){e.length=t.parseUShort(),e.language=t.parseUShort();var s;e.segCount=s=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var l=new Ne.Parser(n,r+i+14),a=new Ne.Parser(n,r+i+16+s*2),o=new Ne.Parser(n,r+i+16+s*4),c=new Ne.Parser(n,r+i+16+s*6),h=r+i+16+s*8,u=0;u<s-1;u+=1)for(var f=void 0,d=l.parseUShort(),p=a.parseUShort(),m=o.parseShort(),g=c.parseUShort(),v=p;v<=d;v+=1)g!==0?(h=c.offset+c.relativeOffset-2,h+=g,h+=(v-p)*2,f=Ne.getUShort(n,h),f!==0&&(f=f+m&65535)):f=v+m&65535,e.glyphIndexMap[v]=f}function X1e(e,t){var n={};n.version=Ne.getUShort(e,t),qe.argument(n.version===0,"cmap table version should be 0."),n.numTables=Ne.getUShort(e,t+2);for(var r=-1,i=n.numTables-1;i>=0;i-=1){var s=Ne.getUShort(e,t+4+i*8),l=Ne.getUShort(e,t+4+i*8+2);if(s===3&&(l===0||l===1||l===10)||s===0&&(l===0||l===1||l===2||l===3||l===4)){r=Ne.getULong(e,t+4+i*8+4);break}}if(r===-1)throw new Error("No valid cmap sub-tables found.");var a=new Ne.Parser(e,t+r);if(n.format=a.parseUShort(),n.format===12)W1e(n,a);else if(n.format===4)Y1e(n,a,e,t,r);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");return n}function q1e(e,t,n){e.segments.push({end:t,start:t,delta:-(t-n),offset:0,glyphIndex:n})}function K1e(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function Q1e(e){var t=!0,n;for(n=e.length-1;n>0;n-=1){var r=e.get(n);if(r.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),t=!1;break}}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:t?12:12+8}];t||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var s=new ke.Table("cmap",i);for(s.segments=[],n=0;n<e.length;n+=1){for(var l=e.get(n),a=0;a<l.unicodes.length;a+=1)q1e(s,l.unicodes[a],n);s.segments=s.segments.sort(function(_,y){return _.start-y.start})}K1e(s);var o=s.segments.length,c=0,h=[],u=[],f=[],d=[],p=[],m=[];for(n=0;n<o;n+=1){var g=s.segments[n];g.end<=65535&&g.start<=65535?(h=h.concat({name:"end_"+n,type:"USHORT",value:g.end}),u=u.concat({name:"start_"+n,type:"USHORT",value:g.start}),f=f.concat({name:"idDelta_"+n,type:"SHORT",value:g.delta}),d=d.concat({name:"idRangeOffset_"+n,type:"USHORT",value:g.offset}),g.glyphId!==void 0&&(p=p.concat({name:"glyph_"+n,type:"USHORT",value:g.glyphId}))):c+=1,!t&&g.glyphIndex!==void 0&&(m=m.concat({name:"cmap12Start_"+n,type:"ULONG",value:g.start}),m=m.concat({name:"cmap12End_"+n,type:"ULONG",value:g.end}),m=m.concat({name:"cmap12Glyph_"+n,type:"ULONG",value:g.glyphIndex}))}if(s.segCountX2=(o-c)*2,s.searchRange=Math.pow(2,Math.floor(Math.log(o-c)/Math.log(2)))*2,s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(h),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(u),s.fields=s.fields.concat(f),s.fields=s.fields.concat(d),s.fields=s.fields.concat(p),s.cmap4Length=14+h.length*2+2+u.length*2+f.length*2+d.length*2+p.length*2,!t){var v=16+m.length*4;s.cmap12Offset=12+2*2+4+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:v},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:m.length/3}]),s.fields=s.fields.concat(m)}return s}var oB={parse:X1e,make:Q1e},v0=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],J1e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Z1e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],xl=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function aB(e){this.font=e}aB.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n){for(var r=0;r<n.length;r+=1)for(var i=n.get(r),s=0;s<i.unicodes.length;s+=1)if(i.unicodes[s]===t)return r}return null};function lB(e){this.cmap=e}lB.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0};function Gv(e,t){this.encoding=e,this.charset=t}Gv.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.encoding[t];return this.charset.indexOf(n)};function CP(e){switch(e.version){case 1:this.names=xl.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<xl.length?this.names[t]=xl[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-xl.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=xl[n+e.glyphNameIndex[n]];break;case 3:this.names=[];break;default:this.names=[];break}}CP.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)};CP.prototype.glyphIndexToName=function(e){return this.names[e]};function e_e(e){for(var t,n=e.tables.cmap.glyphIndexMap,r=Object.keys(n),i=0;i<r.length;i+=1){var s=r[i],l=n[s];t=e.glyphs.get(l),t.addUnicode(parseInt(s))}for(var a=0;a<e.glyphs.length;a+=1)t=e.glyphs.get(a),e.cffEncoding?e.isCIDFont?t.name="gid"+a:t.name=e.cffEncoding.charset[a]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(a))}function t_e(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,n=Object.keys(t),r=0;r<n.length;r+=1){var i=n[r],s=t[i];e._IndexToUnicodeMap[s]===void 0?e._IndexToUnicodeMap[s]={unicodes:[parseInt(i)]}:e._IndexToUnicodeMap[s].unicodes.push(parseInt(i))}}function n_e(e,t){t.lowMemory?t_e(e):e_e(e)}function r_e(e,t,n,r,i){e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke()}var cl={line:r_e};function i_e(e,t){var n=t||new Vn;return{configurable:!0,get:function(){return typeof n=="function"&&(n=n()),n},set:function(r){n=r}}}function ki(e){this.bindConstructorValues(e)}ki.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||e.unicode!==void 0?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",i_e(this,e.path))};ki.prototype.addUnicode=function(e){this.unicodes.length===0&&(this.unicode=e),this.unicodes.push(e)};ki.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};ki.prototype.getPath=function(e,t,n,r,i){e=e!==void 0?e:0,t=t!==void 0?t:0,n=n!==void 0?n:72;var s,l;r||(r={});var a=r.xScale,o=r.yScale;if(r.hinting&&i&&i.hinting&&(l=this.path&&i.hinting.exec(this,n)),l)s=i.hinting.getCommands(l),e=Math.round(e),t=Math.round(t),a=o=1;else{s=this.path.commands;var c=1/(this.path.unitsPerEm||1e3)*n;a===void 0&&(a=c),o===void 0&&(o=c)}for(var h=new Vn,u=0;u<s.length;u+=1){var f=s[u];f.type==="M"?h.moveTo(e+f.x*a,t+-f.y*o):f.type==="L"?h.lineTo(e+f.x*a,t+-f.y*o):f.type==="Q"?h.quadraticCurveTo(e+f.x1*a,t+-f.y1*o,e+f.x*a,t+-f.y*o):f.type==="C"?h.curveTo(e+f.x1*a,t+-f.y1*o,e+f.x2*a,t+-f.y2*o,e+f.x*a,t+-f.y*o):f.type==="Z"&&h.closePath()}return h};ki.prototype.getContours=function(){if(this.points===void 0)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return qe.argument(t.length===0,"There are still points left in the current contour."),e};ki.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];i.type!=="Z"&&(t.push(i.x),n.push(i.y)),(i.type==="Q"||i.type==="C")&&(t.push(i.x1),n.push(i.y1)),i.type==="C"&&(t.push(i.x2),n.push(i.y2))}var s={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(s.xMin)||(s.xMin=0),isFinite(s.xMax)||(s.xMax=this.advanceWidth),isFinite(s.yMin)||(s.yMin=0),isFinite(s.yMax)||(s.yMax=0),s.rightSideBearing=this.advanceWidth-s.leftSideBearing-(s.xMax-s.xMin),s};ki.prototype.draw=function(e,t,n,r,i){this.getPath(t,n,r,i).draw(e)};ki.prototype.drawPoints=function(e,t,n,r){function i(u,f,d,p){e.beginPath();for(var m=0;m<u.length;m+=1)e.moveTo(f+u[m].x*p,d+u[m].y*p),e.arc(f+u[m].x*p,d+u[m].y*p,2,0,Math.PI*2,!1);e.closePath(),e.fill()}t=t!==void 0?t:0,n=n!==void 0?n:0,r=r!==void 0?r:24;for(var s=1/this.path.unitsPerEm*r,l=[],a=[],o=this.path,c=0;c<o.commands.length;c+=1){var h=o.commands[c];h.x!==void 0&&l.push({x:h.x,y:-h.y}),h.x1!==void 0&&a.push({x:h.x1,y:-h.y1}),h.x2!==void 0&&a.push({x:h.x2,y:-h.y2})}e.fillStyle="blue",i(l,t,n,s),e.fillStyle="red",i(a,t,n,s)};ki.prototype.drawMetrics=function(e,t,n,r){var i;t=t!==void 0?t:0,n=n!==void 0?n:0,r=r!==void 0?r:24,i=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",cl.line(e,t,-1e4,t,1e4),cl.line(e,-1e4,n,1e4,n);var s=this.xMin||0,l=this.yMin||0,a=this.xMax||0,o=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",cl.line(e,t+s*i,-1e4,t+s*i,1e4),cl.line(e,t+a*i,-1e4,t+a*i,1e4),cl.line(e,-1e4,n+-l*i,1e4,n+-l*i),cl.line(e,-1e4,n+-o*i,1e4,n+-o*i),e.strokeStyle="green",cl.line(e,t+c*i,-1e4,t+c*i,1e4)};function wm(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(r){e[n]=r},enumerable:!0,configurable:!0})}function TP(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];r.path.unitsPerEm=e.unitsPerEm,this.glyphs[n]=r}this.length=t&&t.length||0}TP.prototype.get=function(e){if(this.glyphs[e]===void 0){this.font._push(e),typeof this.glyphs[e]=="function"&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],n=this.font._IndexToUnicodeMap[e];if(n)for(var r=0;r<n.unicodes.length;r++)t.addUnicode(n.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else typeof this.glyphs[e]=="function"&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]};TP.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};function s_e(e,t){return new ki({index:t,font:e})}function o_e(e,t,n,r,i,s){return function(){var l=new ki({index:t,font:e});return l.path=function(){n(l,r,i);var a=s(e.glyphs,l);return a.unitsPerEm=e.unitsPerEm,a},wm(l,"xMin","_xMin"),wm(l,"xMax","_xMax"),wm(l,"yMin","_yMin"),wm(l,"yMax","_yMax"),l}}function a_e(e,t,n,r){return function(){var i=new ki({index:t,font:e});return i.path=function(){var s=n(e,i,r);return s.unitsPerEm=e.unitsPerEm,s},i}}var ks={GlyphSet:TP,glyphLoader:s_e,ttfGlyphLoader:o_e,cffGlyphLoader:a_e};function cB(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!cB(e[n],t[n]))return!1;return!0}else return!1}function P2(e){var t;return e.length<1240?t=107:e.length<33900?t=1131:t=32768,t}function Go(e,t,n){var r=[],i=[],s=Ne.getCard16(e,t),l,a;if(s!==0){var o=Ne.getByte(e,t+2);l=t+(s+1)*o+2;for(var c=t+3,h=0;h<s+1;h+=1)r.push(Ne.getOffset(e,c,o)),c+=o;a=l+r[s]}else a=t+2;for(var u=0;u<r.length-1;u+=1){var f=Ne.getBytes(e,l+r[u],l+r[u+1]);n&&(f=n(f)),i.push(f)}return{objects:i,startOffset:t,endOffset:a}}function l_e(e,t){var n=[],r=Ne.getCard16(e,t),i,s;if(r!==0){var l=Ne.getByte(e,t+2);i=t+(r+1)*l+2;for(var a=t+3,o=0;o<r+1;o+=1)n.push(Ne.getOffset(e,a,l)),a+=l;s=i+n[r]}else s=t+2;return{offsets:n,startOffset:t,endOffset:s}}function c_e(e,t,n,r,i){var s=Ne.getCard16(n,r),l=0;if(s!==0){var a=Ne.getByte(n,r+2);l=r+(s+1)*a+2}var o=Ne.getBytes(n,l+t[e],l+t[e+1]);return i&&(o=i(o)),o}function u_e(e){for(var t="",n=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=e.parseByte(),s=i>>4,l=i&15;if(s===n||(t+=r[s],l===n))break;t+=r[l]}return parseFloat(t)}function h_e(e,t){var n,r,i,s;if(t===28)return n=e.parseByte(),r=e.parseByte(),n<<8|r;if(t===29)return n=e.parseByte(),r=e.parseByte(),i=e.parseByte(),s=e.parseByte(),n<<24|r<<16|i<<8|s;if(t===30)return u_e(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return n=e.parseByte(),(t-247)*256+n+108;if(t>=251&&t<=254)return n=e.parseByte(),-(t-251)*256-n-108;throw new Error("Invalid b0 "+t)}function f_e(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n][0],i=e[n][1],s=void 0;if(i.length===1?s=i[0]:s=i,t.hasOwnProperty(r)&&!isNaN(t[r]))throw new Error("Object "+t+" already has key "+r);t[r]=s}return t}function uB(e,t,n){t=t!==void 0?t:0;var r=new Ne.Parser(e,t),i=[],s=[];for(n=n!==void 0?n:e.length;r.relativeOffset<n;){var l=r.parseByte();l<=21?(l===12&&(l=1200+r.parseByte()),i.push([l,s]),s=[]):s.push(h_e(r,l))}return f_e(i)}function fd(e,t){return t<=390?t=v0[t]:t=e[t-391],t}function hB(e,t,n){for(var r={},i,s=0;s<t.length;s+=1){var l=t[s];if(Array.isArray(l.type)){var a=[];a.length=l.type.length;for(var o=0;o<l.type.length;o++)i=e[l.op]!==void 0?e[l.op][o]:void 0,i===void 0&&(i=l.value!==void 0&&l.value[o]!==void 0?l.value[o]:null),l.type[o]==="SID"&&(i=fd(n,i)),a[o]=i;r[l.name]=a}else i=e[l.op],i===void 0&&(i=l.value!==void 0?l.value:null),l.type==="SID"&&(i=fd(n,i)),r[l.name]=i}return r}function d_e(e,t){var n={};return n.formatMajor=Ne.getCard8(e,t),n.formatMinor=Ne.getCard8(e,t+1),n.size=Ne.getCard8(e,t+2),n.offsetSize=Ne.getCard8(e,t+3),n.startOffset=t,n.endOffset=t+4,n}var fB=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],dB=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function p_e(e,t){var n=uB(e,0,e.byteLength);return hB(n,fB,t)}function pB(e,t,n,r){var i=uB(e,t,n);return hB(i,dB,r)}function bA(e,t,n,r){for(var i=[],s=0;s<n.length;s+=1){var l=new DataView(new Uint8Array(n[s]).buffer),a=p_e(l,r);a._subrs=[],a._subrsBias=0,a._defaultWidthX=0,a._nominalWidthX=0;var o=a.private[0],c=a.private[1];if(o!==0&&c!==0){var h=pB(e,c+t,o,r);if(a._defaultWidthX=h.defaultWidthX,a._nominalWidthX=h.nominalWidthX,h.subrs!==0){var u=c+h.subrs,f=Go(e,u+t);a._subrs=f.objects,a._subrsBias=P2(a._subrs)}a._privateDict=h}i.push(a)}return i}function g_e(e,t,n,r){var i,s,l=new Ne.Parser(e,t);n-=1;var a=[".notdef"],o=l.parseCard8();if(o===0)for(var c=0;c<n;c+=1)i=l.parseSID(),a.push(fd(r,i));else if(o===1)for(;a.length<=n;){i=l.parseSID(),s=l.parseCard8();for(var h=0;h<=s;h+=1)a.push(fd(r,i)),i+=1}else if(o===2)for(;a.length<=n;){i=l.parseSID(),s=l.parseCard16();for(var u=0;u<=s;u+=1)a.push(fd(r,i)),i+=1}else throw new Error("Unknown charset format "+o);return a}function m_e(e,t,n){var r,i={},s=new Ne.Parser(e,t),l=s.parseCard8();if(l===0)for(var a=s.parseCard8(),o=0;o<a;o+=1)r=s.parseCard8(),i[r]=o;else if(l===1){var c=s.parseCard8();r=1;for(var h=0;h<c;h+=1)for(var u=s.parseCard8(),f=s.parseCard8(),d=u;d<=u+f;d+=1)i[d]=r,r+=1}else throw new Error("Unknown encoding format "+l);return new Gv(i,n)}function SA(e,t,n){var r,i,s,l,a=new Vn,o=[],c=0,h=!1,u=!1,f=0,d=0,p,m,g,v;if(e.isCIDFont){var _=e.tables.cff.topDict._fdSelect[t.index],y=e.tables.cff.topDict._fdArray[_];p=y._subrs,m=y._subrsBias,g=y._defaultWidthX,v=y._nominalWidthX}else p=e.tables.cff.topDict._subrs,m=e.tables.cff.topDict._subrsBias,g=e.tables.cff.topDict._defaultWidthX,v=e.tables.cff.topDict._nominalWidthX;var b=g;function S(w,k){u&&a.closePath(),a.moveTo(w,k),u=!0}function x(){var w;w=o.length%2!==0,w&&!h&&(b=o.shift()+v),c+=o.length>>1,o.length=0,h=!0}function C(w){for(var k,I,R,j,G,B,$,V,W,M,P,O,A=0;A<w.length;){var D=w[A];switch(A+=1,D){case 1:x();break;case 3:x();break;case 4:o.length>1&&!h&&(b=o.shift()+v,h=!0),d+=o.pop(),S(f,d);break;case 5:for(;o.length>0;)f+=o.shift(),d+=o.shift(),a.lineTo(f,d);break;case 6:for(;o.length>0&&(f+=o.shift(),a.lineTo(f,d),o.length!==0);)d+=o.shift(),a.lineTo(f,d);break;case 7:for(;o.length>0&&(d+=o.shift(),a.lineTo(f,d),o.length!==0);)f+=o.shift(),a.lineTo(f,d);break;case 8:for(;o.length>0;)r=f+o.shift(),i=d+o.shift(),s=r+o.shift(),l=i+o.shift(),f=s+o.shift(),d=l+o.shift(),a.curveTo(r,i,s,l,f,d);break;case 10:G=o.pop()+m,B=p[G],B&&C(B);break;case 11:return;case 12:switch(D=w[A],A+=1,D){case 35:r=f+o.shift(),i=d+o.shift(),s=r+o.shift(),l=i+o.shift(),$=s+o.shift(),V=l+o.shift(),W=$+o.shift(),M=V+o.shift(),P=W+o.shift(),O=M+o.shift(),f=P+o.shift(),d=O+o.shift(),o.shift(),a.curveTo(r,i,s,l,$,V),a.curveTo(W,M,P,O,f,d);break;case 34:r=f+o.shift(),i=d,s=r+o.shift(),l=i+o.shift(),$=s+o.shift(),V=l,W=$+o.shift(),M=l,P=W+o.shift(),O=d,f=P+o.shift(),a.curveTo(r,i,s,l,$,V),a.curveTo(W,M,P,O,f,d);break;case 36:r=f+o.shift(),i=d+o.shift(),s=r+o.shift(),l=i+o.shift(),$=s+o.shift(),V=l,W=$+o.shift(),M=l,P=W+o.shift(),O=M+o.shift(),f=P+o.shift(),a.curveTo(r,i,s,l,$,V),a.curveTo(W,M,P,O,f,d);break;case 37:r=f+o.shift(),i=d+o.shift(),s=r+o.shift(),l=i+o.shift(),$=s+o.shift(),V=l+o.shift(),W=$+o.shift(),M=V+o.shift(),P=W+o.shift(),O=M+o.shift(),Math.abs(P-f)>Math.abs(O-d)?f=P+o.shift():d=O+o.shift(),a.curveTo(r,i,s,l,$,V),a.curveTo(W,M,P,O,f,d);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+D),o.length=0}break;case 14:o.length>0&&!h&&(b=o.shift()+v,h=!0),u&&(a.closePath(),u=!1);break;case 18:x();break;case 19:case 20:x(),A+=c+7>>3;break;case 21:o.length>2&&!h&&(b=o.shift()+v,h=!0),d+=o.pop(),f+=o.pop(),S(f,d);break;case 22:o.length>1&&!h&&(b=o.shift()+v,h=!0),f+=o.pop(),S(f,d);break;case 23:x();break;case 24:for(;o.length>2;)r=f+o.shift(),i=d+o.shift(),s=r+o.shift(),l=i+o.shift(),f=s+o.shift(),d=l+o.shift(),a.curveTo(r,i,s,l,f,d);f+=o.shift(),d+=o.shift(),a.lineTo(f,d);break;case 25:for(;o.length>6;)f+=o.shift(),d+=o.shift(),a.lineTo(f,d);r=f+o.shift(),i=d+o.shift(),s=r+o.shift(),l=i+o.shift(),f=s+o.shift(),d=l+o.shift(),a.curveTo(r,i,s,l,f,d);break;case 26:for(o.length%2&&(f+=o.shift());o.length>0;)r=f,i=d+o.shift(),s=r+o.shift(),l=i+o.shift(),f=s,d=l+o.shift(),a.curveTo(r,i,s,l,f,d);break;case 27:for(o.length%2&&(d+=o.shift());o.length>0;)r=f+o.shift(),i=d,s=r+o.shift(),l=i+o.shift(),f=s+o.shift(),d=l,a.curveTo(r,i,s,l,f,d);break;case 28:k=w[A],I=w[A+1],o.push((k<<24|I<<16)>>16),A+=2;break;case 29:G=o.pop()+e.gsubrsBias,B=e.gsubrs[G],B&&C(B);break;case 30:for(;o.length>0&&(r=f,i=d+o.shift(),s=r+o.shift(),l=i+o.shift(),f=s+o.shift(),d=l+(o.length===1?o.shift():0),a.curveTo(r,i,s,l,f,d),o.length!==0);)r=f+o.shift(),i=d,s=r+o.shift(),l=i+o.shift(),d=l+o.shift(),f=s+(o.length===1?o.shift():0),a.curveTo(r,i,s,l,f,d);break;case 31:for(;o.length>0&&(r=f+o.shift(),i=d,s=r+o.shift(),l=i+o.shift(),d=l+o.shift(),f=s+(o.length===1?o.shift():0),a.curveTo(r,i,s,l,f,d),o.length!==0);)r=f,i=d+o.shift(),s=r+o.shift(),l=i+o.shift(),f=s+o.shift(),d=l+(o.length===1?o.shift():0),a.curveTo(r,i,s,l,f,d);break;default:D<32?console.log("Glyph "+t.index+": unknown operator "+D):D<247?o.push(D-139):D<251?(k=w[A],A+=1,o.push((D-247)*256+k+108)):D<255?(k=w[A],A+=1,o.push(-(D-251)*256-k-108)):(k=w[A],I=w[A+1],R=w[A+2],j=w[A+3],A+=4,o.push((k<<24|I<<16|R<<8|j)/65536))}}}return C(n),t.advanceWidth=b,a}function v_e(e,t,n,r){var i=[],s,l=new Ne.Parser(e,t),a=l.parseCard8();if(a===0)for(var o=0;o<n;o++){if(s=l.parseCard8(),s>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+r+")");i.push(s)}else if(a===3){var c=l.parseCard16(),h=l.parseCard16();if(h!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+h);for(var u,f=0;f<c;f++){if(s=l.parseCard8(),u=l.parseCard16(),s>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+r+")");if(u>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+u);for(;h<u;h++)i.push(s);h=u}if(u!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+u)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);return i}function y_e(e,t,n,r){n.tables.cff={};var i=d_e(e,t),s=Go(e,i.endOffset,Ne.bytesToString),l=Go(e,s.endOffset),a=Go(e,l.endOffset,Ne.bytesToString),o=Go(e,a.endOffset);n.gsubrs=o.objects,n.gsubrsBias=P2(n.gsubrs);var c=bA(e,t,l.objects,a.objects);if(c.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+c.length);var h=c[0];if(n.tables.cff.topDict=h,h._privateDict&&(n.defaultWidthX=h._privateDict.defaultWidthX,n.nominalWidthX=h._privateDict.nominalWidthX),h.ros[0]!==void 0&&h.ros[1]!==void 0&&(n.isCIDFont=!0),n.isCIDFont){var u=h.fdArray,f=h.fdSelect;if(u===0||f===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");u+=t;var d=Go(e,u),p=bA(e,t,d.objects,a.objects);h._fdArray=p,f+=t,h._fdSelect=v_e(e,f,n.numGlyphs,p.length)}var m=t+h.private[1],g=pB(e,m,h.private[0],a.objects);if(n.defaultWidthX=g.defaultWidthX,n.nominalWidthX=g.nominalWidthX,g.subrs!==0){var v=m+g.subrs,_=Go(e,v);n.subrs=_.objects,n.subrsBias=P2(n.subrs)}else n.subrs=[],n.subrsBias=0;var y;r.lowMemory?(y=l_e(e,t+h.charStrings),n.nGlyphs=y.offsets.length):(y=Go(e,t+h.charStrings),n.nGlyphs=y.objects.length);var b=g_e(e,t+h.charset,n.nGlyphs,a.objects);if(h.encoding===0?n.cffEncoding=new Gv(J1e,b):h.encoding===1?n.cffEncoding=new Gv(Z1e,b):n.cffEncoding=m_e(e,t+h.encoding,b),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new ks.GlyphSet(n),r.lowMemory)n._push=function(C){var w=c_e(C,y.offsets,e,t+h.charStrings);n.glyphs.push(C,ks.cffGlyphLoader(n,C,SA,w))};else for(var S=0;S<n.nGlyphs;S+=1){var x=y.objects[S];n.glyphs.push(S,ks.cffGlyphLoader(n,S,SA,x))}}function gB(e,t){var n,r=v0.indexOf(e);return r>=0&&(n=r),r=t.indexOf(e),r>=0?n=r+v0.length:(n=v0.length+t.length,t.push(e)),n}function __e(){return new ke.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function b_e(e){var t=new ke.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}function mB(e,t,n){for(var r={},i=0;i<e.length;i+=1){var s=e[i],l=t[s.name];l!==void 0&&!cB(l,s.value)&&(s.type==="SID"&&(l=gB(l,n)),r[s.op]={name:s.name,type:s.type,value:l})}return r}function xA(e,t){var n=new ke.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=mB(fB,e,t),n}function wA(e){var t=new ke.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function S_e(e){var t=new ke.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}function x_e(){return new ke.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function w_e(e,t){for(var n=new ke.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var i=e[r],s=gB(i,t);n.fields.push({name:"glyph_"+r,type:"SID",value:s})}return n}function C_e(e){var t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,i=0,s=0;s<n.commands.length;s+=1){var l=void 0,a=void 0,o=n.commands[s];if(o.type==="Q"){var c=.3333333333333333,h=2/3;o={type:"C",x:o.x,y:o.y,x1:Math.round(c*r+h*o.x1),y1:Math.round(c*i+h*o.y1),x2:Math.round(c*o.x+h*o.x1),y2:Math.round(c*o.y+h*o.y1)}}if(o.type==="M")l=Math.round(o.x-r),a=Math.round(o.y-i),t.push({name:"dx",type:"NUMBER",value:l}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(o.x),i=Math.round(o.y);else if(o.type==="L")l=Math.round(o.x-r),a=Math.round(o.y-i),t.push({name:"dx",type:"NUMBER",value:l}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(o.x),i=Math.round(o.y);else if(o.type==="C"){var u=Math.round(o.x1-r),f=Math.round(o.y1-i),d=Math.round(o.x2-o.x1),p=Math.round(o.y2-o.y1);l=Math.round(o.x-o.x2),a=Math.round(o.y-o.y2),t.push({name:"dx1",type:"NUMBER",value:u}),t.push({name:"dy1",type:"NUMBER",value:f}),t.push({name:"dx2",type:"NUMBER",value:d}),t.push({name:"dy2",type:"NUMBER",value:p}),t.push({name:"dx",type:"NUMBER",value:l}),t.push({name:"dy",type:"NUMBER",value:a}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(o.x),i=Math.round(o.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function T_e(e){for(var t=new ke.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),i=C_e(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return t}function E_e(e,t){var n=new ke.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=mB(dB,e,t),n}function P_e(e,t){for(var n=new ke.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/t.unitsPerEm,i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},s={},l=[],a,o=1;o<e.length;o+=1)a=e.get(o),l.push(a.name);var c=[];n.header=__e(),n.nameIndex=b_e([t.postScriptName]);var h=xA(i,c);n.topDictIndex=wA(h),n.globalSubrIndex=x_e(),n.charsets=w_e(l,c),n.charStringsIndex=T_e(e),n.privateDict=E_e(s,c),n.stringIndex=S_e(c);var u=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return i.charset=u,i.encoding=0,i.charStrings=i.charset+n.charsets.sizeOf(),i.private[1]=i.charStrings+n.charStringsIndex.sizeOf(),h=xA(i,c),n.topDictIndex=wA(h),n}var vB={parse:y_e,make:P_e};function I_e(e,t){var n={},r=new Ne.Parser(e,t);return n.version=r.parseVersion(),n.fontRevision=Math.round(r.parseFixed()*1e3)/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),qe.argument(n.magicNumber===1594834165,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n}function O_e(e){var t=Math.round(new Date().getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new ke.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}var yB={parse:I_e,make:O_e};function k_e(e,t){var n={},r=new Ne.Parser(e,t);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n}function A_e(e){return new ke.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}var _B={parse:k_e,make:A_e};function R_e(e,t,n,r,i){for(var s,l,a=new Ne.Parser(e,t),o=0;o<r;o+=1){o<n&&(s=a.parseUShort(),l=a.parseShort());var c=i.get(o);c.advanceWidth=s,c.leftSideBearing=l}}function D_e(e,t,n,r,i){e._hmtxTableData={};for(var s,l,a=new Ne.Parser(t,n),o=0;o<i;o+=1)o<r&&(s=a.parseUShort(),l=a.parseShort()),e._hmtxTableData[o]={advanceWidth:s,leftSideBearing:l}}function M_e(e,t,n,r,i,s,l){l.lowMemory?D_e(e,t,n,r,i):R_e(t,n,r,i,s)}function L_e(e){for(var t=new ke.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=e.get(n),i=r.advanceWidth||0,s=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:i}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:s})}return t}var bB={parse:M_e,make:L_e};function F_e(e){for(var t=new ke.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+e.length*4,i=0;i<e.length;++i){var s=n.indexOf(e[i]);s<0&&(s=n.length,n+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:r+s}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t}function N_e(e,t){var n=new Ne.Parser(e,t),r=n.parseULong();qe.argument(r===1,"Unsupported ltag table version."),n.skip("uLong",1);for(var i=n.parseULong(),s=[],l=0;l<i;l++){for(var a="",o=t+n.parseUShort(),c=n.parseUShort(),h=o;h<o+c;++h)a+=String.fromCharCode(e.getInt8(h));s.push(a)}return s}var SB={make:F_e,parse:N_e};function j_e(e,t){var n={},r=new Ne.Parser(e,t);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),n.version===1&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n}function B_e(e){return new ke.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}var xB={parse:j_e,make:B_e},wB=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],CB={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},U_e={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},TB={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function $_e(e,t,n){switch(e){case 0:if(t===65535)return"und";if(n)return n[t];break;case 1:return CB[t];case 3:return TB[t]}}var I2="utf-16",G_e={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},V_e={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function EB(e,t,n){switch(e){case 0:return I2;case 1:return V_e[n]||G_e[t];case 3:if(t===1||t===10)return I2;break}}function H_e(e,t,n){for(var r={},i=new Ne.Parser(e,t),s=i.parseUShort(),l=i.parseUShort(),a=i.offset+i.parseUShort(),o=0;o<l;o++){var c=i.parseUShort(),h=i.parseUShort(),u=i.parseUShort(),f=i.parseUShort(),d=wB[f]||f,p=i.parseUShort(),m=i.parseUShort(),g=$_e(c,u,n),v=EB(c,h,u);if(v!==void 0&&g!==void 0){var _=void 0;if(v===I2?_=mh.UTF16(e,a+m,p):_=mh.MACSTRING(e,a+m,p,v),_){var y=r[d];y===void 0&&(y=r[d]={}),y[g]=_}}}return s===1&&i.parseUShort(),r}function wS(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function CA(e,t,n,r,i,s){return new ke.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:s}])}function z_e(e,t){var n=e.length,r=t.length-n+1;e:for(var i=0;i<r;i++)for(;i<r;i++){for(var s=0;s<n;s++)if(t[i+s]!==e[s])continue e;return i}return-1}function TA(e,t){var n=z_e(e,t);if(n<0){n=t.length;for(var r=0,i=e.length;r<i;++r)t.push(e[r])}return n}function W_e(e,t){var n,r=[],i={},s=wS(wB);for(var l in e){var a=s[l];if(a===void 0&&(a=l),n=parseInt(a),isNaN(n))throw new Error('Name table entry "'+l+'" does not exist, see nameTableNames for complete list.');i[n]=e[l],r.push(n)}for(var o=wS(CB),c=wS(TB),h=[],u=[],f=0;f<r.length;f++){n=r[f];var d=i[n];for(var p in d){var m=d[p],g=1,v=o[p],_=U_e[v],y=EB(g,_,v),b=Ie.MACSTRING(m,y);b===void 0&&(g=0,v=t.indexOf(p),v<0&&(v=t.length,t.push(p)),_=4,b=Ie.UTF16(m));var S=TA(b,u);h.push(CA(g,_,v,n,b.length,S));var x=c[p];if(x!==void 0){var C=Ie.UTF16(m),w=TA(C,u);h.push(CA(3,1,x,n,C.length,w))}}}h.sort(function(R,j){return R.platformID-j.platformID||R.encodingID-j.encodingID||R.languageID-j.languageID||R.nameID-j.nameID});for(var k=new ke.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:h.length},{name:"stringOffset",type:"USHORT",value:6+h.length*12}]),I=0;I<h.length;I++)k.fields.push({name:"record_"+I,type:"RECORD",value:h[I]});return k.fields.push({name:"strings",type:"LITERAL",value:u}),k}var PB={parse:H_e,make:W_e},O2=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function Y_e(e){for(var t=0;t<O2.length;t+=1){var n=O2[t];if(e>=n.begin&&e<n.end)return t}return-1}function X_e(e,t){var n={},r=new Ne.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var i=0;i<10;i++)n.panose[i]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),n.version>=1&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),n.version>=2&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n}function q_e(e){return new ke.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}var k2={parse:X_e,make:q_e,unicodeRanges:O2,getUnicodeRange:Y_e};function K_e(e,t){var n={},r=new Ne.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=xl.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var i=0;i<n.numberOfGlyphs;i++)n.glyphNameIndex[i]=r.parseUShort();n.names=[];for(var s=0;s<n.numberOfGlyphs;s++)if(n.glyphNameIndex[s]>=xl.length){var l=r.parseChar();n.names.push(r.parseString(l))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var a=0;a<n.numberOfGlyphs;a++)n.offset[a]=r.parseChar();break}return n}function Q_e(){return new ke.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var IB={parse:K_e,make:Q_e},es=new Array(9);es[1]=function(){var t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(ce.coverage),deltaGlyphId:this.parseUShort()};if(n===2)return{substFormat:2,coverage:this.parsePointer(ce.coverage),substitute:this.parseOffset16List()};qe.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")};es[2]=function(){var t=this.parseUShort();return qe.argument(t===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ce.coverage),sequences:this.parseListOfLists()}};es[3]=function(){var t=this.parseUShort();return qe.argument(t===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ce.coverage),alternateSets:this.parseListOfLists()}};es[4]=function(){var t=this.parseUShort();return qe.argument(t===1,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ce.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var Bu={sequenceIndex:ce.uShort,lookupListIndex:ce.uShort};es[5]=function(){var t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:n,coverage:this.parsePointer(ce.coverage),ruleSets:this.parseListOfLists(function(){var s=this.parseUShort(),l=this.parseUShort();return{input:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(l,Bu)}})};if(n===2)return{substFormat:n,coverage:this.parsePointer(ce.coverage),classDef:this.parsePointer(ce.classDef),classSets:this.parseListOfLists(function(){var s=this.parseUShort(),l=this.parseUShort();return{classes:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(l,Bu)}})};if(n===3){var r=this.parseUShort(),i=this.parseUShort();return{substFormat:n,coverages:this.parseList(r,ce.pointer(ce.coverage)),lookupRecords:this.parseRecordList(i,Bu)}}qe.assert(!1,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};es[6]=function(){var t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(ce.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Bu)}})};if(n===2)return{substFormat:2,coverage:this.parsePointer(ce.coverage),backtrackClassDef:this.parsePointer(ce.classDef),inputClassDef:this.parsePointer(ce.classDef),lookaheadClassDef:this.parsePointer(ce.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Bu)}})};if(n===3)return{substFormat:3,backtrackCoverage:this.parseList(ce.pointer(ce.coverage)),inputCoverage:this.parseList(ce.pointer(ce.coverage)),lookaheadCoverage:this.parseList(ce.pointer(ce.coverage)),lookupRecords:this.parseRecordList(Bu)};qe.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};es[7]=function(){var t=this.parseUShort();qe.argument(t===1,"GSUB Extension Substitution subtable identifier-format must be 1");var n=this.parseUShort(),r=new ce(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:n,extension:es[n].call(r)}};es[8]=function(){var t=this.parseUShort();return qe.argument(t===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(ce.coverage),backtrackCoverage:this.parseList(ce.pointer(ce.coverage)),lookaheadCoverage:this.parseList(ce.pointer(ce.coverage)),substitutes:this.parseUShortList()}};function J_e(e,t){t=t||0;var n=new ce(e,t),r=n.parseVersion(1);return qe.argument(r===1||r===1.1,"Unsupported GSUB table version."),r===1?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(es)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(es),variations:n.parseFeatureVariationsList()}}var Hh=new Array(9);Hh[1]=function(t){return t.substFormat===1?new ke.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ke.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new ke.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new ke.Coverage(t.coverage)}].concat(ke.ushortList("substitute",t.substitute)))};Hh[2]=function(t){return qe.assert(t.substFormat===1,"Lookup type 2 substFormat must be 1."),new ke.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ke.Coverage(t.coverage)}].concat(ke.tableList("seqSet",t.sequences,function(n){return new ke.Table("sequenceSetTable",ke.ushortList("sequence",n))})))};Hh[3]=function(t){return qe.assert(t.substFormat===1,"Lookup type 3 substFormat must be 1."),new ke.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ke.Coverage(t.coverage)}].concat(ke.tableList("altSet",t.alternateSets,function(n){return new ke.Table("alternateSetTable",ke.ushortList("alternate",n))})))};Hh[4]=function(t){return qe.assert(t.substFormat===1,"Lookup type 4 substFormat must be 1."),new ke.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ke.Coverage(t.coverage)}].concat(ke.tableList("ligSet",t.ligatureSets,function(n){return new ke.Table("ligatureSetTable",ke.tableList("ligature",n,function(r){return new ke.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:r.ligGlyph}].concat(ke.ushortList("component",r.components,r.components.length+1)))}))})))};Hh[6]=function(t){if(t.substFormat===1){var n=new ke.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:t.substFormat},{name:"coverage",type:"TABLE",value:new ke.Coverage(t.coverage)}].concat(ke.tableList("chainRuleSet",t.chainRuleSets,function(s){return new ke.Table("chainRuleSetTable",ke.tableList("chainRule",s,function(l){var a=ke.ushortList("backtrackGlyph",l.backtrack,l.backtrack.length).concat(ke.ushortList("inputGlyph",l.input,l.input.length+1)).concat(ke.ushortList("lookaheadGlyph",l.lookahead,l.lookahead.length)).concat(ke.ushortList("substitution",[],l.lookupRecords.length));return l.lookupRecords.forEach(function(o,c){a=a.concat({name:"sequenceIndex"+c,type:"USHORT",value:o.sequenceIndex}).concat({name:"lookupListIndex"+c,type:"USHORT",value:o.lookupListIndex})}),new ke.Table("chainRuleTable",a)}))})));return n}else if(t.substFormat===2)qe.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(t.substFormat===3){var r=[{name:"substFormat",type:"USHORT",value:t.substFormat}];r.push({name:"backtrackGlyphCount",type:"USHORT",value:t.backtrackCoverage.length}),t.backtrackCoverage.forEach(function(s,l){r.push({name:"backtrackCoverage"+l,type:"TABLE",value:new ke.Coverage(s)})}),r.push({name:"inputGlyphCount",type:"USHORT",value:t.inputCoverage.length}),t.inputCoverage.forEach(function(s,l){r.push({name:"inputCoverage"+l,type:"TABLE",value:new ke.Coverage(s)})}),r.push({name:"lookaheadGlyphCount",type:"USHORT",value:t.lookaheadCoverage.length}),t.lookaheadCoverage.forEach(function(s,l){r.push({name:"lookaheadCoverage"+l,type:"TABLE",value:new ke.Coverage(s)})}),r.push({name:"substitutionCount",type:"USHORT",value:t.lookupRecords.length}),t.lookupRecords.forEach(function(s,l){r=r.concat({name:"sequenceIndex"+l,type:"USHORT",value:s.sequenceIndex}).concat({name:"lookupListIndex"+l,type:"USHORT",value:s.lookupListIndex})});var i=new ke.Table("chainContextTable",r);return i}qe.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function Z_e(e){return new ke.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ke.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new ke.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new ke.LookupList(e.lookups,Hh)}])}var OB={parse:J_e,make:Z_e};function ebe(e,t){var n=new Ne.Parser(e,t),r=n.parseULong();qe.argument(r===1,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var i=n.parseULong(),s={},l=0;l<i;l++){var a=n.parseTag(),o=n.parseULong(),c=n.parseULong(),h=mh.UTF8(e,t+o,c);s[a]=h}return s}function tbe(e){var t=Object.keys(e).length,n="",r=16+t*12,i=new ke.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(var s in e){var l=n.length;n+=e[s],i.fields.push({name:"tag "+s,type:"TAG",value:s}),i.fields.push({name:"offset "+s,type:"ULONG",value:r+l}),i.fields.push({name:"length "+s,type:"ULONG",value:e[s].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),i}var kB={parse:ebe,make:tbe};function EA(e){return Math.log(e)/Math.log(2)|0}function EP(e){for(;e.length%4!==0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%=Math.pow(2,32),t}function PA(e,t,n,r){return new ke.Record("Table Record",[{name:"tag",type:"TAG",value:e!==void 0?e:""},{name:"checkSum",type:"ULONG",value:t!==void 0?t:0},{name:"offset",type:"ULONG",value:n!==void 0?n:0},{name:"length",type:"ULONG",value:r!==void 0?r:0}])}function AB(e){var t=new ke.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,EA(t.numTables));t.searchRange=16*n,t.entrySelector=EA(n),t.rangeShift=t.numTables*16-t.searchRange;for(var r=[],i=[],s=t.sizeOf()+PA().sizeOf()*t.numTables;s%4!==0;)s+=1,i.push({name:"padding",type:"BYTE",value:0});for(var l=0;l<e.length;l+=1){var a=e[l];qe.argument(a.tableName.length===4,"Table name"+a.tableName+" is invalid.");var o=a.sizeOf(),c=PA(a.tableName,EP(a.encode()),s,o);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),i.push({name:a.tableName+" table",type:"RECORD",value:a}),s+=o,qe.argument(!isNaN(s),"Something went wrong calculating the offset.");s%4!==0;)s+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(h,u){return h.value.tag>u.value.tag?1:-1}),t.fields=t.fields.concat(r),t.fields=t.fields.concat(i),t}function IA(e,t,n){for(var r=0;r<t.length;r+=1){var i=e.charToGlyphIndex(t[r]);if(i>0){var s=e.glyphs.get(i);return s.getMetrics()}}return n}function nbe(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}function rbe(e){for(var t=[],n=[],r=[],i=[],s=[],l=[],a=[],o,c=0,h=0,u=0,f=0,d=0,p=0;p<e.glyphs.length;p+=1){var m=e.glyphs.get(p),g=m.unicode|0;if(isNaN(m.advanceWidth))throw new Error("Glyph "+m.name+" ("+p+"): advanceWidth is not a number.");(o>g||o===void 0)&&g>0&&(o=g),c<g&&(c=g);var v=k2.getUnicodeRange(g);if(v<32)h|=1<<v;else if(v<64)u|=1<<v-32;else if(v<96)f|=1<<v-64;else if(v<123)d|=1<<v-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(m.name!==".notdef"){var _=m.getMetrics();t.push(_.xMin),n.push(_.yMin),r.push(_.xMax),i.push(_.yMax),l.push(_.leftSideBearing),a.push(_.rightSideBearing),s.push(m.advanceWidth)}}var y={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,s),advanceWidthAvg:nbe(s),minLeftSideBearing:Math.min.apply(null,l),maxLeftSideBearing:Math.max.apply(null,l),minRightSideBearing:Math.min.apply(null,a)};y.ascender=e.ascender,y.descender=e.descender;var b=yB.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),S=_B.make({ascender:y.ascender,descender:y.descender,advanceWidthMax:y.advanceWidthMax,minLeftSideBearing:y.minLeftSideBearing,minRightSideBearing:y.minRightSideBearing,xMaxExtent:y.maxLeftSideBearing+(y.xMax-y.xMin),numberOfHMetrics:e.glyphs.length}),x=xB.make(e.glyphs.length),C=k2.make(Object.assign({xAvgCharWidth:Math.round(y.advanceWidthAvg),usFirstCharIndex:o,usLastCharIndex:c,ulUnicodeRange1:h,ulUnicodeRange2:u,ulUnicodeRange3:f,ulUnicodeRange4:d,sTypoAscender:y.ascender,sTypoDescender:y.descender,sTypoLineGap:0,usWinAscent:y.yMax,usWinDescent:Math.abs(y.yMin),ulCodePageRange1:1,sxHeight:IA(e,"xyvw",{yMax:Math.round(y.ascender/2)}).yMax,sCapHeight:IA(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",y).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),w=bB.make(e.glyphs),k=oB.make(e.glyphs),I=e.getEnglishName("fontFamily"),R=e.getEnglishName("fontSubfamily"),j=I+" "+R,G=e.getEnglishName("postScriptName");G||(G=I.replace(/\s/g,"")+"-"+R);var B={};for(var $ in e.names)B[$]=e.names[$];B.uniqueID||(B.uniqueID={en:e.getEnglishName("manufacturer")+":"+j}),B.postScriptName||(B.postScriptName={en:G}),B.preferredFamily||(B.preferredFamily=e.names.fontFamily),B.preferredSubfamily||(B.preferredSubfamily=e.names.fontSubfamily);var V=[],W=PB.make(B,V),M=V.length>0?SB.make(V):void 0,P=IB.make(),O=vB.make(e.glyphs,{version:e.getEnglishName("version"),fullName:j,familyName:I,weightName:R,postScriptName:G,unitsPerEm:e.unitsPerEm,fontBBox:[0,y.yMin,y.ascender,y.advanceWidthMax]}),A=e.metas&&Object.keys(e.metas).length>0?kB.make(e.metas):void 0,D=[b,S,x,C,W,k,P,O,w];M&&D.push(M),e.tables.gsub&&D.push(OB.make(e.tables.gsub)),A&&D.push(A);for(var X=AB(D),N=X.encode(),F=EP(N),z=X.fields,L=!1,H=0;H<z.length;H+=1)if(z[H].name==="head table"){z[H].value.checkSumAdjustment=2981146554-F,L=!0;break}if(!L)throw new Error("Could not find head table with checkSum to adjust.");return X}var ibe={make:AB,fontToTable:rbe,computeCheckSum:EP};function CS(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,s=e[i].tag;if(s===t)return i;s<t?n=i+1:r=i-1}return-n-1}function OA(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,s=e[i];if(s===t)return i;s<t?n=i+1:r=i-1}return-n-1}function kA(e,t){for(var n,r=0,i=e.length-1;r<=i;){var s=r+i>>>1;n=e[s];var l=n.start;if(l===t)return n;l<t?r=s+1:i=s-1}if(r>0)return n=e[r-1],t>n.end?0:n}function Qp(e,t){this.font=e,this.tableName=t}Qp.prototype={searchTag:CS,binSearch:OA,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map(function(t){return t.tag}):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var r=e.scripts[n].tag;if(r==="DFLT")return r;r==="latn"&&(t=!0)}if(t)return"latn"}},getScriptTable:function(e,t){var n=this.getTable(t);if(n){e=e||"DFLT";var r=n.scripts,i=CS(n.scripts,e);if(i>=0)return r[i].script;if(t){var s={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,s),s.script}}},getLangSysTable:function(e,t,n){var r=this.getScriptTable(e,n);if(r){if(!t||t==="dflt"||t==="DFLT")return r.defaultLangSys;var i=CS(r.langSysRecords,t);if(i>=0)return r.langSysRecords[i].langSys;if(n){var s={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,s),s.langSys}}},getFeatureTable:function(e,t,n,r){var i=this.getLangSysTable(e,t,r);if(i){for(var s,l=i.featureIndexes,a=this.font.tables[this.tableName].features,o=0;o<l.length;o++)if(s=a[l[o]],s.tag===n)return s.feature;if(r){var c=a.length;return qe.assert(c===0||n>=a[c-1].tag,"Features must be added in alphabetical order."),s={tag:n,feature:{params:0,lookupListIndexes:[]}},a.push(s),l.push(c),s.feature}}},getLookupTables:function(e,t,n,r,i){var s=this.getFeatureTable(e,t,n,i),l=[];if(s){for(var a,o=s.lookupListIndexes,c=this.font.tables[this.tableName].lookups,h=0;h<o.length;h++)a=c[o[h]],a.lookupType===r&&l.push(a);if(l.length===0&&i){a={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var u=c.length;return c.push(a),o.push(u),[a]}}return l},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=kA(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=OA(e.glyphs,t);return n>=0?n:-1;case 2:var r=kA(e.ranges,t);return r?r.index+t-r.start:-1}},expandCoverage:function(e){if(e.format===1)return e.glyphs;for(var t=[],n=e.ranges,r=0;r<n.length;r++)for(var i=n[r],s=i.start,l=i.end,a=s;a<=l;a++)t.push(a);return t}};function Jp(e){Qp.call(this,e,"gpos")}Jp.prototype=Qp.prototype;Jp.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)};Jp.prototype.getKerningValue=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r].subtables,s=0;s<i.length;s++){var l=i[s],a=this.getCoverageIndex(l.coverage,t);if(!(a<0))switch(l.posFormat){case 1:for(var o=l.pairSets[a],c=0;c<o.length;c++){var h=o[c];if(h.secondGlyph===n)return h.value1&&h.value1.xAdvance||0}break;case 2:var u=this.getGlyphClass(l.classDef1,t),f=this.getGlyphClass(l.classDef2,n),d=l.classRecords[u][f];return d.value1&&d.value1.xAdvance||0}}return 0};Jp.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)};function ii(e){Qp.call(this,e,"gsub")}function sbe(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function PP(e,t,n){for(var r=e.subtables,i=0;i<r.length;i++){var s=r[i];if(s.substFormat===t)return s}if(n)return r.push(n),n}ii.prototype=Qp.prototype;ii.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};ii.prototype.getSingle=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,1),s=0;s<i.length;s++)for(var l=i[s].subtables,a=0;a<l.length;a++){var o=l[a],c=this.expandCoverage(o.coverage),h=void 0;if(o.substFormat===1){var u=o.deltaGlyphId;for(h=0;h<c.length;h++){var f=c[h];r.push({sub:f,by:f+u})}}else{var d=o.substitute;for(h=0;h<c.length;h++)r.push({sub:c[h],by:d[h]})}}return r};ii.prototype.getMultiple=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,2),s=0;s<i.length;s++)for(var l=i[s].subtables,a=0;a<l.length;a++){var o=l[a],c=this.expandCoverage(o.coverage),h=void 0;for(h=0;h<c.length;h++){var u=c[h],f=o.sequences[h];r.push({sub:u,by:f})}}return r};ii.prototype.getAlternates=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,3),s=0;s<i.length;s++)for(var l=i[s].subtables,a=0;a<l.length;a++)for(var o=l[a],c=this.expandCoverage(o.coverage),h=o.alternateSets,u=0;u<c.length;u++)r.push({sub:c[u],by:h[u]});return r};ii.prototype.getLigatures=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,4),s=0;s<i.length;s++)for(var l=i[s].subtables,a=0;a<l.length;a++)for(var o=l[a],c=this.expandCoverage(o.coverage),h=o.ligatureSets,u=0;u<c.length;u++)for(var f=c[u],d=h[u],p=0;p<d.length;p++){var m=d[p];r.push({sub:[f].concat(m.components),by:m.ligGlyph})}return r};ii.prototype.addSingle=function(e,t,n,r){var i=this.getLookupTables(n,r,e,1,!0)[0],s=PP(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});qe.assert(s.coverage.format===1,"Single: unable to modify coverage table format "+s.coverage.format);var l=t.sub,a=this.binSearch(s.coverage.glyphs,l);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,l),s.substitute.splice(a,0,0)),s.substitute[a]=t.by};ii.prototype.addMultiple=function(e,t,n,r){qe.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var i=this.getLookupTables(n,r,e,2,!0)[0],s=PP(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});qe.assert(s.coverage.format===1,"Multiple: unable to modify coverage table format "+s.coverage.format);var l=t.sub,a=this.binSearch(s.coverage.glyphs,l);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,l),s.sequences.splice(a,0,0)),s.sequences[a]=t.by};ii.prototype.addAlternate=function(e,t,n,r){var i=this.getLookupTables(n,r,e,3,!0)[0],s=PP(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});qe.assert(s.coverage.format===1,"Alternate: unable to modify coverage table format "+s.coverage.format);var l=t.sub,a=this.binSearch(s.coverage.glyphs,l);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,l),s.alternateSets.splice(a,0,0)),s.alternateSets[a]=t.by};ii.prototype.addLigature=function(e,t,n,r){var i=this.getLookupTables(n,r,e,4,!0)[0],s=i.subtables[0];s||(s={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=s),qe.assert(s.coverage.format===1,"Ligature: unable to modify coverage table format "+s.coverage.format);var l=t.sub[0],a=t.sub.slice(1),o={ligGlyph:t.by,components:a},c=this.binSearch(s.coverage.glyphs,l);if(c>=0){for(var h=s.ligatureSets[c],u=0;u<h.length;u++)if(sbe(h[u].components,a))return;h.push(o)}else c=-1-c,s.coverage.glyphs.splice(c,0,l),s.ligatureSets.splice(c,0,[o])};ii.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n);case"ccmp":return this.getMultiple(e,t,n).concat(this.getLigatures(e,t,n));case"stch":return this.getMultiple(e,t,n)}};ii.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return typeof t.by=="number"?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r);case"ccmp":return t.by instanceof Array?this.addMultiple(e,t,n,r):this.addLigature(e,t,n,r)}};function obe(){return typeof window<"u"}function abe(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}function lbe(e){for(var t=new Buffer(e.byteLength),n=new Uint8Array(e),r=0;r<t.length;++r)t[r]=n[r];return t}function Af(e,t){if(!e)throw t}function AA(e,t,n,r,i){var s;return(t&r)>0?(s=e.parseByte(),t&i||(s=-s),s=n+s):(t&i)>0?s=n:s=n+e.parseShort(),s}function RB(e,t,n){var r=new Ne.Parser(t,n);e.numberOfContours=r.parseShort(),e._xMin=r.parseShort(),e._yMin=r.parseShort(),e._xMax=r.parseShort(),e._yMax=r.parseShort();var i,s;if(e.numberOfContours>0){for(var l=e.endPointIndices=[],a=0;a<e.numberOfContours;a+=1)l.push(r.parseUShort());e.instructionLength=r.parseUShort(),e.instructions=[];for(var o=0;o<e.instructionLength;o+=1)e.instructions.push(r.parseByte());var c=l[l.length-1]+1;i=[];for(var h=0;h<c;h+=1)if(s=r.parseByte(),i.push(s),(s&8)>0)for(var u=r.parseByte(),f=0;f<u;f+=1)i.push(s),h+=1;if(qe.argument(i.length===c,"Bad flags."),l.length>0){var d=[],p;if(c>0){for(var m=0;m<c;m+=1)s=i[m],p={},p.onCurve=!!(s&1),p.lastPointOfContour=l.indexOf(m)>=0,d.push(p);for(var g=0,v=0;v<c;v+=1)s=i[v],p=d[v],p.x=AA(r,s,g,2,16),g=p.x;for(var _=0,y=0;y<c;y+=1)s=i[y],p=d[y],p.y=AA(r,s,_,4,32),_=p.y}e.points=d}else e.points=[]}else if(e.numberOfContours===0)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var b=!0;b;){i=r.parseUShort();var S={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(i&1)>0?(i&2)>0?(S.dx=r.parseShort(),S.dy=r.parseShort()):S.matchedPoints=[r.parseUShort(),r.parseUShort()]:(i&2)>0?(S.dx=r.parseChar(),S.dy=r.parseChar()):S.matchedPoints=[r.parseByte(),r.parseByte()],(i&8)>0?S.xScale=S.yScale=r.parseF2Dot14():(i&64)>0?(S.xScale=r.parseF2Dot14(),S.yScale=r.parseF2Dot14()):(i&128)>0&&(S.xScale=r.parseF2Dot14(),S.scale01=r.parseF2Dot14(),S.scale10=r.parseF2Dot14(),S.yScale=r.parseF2Dot14()),e.components.push(S),b=!!(i&32)}if(i&256){e.instructionLength=r.parseUShort(),e.instructions=[];for(var x=0;x<e.instructionLength;x+=1)e.instructions.push(r.parseByte())}}}function TS(e,t){for(var n=[],r=0;r<e.length;r+=1){var i=e[r],s={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};n.push(s)}return n}function cbe(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];n.push(i),i.lastPointOfContour&&(t.push(n),n=[])}return qe.argument(n.length===0,"There are still points left in the current contour."),t}function DB(e){var t=new Vn;if(!e)return t;for(var n=cbe(e),r=0;r<n.length;++r){var i=n[r],s=null,l=i[i.length-1],a=i[0];if(l.onCurve)t.moveTo(l.x,l.y);else if(a.onCurve)t.moveTo(a.x,a.y);else{var o={x:(l.x+a.x)*.5,y:(l.y+a.y)*.5};t.moveTo(o.x,o.y)}for(var c=0;c<i.length;++c)if(s=l,l=a,a=i[(c+1)%i.length],l.onCurve)t.lineTo(l.x,l.y);else{var h=a;s.onCurve||((l.x+s.x)*.5,(l.y+s.y)*.5),a.onCurve||(h={x:(l.x+a.x)*.5,y:(l.y+a.y)*.5}),t.quadraticCurveTo(l.x,l.y,h.x,h.y)}t.closePath()}return t}function MB(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],i=e.get(r.glyphIndex);if(i.getPath(),i.points){var s=void 0;if(r.matchedPoints===void 0)s=TS(i.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);var l=t.points[r.matchedPoints[0]],a=i.points[r.matchedPoints[1]],o={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};a=TS([a],o)[0],o.dx=l.x-a.x,o.dy=l.y-a.y,s=TS(i.points,o)}t.points=t.points.concat(s)}}return DB(t.points)}function ube(e,t,n,r){for(var i=new ks.GlyphSet(r),s=0;s<n.length-1;s+=1){var l=n[s],a=n[s+1];l!==a?i.push(s,ks.ttfGlyphLoader(r,s,RB,e,t+l,MB)):i.push(s,ks.glyphLoader(r,s))}return i}function hbe(e,t,n,r){var i=new ks.GlyphSet(r);return r._push=function(s){var l=n[s],a=n[s+1];l!==a?i.push(s,ks.ttfGlyphLoader(r,s,RB,e,t+l,MB)):i.push(s,ks.glyphLoader(r,s))},i}function fbe(e,t,n,r,i){return i.lowMemory?hbe(e,t,n,r):ube(e,t,n,r)}var LB={getPath:DB,parse:fbe},FB,Jl,NB,A2;function jB(e){this.font=e,this.getCommands=function(t){return LB.getPath(t).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function dbe(e){return e}function BB(e){return Math.sign(e)*Math.round(Math.abs(e))}function pbe(e){return Math.sign(e)*Math.round(Math.abs(e*2))/2}function gbe(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function mbe(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function vbe(e){return Math.sign(e)*Math.floor(Math.abs(e))}var UB=function(e){var t=this.srPeriod,n=this.srPhase,r=this.srThreshold,i=1;return e<0&&(e=-e,i=-1),e+=r-n,e=Math.trunc(e/t)*t,e+=n,e<0?n*i:e*i},Cs={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){var i,s,l,a,o,c,h;if(!r||r===this){if(i=e.xo-t.xo,s=e.xo-n.xo,o=t.x-t.xo,c=n.x-n.xo,l=Math.abs(i),a=Math.abs(s),h=l+a,h===0){e.x=e.xo+(o+c)/2;return}e.x=e.xo+(o*a+c*l)/h;return}if(i=r.distance(e,t,!0,!0),s=r.distance(e,n,!0,!0),o=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),l=Math.abs(i),a=Math.abs(s),h=l+a,h===0){Cs.setRelative(e,e,(o+c)/2,r,!0);return}Cs.setRelative(e,e,(o*a+c*l)/h,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,i){if(!r||r===this){e.x=(i?t.xo:t.x)+n;return}var s=i?t.xo:t.x,l=i?t.yo:t.y,a=s+n*r.x,o=l+n*r.y;e.x=a+(e.y-o)/r.normalSlope},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Js={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){var i,s,l,a,o,c,h;if(!r||r===this){if(i=e.yo-t.yo,s=e.yo-n.yo,o=t.y-t.yo,c=n.y-n.yo,l=Math.abs(i),a=Math.abs(s),h=l+a,h===0){e.y=e.yo+(o+c)/2;return}e.y=e.yo+(o*a+c*l)/h;return}if(i=r.distance(e,t,!0,!0),s=r.distance(e,n,!0,!0),o=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),l=Math.abs(i),a=Math.abs(s),h=l+a,h===0){Js.setRelative(e,e,(o+c)/2,r,!0);return}Js.setRelative(e,e,(o*a+c*l)/h,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,i){if(!r||r===this){e.y=(i?t.yo:t.y)+n;return}var s=i?t.xo:t.x,l=i?t.yo:t.y,a=s+n*r.x,o=l+n*r.y;e.y=o+r.normalSlope*(e.x-a)},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};Object.freeze(Cs);Object.freeze(Js);function Zp(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}Zp.prototype.distance=function(e,t,n,r){return this.x*Cs.distance(e,t,n,r)+this.y*Js.distance(e,t,n,r)};Zp.prototype.interpolate=function(e,t,n,r){var i,s,l,a,o,c,h;if(l=r.distance(e,t,!0,!0),a=r.distance(e,n,!0,!0),i=r.distance(t,t,!1,!0),s=r.distance(n,n,!1,!0),o=Math.abs(l),c=Math.abs(a),h=o+c,h===0){this.setRelative(e,e,(i+s)/2,r,!0);return}this.setRelative(e,e,(i*c+s*o)/h,r,!0)};Zp.prototype.setRelative=function(e,t,n,r,i){r=r||this;var s=i?t.xo:t.x,l=i?t.yo:t.y,a=s+n*r.x,o=l+n*r.y,c=r.normalSlope,h=this.slope,u=e.x,f=e.y;e.x=(h*u-c*a+o-f)/(h-c),e.y=h*(e.x-u)+f};Zp.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0};function eg(e,t){var n=Math.sqrt(e*e+t*t);return e/=n,t/=n,e===1&&t===0?Cs:e===0&&t===1?Js:new Zp(e,t)}function ao(e,t,n,r){this.x=this.xo=Math.round(e*64)/64,this.y=this.yo=Math.round(t*64)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}ao.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t};ao.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var ap=Object.freeze(new ao(0,0)),ybe={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function ca(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Cs,this.round=BB}}jB.prototype.exec=function(e,t){if(typeof t!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var n=this.font,r=this._prepState;if(!r||r.ppem!==t){var i=this._fpgmState;if(!i){ca.prototype=ybe,i=this._fpgmState=new ca("fpgm",n.tables.fpgm),i.funcs=[],i.font=n,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{Jl(i)}catch(c){console.log("Hinting error in FPGM:"+c),this._errorState=3;return}}ca.prototype=i,r=this._prepState=new ca("prep",n.tables.prep),r.ppem=t;var s=n.tables.cvt;if(s)for(var l=r.cvt=new Array(s.length),a=t/n.unitsPerEm,o=0;o<s.length;o++)l[o]=s[o]*a;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{Jl(r)}catch(c){this._errorState<2&&console.log("Hinting error in PREP:"+c),this._errorState=2}}if(!(this._errorState>1))try{return NB(e,r)}catch(c){this._errorState<1&&(console.log("Hinting error:"+c),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};NB=function(e,t){var n=t.ppem/t.font.unitsPerEm,r=n,i=e.components,s,l,a;if(ca.prototype=t,!i)a=new ca("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),a.step=-1),A2(e,a,n,r),l=a.gZone;else{var o=t.font;l=[],s=[];for(var c=0;c<i.length;c++){var h=i[c],u=o.glyphs.get(h.glyphIndex);a=new ca("glyf",u.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+c+"---"),a.step=-1),A2(u,a,n,r);for(var f=Math.round(h.dx*n),d=Math.round(h.dy*r),p=a.gZone,m=a.contours,g=0;g<p.length;g++){var v=p[g];v.xTouched=v.yTouched=!1,v.xo=v.x=v.x+f,v.yo=v.y=v.y+d}var _=l.length;l.push.apply(l,p);for(var y=0;y<m.length;y++)s.push(m[y]+_)}e.instructions&&!a.inhibitGridFit&&(a=new ca("glyf",e.instructions),a.gZone=a.z0=a.z1=a.z2=l,a.contours=s,l.push(new ao(0,0),new ao(Math.round(e.advanceWidth*n),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),a.step=-1),Jl(a),l.length-=2)}return l};A2=function(e,t,n,r){for(var i=e.points||[],s=i.length,l=t.gZone=t.z0=t.z1=t.z2=[],a=t.contours=[],o,c=0;c<s;c++)o=i[c],l[c]=new ao(o.x*n,o.y*r,o.lastPointOfContour,o.onCurve);for(var h,u,f=0;f<s;f++)o=l[f],h||(h=o,a.push(f)),o.lastPointOfContour?(o.nextPointOnContour=h,h.prevPointOnContour=o,h=void 0):(u=l[f+1],o.nextPointOnContour=u,u.prevPointOnContour=o);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var d=0;d<s;d++)console.log(d,l[d].x,l[d].y)}if(l.push(new ao(0,0),new ao(Math.round(e.advanceWidth*n),0)),Jl(t),l.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var p=0;p<s;p++)console.log(p,l[p].x,l[p].y)}}};Jl=function(e){var t=e.prog;if(t){var n=t.length,r;for(e.ip=0;e.ip<n;e.ip++){if(exports.DEBUG&&e.step++,r=FB[t[e.ip]],!r)throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));r(e)}}};function A1(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new ao(0,0)}function $B(e,t){var n=e.prog,r=e.ip,i=1,s;do if(s=n[++r],s===88)i++;else if(s===89)i--;else if(s===64)r+=n[r+1]+1;else if(s===65)r+=2*n[r+1]+1;else if(s>=176&&s<=183)r+=s-176+1;else if(s>=184&&s<=191)r+=(s-184+1)*2;else if(t&&i===1&&s===27)break;while(i>0);e.ip=r}function RA(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function DA(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function MA(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function LA(e,t){var n=t.stack,r=n.pop(),i=n.pop(),s=t.z2[r],l=t.z1[i];exports.DEBUG&&console.log("SPVTL["+e+"]",r,i);var a,o;e?(a=s.y-l.y,o=l.x-s.x):(a=l.x-s.x,o=l.y-s.y),t.pv=t.dpv=eg(a,o)}function FA(e,t){var n=t.stack,r=n.pop(),i=n.pop(),s=t.z2[r],l=t.z1[i];exports.DEBUG&&console.log("SFVTL["+e+"]",r,i);var a,o;e?(a=s.y-l.y,o=l.x-s.x):(a=l.x-s.x,o=l.y-s.y),t.fv=eg(a,o)}function _be(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.pv=e.dpv=eg(r,n)}function bbe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.fv=eg(r,n)}function Sbe(e){var t=e.stack,n=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(n.x*16384),t.push(n.y*16384)}function xbe(e){var t=e.stack,n=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(n.x*16384),t.push(n.y*16384)}function wbe(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")}function Cbe(e){var t=e.stack,n=t.pop(),r=t.pop(),i=t.pop(),s=t.pop(),l=t.pop(),a=e.z0,o=e.z1,c=a[n],h=a[r],u=o[i],f=o[s],d=e.z2[l];exports.DEBUG&&console.log("ISECT[], ",n,r,i,s,l);var p=c.x,m=c.y,g=h.x,v=h.y,_=u.x,y=u.y,b=f.x,S=f.y,x=(p-g)*(y-S)-(m-v)*(_-b),C=p*v-m*g,w=_*S-y*b;d.x=(C*(_-b)-w*(p-g))/x,d.y=(C*(y-S)-w*(m-v))/x}function Tbe(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)}function Ebe(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)}function Pbe(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)}function Ibe(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||A1(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function Obe(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||A1(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function kbe(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||A1(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function Abe(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||A1(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function Rbe(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)}function Dbe(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=BB}function Mbe(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=gbe}function Lbe(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64}function Fbe(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),$B(e,!1)}function Nbe(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1}function jbe(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64}function Bbe(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])}function ES(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function Ube(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0}function $be(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(n),t.push(r)}function Gbe(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)}function Vbe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",n,r);var i=e.ip,s=e.prog;e.prog=e.funcs[n];for(var l=0;l<r;l++)Jl(e),exports.DEBUG&&console.log(++e.step,l+1<r?"next loopcall":"done loopcall",l);e.ip=i,e.prog=s}function Hbe(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var n=e.ip,r=e.prog;e.prog=e.funcs[t],Jl(e),e.ip=n,e.prog=r,exports.DEBUG&&console.log(++e.step,"returning from",t)}function zbe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",n),t.push(t[t.length-n])}function Wbe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",n),t.push(t.splice(t.length-n,1)[0])}function Ybe(e){if(e.env!=="fpgm")throw new Error("FDEF not allowed here");var t=e.stack,n=e.prog,r=e.ip,i=t.pop(),s=r;for(exports.DEBUG&&console.log(e.step,"FDEF[]",i);n[++r]!==45;);e.ip=r,e.funcs[i]=n.slice(s+1,r)}function NA(e,t){var n=t.stack.pop(),r=t.z0[n],i=t.fv,s=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",n);var l=s.distance(r,ap);e&&(l=t.round(l)),i.setRelative(r,ap,l,s),i.touch(r),t.rp0=t.rp1=n}function jA(e,t){var n=t.z2,r=n.length-2,i,s,l;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var a=0;a<r;a++)i=n[a],!e.touched(i)&&(s=i.prevTouched(e),s!==i&&(l=i.nextTouched(e),s===l&&e.setRelative(i,i,e.distance(s,s,!1,!0),e,!0),e.interpolate(i,s,l,e)))}function BA(e,t){for(var n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],s=t.fv,l=t.pv,a=t.loop,o=t.z2;a--;){var c=n.pop(),h=o[c],u=l.distance(i,i,!1,!0);s.setRelative(h,h,u,l),s.touch(h),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-a)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",c)}t.loop=1}function UA(e,t){var n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],s=t.fv,l=t.pv,a=n.pop(),o=t.z2[t.contours[a]],c=o;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",a);var h=l.distance(i,i,!1,!0);do c!==i&&s.setRelative(c,c,h,l),c=c.nextPointOnContour;while(c!==o)}function $A(e,t){var n=t.stack,r=e?t.rp1:t.rp2,i=(e?t.z0:t.z1)[r],s=t.fv,l=t.pv,a=n.pop();exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",a);var o;switch(a){case 0:o=t.tZone;break;case 1:o=t.gZone;break;default:throw new Error("Invalid zone")}for(var c,h=l.distance(i,i,!1,!0),u=o.length-2,f=0;f<u;f++)c=o[f],s.setRelative(c,c,h,l)}function Xbe(e){for(var t=e.stack,n=e.loop,r=e.fv,i=t.pop()/64,s=e.z2;n--;){var l=t.pop(),a=s[l];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"SHPIX[]",l,i),r.setRelative(a,a,i),r.touch(a)}e.loop=1}function qbe(e){for(var t=e.stack,n=e.rp1,r=e.rp2,i=e.loop,s=e.z0[n],l=e.z1[r],a=e.fv,o=e.dpv,c=e.z2;i--;){var h=t.pop(),u=c[h];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"IP[]",h,n,"<->",r),a.interpolate(u,s,l,o),a.touch(u)}e.loop=1}function GA(e,t){var n=t.stack,r=n.pop()/64,i=n.pop(),s=t.z1[i],l=t.z0[t.rp0],a=t.fv,o=t.pv;a.setRelative(s,l,r,o),a.touch(s),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",r,i),t.rp1=t.rp0,t.rp2=i,e&&(t.rp0=i)}function Kbe(e){for(var t=e.stack,n=e.rp0,r=e.z0[n],i=e.loop,s=e.fv,l=e.pv,a=e.z1;i--;){var o=t.pop(),c=a[o];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",o),s.setRelative(c,r,0,l),s.touch(c)}e.loop=1}function Qbe(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=pbe}function VA(e,t){var n=t.stack,r=n.pop(),i=n.pop(),s=t.z0[i],l=t.fv,a=t.pv,o=t.cvt[r];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",r,"(",o,")",i);var c=a.distance(s,ap);e&&(Math.abs(c-o)<t.cvCutIn&&(c=o),c=t.round(c)),l.setRelative(s,ap,c,a),t.zp0===0&&(s.xo=s.x,s.yo=s.y),l.touch(s),t.rp0=t.rp1=i}function Jbe(e){var t=e.prog,n=e.ip,r=e.stack,i=t[++n];exports.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(var s=0;s<i;s++)r.push(t[++n]);e.ip=n}function Zbe(e){var t=e.ip,n=e.prog,r=e.stack,i=n[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(var s=0;s<i;s++){var l=n[++t]<<8|n[++t];l&32768&&(l=-((l^65535)+1)),r.push(l)}e.ip=t}function eSe(e){var t=e.stack,n=e.store;n||(n=e.store=[]);var r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"WS",r,i),n[i]=r}function tSe(e){var t=e.stack,n=e.store,r=t.pop();exports.DEBUG&&console.log(e.step,"RS",r);var i=n&&n[r]||0;t.push(i)}function nSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",n,r),e.cvt[r]=n/64}function rSe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",n),t.push(e.cvt[n]*64)}function HA(e,t){var n=t.stack,r=n.pop(),i=t.z2[r];exports.DEBUG&&console.log(t.step,"GC["+e+"]",r),n.push(t.dpv.distance(i,ap,e,!1)*64)}function zA(e,t){var n=t.stack,r=n.pop(),i=n.pop(),s=t.z1[r],l=t.z0[i],a=t.dpv.distance(l,s,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",r,i,"->",a),t.stack.push(Math.round(a*64))}function iSe(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)}function sSe(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0}function oSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",n,r),t.push(r<n?1:0)}function aSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",n,r),t.push(r<=n?1:0)}function lSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",n,r),t.push(r>n?1:0)}function cSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",n,r),t.push(r>=n?1:0)}function uSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",n,r),t.push(n===r?1:0)}function hSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",n,r),t.push(n!==r?1:0)}function fSe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",n),t.push(Math.trunc(n)%2?1:0)}function dSe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",n),t.push(Math.trunc(n)%2?0:1)}function pSe(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||($B(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))}function gSe(e){exports.DEBUG&&console.log(e.step,"EIF[]")}function mSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",n,r),t.push(n&&r?1:0)}function vSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",n,r),t.push(n||r?1:0)}function ySe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",n),t.push(n?0:1)}function PS(e,t){var n=t.stack,r=n.pop(),i=t.fv,s=t.pv,l=t.ppem,a=t.deltaBase+(e-1)*16,o=t.deltaShift,c=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",r,n);for(var h=0;h<r;h++){var u=n.pop(),f=n.pop(),d=a+((f&240)>>4);if(d===l){var p=(f&15)-8;p>=0&&p++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",u,"by",p*o);var m=c[u];i.setRelative(m,m,p*o,s)}}}function _Se(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n}function bSe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)}function SSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",n,r),t.push(r+n)}function xSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",n,r),t.push(r-n)}function wSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",n,r),t.push(r*64/n)}function CSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",n,r),t.push(r*n/64)}function TSe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",n),t.push(Math.abs(n))}function ESe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",n),t.push(-n)}function PSe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",n),t.push(Math.floor(n/64)*64)}function ISe(e){var t=e.stack,n=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",n),t.push(Math.ceil(n/64)*64)}function Cm(e,t){var n=t.stack,r=n.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),n.push(t.round(r/64)*64)}function OSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",n,r),e.cvt[r]=n*e.ppem/e.font.unitsPerEm}function IS(e,t){var n=t.stack,r=n.pop(),i=t.ppem,s=t.deltaBase+(e-1)*16,l=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",r,n);for(var a=0;a<r;a++){var o=n.pop(),c=n.pop(),h=s+((c&240)>>4);if(h===i){var u=(c&15)-8;u>=0&&u++;var f=u*l;exports.DEBUG&&console.log(t.step,"DELTACFIX",o,"by",f),t.cvt[o]+=f}}}function kSe(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SROUND[]",t),e.round=UB;var n;switch(t&192){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,t&48){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}t&=15,t===0?e.srThreshold=0:e.srThreshold=(t/8-.5)*n}function ASe(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"S45ROUND[]",t),e.round=UB;var n;switch(t&192){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,t&48){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}t&=15,t===0?e.srThreshold=0:e.srThreshold=(t/8-.5)*n}function RSe(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=dbe}function DSe(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=mbe}function MSe(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=vbe}function LSe(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)}function WA(e,t){var n=t.stack,r=n.pop(),i=n.pop(),s=t.z2[r],l=t.z1[i];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",r,i);var a,o;e?(a=s.y-l.y,o=l.x-s.x):(a=l.x-s.x,o=l.y-s.y),t.dpv=eg(a,o)}function FSe(e){var t=e.stack,n=t.pop(),r=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",n),n&1&&(r=35),n&32&&(r|=4096),t.push(r)}function NSe(e){var t=e.stack,n=t.pop(),r=t.pop(),i=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(r),t.push(n),t.push(i)}function jSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",n,r),t.push(Math.max(r,n))}function BSe(e){var t=e.stack,n=t.pop(),r=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",n,r),t.push(Math.min(r,n))}function USe(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)}function $Se(e){var t=e.stack.pop(),n=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,n),t){case 1:e.inhibitGridFit=!!n;return;case 2:e.ignoreCvt=!!n;return;default:throw new Error("invalid INSTCTRL[] selector")}}function jo(e,t){var n=t.stack,r=t.prog,i=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var s=0;s<e;s++)n.push(r[++i]);t.ip=i}function Bo(e,t){var n=t.ip,r=t.prog,i=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var s=0;s<e;s++){var l=r[++n]<<8|r[++n];l&32768&&(l=-((l^65535)+1)),i.push(l)}t.ip=n}function Le(e,t,n,r,i,s){var l=s.stack,a=e&&l.pop(),o=l.pop(),c=s.rp0,h=s.z0[c],u=s.z1[o],f=s.minDis,d=s.fv,p=s.dpv,m,g,v,_;g=m=p.distance(u,h,!0,!0),v=g>=0?1:-1,g=Math.abs(g),e&&(_=s.cvt[a],r&&Math.abs(g-_)<s.cvCutIn&&(g=_)),n&&g<f&&(g=f),r&&(g=s.round(g)),d.setRelative(u,h,v*g,p),d.touch(u),exports.DEBUG&&console.log(s.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(n?">":"_")+(r?"R":"_")+(i===0?"Gr":i===1?"Bl":i===2?"Wh":"")+"]",e?a+"("+s.cvt[a]+","+_+")":"",o,"(d =",m,"->",v*g,")"),s.rp1=s.rp0,s.rp2=o,t&&(s.rp0=o)}FB=[RA.bind(void 0,Js),RA.bind(void 0,Cs),DA.bind(void 0,Js),DA.bind(void 0,Cs),MA.bind(void 0,Js),MA.bind(void 0,Cs),LA.bind(void 0,0),LA.bind(void 0,1),FA.bind(void 0,0),FA.bind(void 0,1),_be,bbe,Sbe,xbe,wbe,Cbe,Tbe,Ebe,Pbe,Ibe,Obe,kbe,Abe,Rbe,Dbe,Mbe,Lbe,Fbe,Nbe,jbe,void 0,void 0,Bbe,ES,Ube,$be,Gbe,zbe,Wbe,void 0,void 0,void 0,Vbe,Hbe,Ybe,void 0,NA.bind(void 0,0),NA.bind(void 0,1),jA.bind(void 0,Js),jA.bind(void 0,Cs),BA.bind(void 0,0),BA.bind(void 0,1),UA.bind(void 0,0),UA.bind(void 0,1),$A.bind(void 0,0),$A.bind(void 0,1),Xbe,qbe,GA.bind(void 0,0),GA.bind(void 0,1),Kbe,Qbe,VA.bind(void 0,0),VA.bind(void 0,1),Jbe,Zbe,eSe,tSe,nSe,rSe,HA.bind(void 0,0),HA.bind(void 0,1),void 0,zA.bind(void 0,0),zA.bind(void 0,1),iSe,void 0,sSe,void 0,void 0,oSe,aSe,lSe,cSe,uSe,hSe,fSe,dSe,pSe,gSe,mSe,vSe,ySe,PS.bind(void 0,1),_Se,bSe,SSe,xSe,wSe,CSe,TSe,ESe,PSe,ISe,Cm.bind(void 0,0),Cm.bind(void 0,1),Cm.bind(void 0,2),Cm.bind(void 0,3),void 0,void 0,void 0,void 0,OSe,PS.bind(void 0,2),PS.bind(void 0,3),IS.bind(void 0,1),IS.bind(void 0,2),IS.bind(void 0,3),kSe,ASe,void 0,void 0,RSe,void 0,DSe,MSe,ES,ES,void 0,void 0,void 0,void 0,void 0,LSe,WA.bind(void 0,0),WA.bind(void 0,1),FSe,void 0,NSe,jSe,BSe,USe,$Se,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,jo.bind(void 0,1),jo.bind(void 0,2),jo.bind(void 0,3),jo.bind(void 0,4),jo.bind(void 0,5),jo.bind(void 0,6),jo.bind(void 0,7),jo.bind(void 0,8),Bo.bind(void 0,1),Bo.bind(void 0,2),Bo.bind(void 0,3),Bo.bind(void 0,4),Bo.bind(void 0,5),Bo.bind(void 0,6),Bo.bind(void 0,7),Bo.bind(void 0,8),Le.bind(void 0,0,0,0,0,0),Le.bind(void 0,0,0,0,0,1),Le.bind(void 0,0,0,0,0,2),Le.bind(void 0,0,0,0,0,3),Le.bind(void 0,0,0,0,1,0),Le.bind(void 0,0,0,0,1,1),Le.bind(void 0,0,0,0,1,2),Le.bind(void 0,0,0,0,1,3),Le.bind(void 0,0,0,1,0,0),Le.bind(void 0,0,0,1,0,1),Le.bind(void 0,0,0,1,0,2),Le.bind(void 0,0,0,1,0,3),Le.bind(void 0,0,0,1,1,0),Le.bind(void 0,0,0,1,1,1),Le.bind(void 0,0,0,1,1,2),Le.bind(void 0,0,0,1,1,3),Le.bind(void 0,0,1,0,0,0),Le.bind(void 0,0,1,0,0,1),Le.bind(void 0,0,1,0,0,2),Le.bind(void 0,0,1,0,0,3),Le.bind(void 0,0,1,0,1,0),Le.bind(void 0,0,1,0,1,1),Le.bind(void 0,0,1,0,1,2),Le.bind(void 0,0,1,0,1,3),Le.bind(void 0,0,1,1,0,0),Le.bind(void 0,0,1,1,0,1),Le.bind(void 0,0,1,1,0,2),Le.bind(void 0,0,1,1,0,3),Le.bind(void 0,0,1,1,1,0),Le.bind(void 0,0,1,1,1,1),Le.bind(void 0,0,1,1,1,2),Le.bind(void 0,0,1,1,1,3),Le.bind(void 0,1,0,0,0,0),Le.bind(void 0,1,0,0,0,1),Le.bind(void 0,1,0,0,0,2),Le.bind(void 0,1,0,0,0,3),Le.bind(void 0,1,0,0,1,0),Le.bind(void 0,1,0,0,1,1),Le.bind(void 0,1,0,0,1,2),Le.bind(void 0,1,0,0,1,3),Le.bind(void 0,1,0,1,0,0),Le.bind(void 0,1,0,1,0,1),Le.bind(void 0,1,0,1,0,2),Le.bind(void 0,1,0,1,0,3),Le.bind(void 0,1,0,1,1,0),Le.bind(void 0,1,0,1,1,1),Le.bind(void 0,1,0,1,1,2),Le.bind(void 0,1,0,1,1,3),Le.bind(void 0,1,1,0,0,0),Le.bind(void 0,1,1,0,0,1),Le.bind(void 0,1,1,0,0,2),Le.bind(void 0,1,1,0,0,3),Le.bind(void 0,1,1,0,1,0),Le.bind(void 0,1,1,0,1,1),Le.bind(void 0,1,1,0,1,2),Le.bind(void 0,1,1,0,1,3),Le.bind(void 0,1,1,1,0,0),Le.bind(void 0,1,1,1,0,1),Le.bind(void 0,1,1,1,0,2),Le.bind(void 0,1,1,1,0,3),Le.bind(void 0,1,1,1,1,0),Le.bind(void 0,1,1,1,1,1),Le.bind(void 0,1,1,1,1,2),Le.bind(void 0,1,1,1,1,3)];function zh(e){this.char=e,this.state={},this.activeState=null}function IP(e,t,n){this.contextName=n,this.startIndex=e,this.endOffset=t}function GSe(e,t,n){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=n}function ts(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function R1(e){this.eventId=e,this.subscribers=[]}function VSe(e){var t=this,n=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];n.forEach(function(i){Object.defineProperty(t.events,i,{value:new R1(i)})}),e&&n.forEach(function(i){var s=e[i];typeof s=="function"&&t.events[i].subscribe(s)});var r=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];r.forEach(function(i){t.events[i].subscribe(t.updateContextsRanges)})}function vn(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],VSe.call(this,e)}zh.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState};zh.prototype.getState=function(e){return this.state[e]||null};vn.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length};vn.prototype.composeRUD=function(e){var t=this,n=!0,r=e.map(function(s){return t[s[0]].apply(t,s.slice(1).concat(n))}),i=function(s){return typeof s=="object"&&s.hasOwnProperty("FAIL")};if(r.every(i))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(i)};this.dispatch("composeRUD",[r.filter(function(s){return!i(s)})])};vn.prototype.replaceRange=function(e,t,n,r){t=t!==null?t:this.tokens.length;var i=n.every(function(l){return l instanceof zh});if(!isNaN(e)&&this.inboundIndex(e)&&i){var s=this.tokens.splice.apply(this.tokens,[e,t].concat(n));return r||this.dispatch("replaceToken",[e,t,n]),[s,n]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};vn.prototype.replaceToken=function(e,t,n){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof zh){var r=this.tokens.splice(e,1,t);return n||this.dispatch("replaceToken",[e,t]),[r[0],t]}else return{FAIL:"replaceToken: invalid token or index."}};vn.prototype.removeRange=function(e,t,n){t=isNaN(t)?this.tokens.length:t;var r=this.tokens.splice(e,t);return n||this.dispatch("removeRange",[r,e,t]),r};vn.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var n=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[n,e]),n}else return{FAIL:"removeToken: invalid token index."}};vn.prototype.insertToken=function(e,t,n){var r=e.every(function(i){return i instanceof zh});return r?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),n||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}};vn.prototype.registerModifier=function(e,t,n){this.events.newToken.subscribe(function(r,i){var s=[r,i],l=t===null||t.apply(this,s)===!0,a=[r,i];if(l){var o=n.apply(this,a);r.setState(e,o)}}),this.registeredModifiers.push(e)};R1.prototype.subscribe=function(e){return typeof e=="function"?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};R1.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)};ts.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)};ts.prototype.get=function(e){switch(!0){case e===0:return this.current;case(e<0&&Math.abs(e)<=this.backtrack.length):return this.backtrack.slice(e)[0];case(e>0&&e<=this.lookahead.length):return this.lookahead[e-1];default:return null}};vn.prototype.rangeToText=function(e){if(e instanceof IP)return this.getRangeTokens(e).map(function(t){return t.char}).join("")};vn.prototype.getText=function(){return this.tokens.map(function(e){return e.char}).join("")};vn.prototype.getContext=function(e){var t=this.registeredContexts[e];return t||null};vn.prototype.on=function(e,t){var n=this.events[e];return n?n.subscribe(t):null};vn.prototype.dispatch=function(e,t){var n=this,r=this.events[e];r instanceof R1&&r.subscribers.forEach(function(i){i.apply(n,t||[])})};vn.prototype.registerContextChecker=function(e,t,n){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if(typeof t!="function")return{FAIL:"missing context start check."};if(typeof n!="function")return{FAIL:"missing context end check."};var r=new GSe(e,t,n);return this.registeredContexts[e]=r,this.contextCheckers.push(r),r};vn.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))};vn.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}};vn.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];n.ranges=[]}};vn.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map(function(r){return r.char}),t=0;t<e.length;t++){var n=new ts(e,t);this.runContextCheck(n)}this.dispatch("updateContextsRanges",[this.registeredContexts])};vn.prototype.setEndOffset=function(e,t){var n=this.getContext(t).openRange.startIndex,r=new IP(n,e,t),i=this.getContext(t).ranges;return r.rangeId=t+"."+i.length,i.push(r),this.getContext(t).openRange=null,r};vn.prototype.runContextCheck=function(e){var t=this,n=e.index;this.contextCheckers.forEach(function(r){var i=r.contextName,s=t.getContext(i).openRange;if(!s&&r.checkStart(e)&&(s=new IP(n,null,i),t.getContext(i).openRange=s,t.dispatch("contextStart",[i,n])),s&&r.checkEnd(e)){var l=n-s.startIndex+1,a=t.setEndOffset(l,i);t.dispatch("contextEnd",[i,a])}})};vn.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var n=0;n<t.length;n++){var r=t[n],i=new ts(t,n);this.dispatch("next",[i]),this.runContextCheck(i);var s=new zh(r);this.tokens.push(s),this.dispatch("newToken",[s,i])}return this.dispatch("end",[this.tokens]),this.tokens};function Ea(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function GB(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function Fa(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function y0(e){return/[A-z]/.test(e)}function HSe(e){return/\s/.test(e)}function si(e){this.font=e,this.features={}}function wl(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function tg(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var n=t.ranges,r=0;r<n.length;r++){var i=n[r];if(e>=i.start&&e<=i.end){var s=e-i.start;return i.index+s}}break;default:return-1}return-1}function zSe(e,t){var n=tg(e,t.coverage);return n===-1?null:e+t.deltaGlyphId}function WSe(e,t){var n=tg(e,t.coverage);return n===-1?null:t.substitute[n]}function OS(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],s=t.current;s=Array.isArray(s)?s[0]:s;var l=tg(s,i);l!==-1&&n.push(l)}return n.length!==e.length?-1:n}function YSe(e,t){var n=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<n)return[];var r=OS(t.inputCoverage,e);if(r===-1)return[];var i=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var s=e.lookahead.slice(i);s.length&&Fa(s[0].char);)s.shift();var l=new ts(s,0),a=OS(t.lookaheadCoverage,l),o=[].concat(e.backtrack);for(o.reverse();o.length&&Fa(o[0].char);)o.shift();if(o.length<t.backtrackCoverage.length)return[];var c=new ts(o,0),h=OS(t.backtrackCoverage,c),u=r.length===t.inputCoverage.length&&a.length===t.lookaheadCoverage.length&&h.length===t.backtrackCoverage.length,f=[];if(u)for(var d=0;d<t.lookupRecords.length;d++)for(var p=t.lookupRecords[d],m=p.lookupListIndex,g=this.getLookupByIndex(m),v=0;v<g.subtables.length;v++){var _=g.subtables[v],y=this.getLookupMethod(g,_),b=this.getSubstitutionType(g,_);if(b==="12")for(var S=0;S<r.length;S++){var x=e.get(S),C=y(x);C&&f.push(C)}}return f}function XSe(e,t){var n=e.current,r=tg(n,t.coverage);if(r===-1)return null;for(var i,s=t.ligatureSets[r],l=0;l<s.length;l++){i=s[l];for(var a=0;a<i.components.length;a++){var o=e.lookahead[a],c=i.components[a];if(o!==c)break;if(a===i.components.length-1)return i}}return null}function qSe(e,t){var n=tg(e,t.coverage);return n===-1?null:t.sequences[n]}si.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var n=e[t];if(n.tag==="DFLT")return n.script.defaultLangSys.featureIndexes}return[]};si.prototype.getScriptFeaturesIndexes=function(e){var t=this.font.tables;if(!t.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var n=this.font.tables.gsub.scripts,r=0;r<n.length;r++){var i=n[r];if(i.tag===e&&i.script.defaultLangSys)return i.script.defaultLangSys.featureIndexes;var s=i.langSysRecords;if(s)for(var l=0;l<s.length;l++){var a=s[l];if(a.tag===e){var o=a.langSys;return o.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};si.prototype.mapTagsToFeatures=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r].tag,s=e[r].feature;n[i]=s}this.features[t].tags=n};si.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var n=this.getScriptFeaturesIndexes(e);if(!n)return null;var r=this.font.tables.gsub;return t=n.map(function(i){return r.features[i]}),this.features[e]=t,this.mapTagsToFeatures(t,e),t};si.prototype.getSubstitutionType=function(e,t){var n=e.lookupType.toString(),r=t.substFormat.toString();return n+r};si.prototype.getLookupMethod=function(e,t){var n=this,r=this.getSubstitutionType(e,t);switch(r){case"11":return function(i){return zSe.apply(n,[i,t])};case"12":return function(i){return WSe.apply(n,[i,t])};case"63":return function(i){return YSe.apply(n,[i,t])};case"41":return function(i){return XSe.apply(n,[i,t])};case"21":return function(i){return qSe.apply(n,[i,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}};si.prototype.lookupFeature=function(e){var t=e.contextParams,n=t.index,r=this.getFeature({tag:e.tag,script:e.script});if(!r)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var i=this.getFeatureLookups(r),s=[].concat(t.context),l=0;l<i.length;l++)for(var a=i[l],o=this.getLookupSubtables(a),c=0;c<o.length;c++){var h=o[c],u=this.getSubstitutionType(a,h),f=this.getLookupMethod(a,h),d=void 0;switch(u){case"11":d=f(t.current),d&&s.splice(n,1,new wl({id:11,tag:e.tag,substitution:d}));break;case"12":d=f(t.current),d&&s.splice(n,1,new wl({id:12,tag:e.tag,substitution:d}));break;case"63":d=f(t),Array.isArray(d)&&d.length&&s.splice(n,1,new wl({id:63,tag:e.tag,substitution:d}));break;case"41":d=f(t),d&&s.splice(n,1,new wl({id:41,tag:e.tag,substitution:d}));break;case"21":d=f(t.current),d&&s.splice(n,1,new wl({id:21,tag:e.tag,substitution:d}));break}t=new ts(s,n),!(Array.isArray(d)&&!d.length)&&(d=null)}return s.length?s:null};si.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var n=this.features[e.script].some(function(r){return r.tag===e.tag});return t&&n};si.prototype.getLookupSubtables=function(e){return e.subtables||null};si.prototype.getLookupByIndex=function(e){var t=this.font.tables.gsub.lookups;return t[e]||null};si.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))};si.prototype.getFeature=function(t){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(t.script)||this.getScriptFeatures(t.script);var n=this.features[t.script];return n?n.tags[t.tag]?this.features[t.script].tags[t.tag]:null:{FAIL:"No feature for script "+t.script}};function KSe(e){var t=e.current,n=e.get(-1);return n===null&&Ea(t)||!Ea(n)&&Ea(t)}function QSe(e){var t=e.get(1);return t===null||!Ea(t)}var JSe={startCheck:KSe,endCheck:QSe};function ZSe(e){var t=e.current,n=e.get(-1);return(Ea(t)||Fa(t))&&!Ea(n)}function exe(e){var t=e.get(1);switch(!0){case t===null:return!0;case(!Ea(t)&&!Fa(t)):var n=HSe(t);if(!n)return!0;if(n){var r=!1;if(r=e.lookahead.some(function(i){return Ea(i)||Fa(i)}),!r)return!0}break;default:return!1}}var txe={startCheck:ZSe,endCheck:exe};function nxe(e,t,n){t[n].setState(e.tag,e.substitution)}function rxe(e,t,n){t[n].setState(e.tag,e.substitution)}function ixe(e,t,n){e.substitution.forEach(function(r,i){var s=t[n+i];s.setState(e.tag,r)})}function sxe(e,t,n){var r=t[n];r.setState(e.tag,e.substitution.ligGlyph);for(var i=e.substitution.components.length,s=0;s<i;s++)r=t[n+s+1],r.setState("deleted",!0)}var YA={11:nxe,12:rxe,63:ixe,41:sxe};function OP(e,t,n){e instanceof wl&&YA[e.id]&&YA[e.id](e,t,n)}function oxe(e){for(var t=[].concat(e.backtrack),n=t.length-1;n>=0;n--){var r=t[n],i=GB(r),s=Fa(r);if(!i&&!s)return!0;if(i)return!1}return!1}function axe(e){if(GB(e.current))return!1;for(var t=0;t<e.lookahead.length;t++){var n=e.lookahead[t],r=Fa(n);if(!r)return!0}return!1}function lxe(e){var t=this,n="arab",r=this.featuresTags[n],i=this.tokenizer.getRangeTokens(e);if(i.length!==1){var s=new ts(i.map(function(a){return a.getState("glyphIndex")}),0),l=new ts(i.map(function(a){return a.char}),0);i.forEach(function(a,o){if(!Fa(a.char)){s.setCurrentIndex(o),l.setCurrentIndex(o);var c=0;oxe(l)&&(c|=1),axe(l)&&(c|=2);var h;switch(c){case 1:h="fina";break;case 2:h="init";break;case 3:h="medi";break}if(r.indexOf(h)!==-1){var u=t.query.lookupFeature({tag:h,script:n,contextParams:s});if(u instanceof Error)return console.info(u.message);u.forEach(function(f,d){f instanceof wl&&(OP(f,i,d),s.context[d]=f.substitution)})}}})}}function XA(e,t){var n=e.map(function(r){return r.activeState.value});return new ts(n,t||0)}function cxe(e){var t=this,n="arab",r=this.tokenizer.getRangeTokens(e),i=XA(r);i.context.forEach(function(s,l){i.setCurrentIndex(l);var a=t.query.lookupFeature({tag:"rlig",script:n,contextParams:i});a.length&&(a.forEach(function(o){return OP(o,r,l)}),i=XA(r))})}function uxe(e){var t=e.current,n=e.get(-1);return n===null&&y0(t)||!y0(n)&&y0(t)}function hxe(e){var t=e.get(1);return t===null||!y0(t)}var fxe={startCheck:uxe,endCheck:hxe};function qA(e,t){var n=e.map(function(r){return r.activeState.value});return new ts(n,t||0)}function dxe(e){var t=this,n="latn",r=this.tokenizer.getRangeTokens(e),i=qA(r);i.context.forEach(function(s,l){i.setCurrentIndex(l);var a=t.query.lookupFeature({tag:"liga",script:n,contextParams:i});a.length&&(a.forEach(function(o){return OP(o,r,l)}),i=qA(r))})}function ss(e){this.baseDir=e||"ltr",this.tokenizer=new vn,this.featuresTags={}}ss.prototype.setText=function(e){this.text=e};ss.prototype.contextChecks={latinWordCheck:fxe,arabicWordCheck:JSe,arabicSentenceCheck:txe};function kS(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function pxe(){return kS.call(this,"latinWord"),kS.call(this,"arabicWord"),kS.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function gxe(){var e=this,t=this.tokenizer.getContextRanges("arabicSentence");t.forEach(function(n){var r=e.tokenizer.getRangeTokens(n);e.tokenizer.replaceRange(n.startIndex,n.endOffset,r.reverse())})}ss.prototype.registerFeatures=function(e,t){var n=this,r=t.filter(function(i){return n.query.supports({script:e,tag:i})});this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(r):this.featuresTags[e]=r};ss.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new si(e));for(var n=0;n<t.length;n++){var r=t[n];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}};ss.prototype.registerModifier=function(e,t,n){this.tokenizer.registerModifier(e,t,n)};function kP(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function mxe(){var e=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){kP.call(this);var n=this.tokenizer.getContextRanges("arabicWord");n.forEach(function(r){lxe.call(e,r)})}}function vxe(){var e=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){var n=this.featuresTags[t];if(n.indexOf("rlig")!==-1){kP.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(i){cxe.call(e,i)})}}}function yxe(){var e=this,t="latn";if(this.featuresTags.hasOwnProperty(t)){var n=this.featuresTags[t];if(n.indexOf("liga")!==-1){kP.call(this);var r=this.tokenizer.getContextRanges("latinWord");r.forEach(function(i){dxe.call(e,i)})}}}ss.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)};ss.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(mxe.call(this),vxe.call(this)),this.checkContextReady("latinWord")&&yxe.call(this),this.checkContextReady("arabicSentence")&&gxe.call(this)};ss.prototype.processText=function(e){(!this.text||this.text!==e)&&(this.setText(e),pxe.call(this),this.applyFeaturesToContexts())};ss.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()};ss.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],n=0;n<this.tokenizer.tokens.length;n++){var r=this.tokenizer.tokens[n];if(!r.state.deleted){var i=r.activeState.value;t.push(Array.isArray(i)?i[0]:i)}}return t};function jt(e){e=e||{},e.tables=e.tables||{},e.empty||(Af(e.familyName,"When creating a new Font object, familyName is required."),Af(e.styleName,"When creating a new Font object, styleName is required."),Af(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Af(e.ascender,"When creating a new Font object, ascender is required."),Af(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new ks.GlyphSet(this,e.glyphs||[]),this.encoding=new aB(this),this.position=new Jp(this),this.substitution=new ii(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new jB(this)}})}jt.prototype.hasChar=function(e){return this.encoding.charToGlyphIndex(e)!==null};jt.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)};jt.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n};jt.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map(function(t){return t.script==="latn"?{script:"latn",tags:t.tags.filter(function(n){return e[n]})}:t})};jt.prototype.stringToGlyphs=function(e,t){var n=this,r=new ss,i=function(u){return n.charToGlyphIndex(u.char)};r.registerModifier("glyphIndex",null,i);var s=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;r.applyFeatures(this,s);for(var l=r.getTextGlyphs(e),a=l.length,o=new Array(a),c=this.glyphs.get(0),h=0;h<a;h+=1)o[h]=this.glyphs.get(l[h])||c;return o};jt.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)};jt.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n};jt.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""};jt.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0};jt.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};jt.prototype.forEachGlyph=function(e,t,n,r,i,s){t=t!==void 0?t:0,n=n!==void 0?n:0,r=r!==void 0?r:72,i=Object.assign({},this.defaultRenderOptions,i);var l=1/this.unitsPerEm*r,a=this.stringToGlyphs(e,i),o;if(i.kerning){var c=i.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(c,i.language)}for(var h=0;h<a.length;h+=1){var u=a[h];if(s.call(this,u,t,n,r,i),u.advanceWidth&&(t+=u.advanceWidth*l),i.kerning&&h<a.length-1){var f=o?this.position.getKerningValue(o,u.index,a[h+1].index):this.getKerningValue(u,a[h+1]);t+=f*l}i.letterSpacing?t+=i.letterSpacing*r:i.tracking&&(t+=i.tracking/1e3*r)}return t};jt.prototype.getPath=function(e,t,n,r,i){var s=new Vn;return this.forEachGlyph(e,t,n,r,i,function(l,a,o,c){var h=l.getPath(a,o,c,i,this);s.extend(h)}),s};jt.prototype.getPaths=function(e,t,n,r,i){var s=[];return this.forEachGlyph(e,t,n,r,i,function(l,a,o,c){var h=l.getPath(a,o,c,i,this);s.push(h)}),s};jt.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,function(){})};jt.prototype.draw=function(e,t,n,r,i,s){this.getPath(t,n,r,i,s).draw(e)};jt.prototype.drawPoints=function(e,t,n,r,i,s){this.forEachGlyph(t,n,r,i,s,function(l,a,o,c){l.drawPoints(e,a,o,c)})};jt.prototype.drawMetrics=function(e,t,n,r,i,s){this.forEachGlyph(t,n,r,i,s,function(l,a,o,c){l.drawMetrics(e,a,o,c)})};jt.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en};jt.prototype.validate=function(){var e=this;function t(r,i){}function n(r){var i=e.getEnglishName(r);i&&i.trim().length>0}n("fontFamily"),n("weightName"),n("manufacturer"),n("copyright"),n("version"),this.unitsPerEm>0};jt.prototype.toTables=function(){return ibe.fontToTable(this)};jt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};jt.prototype.toArrayBuffer=function(){for(var e=this.toTables(),t=e.encode(),n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0;i<t.length;i++)r[i]=t[i];return n};jt.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+n+".otf";var r=this.toArrayBuffer();if(obe())if(window.URL=window.URL||window.webkitURL,window.URL){var i=new DataView(r),s=new Blob([i],{type:"font/opentype"}),l=document.createElement("a");l.href=window.URL.createObjectURL(s),l.download=e;var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),l.dispatchEvent(a)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var o=require("fs"),c=lbe(r);o.writeFileSync(e,c)}};jt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};jt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};jt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function VB(e,t){var n=JSON.stringify(e),r=256;for(var i in t){var s=parseInt(i);if(!(!s||s<256)){if(JSON.stringify(t[i])===n)return s;r<=s&&(r=s+1)}}return t[r]=e,r}function _xe(e,t,n){var r=VB(t.name,n);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:r}]}function bxe(e,t,n){var r={},i=new Ne.Parser(e,t);return r.tag=i.parseTag(),r.minValue=i.parseFixed(),r.defaultValue=i.parseFixed(),r.maxValue=i.parseFixed(),i.skip("uShort",1),r.name=n[i.parseUShort()]||{},r}function Sxe(e,t,n,r){for(var i=VB(t.name,r),s=[{name:"nameID_"+e,type:"USHORT",value:i},{name:"flags_"+e,type:"USHORT",value:0}],l=0;l<n.length;++l){var a=n[l].tag;s.push({name:"axis_"+e+" "+a,type:"FIXED",value:t.coordinates[a]<<16})}return s}function xxe(e,t,n,r){var i={},s=new Ne.Parser(e,t);i.name=r[s.parseUShort()]||{},s.skip("uShort",1),i.coordinates={};for(var l=0;l<n.length;++l)i.coordinates[n[l].tag]=s.parseFixed();return i}function wxe(e,t){var n=new ke.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+e.axes.length*4}]);n.offsetToData=n.sizeOf();for(var r=0;r<e.axes.length;r++)n.fields=n.fields.concat(_xe(r,e.axes[r],t));for(var i=0;i<e.instances.length;i++)n.fields=n.fields.concat(Sxe(i,e.instances[i],e.axes,t));return n}function Cxe(e,t,n){var r=new Ne.Parser(e,t),i=r.parseULong();qe.argument(i===65536,"Unsupported fvar table version.");var s=r.parseOffset16();r.skip("uShort",1);for(var l=r.parseUShort(),a=r.parseUShort(),o=r.parseUShort(),c=r.parseUShort(),h=[],u=0;u<l;u++)h.push(bxe(e,t+s+u*a,n));for(var f=[],d=t+s+l*a,p=0;p<o;p++)f.push(xxe(e,d+p*c,h,n));return{axes:h,instances:f}}var Txe={make:wxe,parse:Cxe},Exe=function(){return{coverage:this.parsePointer(ce.coverage),attachPoints:this.parseList(ce.pointer(ce.uShortList))}},Pxe=function(){var e=this.parseUShort();if(qe.argument(e===1||e===2||e===3,"Unsupported CaretValue table version."),e===1)return{coordinate:this.parseShort()};if(e===2)return{pointindex:this.parseShort()};if(e===3)return{coordinate:this.parseShort()}},Ixe=function(){return this.parseList(ce.pointer(Pxe))},Oxe=function(){return{coverage:this.parsePointer(ce.coverage),ligGlyphs:this.parseList(ce.pointer(Ixe))}},kxe=function(){return this.parseUShort(),this.parseList(ce.pointer(ce.coverage))};function Axe(e,t){t=t||0;var n=new ce(e,t),r=n.parseVersion(1);qe.argument(r===1||r===1.2||r===1.3,"Unsupported GDEF table version.");var i={version:r,classDef:n.parsePointer(ce.classDef),attachList:n.parsePointer(Exe),ligCaretList:n.parsePointer(Oxe),markAttachClassDef:n.parsePointer(ce.classDef)};return r>=1.2&&(i.markGlyphSets=n.parsePointer(kxe)),i}var Rxe={parse:Axe},ns=new Array(10);ns[1]=function(){var t=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{posFormat:1,coverage:this.parsePointer(ce.coverage),value:this.parseValueRecord()};if(n===2)return{posFormat:2,coverage:this.parsePointer(ce.coverage),values:this.parseValueRecordList()};qe.assert(!1,"0x"+t.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};ns[2]=function(){var t=this.offset+this.relativeOffset,n=this.parseUShort();qe.assert(n===1||n===2,"0x"+t.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(ce.coverage),i=this.parseUShort(),s=this.parseUShort();if(n===1)return{posFormat:n,coverage:r,valueFormat1:i,valueFormat2:s,pairSets:this.parseList(ce.pointer(ce.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}})))};if(n===2){var l=this.parsePointer(ce.classDef),a=this.parsePointer(ce.classDef),o=this.parseUShort(),c=this.parseUShort();return{posFormat:n,coverage:r,valueFormat1:i,valueFormat2:s,classDef1:l,classDef2:a,class1Count:o,class2Count:c,classRecords:this.parseList(o,ce.list(c,function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}}))}}};ns[3]=function(){return{error:"GPOS Lookup 3 not supported"}};ns[4]=function(){return{error:"GPOS Lookup 4 not supported"}};ns[5]=function(){return{error:"GPOS Lookup 5 not supported"}};ns[6]=function(){return{error:"GPOS Lookup 6 not supported"}};ns[7]=function(){return{error:"GPOS Lookup 7 not supported"}};ns[8]=function(){return{error:"GPOS Lookup 8 not supported"}};ns[9]=function(){return{error:"GPOS Lookup 9 not supported"}};function Dxe(e,t){t=t||0;var n=new ce(e,t),r=n.parseVersion(1);return qe.argument(r===1||r===1.1,"Unsupported GPOS table version "+r),r===1?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(ns)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(ns),variations:n.parseFeatureVariationsList()}}var Mxe=new Array(10);function Lxe(e){return new ke.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ke.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new ke.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new ke.LookupList(e.lookups,Mxe)}])}var Fxe={parse:Dxe,make:Lxe};function Nxe(e){var t={};e.skip("uShort");var n=e.parseUShort();qe.argument(n===0,"Unsupported kern sub-table version."),e.skip("uShort",2);var r=e.parseUShort();e.skip("uShort",3);for(var i=0;i<r;i+=1){var s=e.parseUShort(),l=e.parseUShort(),a=e.parseShort();t[s+","+l]=a}return t}function jxe(e){var t={};e.skip("uShort");var n=e.parseULong();n>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var r=e.parseUShort(),i=r&255;if(e.skip("uShort"),i===0){var s=e.parseUShort();e.skip("uShort",3);for(var l=0;l<s;l+=1){var a=e.parseUShort(),o=e.parseUShort(),c=e.parseShort();t[a+","+o]=c}}return t}function Bxe(e,t){var n=new Ne.Parser(e,t),r=n.parseUShort();if(r===0)return Nxe(n);if(r===1)return jxe(n);throw new Error("Unsupported kern table version ("+r+").")}var Uxe={parse:Bxe};function $xe(e,t,n,r){for(var i=new Ne.Parser(e,t),s=r?i.parseUShort:i.parseULong,l=[],a=0;a<n+1;a+=1){var o=s.call(i);r&&(o*=2),l.push(o)}return l}var Gxe={parse:$xe};function Vxe(e,t){var n=require("fs");n.readFile(e,function(r,i){if(r)return t(r.message);t(null,abe(i))})}function Hxe(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function KA(e,t){for(var n=[],r=12,i=0;i<t;i+=1){var s=Ne.getTag(e,r),l=Ne.getULong(e,r+4),a=Ne.getULong(e,r+8),o=Ne.getULong(e,r+12);n.push({tag:s,checksum:l,offset:a,length:o,compression:!1}),r+=16}return n}function zxe(e,t){for(var n=[],r=44,i=0;i<t;i+=1){var s=Ne.getTag(e,r),l=Ne.getULong(e,r+4),a=Ne.getULong(e,r+8),o=Ne.getULong(e,r+12),c=void 0;a<o?c="WOFF":c=!1,n.push({tag:s,offset:l,compression:c,compressedLength:a,length:o}),r+=20}return n}function bn(e,t){if(t.compression==="WOFF"){var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(L1e(n,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");var i=new DataView(r.buffer,0);return{data:i,offset:0}}else return{data:e,offset:t.offset}}function Wxe(e,t){t=t??{};var n,r,i=new jt({empty:!0}),s=new DataView(e,0),l,a=[],o=Ne.getTag(s,0);if(o===String.fromCharCode(0,1,0,0)||o==="true"||o==="typ1")i.outlinesFormat="truetype",l=Ne.getUShort(s,4),a=KA(s,l);else if(o==="OTTO")i.outlinesFormat="cff",l=Ne.getUShort(s,4),a=KA(s,l);else if(o==="wOFF"){var c=Ne.getTag(s,4);if(c===String.fromCharCode(0,1,0,0))i.outlinesFormat="truetype";else if(c==="OTTO")i.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+o);l=Ne.getUShort(s,12),a=zxe(s,l)}else throw new Error("Unsupported OpenType signature "+o);for(var h,u,f,d,p,m,g,v,_,y,b,S,x=0;x<l;x+=1){var C=a[x],w=void 0;switch(C.tag){case"cmap":w=bn(s,C),i.tables.cmap=oB.parse(w.data,w.offset),i.encoding=new lB(i.tables.cmap);break;case"cvt ":w=bn(s,C),S=new Ne.Parser(w.data,w.offset),i.tables.cvt=S.parseShortList(C.length/2);break;case"fvar":u=C;break;case"fpgm":w=bn(s,C),S=new Ne.Parser(w.data,w.offset),i.tables.fpgm=S.parseByteList(C.length);break;case"head":w=bn(s,C),i.tables.head=yB.parse(w.data,w.offset),i.unitsPerEm=i.tables.head.unitsPerEm,n=i.tables.head.indexToLocFormat;break;case"hhea":w=bn(s,C),i.tables.hhea=_B.parse(w.data,w.offset),i.ascender=i.tables.hhea.ascender,i.descender=i.tables.hhea.descender,i.numberOfHMetrics=i.tables.hhea.numberOfHMetrics;break;case"hmtx":g=C;break;case"ltag":w=bn(s,C),r=SB.parse(w.data,w.offset);break;case"maxp":w=bn(s,C),i.tables.maxp=xB.parse(w.data,w.offset),i.numGlyphs=i.tables.maxp.numGlyphs;break;case"name":y=C;break;case"OS/2":w=bn(s,C),i.tables.os2=k2.parse(w.data,w.offset);break;case"post":w=bn(s,C),i.tables.post=IB.parse(w.data,w.offset),i.glyphNames=new CP(i.tables.post);break;case"prep":w=bn(s,C),S=new Ne.Parser(w.data,w.offset),i.tables.prep=S.parseByteList(C.length);break;case"glyf":f=C;break;case"loca":_=C;break;case"CFF ":h=C;break;case"kern":v=C;break;case"GDEF":d=C;break;case"GPOS":p=C;break;case"GSUB":m=C;break;case"meta":b=C;break}}var k=bn(s,y);if(i.tables.name=PB.parse(k.data,k.offset,r),i.names=i.tables.name,f&&_){var I=n===0,R=bn(s,_),j=Gxe.parse(R.data,R.offset,i.numGlyphs,I),G=bn(s,f);i.glyphs=LB.parse(G.data,G.offset,j,i,t)}else if(h){var B=bn(s,h);vB.parse(B.data,B.offset,i,t)}else throw new Error("Font doesn't contain TrueType or CFF outlines.");var $=bn(s,g);if(bB.parse(i,$.data,$.offset,i.numberOfHMetrics,i.numGlyphs,i.glyphs,t),n_e(i,t),v){var V=bn(s,v);i.kerningPairs=Uxe.parse(V.data,V.offset)}else i.kerningPairs={};if(d){var W=bn(s,d);i.tables.gdef=Rxe.parse(W.data,W.offset)}if(p){var M=bn(s,p);i.tables.gpos=Fxe.parse(M.data,M.offset),i.position.init()}if(m){var P=bn(s,m);i.tables.gsub=OB.parse(P.data,P.offset)}if(u){var O=bn(s,u);i.tables.fvar=Txe.parse(O.data,O.offset,i.names)}if(b){var A=bn(s,b);i.tables.meta=kB.parse(A.data,A.offset),i.metas=i.tables.meta}return i}function Yxe(e,t,n){n=n??{};var r=typeof window>"u",i=r&&!n.isUrl?Vxe:Hxe;return new Promise(function(s,l){i(e,function(a,o){if(a){if(t)return t(a);l(a)}var c;try{c=Wxe(o,n)}catch(h){if(t)return t(h,null);l(h)}if(t)return t(null,c);s(c)})})}const AS=new Map;async function Xxe(e){return AS.has(e)||AS.set(e,new Promise((t,n)=>Yxe(e,(r,i)=>r?n(r):t(i)))),AS.get(e)}(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(r,i,s){n.o(r,i)||Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:s})},n.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},n.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(i,"a",i),i},n.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},n.p="",n(n.s=4)})([function(e,t,n){var r=n(1),i=n(3);e.exports=class{constructor(s,l){this.source=l,this.A=new r(l.left,l.top),this.B=new r(l.right,l.top),this.C=new r(l.right,l.bottom),this.D=new r(l.left,l.bottom),this.Aleft=new r(l.left,l.top+l.height/3),this.Atop=new r(l.left+l.width/3,l.top),this.Btop=new r(l.right-l.width/3,l.top),this.Bright=new r(l.right,l.top+l.height/3),this.Cright=new r(l.right,l.bottom-l.height/3),this.Cbottom=new r(l.right-l.width/3,l.bottom),this.Dbottom=new r(l.left+l.width/3,l.bottom),this.Dleft=new r(l.left,l.bottom-l.height/3),this.ABx=0,this.ABy=0,this.CDx=0,this.CDy=0,this.BCx=0,this.BCy=0,this.ADx=0,this.ADy=0,this.STEPS=10,this.distortX=0,this.distortY1=0,this.distortY2=0,this.T1=1/3,this.T2=2/3,this.kAB=0,this.kBC=0,this.kCD=0,this.kAD=0,this.angle,this.sin,this.cos,this.kt,this.applyParameters(s)}applyParameters(s){var l=this.source,a=this._parameters=new i(s);this.angle=a.bend*Math.PI/2,this.sin=Math.sin(this.angle),this.cos=Math.cos(this.angle),this.kt=1+Math.pow(a.bend,4),this.distortX=.5*a.distortV*l.width;var o=.5*a.distortH*l.height;switch(this.distortY1=o*(1-a.distortV),this.distortY2=o*(1+a.distortV),this.kAB=1-a.distortV,this.kBC=1+a.distortH,this.kCD=1+a.distortV,this.kAD=1-a.distortH,this.setAnchors(),a.type){case"WARP_ARC":this.setArc();break;case"WARP_ARC_LOWER":this.setArcLower();break;case"WARP_ARC_UPPER":this.setArcUpper();break;case"WARP_ARCH":this.setArch();break;case"WARP_BULGE":this.setBulge();break;case"WARP_FLAG":this.setFlag();break;case"WARP_FISH":this.setFish();break;case"WARP_RISE":this.setRise();break;case"WARP_INFLATE":this.setInflate();break;case"WARP_SQUEEZE":this.setSqueeze();break;case"WARP_WAVE_LOWER":this.setWaveLower();break;case"WARP_WAVE_UPPER":this.setWaveUpper()}}setAnchors(){this.A.x=this.source.left+this.distortX,this.B.x=this.source.right-this.distortX,this.C.x=this.source.right+this.distortX,this.D.x=this.source.left-this.distortX,this.A.y=this.source.top+this.distortY1,this.B.y=this.source.top-this.distortY1,this.C.y=this.source.bottom+this.distortY2,this.D.y=this.source.bottom-this.distortY2}setControls(){this.Atop.x=this.A.x+this.ABx,this.Atop.y=this.A.y+this.ABy,this.Btop.x=this.B.x-this.ABx,this.Btop.y=this.B.y-this.ABy,this.Dbottom.x=this.D.x+this.CDx,this.Dbottom.y=this.D.y+this.CDy,this.Cbottom.x=this.C.x-this.CDx,this.Cbottom.y=this.C.y-this.CDy,this.Bright.x=this.B.x+this.BCx,this.Bright.y=this.B.y+this.BCy,this.Cright.x=this.C.x-this.BCx,this.Cright.y=this.C.y-this.BCy,this.Aleft.x=this.A.x+this.ADx,this.Aleft.y=this.A.y+this.ADy,this.Dleft.x=this.D.x-this.ADx,this.Dleft.y=this.D.y-this.ADy}changeCubic(s,l,a,o){let c=this._changePoint(s),h=this._changePoint(o),u=this.getPointOn(1/3,s,o,l,a),f=this.getPointOn(2/3,s,o,l,a),d=this._changePoint(u),p=this._changePoint(f);return this.getNewSegment(c,h,d,p)}changePoint(s){var l=this._changePoint(s);return[l.x,l.y]}_changePoint(s){let l=this.A,a=this.Atop,o=this.Aleft,c=this.B,h=this.Btop,u=this.Bright,f=this.C,d=this.Cright,p=this.Cbottom,m=this.D,g=this.Dbottom,v=this.Dleft;var _=(s.x-this.source.x)/this.source.width,y=(s.y-this.source.y)/this.source.height,b=1-y,S=this.getPointOn(y,l,m,o,v),x=this.getPointOn(y,c,f,u,d),C=new r(a.x*b+g.x*y,a.y*b+g.y*y),w=new r(h.x*b+p.x*y,h.y*b+p.y*y),k=this.getPointOn(_,S,x,C,w);return new r(k.x,k.y)}getPointOn(s,l,a,o,c){var h=new r,u=s*s*s,f=s*s;return h.x=u*(a.x+3*(o.x-c.x)-l.x)+3*f*(l.x-2*o.x+c.x)+3*s*(o.x-l.x)+l.x,h.y=u*(a.y+3*(o.y-c.y)-l.y)+3*f*(l.y-2*o.y+c.y)+3*s*(o.y-l.y)+l.y,h}setArc(){var s=this._parameters,l=this.source,a=1-s.distortV;s.bend>0?(this.A.x-=a*(l.height-this.distortY1)*this.sin,this.B.x+=a*(l.height+this.distortY1)*this.sin,this.A.y+=(l.height-this.distortY1)*(1-this.cos),this.B.y+=(l.height+this.distortY1)*(1-this.cos),this.C.x-=this.distortY2*this.sin,this.D.x-=this.distortY2*this.sin,this.C.y+=this.distortY2*(this.cos-1),this.D.y-=this.distortY2*(this.cos-1)):s.bend<0&&(this.D.x+=a*(l.height-this.distortY2)*this.sin,this.C.x-=a*(l.height+this.distortY2)*this.sin,this.D.y+=(l.height-this.distortY2)*(this.cos-1),this.C.y+=(l.height+this.distortY2)*(this.cos-1),this.A.x+=this.distortY1*this.sin,this.B.x+=this.distortY1*this.sin,this.A.y-=this.distortY1*(1-this.cos),this.B.y+=this.distortY1*(1-this.cos)),this.calculateArms(),this.setControls(),this.Atop.x+=this.ABx*(this.cos*this.kt-1),this.Atop.y-=this.ABx*this.sin*this.kt,this.Btop.x+=this.ABx*(1-this.cos*this.kt),this.Btop.y-=this.ABx*this.sin*this.kt,this.Dbottom.x+=this.CDx*(this.cos*this.kt-1),this.Dbottom.y-=this.CDx*this.sin*this.kt,this.Cbottom.x+=this.CDx*(1-this.cos*this.kt),this.Cbottom.y-=this.CDx*this.sin*this.kt}setFish(){var s=this._parameters;this.calculateArms(),this.setControls(),this.Atop.y-=2*s.bend*this.kAB*(2*this.ADy+this.BCy),this.Btop.y+=2*s.bend*this.kAB*(this.ADy+2*this.BCy),this.Dbottom.y+=2*s.bend*this.kCD*(2*this.ADy+this.BCy),this.Cbottom.y-=2*s.bend*this.kCD*(this.ADy+2*this.BCy)}setFlag(){this.calculateArms(),this.setControls();var s=this._parameters;this.Atop.y+=3*s.bend*this.kAB*(this.ADy+this.BCy),this.Btop.y-=3*s.bend*this.kAB*(this.ADy+this.BCy),this.Dbottom.y+=3*s.bend*this.kCD*(this.ADy+this.BCy),this.Cbottom.y-=3*s.bend*this.kCD*(this.ADy+this.BCy)}setBulge(){this.calculateArms(),this.setControls(),this._parameters,this.Atop.x+=this.ABx*(this.cos*this.kt-1),this.Atop.y-=this.ABx*this.sin*this.kt,this.Btop.x+=this.ABx*(1-this.cos*this.kt),this.Btop.y-=this.ABx*this.sin*this.kt,this.Dbottom.x+=this.CDx*(this.cos*this.kt-1),this.Dbottom.y+=this.CDx*this.sin*this.kt,this.Cbottom.x+=this.CDx*(1-this.cos*this.kt),this.Cbottom.y+=this.CDx*this.sin*this.kt}setArch(){this.calculateArms(),this.setControls(),this._parameters,this.Atop.x+=this.ABx*(this.cos*this.kt-1),this.Atop.y-=this.ABx*this.sin*this.kt,this.Btop.x+=this.ABx*(1-this.cos*this.kt),this.Btop.y-=this.ABx*this.sin*this.kt,this.Dbottom.x+=this.CDx*(this.cos*this.kt-1),this.Dbottom.y-=this.CDx*this.sin*this.kt,this.Cbottom.x+=this.CDx*(1-this.cos*this.kt),this.Cbottom.y-=this.CDx*this.sin*this.kt}setArcLower(){this.calculateArms(),this.setControls(),this._parameters,this.Dbottom.x+=this.CDx*(this.cos*this.kt-1),this.Dbottom.y+=this.CDx*this.sin*this.kt,this.Cbottom.x+=this.CDx*(1-this.cos*this.kt),this.Cbottom.y+=this.CDx*this.sin*this.kt}setArcUpper(){this.calculateArms(),this.setControls(),this._parameters,this.Atop.x+=this.ABx*(this.cos*this.kt-1),this.Atop.y-=this.ABx*this.sin*this.kt,this.Btop.x+=this.ABx*(1-this.cos*this.kt),this.Btop.y-=this.ABx*this.sin*this.kt}setSqueeze(){this.calculateArms(),this.setControls();var s=this._parameters;this.Atop.y-=s.bend*this.kAB*this.ADy,this.Btop.y-=s.bend*this.kAB*this.BCy,this.Dbottom.y+=s.bend*this.kCD*this.ADy,this.Cbottom.y+=s.bend*this.kCD*this.BCy,this.Bright.x-=s.bend*this.kBC*this.ABx,this.Cright.x-=s.bend*this.kBC*this.CDx,this.Aleft.x+=s.bend*this.kAD*this.ABx,this.Dleft.x+=s.bend*this.kAD*this.CDx}setInflate(){this.calculateArms(),this.setControls();var s=this._parameters,l=(this.ADy+this.BCy)/2,a=(this.ABx+this.CDx)/2;this.Atop.y-=s.bend*this.kAB*l,this.Btop.y-=s.bend*this.kAB*l,this.Dbottom.y+=s.bend*this.kCD*l,this.Cbottom.y+=s.bend*this.kCD*l,this.Bright.x+=s.bend*this.kBC*a,this.Cright.x+=s.bend*this.kBC*a,this.Aleft.x-=s.bend*this.kAD*a,this.Dleft.x-=s.bend*this.kAD*a}setRise(){var s=this._parameters;this.A.y+=s.bend*this.kAB*this.source.height,this.D.y+=s.bend*this.kCD*this.source.height,this.B.y-=s.bend*this.kAB*this.source.height,this.C.y-=s.bend*this.kCD*this.source.height,this.calculateArms(),this.setControls();var l=this.ADy+this.BCy;this.Atop.y+=s.bend*this.kAB*l,this.Btop.y-=s.bend*this.kAB*l,this.Dbottom.y+=s.bend*this.kCD*l,this.Cbottom.y-=s.bend*this.kCD*l}setWaveUpper(){this.calculateArms(),this.setControls();var s=this._parameters;this.Atop.y+=3*s.bend*this.kAB*(this.ADy+this.BCy),this.Btop.y-=3*s.bend*this.kAB*(this.ADy+this.BCy)}setWaveLower(){this.calculateArms(),this.setControls();var s=this._parameters;this.Dbottom.y+=3*s.bend*this.kCD*(this.ADy+this.BCy),this.Cbottom.y-=3*s.bend*this.kCD*(this.ADy+this.BCy)}calculateArms(){this.ABx=(this.B.x-this.A.x)/3,this.ABy=(this.B.y-this.A.y)/3,this.CDx=(this.C.x-this.D.x)/3,this.CDy=(this.C.y-this.D.y)/3,this.BCx=(this.C.x-this.B.x)/3,this.BCy=(this.C.y-this.B.y)/3,this.ADx=(this.D.x-this.A.x)/3,this.ADy=(this.D.y-this.A.y)/3}getNewSegment(s,l,a,o){var c=this.T1,h=c*c*c,u=1-c,f=u*u*u,d=this.T2,p=d*d*d,m=1-d,g=m*m*m,v=3*c*u,_={};_.x=(a.x-f*s.x-h*l.x)/v,_.y=(a.y-f*s.y-h*l.y)/v;var y=3*d*m,b={};b.x=(o.x-g*s.x-p*l.x)/y,b.y=(o.y-g*s.y-p*l.y)/y;var S={};S.x=(d*_.x-c*b.x)/(u*b.x-m*_.x),S.y=(d*_.y-c*b.y)/(u*b.y-m*_.y),isNaN(S.x)&&(S.x=0),isNaN(S.y)&&(S.y=0);var x={},C={};C.x=_.x/(u*S.x+c),C.y=_.y/(u*S.y+c),x.x=S.x*C.x,x.y=S.y*C.y;var w=new r(x.x,x.y),k=new r(C.x,C.y);return[w.x,w.y,k.x,k.y,l.x,l.y]}}},function(e,t){e.exports=class{constructor(n=0,r=0){if(typeof n!="number"||typeof r!="number")throw new Exception("Invalid points");let i=n||0,s=r||0;i&&(i=parseInt(1e3*i)/1e3),s&&(s=parseInt(1e3*s)/1e3),this._props=[i,s],this[0]=i,this[1]=s}set x(n){this[0]=n,this._props[0]=n}set y(n){this[1]=n,this._props[1]=n}get x(){return this._props[0]}get y(){return this._props[1]}}},function(e,t){e.exports=class{constructor(n,r,i,s){this.x=n,this.y=r,this.width=i,this.height=s,this.top=r,this.bottom=r+s,this.left=n,this.right=n+i}}},function(e,t,n){n(0),e.exports=class{constructor(r){this.type=r.type||0,this.bend=r.bend||0,this.distortV=r.distortV||0,this.distortH=r.distortH||0,this.vertical=r.vertical||!1}}},function(e,t,n){var r=n(1),i=n(0),s=n(2),l="C",a="Q",o="L",c="M",h="Z",u=class{constructor(f){this.data=[],this.commands=[],this.parseString(f)}parseString(f){var d=[],p=[];f.match(/[A-Za-z][0-9\.\s\,\-]+\d/g).forEach(m=>{var g=m[0],v=m.match(/[\d\.\-]+/g);d.push(g),p.push(...v.map(parseFloat))}),this.commands=d,this.data=p}scale(f,d=0){d==0&&(d=f);const p=this.data;for(let m=0;m<p.length;m+=2)p[m]*=f,p[m+1]*=d}warp(f){let d=new i(f,this.calcRectangle()),p=this.commands,m=this.data,g=[],v=new r,_=new r,y=new r,b=new r,S=0,x=new r;for(let C=0;C<p.length;C++)switch(p[C]){case"L":p[C]=l,v=new r((2*b[0]+m[S])/3,(2*b[1]+m[S+1])/3),_=new r((b[0]+2*m[S])/3,(b[1]+2*m[S+1])/3),x=new r(m[S],m[S+1]),g=g.concat(d.changeCubic(b,v,_,x)),b=x,S+=2;break;case"Q":p[C]=l,v=new r((2*m[S]+b.x)/3,(2*m[S+1]+b.y)/3),_=new r((2*m[S]+m[S+2])/3,(2*m[S+1]+m[S+3])/3),x=new r(m[S+2],m[S+3]),g=g.concat(d.changeCubic(b,v,_,x)),b=x,S+=4;break;case"M":b=y=new r(m[S],m[S+1]),g=g.concat(d.changePoint(b)),S+=2;break;case"C":g=g.concat(d.changeCubic(b,new r(m[S],m[S+1]),new r(m[S+2],m[S+3]),new r(m[S+4],m[S+5]))),b=new r(m[S+4],m[S+5]),S+=6;break;case h:b=y}this.data=g}output(){var f=[],d=this.data.slice();for(let p=0;p<this.commands.length;p++){let m=this.commands[p],g=0;switch(m){case"M":case"L":g=2;break;case"Q":g=4;break;case"C":g=6}f.push(m+d.splice(0,g).join(" "))}return f.join(" ")}calcRectangle(){let f=this.commands,d=this.data;for(var p,m,g={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0},v=0,_=0;_<f.length;_++){switch(f[_]){case c:case o:p=d[v],m=d[v+1],v+=2;break;case a:p=d[v+2],m=d[v+3],v+=4;break;case l:p=d[v+4],m=d[v+5],v+=6}g.xMin=Math.min(p,g.xMin),g.xMax=Math.max(p,g.xMax),g.yMin=Math.min(m,g.yMin),g.yMax=Math.max(m,g.yMax)}return g.xMax==-1/0?null:new s(g.xMin,g.yMin,g.xMax-g.xMin,g.yMax-g.yMin)}};e.exports=u,typeof window<"u"&&(window.__PathWarp=u)}]);const HB=new Set(["arc","arcLower","arcUpper","arch","bulge","flag","fish","rise","inflate","squeeze","waveLower","waveUpper"]),qxe={arc:"WARP_ARC",arcLower:"WARP_ARC_LOWER",arcUpper:"WARP_ARC_UPPER",arch:"WARP_ARCH",bulge:"WARP_BULGE",flag:"WARP_FLAG",fish:"WARP_FISH",rise:"WARP_RISE",inflate:"WARP_INFLATE",squeeze:"WARP_SQUEEZE",waveLower:"WARP_WAVE_LOWER",waveUpper:"WARP_WAVE_UPPER"};async function l6e({fontUrl:e,text:t,fontSize:n,type:r,bend:i,opacity:s,fill:l}){const a=e?await Xxe(e):null;if(!a)return null;const c=a.getPath(t,0,0,n).getBoundingBox(),h=-c.x1,u=-c.y1,f=a.getPath(t,h,u,n),d=f.toDOMElement(3),p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.appendChild(d);const m=new __PathWarp(f.toPathData(3));m.warp({type:qxe[r],bend:i,distortV:0,distortH:0}),d.setAttribute("d",m.output()),document.body.appendChild(p);const g=p.getBBox();p.setAttribute("opacity",`${s}`),p.setAttribute("fill",l),p.setAttribute("width",`${g.width}`),p.setAttribute("height",`${g.height}`),p.setAttribute("viewBox",`${g.x} ${g.y} ${g.width} ${g.height}`),document.body.removeChild(p);const v=new window.Image,_=btoa(new XMLSerializer().serializeToString(p));return v.src=`data:image/svg+xml;base64,${_}`,{img:v,width:g.width,height:g.height}}function Kxe(e){return Qxe(e)||Jxe(e)}function Qxe(e){var t;return((t=e==null?void 0:e.custom)==null?void 0:t.transformation)==="circle"}function Jxe(e){var t;return e&&HB.has((t=e==null?void 0:e.custom)==null?void 0:t.transformation)}var Gr={},AP={exports:{}},D1={},zB={},ft={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof Wr<"u"?Wr:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.1",isBrowser:n(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return e.Konva.angleDeg?i*t:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(i){e.glob.Konva=i}};const r=i=>{e.Konva[i.prototype.getClassName()]=i};e._registerNode=r,e.Konva._injectGlobal(e.Konva)})(ft);var un={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=ft;class n{constructor(b=[1,0,0,1,0,0]){this.dirty=!1,this.m=b&&b.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(b){b.m[0]=this.m[0],b.m[1]=this.m[1],b.m[2]=this.m[2],b.m[3]=this.m[3],b.m[4]=this.m[4],b.m[5]=this.m[5]}point(b){var S=this.m;return{x:S[0]*b.x+S[2]*b.y+S[4],y:S[1]*b.x+S[3]*b.y+S[5]}}translate(b,S){return this.m[4]+=this.m[0]*b+this.m[2]*S,this.m[5]+=this.m[1]*b+this.m[3]*S,this}scale(b,S){return this.m[0]*=b,this.m[1]*=b,this.m[2]*=S,this.m[3]*=S,this}rotate(b){var S=Math.cos(b),x=Math.sin(b),C=this.m[0]*S+this.m[2]*x,w=this.m[1]*S+this.m[3]*x,k=this.m[0]*-x+this.m[2]*S,I=this.m[1]*-x+this.m[3]*S;return this.m[0]=C,this.m[1]=w,this.m[2]=k,this.m[3]=I,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(b,S){var x=this.m[0]+this.m[2]*S,C=this.m[1]+this.m[3]*S,w=this.m[2]+this.m[0]*b,k=this.m[3]+this.m[1]*b;return this.m[0]=x,this.m[1]=C,this.m[2]=w,this.m[3]=k,this}multiply(b){var S=this.m[0]*b.m[0]+this.m[2]*b.m[1],x=this.m[1]*b.m[0]+this.m[3]*b.m[1],C=this.m[0]*b.m[2]+this.m[2]*b.m[3],w=this.m[1]*b.m[2]+this.m[3]*b.m[3],k=this.m[0]*b.m[4]+this.m[2]*b.m[5]+this.m[4],I=this.m[1]*b.m[4]+this.m[3]*b.m[5]+this.m[5];return this.m[0]=S,this.m[1]=x,this.m[2]=C,this.m[3]=w,this.m[4]=k,this.m[5]=I,this}invert(){var b=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*b,x=-this.m[1]*b,C=-this.m[2]*b,w=this.m[0]*b,k=b*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),I=b*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=x,this.m[2]=C,this.m[3]=w,this.m[4]=k,this.m[5]=I,this}getMatrix(){return this.m}decompose(){var b=this.m[0],S=this.m[1],x=this.m[2],C=this.m[3],w=this.m[4],k=this.m[5],I=b*C-S*x;let R={x:w,y:k,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(b!=0||S!=0){var j=Math.sqrt(b*b+S*S);R.rotation=S>0?Math.acos(b/j):-Math.acos(b/j),R.scaleX=j,R.scaleY=I/j,R.skewX=(b*x+S*C)/I,R.skewY=0}else if(x!=0||C!=0){var G=Math.sqrt(x*x+C*C);R.rotation=Math.PI/2-(C>0?Math.acos(-x/G):-Math.acos(x/G)),R.scaleX=I/G,R.scaleY=G,R.skewX=0,R.skewY=(b*x+S*C)/I}return R.rotation=e.Util._getRotation(R.rotation),R}}e.Transform=n;var r="[object Array]",i="[object Number]",s="[object String]",l="[object Boolean]",a=Math.PI/180,o=180/Math.PI,c="#",h="",u="0",f="Konva warning: ",d="Konva error: ",p="rgb(",m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},g=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,v=[];const _=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(y){setTimeout(y,60)};e.Util={_isElement(y){return!!(y&&y.nodeType==1)},_isFunction(y){return!!(y&&y.constructor&&y.call&&y.apply)},_isPlainObject(y){return!!y&&y.constructor===Object},_isArray(y){return Object.prototype.toString.call(y)===r},_isNumber(y){return Object.prototype.toString.call(y)===i&&!isNaN(y)&&isFinite(y)},_isString(y){return Object.prototype.toString.call(y)===s},_isBoolean(y){return Object.prototype.toString.call(y)===l},isObject(y){return y instanceof Object},isValidSelector(y){if(typeof y!="string")return!1;var b=y[0];return b==="#"||b==="."||b===b.toUpperCase()},_sign(y){return y===0||y>0?1:-1},requestAnimFrame(y){v.push(y),v.length===1&&_(function(){const b=v;v=[],b.forEach(function(S){S()})})},createCanvasElement(){var y=document.createElement("canvas");try{y.style=y.style||{}}catch{}return y},createImageElement(){return document.createElement("img")},_isInDocument(y){for(;y=y.parentNode;)if(y==document)return!0;return!1},_urlToImage(y,b){var S=e.Util.createImageElement();S.onload=function(){b(S)},S.src=y},_rgbToHex(y,b,S){return((1<<24)+(y<<16)+(b<<8)+S).toString(16).slice(1)},_hexToRgb(y){y=y.replace(c,h);var b=parseInt(y,16);return{r:b>>16&255,g:b>>8&255,b:b&255}},getRandomColor(){for(var y=(Math.random()*16777215<<0).toString(16);y.length<6;)y=u+y;return c+y},getRGB(y){var b;return y in m?(b=m[y],{r:b[0],g:b[1],b:b[2]}):y[0]===c?this._hexToRgb(y.substring(1)):y.substr(0,4)===p?(b=g.exec(y.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},colorToRGBA(y){return y=y||"black",e.Util._namedColorToRBA(y)||e.Util._hex3ColorToRGBA(y)||e.Util._hex4ColorToRGBA(y)||e.Util._hex6ColorToRGBA(y)||e.Util._hex8ColorToRGBA(y)||e.Util._rgbColorToRGBA(y)||e.Util._rgbaColorToRGBA(y)||e.Util._hslColorToRGBA(y)},_namedColorToRBA(y){var b=m[y.toLowerCase()];return b?{r:b[0],g:b[1],b:b[2],a:1}:null},_rgbColorToRGBA(y){if(y.indexOf("rgb(")===0){y=y.match(/rgb\(([^)]+)\)/)[1];var b=y.split(/ *, */).map(Number);return{r:b[0],g:b[1],b:b[2],a:1}}},_rgbaColorToRGBA(y){if(y.indexOf("rgba(")===0){y=y.match(/rgba\(([^)]+)\)/)[1];var b=y.split(/ *, */).map((S,x)=>S.slice(-1)==="%"?x===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:b[0],g:b[1],b:b[2],a:b[3]}}},_hex8ColorToRGBA(y){if(y[0]==="#"&&y.length===9)return{r:parseInt(y.slice(1,3),16),g:parseInt(y.slice(3,5),16),b:parseInt(y.slice(5,7),16),a:parseInt(y.slice(7,9),16)/255}},_hex6ColorToRGBA(y){if(y[0]==="#"&&y.length===7)return{r:parseInt(y.slice(1,3),16),g:parseInt(y.slice(3,5),16),b:parseInt(y.slice(5,7),16),a:1}},_hex4ColorToRGBA(y){if(y[0]==="#"&&y.length===5)return{r:parseInt(y[1]+y[1],16),g:parseInt(y[2]+y[2],16),b:parseInt(y[3]+y[3],16),a:parseInt(y[4]+y[4],16)/255}},_hex3ColorToRGBA(y){if(y[0]==="#"&&y.length===4)return{r:parseInt(y[1]+y[1],16),g:parseInt(y[2]+y[2],16),b:parseInt(y[3]+y[3],16),a:1}},_hslColorToRGBA(y){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(y)){const[b,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(y),x=Number(S[0])/360,C=Number(S[1])/100,w=Number(S[2])/100;let k,I,R;if(C===0)return R=w*255,{r:Math.round(R),g:Math.round(R),b:Math.round(R),a:1};w<.5?k=w*(1+C):k=w+C-w*C;const j=2*w-k,G=[0,0,0];for(let B=0;B<3;B++)I=x+1/3*-(B-1),I<0&&I++,I>1&&I--,6*I<1?R=j+(k-j)*6*I:2*I<1?R=k:3*I<2?R=j+(k-j)*(2/3-I)*6:R=j,G[B]=R*255;return{r:Math.round(G[0]),g:Math.round(G[1]),b:Math.round(G[2]),a:1}}},haveIntersection(y,b){return!(b.x>y.x+y.width||b.x+b.width<y.x||b.y>y.y+y.height||b.y+b.height<y.y)},cloneObject(y){var b={};for(var S in y)this._isPlainObject(y[S])?b[S]=this.cloneObject(y[S]):this._isArray(y[S])?b[S]=this.cloneArray(y[S]):b[S]=y[S];return b},cloneArray(y){return y.slice(0)},degToRad(y){return y*a},radToDeg(y){return y*o},_degToRad(y){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(y)},_radToDeg(y){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(y)},_getRotation(y){return t.Konva.angleDeg?e.Util.radToDeg(y):y},_capitalize(y){return y.charAt(0).toUpperCase()+y.slice(1)},throw(y){throw new Error(d+y)},error(y){console.error(d+y)},warn(y){t.Konva.showWarnings&&console.warn(f+y)},each(y,b){for(var S in y)b(S,y[S])},_inRange(y,b,S){return b<=y&&y<S},_getProjectionToSegment(y,b,S,x,C,w){var k,I,R,j=(y-S)*(y-S)+(b-x)*(b-x);if(j==0)k=y,I=b,R=(C-S)*(C-S)+(w-x)*(w-x);else{var G=((C-y)*(S-y)+(w-b)*(x-b))/j;G<0?(k=y,I=b,R=(y-C)*(y-C)+(b-w)*(b-w)):G>1?(k=S,I=x,R=(S-C)*(S-C)+(x-w)*(x-w)):(k=y+G*(S-y),I=b+G*(x-b),R=(k-C)*(k-C)+(I-w)*(I-w))}return[k,I,R]},_getProjectionToLine(y,b,S){var x=e.Util.cloneObject(y),C=Number.MAX_VALUE;return b.forEach(function(w,k){if(!(!S&&k===b.length-1)){var I=b[(k+1)%b.length],R=e.Util._getProjectionToSegment(w.x,w.y,I.x,I.y,y.x,y.y),j=R[0],G=R[1],B=R[2];B<C&&(x.x=j,x.y=G,C=B)}}),x},_prepareArrayForTween(y,b,S){var x,C=[],w=[];if(y.length>b.length){var k=b;b=y,y=k}for(x=0;x<y.length;x+=2)C.push({x:y[x],y:y[x+1]});for(x=0;x<b.length;x+=2)w.push({x:b[x],y:b[x+1]});var I=[];return w.forEach(function(R){var j=e.Util._getProjectionToLine(R,C,S);I.push(j.x),I.push(j.y)}),I},_prepareToStringify(y){var b;y.visitedByCircularReferenceRemoval=!0;for(var S in y)if(y.hasOwnProperty(S)&&y[S]&&typeof y[S]=="object"){if(b=Object.getOwnPropertyDescriptor(y,S),y[S].visitedByCircularReferenceRemoval||e.Util._isElement(y[S]))if(b.configurable)delete y[S];else return null;else if(e.Util._prepareToStringify(y[S])===null)if(b.configurable)delete y[S];else return null}return delete y.visitedByCircularReferenceRemoval,y},_assign(y,b){for(var S in b)y[S]=b[S];return y},_getFirstPointerId(y){return y.touches?y.changedTouches[0].identifier:y.pointerId||999},releaseCanvas(...y){t.Konva.releaseCanvasOnDestroy&&y.forEach(b=>{b.width=0,b.height=0})},drawRoundedRectPath(y,b,S,x){let C=0,w=0,k=0,I=0;typeof x=="number"?C=w=k=I=Math.min(x,b/2,S/2):(C=Math.min(x[0]||0,b/2,S/2),w=Math.min(x[1]||0,b/2,S/2),I=Math.min(x[2]||0,b/2,S/2),k=Math.min(x[3]||0,b/2,S/2)),y.moveTo(C,0),y.lineTo(b-w,0),y.arc(b-w,w,w,Math.PI*3/2,0,!1),y.lineTo(b,S-I),y.arc(b-I,S-I,I,0,Math.PI/2,!1),y.lineTo(k,S),y.arc(k,S-k,k,Math.PI/2,Math.PI,!1),y.lineTo(0,C),y.arc(C,C,C,Math.PI,Math.PI*3/2,!1)}}})(un);var en={},ut={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.getComponentValidator=je.getBooleanValidator=je.getNumberArrayValidator=je.getFunctionValidator=je.getStringOrGradientValidator=je.getStringValidator=je.getNumberOrAutoValidator=je.getNumberOrArrayOfNumbersValidator=je.getNumberValidator=je.alphaComponent=je.RGBComponent=void 0;const Oo=ft,gn=un;function ko(e){return gn.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||gn.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function Zxe(e){return e>255?255:e<0?0:Math.round(e)}je.RGBComponent=Zxe;function ewe(e){return e>1?1:e<1e-4?1e-4:e}je.alphaComponent=ewe;function twe(){if(Oo.Konva.isUnminified)return function(e,t){return gn.Util._isNumber(e)||gn.Util.warn(ko(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}je.getNumberValidator=twe;function nwe(e){if(Oo.Konva.isUnminified)return function(t,n){let r=gn.Util._isNumber(t),i=gn.Util._isArray(t)&&t.length==e;return!r&&!i&&gn.Util.warn(ko(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}je.getNumberOrArrayOfNumbersValidator=nwe;function rwe(){if(Oo.Konva.isUnminified)return function(e,t){var n=gn.Util._isNumber(e),r=e==="auto";return n||r||gn.Util.warn(ko(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}je.getNumberOrAutoValidator=rwe;function iwe(){if(Oo.Konva.isUnminified)return function(e,t){return gn.Util._isString(e)||gn.Util.warn(ko(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}je.getStringValidator=iwe;function swe(){if(Oo.Konva.isUnminified)return function(e,t){const n=gn.Util._isString(e),r=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return n||r||gn.Util.warn(ko(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}je.getStringOrGradientValidator=swe;function owe(){if(Oo.Konva.isUnminified)return function(e,t){return gn.Util._isFunction(e)||gn.Util.warn(ko(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}je.getFunctionValidator=owe;function awe(){if(Oo.Konva.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(gn.Util._isArray(e)?e.forEach(function(r){gn.Util._isNumber(r)||gn.Util.warn('"'+t+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):gn.Util.warn(ko(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}je.getNumberArrayValidator=awe;function lwe(){if(Oo.Konva.isUnminified)return function(e,t){var n=e===!0||e===!1;return n||gn.Util.warn(ko(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}je.getBooleanValidator=lwe;function cwe(e){if(Oo.Konva.isUnminified)return function(t,n){return t==null||gn.Util.isObject(t)||gn.Util.warn(ko(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}je.getComponentValidator=cwe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=un,n=je;var r="get",i="set";e.Factory={addGetterSetter(s,l,a,o,c){e.Factory.addGetter(s,l,a),e.Factory.addSetter(s,l,o,c),e.Factory.addOverloadedGetterSetter(s,l)},addGetter(s,l,a){var o=r+t.Util._capitalize(l);s.prototype[o]=s.prototype[o]||function(){var c=this.attrs[l];return c===void 0?a:c}},addSetter(s,l,a,o){var c=i+t.Util._capitalize(l);s.prototype[c]||e.Factory.overWriteSetter(s,l,a,o)},overWriteSetter(s,l,a,o){var c=i+t.Util._capitalize(l);s.prototype[c]=function(h){return a&&h!==void 0&&h!==null&&(h=a.call(this,h,l)),this._setAttr(l,h),o&&o.call(this),this}},addComponentsGetterSetter(s,l,a,o,c){var h=a.length,u=t.Util._capitalize,f=r+u(l),d=i+u(l),p,m;s.prototype[f]=function(){var v={};for(p=0;p<h;p++)m=a[p],v[m]=this.getAttr(l+u(m));return v};var g=(0,n.getComponentValidator)(a);s.prototype[d]=function(v){var _=this.attrs[l],y;o&&(v=o.call(this,v)),g&&g.call(this,v,l);for(y in v)v.hasOwnProperty(y)&&this._setAttr(l+u(y),v[y]);return v||a.forEach(b=>{this._setAttr(l+u(b),void 0)}),this._fireChangeEvent(l,_,v),c&&c.call(this),this},e.Factory.addOverloadedGetterSetter(s,l)},addOverloadedGetterSetter(s,l){var a=t.Util._capitalize(l),o=i+a,c=r+a;s.prototype[l]=function(){return arguments.length?(this[o](arguments[0]),this):this[c]()}},addDeprecatedGetterSetter(s,l,a,o){t.Util.error("Adding deprecated "+l);var c=r+t.Util._capitalize(l),h=l+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[c]=function(){t.Util.error(h);var u=this.attrs[l];return u===void 0?a:u},e.Factory.addSetter(s,l,o,function(){t.Util.error(h)}),e.Factory.addOverloadedGetterSetter(s,l)},backCompat(s,l){t.Util.each(l,function(a,o){var c=s.prototype[o],h=r+t.Util._capitalize(a),u=i+t.Util._capitalize(a);function f(){c.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+o+'" instead.')}s.prototype[a]=f,s.prototype[h]=f,s.prototype[u]=f})},afterSetFilter(){this._filterUpToDate=!1}}})(ut);var zi={},lo={};Object.defineProperty(lo,"__esModule",{value:!0});lo.HitContext=lo.SceneContext=lo.Context=void 0;const WB=un,uwe=ft;function hwe(e){var t=[],n=e.length,r=WB.Util,i,s;for(i=0;i<n;i++)s=e[i],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),t.push(s);return t}var QA=",",fwe="(",dwe=")",pwe="([",gwe="])",mwe=";",vwe="()",ywe="=",JA=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],_we=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const bwe=100;class M1{constructor(t){this.canvas=t,uwe.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){var r=this.traceArr,i=r.length,s="",l,a,o,c;for(l=0;l<i;l++)a=r[l],o=a.method,o?(c=a.args,s+=o,t?s+=vwe:WB.Util._isArray(c[0])?s+=pwe+c.join(QA)+gwe:(n&&(c=c.map(h=>typeof h=="number"?Math.floor(h):h)),s+=fwe+c.join(QA)+dwe)):(s+=a.property,t||(s+=ywe+a.val)),s+=mwe;return s}clearTrace(){this.traceArr=[]}_trace(t){var n=this.traceArr,r;n.push(t),r=n.length,r>=bwe&&n.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){const n=t.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(t){var n=t.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){const n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(t,n){this._context[t]=n}arc(t,n,r,i,s,l){this._context.arc(t,n,r,i,s,l)}arcTo(t,n,r,i,s){this._context.arcTo(t,n,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,r,i,s,l){this._context.bezierCurveTo(t,n,r,i,s,l)}clearRect(t,n,r,i){this._context.clearRect(t,n,r,i)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,n){var r=arguments;if(r.length===2)return this._context.createImageData(t,n);if(r.length===1)return this._context.createImageData(t)}createLinearGradient(t,n,r,i){return this._context.createLinearGradient(t,n,r,i)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,r,i,s,l){return this._context.createRadialGradient(t,n,r,i,s,l)}drawImage(t,n,r,i,s,l,a,o,c){var h=arguments,u=this._context;h.length===3?u.drawImage(t,n,r):h.length===5?u.drawImage(t,n,r,i,s):h.length===9&&u.drawImage(t,n,r,i,s,l,a,o,c)}ellipse(t,n,r,i,s,l,a,o){this._context.ellipse(t,n,r,i,s,l,a,o)}isPointInPath(t,n,r,i){return r?this._context.isPointInPath(r,t,n,i):this._context.isPointInPath(t,n,i)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,n,r,i){this._context.fillRect(t,n,r,i)}strokeRect(t,n,r,i){this._context.strokeRect(t,n,r,i)}fillText(t,n,r,i){i?this._context.fillText(t,n,r,i):this._context.fillText(t,n,r)}measureText(t){return this._context.measureText(t)}getImageData(t,n,r,i){return this._context.getImageData(t,n,r,i)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,r,i){this._context.rect(t,n,r,i)}roundRect(t,n,r,i,s){this._context.roundRect(t,n,r,i,s)}putImageData(t,n,r){this._context.putImageData(t,n,r)}quadraticCurveTo(t,n,r,i){this._context.quadraticCurveTo(t,n,r,i)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,r,i,s,l){this._context.setTransform(t,n,r,i,s,l)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,r,i){this._context.strokeText(t,n,r,i)}transform(t,n,r,i,s,l){this._context.transform(t,n,r,i,s,l)}translate(t,n){this._context.translate(t,n)}_enableTrace(){var t=this,n=JA.length,r=this.setAttr,i,s,l=function(a){var o=t[a],c;t[a]=function(){return s=hwe(Array.prototype.slice.call(arguments,0)),c=o.apply(t,arguments),t._trace({method:a,args:s}),c}};for(i=0;i<n;i++)l(JA[i]);t.setAttr=function(){r.apply(t,arguments);var a=arguments[0],o=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(o=o/this.canvas.getPixelRatio()),t._trace({property:a,val:o})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}}lo.Context=M1;_we.forEach(function(e){Object.defineProperty(M1.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Swe extends M1{constructor(t,{willReadFrequently:n=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(t){var n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){const n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){const n=t.fill(),r=t.getFillPriority();if(n&&r==="color"){this._fillColor(t);return}const i=t.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(t);return}const s=t.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(t);return}const l=t.getFillRadialGradientColorStops();if(l&&r==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):i?this._fillPattern(t):s?this._fillLinearGradient(t):l&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const n=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(var l=0;l<i.length;l+=2)s.addColorStop(i[l],i[l+1]);this.setAttr("strokeStyle",s)}}_stroke(t){var n=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=t.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}_applyShadow(t){var n,r,i,s=(n=t.getShadowRGBA())!==null&&n!==void 0?n:"black",l=(r=t.getShadowBlur())!==null&&r!==void 0?r:5,a=(i=t.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},o=t.getAbsoluteScale(),c=this.canvas.getPixelRatio(),h=o.x*c,u=o.y*c;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",l*Math.min(Math.abs(h),Math.abs(u))),this.setAttr("shadowOffsetX",a.x*h),this.setAttr("shadowOffsetY",a.y*u)}}lo.SceneContext=Swe;class xwe extends M1{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const s=t.getStrokeScaleEnabled();if(!s){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),i=r==="auto"?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),s||this.restore()}}}lo.HitContext=xwe;Object.defineProperty(zi,"__esModule",{value:!0});zi.HitCanvas=zi.SceneCanvas=zi.Canvas=void 0;const Vv=un,YB=lo,XB=ft,wwe=ut,Cwe=je;var Tm;function Twe(){if(Tm)return Tm;var e=Vv.Util.createCanvasElement(),t=e.getContext("2d");return Tm=function(){var n=XB.Konva._global.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/r}(),Vv.Util.releaseCanvas(e),Tm}let L1=class{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=t||{},r=n.pixelRatio||XB.Konva.pixelRatio||Twe();this.pixelRatio=r,this._canvas=Vv.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch{try{return this._canvas.toDataURL()}catch(i){return Vv.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};zi.Canvas=L1;wwe.Factory.addGetterSetter(L1,"pixelRatio",void 0,(0,Cwe.getNumberValidator)());class Ewe extends L1{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new YB.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}zi.SceneCanvas=Ewe;class Pwe extends L1{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new YB.HitContext(this),this.setSize(t.width,t.height)}}zi.HitCanvas=Pwe;var F1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=ft,n=un;e.DD={get isDragging(){var r=!1;return e.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){var r;return e.DD._dragElements.forEach(i=>{r=i.node}),r},_dragElements:new Map,_drag(r){const i=[];e.DD._dragElements.forEach((s,l)=>{const{node:a}=s,o=a.getStage();o.setPointersPositions(r),s.pointerId===void 0&&(s.pointerId=n.Util._getFirstPointerId(r));const c=o._changedPointerPositions.find(f=>f.id===s.pointerId);if(c){if(s.dragStatus!=="dragging"){var h=a.dragDistance(),u=Math.max(Math.abs(c.x-s.startPointerPos.x),Math.abs(c.y-s.startPointerPos.y));if(u<h||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,s),i.push(a)}}),i.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:r},!0)})},_endDragBefore(r){const i=[];e.DD._dragElements.forEach(s=>{const{node:l}=s,a=l.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(h=>h.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const c=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;c&&i.indexOf(c)===-1&&i.push(c)}),i.forEach(s=>{s.draw()})},_endDragAfter(r){e.DD._dragElements.forEach((i,s)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:r},!0),i.dragStatus!=="dragging"&&e.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))})(F1);Object.defineProperty(en,"__esModule",{value:!0});en.Node=void 0;const pt=un,ng=ut,Rf=zi,ul=ft,hi=F1,In=je;var _0="absoluteOpacity",Em="allEventListeners",$s="absoluteTransform",ZA="absoluteScale",hl="canvas",Iwe="Change",Owe="children",kwe="konva",R2="listening",eR="mouseenter",tR="mouseleave",nR="set",rR="Shape",b0=" ",iR="stage",Vo="transform",Awe="Stage",D2="visible",Rwe=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(b0);let Dwe=1,it=class M2{constructor(t){this._id=Dwe++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Vo||t===$s)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,n){var r=this._cache.get(t),i=t===Vo||t===$s,s=r===void 0||i&&r.dirty===!0;return s&&(r=n.call(this),this._cache.set(t,r)),r}_calculate(t,n,r){if(!this._attachedDepsListeners.get(t)){const i=n.map(s=>s+"Change.konva").join(b0);this.on(i,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}_getCanvasCache(){return this._cache.get(hl)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===$s&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(hl)){const{scene:t,filter:n,hit:r}=this._cache.get(hl);pt.Util.releaseCanvas(t,n,r),this._cache.delete(hl)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var n=t||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var i=Math.ceil(n.width||r.width),s=Math.ceil(n.height||r.height),l=n.pixelRatio,a=n.x===void 0?Math.floor(r.x):n.x,o=n.y===void 0?Math.floor(r.y):n.y,c=n.offset||0,h=n.drawBorder||!1,u=n.hitCanvasPixelRatio||1;if(!i||!s){pt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const f=Math.abs(Math.round(r.x)-a)>.5?1:0,d=Math.abs(Math.round(r.y)-o)>.5?1:0;i+=c*2+f,s+=c*2+d,a-=c,o-=c;var p=new Rf.SceneCanvas({pixelRatio:l,width:i,height:s}),m=new Rf.SceneCanvas({pixelRatio:l,width:0,height:0,willReadFrequently:!0}),g=new Rf.HitCanvas({pixelRatio:u,width:i,height:s}),v=p.getContext(),_=g.getContext();return g.isCache=!0,p.isCache=!0,this._cache.delete(hl),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(p.getContext()._context.imageSmoothingEnabled=!1,m.getContext()._context.imageSmoothingEnabled=!1),v.save(),_.save(),v.translate(-a,-o),_.translate(-a,-o),this._isUnderCache=!0,this._clearSelfAndDescendantCache(_0),this._clearSelfAndDescendantCache(ZA),this.drawScene(p,this),this.drawHit(g,this),this._isUnderCache=!1,v.restore(),_.restore(),h&&(v.save(),v.beginPath(),v.rect(0,0,i,s),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.set(hl,{scene:p,filter:m,hit:g,x:a,y:o}),this._requestDraw(),this}isCached(){return this._cache.has(hl)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],i=1/0,s=1/0,l=-1/0,a=-1/0,o=this.getAbsoluteTransform(n);return r.forEach(function(c){var h=o.point(c);i===void 0&&(i=l=h.x,s=a=h.y),i=Math.min(i,h.x),s=Math.min(s,h.y),l=Math.max(l,h.x),a=Math.max(a,h.y)}),{x:i,y:s,width:l-i,height:a-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/i,r.height/i),t.restore()}_drawCachedHitCanvas(t){var n=this._getCanvasCache(),r=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,s=i.getContext(),l,a,o,c;if(t){if(!this._filterUpToDate){var h=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(l=t.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/h,r.getHeight()/h),a=s.getImageData(0,0,i.getWidth(),i.getHeight()),o=0;o<l;o++){if(c=t[o],typeof c!="function"){pt.Util.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,a),s.putImageData(a,0,0)}}catch(u){pt.Util.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(t,n){if(this._cache&&this._cache.delete(Em),arguments.length===3)return this._delegate.apply(this,arguments);var r=t.split(b0),i=r.length,s,l,a,o,c;for(s=0;s<i;s++)l=r[s],a=l.split("."),o=a[0],c=a[1]||"",this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:c,handler:n});return this}off(t,n){var r=(t||"").split(b0),i=r.length,s,l,a,o,c,h;if(this._cache&&this._cache.delete(Em),!t)for(l in this.eventListeners)this._off(l);for(s=0;s<i;s++)if(a=r[s],o=a.split("."),c=o[0],h=o[1],c)this.eventListeners[c]&&this._off(c,h,n);else for(l in this.eventListeners)this._off(l,h,n);return this}dispatchEvent(t){var n={target:this,type:t.type,evt:t};return this.fire(t.type,n),this}addEventListener(t,n){return this.on(t,function(r){n.call(this,r.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,r){var i=this;this.on(t,function(s){for(var l=s.target.findAncestors(n,!0,i),a=0;a<l.length;a++)s=pt.Util.cloneObject(s),s.currentTarget=l[a],r.call(l[a],s)})}remove(){return this.isDragging()&&this.stopDrag(),hi.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache($s),this._clearSelfAndDescendantCache(_0),this._clearSelfAndDescendantCache(ZA),this._clearSelfAndDescendantCache(iR),this._clearSelfAndDescendantCache(D2),this._clearSelfAndDescendantCache(R2)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var n="get"+pt.Util._capitalize(t);return pt.Util._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),n=[];t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var n,r;if(!t)return this;for(n in t)n!==Owe&&(r=nR+pt.Util._capitalize(n),pt.Util._isFunction(this[r])?this[r](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(R2,this._isListening)}_isListening(t){if(!this.listening())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isListening(t):!0}isVisible(){return this._getCache(D2,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const r=this.getParent();return r&&r!==t&&this!==t?r._isVisible(t):!0}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);var r=this.getLayer(),i=!1;hi.DD._dragElements.forEach(l=>{l.dragStatus==="dragging"&&(l.node.nodeType==="Stage"||l.node.getLayer()===r)&&(i=!0)});var s=!n&&!ul.Konva.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),n=this,r=0,i,s,l,a;function o(h){for(i=[],s=h.length,l=0;l<s;l++)a=h[l],r++,a.nodeType!==rR&&(i=i.concat(a.getChildren().slice())),a._id===n._id&&(l=s);i.length>0&&i[0].getDepth()<=t&&o(i)}const c=this.getStage();return n.nodeType!==Awe&&c&&o(c.getChildren()),r}getDepth(){for(var t=0,n=this.parent;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Vo),this._clearSelfAndDescendantCache($s)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;var n=t.getPointerPosition();if(!n)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(t){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!t&&(t=!0);var i=this.getAbsoluteTransform(t).getMatrix(),s=new pt.Transform,l=this.offset();return s.m=i.slice(),s.translate(l.x,l.y),s.getTranslation()}setAbsolutePosition(t){const{x:n,y:r,...i}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(Vo);var s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(t.x,t.y),t={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(i),this.setPosition({x:t.x,y:t.y}),this._clearCache(Vo),this._clearSelfAndDescendantCache($s),this}_setTransform(t){var n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var n=t.x,r=t.y,i=this.x(),s=this.y();return n!==void 0&&(i+=n),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(t,n){var r=[],i=this.getParent(),s,l;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(s=r.length,l=0;l<s;l++)t(r[l])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return pt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return pt.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return pt.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return pt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return pt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&pt.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(_0,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t=this.getAttrs(),n,r,i,s,l;const a={attrs:{},className:this.getClassName()};for(n in t)r=t[n],l=pt.Util.isObject(r)&&!pt.Util._isPlainObject(r)&&!pt.Util._isArray(r),!l&&(i=typeof this[n]=="function"&&this[n],delete t[n],s=i?i.call(this):null,t[n]=r,s!==r&&(a.attrs[n]=r));return pt.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,r){var i=[];n&&this._isMatch(t)&&i.push(this);for(var s=this.parent;s;){if(s===r)return i;s._isMatch(t)&&i.push(s),s=s.parent}return i}isAncestorOf(t){return!1}findAncestor(t,n,r){return this.findAncestors(t,n,r)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var n=t.replace(/ /g,"").split(","),r=n.length,i,s;for(i=0;i<r;i++)if(s=n[i],pt.Util.isValidSelector(s)||(pt.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),pt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),pt.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(iR,this._getStage)}_getStage(){var t=this.getParent();return t?t.getStage():null}fire(t,n={},r){return n.target=n.target||this,r?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache($s,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var n;if(t)return n=new pt.Transform,this._eachAncestorReverse(function(i){var s=i.transformsEnabled();s==="all"?n.multiply(i.getTransform()):s==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},t),n;n=this._cache.get($s)||new pt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,l=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(i-l,s-a)}return n.dirty=!1,n}getAbsoluteScale(t){for(var n=this;n;)n._isUnderCache&&(t=n),n=n.getParent();const i=this.getAbsoluteTransform(t).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Vo,this._getTransform)}_getTransform(){var t,n,r=this._cache.get(Vo)||new pt.Transform;r.reset();var i=this.x(),s=this.y(),l=ul.Konva.getAngle(this.rotation()),a=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,o=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,c=this.attrs.skewX||0,h=this.attrs.skewY||0,u=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),l!==0&&r.rotate(l),(c!==0||h!==0)&&r.skew(c,h),(a!==1||o!==1)&&r.scale(a,o),(u!==0||f!==0)&&r.translate(-1*u,-1*f),r.dirty=!1,r}clone(t){var n=pt.Util.cloneObject(this.attrs),r,i,s,l,a;for(r in t)n[r]=t[r];var o=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,l=0;l<s;l++)a=i[l],a.name.indexOf(kwe)<0&&(o.eventListeners[r]||(o.eventListeners[r]=[]),o.eventListeners[r].push(a));return o}_toKonvaCanvas(t){t=t||{};var n=this.getClientRect(),r=this.getStage(),i=t.x!==void 0?t.x:Math.floor(n.x),s=t.y!==void 0?t.y:Math.floor(n.y),l=t.pixelRatio||1,a=new Rf.SceneCanvas({width:t.width||Math.ceil(n.width)||(r?r.width():0),height:t.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:l}),o=a.getContext();const c=new Rf.SceneCanvas({width:a.width,height:a.height,pixelRatio:a.pixelRatio});return t.imageSmoothingEnabled===!1&&(o._context.imageSmoothingEnabled=!1),o.save(),(i||s)&&o.translate(-1*i,-1*s),this.drawScene(a,void 0,c),o.restore(),a}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var n=t.mimeType||null,r=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(n,r);return t.callback&&t.callback(i),i}toImage(t){return new Promise((n,r)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,pt.Util._urlToImage(this.toDataURL(t),function(s){n(s),i==null||i(s)})}catch(i){r(i)}})}toBlob(t){return new Promise((n,r)=>{try{const i=t==null?void 0:t.callback;i&&delete t.callback,this.toCanvas(t).toBlob(s=>{n(s),i==null||i(s)},t==null?void 0:t.mimeType,t==null?void 0:t.quality)}catch(i){r(i)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():ul.Konva.dragDistance}_off(t,n,r){var i=this.eventListeners[t],s,l,a;for(s=0;s<i.length;s++)if(l=i[s].name,a=i[s].handler,(l!=="konva"||n==="konva")&&(!n||l===n)&&(!r||r===a)){if(i.splice(s,1),i.length===0){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,n,r){this._fire(t+Iwe,{oldVal:n,newVal:r})}addName(t){if(!this.hasName(t)){var n=this.name(),r=n?n+" "+t:t;this.name(r)}return this}hasName(t){if(!t)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(t)!==-1}removeName(t){var n=(this.name()||"").split(/\s/g),r=n.indexOf(t);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(t,n){var r=this[nR+pt.Util._capitalize(t)];return pt.Util._isFunction(r)?r.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(ul.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,n){var r=this.attrs[t];r===n&&!pt.Util.isObject(n)||(n==null?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,n),this._requestDraw())}_setComponentAttr(t,n,r){var i;r!==void 0&&(i=this.attrs[t],i||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=r,this._fireChangeEvent(t,i,r))}_fireAndBubble(t,n,r){n&&this.nodeType===rR&&(n.target=this);var i=(t===eR||t===tR)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!i){this._fire(t,n);var s=(t===eR||t===tR)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,n,r):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){var n,r,i;const s=(n=this._cache.get(Em))!==null&&n!==void 0?n:{};let l=s==null?void 0:s[t];if(l===void 0){l=[];let a=Object.getPrototypeOf(this);for(;a;){const o=(i=(r=a.eventListeners)===null||r===void 0?void 0:r[t])!==null&&i!==void 0?i:[];l.push(...o),a=Object.getPrototypeOf(a)}s[t]=l,this._cache.set(Em,s)}return l}_fire(t,n){n=n||{},n.currentTarget=this,n.type=t;const r=this._getProtoListeners(t);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[t];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var n=t?t.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(r){var s=r._getPointerById(n)||r._changedPointerPositions[0]||i;hi.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:n})}}startDrag(t,n=!0){hi.DD._dragElements.has(this._id)||this._createDragElement(t);const r=hi.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var i={x:r.x-n.offset.x,y:r.y-n.offset.y},s=this.dragBoundFunc();if(s!==void 0){const l=s.call(this,i,t);l?i=l:pt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(t){const n=hi.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),hi.DD._endDragBefore(t),hi.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=hi.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var n=t.evt.button!==void 0,r=!n||ul.Konva.dragButtons.indexOf(t.evt.button)>=0;if(r&&!this.isDragging()){var i=!1;hi.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const n=hi.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&hi.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return pt.Util.haveIntersection(r,this.getClientRect())}static create(t,n){return pt.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){var r=M2.prototype.getClassName.call(t),i=t.children,s,l,a;n&&(t.attrs.container=n),ul.Konva[r]||(pt.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const o=ul.Konva[r];if(s=new o(t.attrs),i)for(l=i.length,a=0;a<l;a++)s.add(M2._createNode(i[a]));return s}};en.Node=it;it.prototype.nodeType="Node";it.prototype._attrsAffectingSize=[];it.prototype.eventListeners={};it.prototype.on.call(it.prototype,Rwe,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Vo),this._clearSelfAndDescendantCache($s)});it.prototype.on.call(it.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(D2)});it.prototype.on.call(it.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(R2)});it.prototype.on.call(it.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(_0)});const Bt=ng.Factory.addGetterSetter;Bt(it,"zIndex");Bt(it,"absolutePosition");Bt(it,"position");Bt(it,"x",0,(0,In.getNumberValidator)());Bt(it,"y",0,(0,In.getNumberValidator)());Bt(it,"globalCompositeOperation","source-over",(0,In.getStringValidator)());Bt(it,"opacity",1,(0,In.getNumberValidator)());Bt(it,"name","",(0,In.getStringValidator)());Bt(it,"id","",(0,In.getStringValidator)());Bt(it,"rotation",0,(0,In.getNumberValidator)());ng.Factory.addComponentsGetterSetter(it,"scale",["x","y"]);Bt(it,"scaleX",1,(0,In.getNumberValidator)());Bt(it,"scaleY",1,(0,In.getNumberValidator)());ng.Factory.addComponentsGetterSetter(it,"skew",["x","y"]);Bt(it,"skewX",0,(0,In.getNumberValidator)());Bt(it,"skewY",0,(0,In.getNumberValidator)());ng.Factory.addComponentsGetterSetter(it,"offset",["x","y"]);Bt(it,"offsetX",0,(0,In.getNumberValidator)());Bt(it,"offsetY",0,(0,In.getNumberValidator)());Bt(it,"dragDistance",null,(0,In.getNumberValidator)());Bt(it,"width",0,(0,In.getNumberValidator)());Bt(it,"height",0,(0,In.getNumberValidator)());Bt(it,"listening",!0,(0,In.getBooleanValidator)());Bt(it,"preventDefault",!0,(0,In.getBooleanValidator)());Bt(it,"filters",null,function(e){return this._filterUpToDate=!1,e});Bt(it,"visible",!0,(0,In.getBooleanValidator)());Bt(it,"transformsEnabled","all",(0,In.getStringValidator)());Bt(it,"size");Bt(it,"dragBoundFunc");Bt(it,"draggable",!1,(0,In.getBooleanValidator)());ng.Factory.backCompat(it,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var mc={};Object.defineProperty(mc,"__esModule",{value:!0});mc.Container=void 0;const Wh=ut,RS=en,N1=je;class vc extends RS.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(i){t(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(var n=0;n<t.length;n++)this.add(t[n]);return this}const r=t[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){var r=[];return this._descendants(i=>{const s=i._isMatch(t);return s&&r.push(i),!!(s&&n)}),r}_descendants(t){let n=!1;const r=this.getChildren();for(const i of r){if(n=t(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(t),n))return!0}return!1}toObject(){var t=RS.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){for(var n=t.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){var n=RS.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(t){var n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(t)&&n.push(r)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(t,n,r){var i=this.getLayer(),s=t||i&&i.getCanvas(),l=s&&s.getContext(),a=this._getCanvasCache(),o=a&&a.scene,c=s&&s.isCache;if(!this.isVisible()&&!c)return this;if(o){l.save();var h=this.getAbsoluteTransform(n).getMatrix();l.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(l),l.restore()}else this._drawChildren("drawScene",s,n,r);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),i=t||r&&r.hitCanvas,s=i&&i.getContext(),l=this._getCanvasCache(),a=l&&l.hit;if(a){s.save();var o=this.getAbsoluteTransform(n).getMatrix();s.transform(o[0],o[1],o[2],o[3],o[4],o[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(t,n,r,i){var s,l=n&&n.getContext(),a=this.clipWidth(),o=this.clipHeight(),c=this.clipFunc(),h=a&&o||c;const u=r===this;if(h){l.save();var f=this.getAbsoluteTransform(r),d=f.getMatrix();l.transform(d[0],d[1],d[2],d[3],d[4],d[5]),l.beginPath();let v;if(c)v=c.call(this,l,this);else{var p=this.clipX(),m=this.clipY();l.rect(p,m,a,o)}l.clip.apply(l,v),d=f.copy().invert().getMatrix(),l.transform(d[0],d[1],d[2],d[3],d[4],d[5])}var g=!u&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";g&&(l.save(),l._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(v){v[t](n,r,i)}),g&&l.restore(),h&&l.restore()}getClientRect(t={}){var n,r=t.skipTransform,i=t.relativeTo,s,l,a,o,c={x:1/0,y:1/0,width:0,height:0},h=this;(n=this.children)===null||n===void 0||n.forEach(function(m){if(m.visible()){var g=m.getClientRect({relativeTo:h,skipShadow:t.skipShadow,skipStroke:t.skipStroke});g.width===0&&g.height===0||(s===void 0?(s=g.x,l=g.y,a=g.x+g.width,o=g.y+g.height):(s=Math.min(s,g.x),l=Math.min(l,g.y),a=Math.max(a,g.x+g.width),o=Math.max(o,g.y+g.height)))}});for(var u=this.find("Shape"),f=!1,d=0;d<u.length;d++){var p=u[d];if(p._isVisible(this)){f=!0;break}}return f&&s!==void 0?c={x:s,y:l,width:a-s,height:o-l}:c={x:0,y:0,width:0,height:0},r?c:this._transformedRect(c,i)}}mc.Container=vc;Wh.Factory.addComponentsGetterSetter(vc,"clip",["x","y","width","height"]);Wh.Factory.addGetterSetter(vc,"clipX",void 0,(0,N1.getNumberValidator)());Wh.Factory.addGetterSetter(vc,"clipY",void 0,(0,N1.getNumberValidator)());Wh.Factory.addGetterSetter(vc,"clipWidth",void 0,(0,N1.getNumberValidator)());Wh.Factory.addGetterSetter(vc,"clipHeight",void 0,(0,N1.getNumberValidator)());Wh.Factory.addGetterSetter(vc,"clipFunc");var qB={},zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.releaseCapture=zr.setPointerCapture=zr.hasPointerCapture=zr.createEvent=zr.getCapturedShape=void 0;const Mwe=ft,lp=new Map,KB=Mwe.Konva._global.PointerEvent!==void 0;function Lwe(e){return lp.get(e)}zr.getCapturedShape=Lwe;function RP(e){return{evt:e,pointerId:e.pointerId}}zr.createEvent=RP;function Fwe(e,t){return lp.get(e)===t}zr.hasPointerCapture=Fwe;function Nwe(e,t){QB(e),t.getStage()&&(lp.set(e,t),KB&&t._fire("gotpointercapture",RP(new PointerEvent("gotpointercapture"))))}zr.setPointerCapture=Nwe;function QB(e,t){const n=lp.get(e);if(!n)return;const r=n.getStage();r&&r.content,lp.delete(e),KB&&n._fire("lostpointercapture",RP(new PointerEvent("lostpointercapture")))}zr.releaseCapture=QB;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=un,n=ut,r=mc,i=ft,s=zi,l=F1,a=ft,o=zr;var c="Stage",h="string",u="px",f="mouseout",d="mouseleave",p="mouseover",m="mouseenter",g="mousemove",v="mousedown",_="mouseup",y="pointermove",b="pointerdown",S="pointerup",x="pointercancel",C="lostpointercapture",w="pointerout",k="pointerleave",I="pointerover",R="pointerenter",j="contextmenu",G="touchstart",B="touchend",$="touchmove",V="touchcancel",W="wheel",M=5,P=[[m,"_pointerenter"],[v,"_pointerdown"],[g,"_pointermove"],[_,"_pointerup"],[d,"_pointerleave"],[G,"_pointerdown"],[$,"_pointermove"],[B,"_pointerup"],[V,"_pointercancel"],[p,"_pointerover"],[W,"_wheel"],[j,"_contextmenu"],[b,"_pointerdown"],[y,"_pointermove"],[S,"_pointerup"],[x,"_pointercancel"],[C,"_lostpointercapture"]];const O={mouse:{[w]:f,[k]:d,[I]:p,[R]:m,[y]:g,[b]:v,[S]:_,[x]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[w]:"touchout",[k]:"touchleave",[I]:"touchover",[R]:"touchenter",[y]:$,[b]:G,[S]:B,[x]:V,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[w]:w,[k]:k,[I]:I,[R]:R,[y]:y,[b]:b,[S]:S,[x]:x,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},A=z=>z.indexOf("pointer")>=0?"pointer":z.indexOf("touch")>=0?"touch":"mouse",D=z=>{const L=A(z);if(L==="pointer")return i.Konva.pointerEventsEnabled&&O.pointer;if(L==="touch")return O.touch;if(L==="mouse")return O.mouse};function X(z={}){return(z.clipFunc||z.clipWidth||z.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),z}const N="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class F extends r.Container{constructor(L){super(X(L)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{X(this.attrs)}),this._checkVisibility()}_validateAdd(L){const H=L.getType()==="Layer",K=L.getType()==="FastLayer";H||K||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const L=this.visible()?"":"none";this.content.style.display=L}setContainer(L){if(typeof L===h){if(L.charAt(0)==="."){var H=L.slice(1);L=document.getElementsByClassName(H)[0]}else{var K;L.charAt(0)!=="#"?K=L:K=L.slice(1),L=document.getElementById(K)}if(!L)throw"Can not find container in document with id "+K}return this._setAttr("container",L),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),L.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var L=this.children,H=L.length,K;for(K=0;K<H;K++)L[K].clear();return this}clone(L){return L||(L={}),L.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,L)}destroy(){super.destroy();var L=this.content;L&&t.Util._isInDocument(L)&&this.container().removeChild(L);var H=e.stages.indexOf(this);return H>-1&&e.stages.splice(H,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const L=this._pointerPositions[0]||this._changedPointerPositions[0];return L?{x:L.x,y:L.y}:(t.Util.warn(N),null)}_getPointerById(L){return this._pointerPositions.find(H=>H.id===L)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(L){L=L||{},L.x=L.x||0,L.y=L.y||0,L.width=L.width||this.width(),L.height=L.height||this.height();var H=new s.SceneCanvas({width:L.width,height:L.height,pixelRatio:L.pixelRatio||1}),K=H.getContext()._context,Z=this.children;return(L.x||L.y)&&K.translate(-1*L.x,-1*L.y),Z.forEach(function(ee){if(ee.isVisible()){var ae=ee._toKonvaCanvas(L);K.drawImage(ae._canvas,L.x,L.y,ae.getWidth()/ae.getPixelRatio(),ae.getHeight()/ae.getPixelRatio())}}),H}getIntersection(L){if(!L)return null;var H=this.children,K=H.length,Z=K-1,ee;for(ee=Z;ee>=0;ee--){const ae=H[ee].getIntersection(L);if(ae)return ae}return null}_resizeDOM(){var L=this.width(),H=this.height();this.content&&(this.content.style.width=L+u,this.content.style.height=H+u),this.bufferCanvas.setSize(L,H),this.bufferHitCanvas.setSize(L,H),this.children.forEach(K=>{K.setSize({width:L,height:H}),K.draw()})}add(L,...H){if(arguments.length>1){for(var K=0;K<arguments.length;K++)this.add(arguments[K]);return this}super.add(L);var Z=this.children.length;return Z>M&&t.Util.warn("The stage has "+Z+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),L.setSize({width:this.width(),height:this.height()}),L.draw(),i.Konva.isBrowser&&this.content.appendChild(L.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(L){return o.hasPointerCapture(L,this)}setPointerCapture(L){o.setPointerCapture(L,this)}releaseCapture(L){o.releaseCapture(L,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&P.forEach(([L,H])=>{this.content.addEventListener(L,K=>{this[H](K)},{passive:!1})})}_pointerenter(L){this.setPointersPositions(L);const H=D(L.type);H&&this._fire(H.pointerenter,{evt:L,target:this,currentTarget:this})}_pointerover(L){this.setPointersPositions(L);const H=D(L.type);H&&this._fire(H.pointerover,{evt:L,target:this,currentTarget:this})}_getTargetShape(L){let H=this[L+"targetShape"];return H&&!H.getStage()&&(H=null),H}_pointerleave(L){const H=D(L.type),K=A(L.type);if(H){this.setPointersPositions(L);var Z=this._getTargetShape(K),ee=!l.DD.isDragging||i.Konva.hitOnDragEnabled;Z&&ee?(Z._fireAndBubble(H.pointerout,{evt:L}),Z._fireAndBubble(H.pointerleave,{evt:L}),this._fire(H.pointerleave,{evt:L,target:this,currentTarget:this}),this[K+"targetShape"]=null):ee&&(this._fire(H.pointerleave,{evt:L,target:this,currentTarget:this}),this._fire(H.pointerout,{evt:L,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(L){const H=D(L.type),K=A(L.type);if(H){this.setPointersPositions(L);var Z=!1;this._changedPointerPositions.forEach(ee=>{var ae=this.getIntersection(ee);if(l.DD.justDragged=!1,i.Konva["_"+K+"ListenClick"]=!0,!ae||!ae.isListening())return;i.Konva.capturePointerEventsEnabled&&ae.setPointerCapture(ee.id),this[K+"ClickStartShape"]=ae,ae._fireAndBubble(H.pointerdown,{evt:L,pointerId:ee.id}),Z=!0;const te=L.type.indexOf("touch")>=0;ae.preventDefault()&&L.cancelable&&te&&L.preventDefault()}),Z||this._fire(H.pointerdown,{evt:L,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(L){const H=D(L.type),K=A(L.type);if(!H)return;l.DD.isDragging&&l.DD.node.preventDefault()&&L.cancelable&&L.preventDefault(),this.setPointersPositions(L);var Z=!l.DD.isDragging||i.Konva.hitOnDragEnabled;if(!Z)return;var ee={};let ae=!1;var te=this._getTargetShape(K);this._changedPointerPositions.forEach(J=>{const ne=o.getCapturedShape(J.id)||this.getIntersection(J),ie=J.id,re={evt:L,pointerId:ie};var he=te!==ne;if(he&&te&&(te._fireAndBubble(H.pointerout,{...re},ne),te._fireAndBubble(H.pointerleave,{...re},ne)),ne){if(ee[ne._id])return;ee[ne._id]=!0}ne&&ne.isListening()?(ae=!0,he&&(ne._fireAndBubble(H.pointerover,{...re},te),ne._fireAndBubble(H.pointerenter,{...re},te),this[K+"targetShape"]=ne),ne._fireAndBubble(H.pointermove,{...re})):te&&(this._fire(H.pointerover,{evt:L,target:this,currentTarget:this,pointerId:ie}),this[K+"targetShape"]=null)}),ae||this._fire(H.pointermove,{evt:L,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(L){const H=D(L.type),K=A(L.type);if(!H)return;this.setPointersPositions(L);const Z=this[K+"ClickStartShape"],ee=this[K+"ClickEndShape"];var ae={};let te=!1;this._changedPointerPositions.forEach(J=>{const ne=o.getCapturedShape(J.id)||this.getIntersection(J);if(ne){if(ne.releaseCapture(J.id),ae[ne._id])return;ae[ne._id]=!0}const ie=J.id,re={evt:L,pointerId:ie};let he=!1;i.Konva["_"+K+"InDblClickWindow"]?(he=!0,clearTimeout(this[K+"DblTimeout"])):l.DD.justDragged||(i.Konva["_"+K+"InDblClickWindow"]=!0,clearTimeout(this[K+"DblTimeout"])),this[K+"DblTimeout"]=setTimeout(function(){i.Konva["_"+K+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),ne&&ne.isListening()?(te=!0,this[K+"ClickEndShape"]=ne,ne._fireAndBubble(H.pointerup,{...re}),i.Konva["_"+K+"ListenClick"]&&Z&&Z===ne&&(ne._fireAndBubble(H.pointerclick,{...re}),he&&ee&&ee===ne&&ne._fireAndBubble(H.pointerdblclick,{...re}))):(this[K+"ClickEndShape"]=null,i.Konva["_"+K+"ListenClick"]&&this._fire(H.pointerclick,{evt:L,target:this,currentTarget:this,pointerId:ie}),he&&this._fire(H.pointerdblclick,{evt:L,target:this,currentTarget:this,pointerId:ie}))}),te||this._fire(H.pointerup,{evt:L,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+K+"ListenClick"]=!1,L.cancelable&&K!=="touch"&&L.preventDefault()}_contextmenu(L){this.setPointersPositions(L);var H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(j,{evt:L}):this._fire(j,{evt:L,target:this,currentTarget:this})}_wheel(L){this.setPointersPositions(L);var H=this.getIntersection(this.getPointerPosition());H&&H.isListening()?H._fireAndBubble(W,{evt:L}):this._fire(W,{evt:L,target:this,currentTarget:this})}_pointercancel(L){this.setPointersPositions(L);const H=o.getCapturedShape(L.pointerId)||this.getIntersection(this.getPointerPosition());H&&H._fireAndBubble(S,o.createEvent(L)),o.releaseCapture(L.pointerId)}_lostpointercapture(L){o.releaseCapture(L.pointerId)}setPointersPositions(L){var H=this._getContentPosition(),K=null,Z=null;L=L||window.event,L.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(L.touches,ee=>{this._pointerPositions.push({id:ee.identifier,x:(ee.clientX-H.left)/H.scaleX,y:(ee.clientY-H.top)/H.scaleY})}),Array.prototype.forEach.call(L.changedTouches||L.touches,ee=>{this._changedPointerPositions.push({id:ee.identifier,x:(ee.clientX-H.left)/H.scaleX,y:(ee.clientY-H.top)/H.scaleY})})):(K=(L.clientX-H.left)/H.scaleX,Z=(L.clientY-H.top)/H.scaleY,this.pointerPos={x:K,y:Z},this._pointerPositions=[{x:K,y:Z,id:t.Util._getFirstPointerId(L)}],this._changedPointerPositions=[{x:K,y:Z,id:t.Util._getFirstPointerId(L)}])}_setPointerPosition(L){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(L)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var L=this.content.getBoundingClientRect();return{top:L.top,left:L.left,scaleX:L.width/this.content.clientWidth||1,scaleY:L.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!i.Konva.isBrowser){var L=this.container();if(!L)throw"Stage has no container. A container is required.";L.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),L.appendChild(this.content),this._resizeDOM()}}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(L){L.batchDraw()}),this}}e.Stage=F,F.prototype.nodeType=c,(0,a._registerNode)(F),n.Factory.addGetterSetter(F,"container")})(qB);var rg={},Hn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=ft,n=un,r=ut,i=en,s=je,l=ft,a=zr;var o="hasShadow",c="shadowRGBA",h="patternImage",u="linearGradient",f="radialGradient";let d;function p(){return d||(d=n.Util.createCanvasElement().getContext("2d"),d)}e.shapes={};function m(k){const I=this.attrs.fillRule;I?k.fill(I):k.fill()}function g(k){k.stroke()}function v(k){k.fill()}function _(k){k.stroke()}function y(){this._clearCache(o)}function b(){this._clearCache(c)}function S(){this._clearCache(h)}function x(){this._clearCache(u)}function C(){this._clearCache(f)}class w extends i.Node{constructor(I){super(I);let R;for(;R=n.Util.getRandomColor(),!(R&&!(R in e.shapes)););this.colorKey=R,e.shapes[R]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(o,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(h,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var I=p();const R=I.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(R&&R.setTransform){const j=new n.Transform;j.translate(this.fillPatternX(),this.fillPatternY()),j.rotate(t.Konva.getAngle(this.fillPatternRotation())),j.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),j.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const G=j.getMatrix(),B=typeof DOMMatrix>"u"?{a:G[0],b:G[1],c:G[2],d:G[3],e:G[4],f:G[5]}:new DOMMatrix(G);R.setTransform(B)}return R}}_getLinearGradient(){return this._getCache(u,this.__getLinearGradient)}__getLinearGradient(){var I=this.fillLinearGradientColorStops();if(I){for(var R=p(),j=this.fillLinearGradientStartPoint(),G=this.fillLinearGradientEndPoint(),B=R.createLinearGradient(j.x,j.y,G.x,G.y),$=0;$<I.length;$+=2)B.addColorStop(I[$],I[$+1]);return B}}_getRadialGradient(){return this._getCache(f,this.__getRadialGradient)}__getRadialGradient(){var I=this.fillRadialGradientColorStops();if(I){for(var R=p(),j=this.fillRadialGradientStartPoint(),G=this.fillRadialGradientEndPoint(),B=R.createRadialGradient(j.x,j.y,this.fillRadialGradientStartRadius(),G.x,G.y,this.fillRadialGradientEndRadius()),$=0;$<I.length;$+=2)B.addColorStop(I[$],I[$+1]);return B}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var I=n.Util.colorToRGBA(this.shadowColor());if(I)return"rgba("+I.r+","+I.g+","+I.b+","+I.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const I=this.hitStrokeWidth();return I==="auto"?this.hasStroke():this.strokeEnabled()&&!!I}intersects(I){var R=this.getStage();if(!R)return!1;const j=R.bufferHitCanvas;return j.getContext().clear(),this.drawHit(j,void 0,!0),j.context.getImageData(Math.round(I.x),Math.round(I.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(I){var R;if(!((R=this.attrs.perfectDrawEnabled)!==null&&R!==void 0?R:!0))return!1;const G=I||this.hasFill(),B=this.hasStroke(),$=this.getAbsoluteOpacity()!==1;if(G&&B&&$)return!0;const V=this.hasShadow(),W=this.shadowForStrokeEnabled();return!!(G&&B&&V&&W)}setStrokeHitEnabled(I){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),I?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var I=this.size();return{x:this._centroid?-I.width/2:0,y:this._centroid?-I.height/2:0,width:I.width,height:I.height}}getClientRect(I={}){const R=I.skipTransform,j=I.relativeTo,G=this.getSelfRect(),$=!I.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,V=G.width+$,W=G.height+$,M=!I.skipShadow&&this.hasShadow(),P=M?this.shadowOffsetX():0,O=M?this.shadowOffsetY():0,A=V+Math.abs(P),D=W+Math.abs(O),X=M&&this.shadowBlur()||0,N=A+X*2,F=D+X*2,z={width:N,height:F,x:-($/2+X)+Math.min(P,0)+G.x,y:-($/2+X)+Math.min(O,0)+G.y};return R?z:this._transformedRect(z,j)}drawScene(I,R,j){var G=this.getLayer(),B=I||G.getCanvas(),$=B.getContext(),V=this._getCanvasCache(),W=this.getSceneFunc(),M=this.hasShadow(),P,O,A=B.isCache,D=R===this;if(!this.isVisible()&&!D)return this;if(V){$.save();var X=this.getAbsoluteTransform(R).getMatrix();return $.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedSceneCanvas($),$.restore(),this}if(!W)return this;if($.save(),this._useBufferCanvas()&&!A){P=this.getStage();const z=j||P.bufferCanvas;O=z.getContext(),O.clear(),O.save(),O._applyLineJoin(this);var N=this.getAbsoluteTransform(R).getMatrix();O.transform(N[0],N[1],N[2],N[3],N[4],N[5]),W.call(this,O,this),O.restore();var F=z.pixelRatio;M&&$._applyShadow(this),$._applyOpacity(this),$._applyGlobalCompositeOperation(this),$.drawImage(z._canvas,0,0,z.width/F,z.height/F)}else{if($._applyLineJoin(this),!D){var N=this.getAbsoluteTransform(R).getMatrix();$.transform(N[0],N[1],N[2],N[3],N[4],N[5]),$._applyOpacity(this),$._applyGlobalCompositeOperation(this)}M&&$._applyShadow(this),W.call(this,$,this)}return $.restore(),this}drawHit(I,R,j=!1){if(!this.shouldDrawHit(R,j))return this;var G=this.getLayer(),B=I||G.hitCanvas,$=B&&B.getContext(),V=this.hitFunc()||this.sceneFunc(),W=this._getCanvasCache(),M=W&&W.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),M){$.save();var P=this.getAbsoluteTransform(R).getMatrix();return $.transform(P[0],P[1],P[2],P[3],P[4],P[5]),this._drawCachedHitCanvas($),$.restore(),this}if(!V)return this;if($.save(),$._applyLineJoin(this),!(this===R)){var A=this.getAbsoluteTransform(R).getMatrix();$.transform(A[0],A[1],A[2],A[3],A[4],A[5])}return V.call(this,$,this),$.restore(),this}drawHitFromCache(I=0){var R=this._getCanvasCache(),j=this._getCachedSceneCanvas(),G=R.hit,B=G.getContext(),$=G.getWidth(),V=G.getHeight(),W,M,P,O,A,D;B.clear(),B.drawImage(j._canvas,0,0,$,V);try{for(W=B.getImageData(0,0,$,V),M=W.data,P=M.length,O=n.Util._hexToRgb(this.colorKey),A=0;A<P;A+=4)D=M[A+3],D>I?(M[A]=O.r,M[A+1]=O.g,M[A+2]=O.b,M[A+3]=255):M[A+3]=0;B.putImageData(W,0,0)}catch(X){n.Util.error("Unable to draw hit graph from cached scene canvas. "+X.message)}return this}hasPointerCapture(I){return a.hasPointerCapture(I,this)}setPointerCapture(I){a.setPointerCapture(I,this)}releaseCapture(I){a.releaseCapture(I,this)}}e.Shape=w,w.prototype._fillFunc=m,w.prototype._strokeFunc=g,w.prototype._fillFuncHit=v,w.prototype._strokeFuncHit=_,w.prototype._centroid=!1,w.prototype.nodeType="Shape",(0,l._registerNode)(w),w.prototype.eventListeners={},w.prototype.on.call(w.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",y),w.prototype.on.call(w.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",x),w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",C),r.Factory.addGetterSetter(w,"stroke",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(w,"strokeWidth",2,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(w,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(w,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(w,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(w,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(w,"lineJoin"),r.Factory.addGetterSetter(w,"lineCap"),r.Factory.addGetterSetter(w,"sceneFunc"),r.Factory.addGetterSetter(w,"hitFunc"),r.Factory.addGetterSetter(w,"dash"),r.Factory.addGetterSetter(w,"dashOffset",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"shadowColor",void 0,(0,s.getStringValidator)()),r.Factory.addGetterSetter(w,"shadowBlur",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"shadowOpacity",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(w,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(w,"shadowOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"shadowOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillPatternImage"),r.Factory.addGetterSetter(w,"fill",void 0,(0,s.getStringOrGradientValidator)()),r.Factory.addGetterSetter(w,"fillPatternX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillPatternY",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(w,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(w,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(w,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(w,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(w,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(w,"fillEnabled",!0),r.Factory.addGetterSetter(w,"strokeEnabled",!0),r.Factory.addGetterSetter(w,"shadowEnabled",!0),r.Factory.addGetterSetter(w,"dashEnabled",!0),r.Factory.addGetterSetter(w,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(w,"fillPriority","color"),r.Factory.addComponentsGetterSetter(w,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(w,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(w,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(w,"fillPatternScaleX",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(w,"fillPatternScaleY",1,(0,s.getNumberValidator)()),r.Factory.addComponentsGetterSetter(w,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(w,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(w,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(w,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(w,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(w,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(w,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(w,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(w,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(w,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(w,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(w,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(w,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(w,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(w,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(w,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(w,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(w,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(w,"fillPatternRotation",0),r.Factory.addGetterSetter(w,"fillRule",void 0,(0,s.getStringValidator)()),r.Factory.backCompat(w,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Hn);Object.defineProperty(rg,"__esModule",{value:!0});rg.Layer=void 0;const Bs=un,DS=mc,Bc=en,DP=ut,sR=zi,jwe=je,Bwe=Hn,Uwe=ft;var $we="#",Gwe="beforeDraw",Vwe="draw",JB=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Hwe=JB.length;class Yh extends DS.Container{constructor(t){super(t),this.canvas=new sR.SceneCanvas,this.hitCanvas=new sR.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Bc.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=Bc.Node.prototype.moveUp.call(this);if(!t)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Bc.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Bc.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return Bc.Node.prototype.remove.call(this),t&&t.parentNode&&Bs.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&Bs.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Bc.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Bs.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Bs.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Bs.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var n=1,r=!1;;){for(let i=0;i<Hwe;i++){const s=JB[i],l=this._getIntersection({x:t.x+s.x*n,y:t.y+s.y*n}),a=l.shape;if(a)return a;if(r=!!l.antialiased,!l.antialiased)break}if(r)n+=1;else return null}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,i=r[3];if(i===255){const s=Bs.Util._rgbToHex(r[0],r[1],r[2]),l=Bwe.shapes[$we+s];return l?{shape:l}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(t,n){var r=this.getLayer(),i=t||r&&r.getCanvas();return this._fire(Gwe,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),DS.Container.prototype.drawScene.call(this,i,n),this._fire(Vwe,{node:this}),this}drawHit(t,n){var r=this.getLayer(),i=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),DS.Container.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Bs.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Bs.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return Bs.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}rg.Layer=Yh;Yh.prototype.nodeType="Layer";(0,Uwe._registerNode)(Yh);DP.Factory.addGetterSetter(Yh,"imageSmoothingEnabled",!0);DP.Factory.addGetterSetter(Yh,"clearBeforeDraw",!0);DP.Factory.addGetterSetter(Yh,"hitGraphEnabled",!0,(0,jwe.getBooleanValidator)());var j1={};Object.defineProperty(j1,"__esModule",{value:!0});j1.FastLayer=void 0;const zwe=un,Wwe=rg,Ywe=ft;class MP extends Wwe.Layer{constructor(t){super(t),this.listening(!1),zwe.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}j1.FastLayer=MP;MP.prototype.nodeType="FastLayer";(0,Ywe._registerNode)(MP);var Xh={};Object.defineProperty(Xh,"__esModule",{value:!0});Xh.Group=void 0;const Xwe=un,qwe=mc,Kwe=ft;class LP extends qwe.Container{_validateAdd(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&Xwe.Util.throw("You may only add groups and shapes to groups.")}}Xh.Group=LP;LP.prototype.nodeType="Group";(0,Kwe._registerNode)(LP);var qh={};Object.defineProperty(qh,"__esModule",{value:!0});qh.Animation=void 0;const MS=ft,oR=un,LS=function(){return MS.glob.performance&&MS.glob.performance.now?function(){return MS.glob.performance.now()}:function(){return new Date().getTime()}}();class ys{constructor(t,n){this.id=ys.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:LS(),frameRate:0},this.func=t,this.setLayers(n)}setLayers(t){let n=[];return t&&(n=Array.isArray(t)?t:[t]),this.layers=n,this}getLayers(){return this.layers}addLayer(t){const n=this.layers,r=n.length;for(let i=0;i<r;i++)if(n[i]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const n=ys.animations,r=n.length;for(let i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=LS(),ys._addAnimation(this),this}stop(){return ys._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const n=t.id,r=this.animations,i=r.length;for(let s=0;s<i;s++)if(r[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){const t={},n=this.animations;for(let r=0;r<n.length;r++){const i=n[r],s=i.layers,l=i.func;i._updateFrameObject(LS());const a=s.length;let o;if(l?o=l.call(i,i.frame)!==!1:o=!0,!!o)for(let c=0;c<a;c++){const h=s[c];h._id!==void 0&&(t[h._id]=h)}}for(let r in t)t.hasOwnProperty(r)&&t[r].batchDraw()}static _animationLoop(){const t=ys;t.animations.length?(t._runFrames(),oR.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,oR.Util.requestAnimFrame(this._animationLoop))}}qh.Animation=ys;ys.animations=[];ys.animIdCounter=0;ys.animRunning=!1;var ZB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=un,n=qh,r=en,i=ft;var s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=1,a=2,o=3,c=0,h=["fill","stroke","shadowColor"];class u{constructor(p,m,g,v,_,y,b){this.prop=p,this.propFunc=m,this.begin=v,this._pos=v,this.duration=y,this._change=0,this.prevPos=0,this.yoyo=b,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=g,this._change=_-this.begin,this.pause()}fire(p){var m=this[p];m&&m()}setTime(p){p>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():p<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=p,this.update())}getTime(){return this._time}setPosition(p){this.prevPos=this._pos,this.propFunc(p),this._pos=p}getPosition(p){return p===void 0&&(p=this._time),this.func(p,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=o,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(p){this.pause(),this._time=p,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var p=this.getTimer()-this._startTime;this.state===a?this.setTime(p):this.state===o&&this.setTime(this.duration-p)}pause(){this.state=l,this.fire("onPause")}getTimer(){return new Date().getTime()}}class f{constructor(p){var m=this,g=p.node,v=g._id,_,y=p.easing||e.Easings.Linear,b=!!p.yoyo,S;typeof p.duration>"u"?_=.3:p.duration===0?_=.001:_=p.duration,this.node=g,this._id=c++;var x=g.getLayer()||(g instanceof i.Konva.Stage?g.getLayers():null);x||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){m.tween.onEnterFrame()},x),this.tween=new u(S,function(C){m._tweenFunc(C)},y,0,1,_*1e3,b),this._addListeners(),f.attrs[v]||(f.attrs[v]={}),f.attrs[v][this._id]||(f.attrs[v][this._id]={}),f.tweens[v]||(f.tweens[v]={});for(S in p)s[S]===void 0&&this._addAttr(S,p[S]);this.reset(),this.onFinish=p.onFinish,this.onReset=p.onReset,this.onUpdate=p.onUpdate}_addAttr(p,m){var g=this.node,v=g._id,_,y,b,S,x,C,w,k;if(b=f.tweens[v][p],b&&delete f.attrs[v][b][p],_=g.getAttr(p),t.Util._isArray(m))if(y=[],x=Math.max(m.length,_.length),p==="points"&&m.length!==_.length&&(m.length>_.length?(w=_,_=t.Util._prepareArrayForTween(_,m,g.closed())):(C=m,m=t.Util._prepareArrayForTween(m,_,g.closed()))),p.indexOf("fill")===0)for(S=0;S<x;S++)if(S%2===0)y.push(m[S]-_[S]);else{var I=t.Util.colorToRGBA(_[S]);k=t.Util.colorToRGBA(m[S]),_[S]=I,y.push({r:k.r-I.r,g:k.g-I.g,b:k.b-I.b,a:k.a-I.a})}else for(S=0;S<x;S++)y.push(m[S]-_[S]);else h.indexOf(p)!==-1?(_=t.Util.colorToRGBA(_),k=t.Util.colorToRGBA(m),y={r:k.r-_.r,g:k.g-_.g,b:k.b-_.b,a:k.a-_.a}):y=m-_;f.attrs[v][this._id][p]={start:_,diff:y,end:m,trueEnd:C,trueStart:w},f.tweens[v][p]=this._id}_tweenFunc(p){var m=this.node,g=f.attrs[m._id][this._id],v,_,y,b,S,x,C,w;for(v in g){if(_=g[v],y=_.start,b=_.diff,w=_.end,t.Util._isArray(y))if(S=[],C=Math.max(y.length,w.length),v.indexOf("fill")===0)for(x=0;x<C;x++)x%2===0?S.push((y[x]||0)+b[x]*p):S.push("rgba("+Math.round(y[x].r+b[x].r*p)+","+Math.round(y[x].g+b[x].g*p)+","+Math.round(y[x].b+b[x].b*p)+","+(y[x].a+b[x].a*p)+")");else for(x=0;x<C;x++)S.push((y[x]||0)+b[x]*p);else h.indexOf(v)!==-1?S="rgba("+Math.round(y.r+b.r*p)+","+Math.round(y.g+b.g*p)+","+Math.round(y.b+b.b*p)+","+(y.a+b.a*p)+")":S=y+b*p;m.setAttr(v,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var p=this.node,m=f.attrs[p._id][this._id];m.points&&m.points.trueEnd&&p.setAttr("points",m.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var p=this.node,m=f.attrs[p._id][this._id];m.points&&m.points.trueStart&&p.points(m.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(p){return this.tween.seek(p*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var p=this.node._id,m=this._id,g=f.tweens[p],v;this.pause();for(v in g)delete f.tweens[p][v];delete f.attrs[p][m]}}e.Tween=f,f.attrs={},f.tweens={},r.Node.prototype.to=function(d){var p=d.onFinish;d.node=this,d.onFinish=function(){this.destroy(),p&&p()};var m=new f(d);m.play()},e.Easings={BackEaseIn(d,p,m,g){var v=1.70158;return m*(d/=g)*d*((v+1)*d-v)+p},BackEaseOut(d,p,m,g){var v=1.70158;return m*((d=d/g-1)*d*((v+1)*d+v)+1)+p},BackEaseInOut(d,p,m,g){var v=1.70158;return(d/=g/2)<1?m/2*(d*d*(((v*=1.525)+1)*d-v))+p:m/2*((d-=2)*d*(((v*=1.525)+1)*d+v)+2)+p},ElasticEaseIn(d,p,m,g,v,_){var y=0;return d===0?p:(d/=g)===1?p+m:(_||(_=g*.3),!v||v<Math.abs(m)?(v=m,y=_/4):y=_/(2*Math.PI)*Math.asin(m/v),-(v*Math.pow(2,10*(d-=1))*Math.sin((d*g-y)*(2*Math.PI)/_))+p)},ElasticEaseOut(d,p,m,g,v,_){var y=0;return d===0?p:(d/=g)===1?p+m:(_||(_=g*.3),!v||v<Math.abs(m)?(v=m,y=_/4):y=_/(2*Math.PI)*Math.asin(m/v),v*Math.pow(2,-10*d)*Math.sin((d*g-y)*(2*Math.PI)/_)+m+p)},ElasticEaseInOut(d,p,m,g,v,_){var y=0;return d===0?p:(d/=g/2)===2?p+m:(_||(_=g*(.3*1.5)),!v||v<Math.abs(m)?(v=m,y=_/4):y=_/(2*Math.PI)*Math.asin(m/v),d<1?-.5*(v*Math.pow(2,10*(d-=1))*Math.sin((d*g-y)*(2*Math.PI)/_))+p:v*Math.pow(2,-10*(d-=1))*Math.sin((d*g-y)*(2*Math.PI)/_)*.5+m+p)},BounceEaseOut(d,p,m,g){return(d/=g)<1/2.75?m*(7.5625*d*d)+p:d<2/2.75?m*(7.5625*(d-=1.5/2.75)*d+.75)+p:d<2.5/2.75?m*(7.5625*(d-=2.25/2.75)*d+.9375)+p:m*(7.5625*(d-=2.625/2.75)*d+.984375)+p},BounceEaseIn(d,p,m,g){return m-e.Easings.BounceEaseOut(g-d,0,m,g)+p},BounceEaseInOut(d,p,m,g){return d<g/2?e.Easings.BounceEaseIn(d*2,0,m,g)*.5+p:e.Easings.BounceEaseOut(d*2-g,0,m,g)*.5+m*.5+p},EaseIn(d,p,m,g){return m*(d/=g)*d+p},EaseOut(d,p,m,g){return-m*(d/=g)*(d-2)+p},EaseInOut(d,p,m,g){return(d/=g/2)<1?m/2*d*d+p:-m/2*(--d*(d-2)-1)+p},StrongEaseIn(d,p,m,g){return m*(d/=g)*d*d*d*d+p},StrongEaseOut(d,p,m,g){return m*((d=d/g-1)*d*d*d*d+1)+p},StrongEaseInOut(d,p,m,g){return(d/=g/2)<1?m/2*d*d*d*d*d+p:m/2*((d-=2)*d*d*d*d+2)+p},Linear(d,p,m,g){return m*d/g+p}}})(ZB);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=ft,n=un,r=en,i=mc,s=qB,l=rg,a=j1,o=Xh,c=F1,h=Hn,u=qh,f=ZB,d=lo,p=zi;e.Konva=n.Util._assign(t.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:i.Container,Stage:s.Stage,stages:s.stages,Layer:l.Layer,FastLayer:a.FastLayer,Group:o.Group,DD:c.DD,Shape:h.Shape,shapes:h.shapes,Animation:u.Animation,Tween:f.Tween,Easings:f.Easings,Context:d.Context,Canvas:p.Canvas}),e.default=e.Konva})(zB);var B1={};Object.defineProperty(B1,"__esModule",{value:!0});B1.Arc=void 0;const U1=ut,Qwe=Hn,aR=ft,$1=je,Jwe=ft;class Ao extends Qwe.Shape{_sceneFunc(t){var n=aR.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,r),t.arc(0,0,this.innerRadius(),n,0,!r),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=aR.Konva.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),l=1,a=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),o=Math.sin(Math.min(i,Math.PI/2)),c=s*(s>0?t:n),h=l*n,u=a*(a>0?t:n),f=o*(o>0?n:t);return{x:c,y:r?-1*f:u,width:h-c,height:f-u}}}B1.Arc=Ao;Ao.prototype._centroid=!0;Ao.prototype.className="Arc";Ao.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Jwe._registerNode)(Ao);U1.Factory.addGetterSetter(Ao,"innerRadius",0,(0,$1.getNumberValidator)());U1.Factory.addGetterSetter(Ao,"outerRadius",0,(0,$1.getNumberValidator)());U1.Factory.addGetterSetter(Ao,"angle",0,(0,$1.getNumberValidator)());U1.Factory.addGetterSetter(Ao,"clockwise",!1,(0,$1.getBooleanValidator)());var G1={},ig={};Object.defineProperty(ig,"__esModule",{value:!0});ig.Line=void 0;const V1=ut,Zwe=Hn,eU=je,e2e=ft;function L2(e,t,n,r,i,s,l){var a=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),o=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),c=l*a/(a+o),h=l*o/(a+o),u=n-c*(i-e),f=r-c*(s-t),d=n+h*(i-e),p=r+h*(s-t);return[u,f,d,p]}function lR(e,t){var n=e.length,r=[],i,s;for(i=2;i<n-2;i+=2)s=L2(e[i-2],e[i-1],e[i],e[i+1],e[i+2],e[i+3],t),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(e[i]),r.push(e[i+1]),r.push(s[2]),r.push(s[3]));return r}class Ya extends Zwe.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var n=this.points(),r=n.length,i=this.tension(),s=this.closed(),l=this.bezier(),a,o,c;if(r){if(t.beginPath(),t.moveTo(n[0],n[1]),i!==0&&r>4){for(a=this.getTensionPoints(),o=a.length,c=s?0:4,s||t.quadraticCurveTo(a[0],a[1],a[2],a[3]);c<o-2;)t.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);s||t.quadraticCurveTo(a[o-2],a[o-1],n[r-2],n[r-1])}else if(l)for(c=2;c<r;)t.bezierCurveTo(n[c++],n[c++],n[c++],n[c++],n[c++],n[c++]);else for(c=2;c<r;c+=2)t.lineTo(n[c],n[c+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():lR(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),n=t.length,r=this.tension(),i=L2(t[n-2],t[n-1],t[0],t[1],t[2],t[3],r),s=L2(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],r),l=lR(t,r),a=[i[2],i[3]].concat(l).concat([s[0],s[1],t[n-2],t[n-1],s[2],s[3],i[0],i[1],t[0],t[1]]);return a}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var n=t[0],r=t[0],i=t[1],s=t[1],l,a,o=0;o<t.length/2;o++)l=t[o*2],a=t[o*2+1],n=Math.min(n,l),r=Math.max(r,l),i=Math.min(i,a),s=Math.max(s,a);return{x:n,y:i,width:r-n,height:s-i}}}ig.Line=Ya;Ya.prototype.className="Line";Ya.prototype._attrsAffectingSize=["points","bezier","tension"];(0,e2e._registerNode)(Ya);V1.Factory.addGetterSetter(Ya,"closed",!1);V1.Factory.addGetterSetter(Ya,"bezier",!1);V1.Factory.addGetterSetter(Ya,"tension",0,(0,eU.getNumberValidator)());V1.Factory.addGetterSetter(Ya,"points",[],(0,eU.getNumberArrayValidator)());var Kh={},tU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(l,a,o)=>{let c,h,u;c=o/2,h=0;for(let d=0;d<20;d++)u=c*e.tValues[20][d]+c,h+=e.cValues[20][d]*r(l,a,u);return c*h};e.getCubicArcLength=t;const n=(l,a,o)=>{o===void 0&&(o=1);const c=l[0]-2*l[1]+l[2],h=a[0]-2*a[1]+a[2],u=2*l[1]-2*l[0],f=2*a[1]-2*a[0],d=4*(c*c+h*h),p=4*(c*u+h*f),m=u*u+f*f;if(d===0)return o*Math.sqrt(Math.pow(l[2]-l[0],2)+Math.pow(a[2]-a[0],2));const g=p/(2*d),v=m/d,_=o+g,y=v-g*g,b=_*_+y>0?Math.sqrt(_*_+y):0,S=g*g+y>0?Math.sqrt(g*g+y):0,x=g+Math.sqrt(g*g+y)!==0?y*Math.log(Math.abs((_+b)/(g+S))):0;return Math.sqrt(d)/2*(_*b-g*S+x)};e.getQuadraticArcLength=n;function r(l,a,o){const c=i(1,o,l),h=i(1,o,a),u=c*c+h*h;return Math.sqrt(u)}const i=(l,a,o)=>{const c=o.length-1;let h,u;if(c===0)return 0;if(l===0){u=0;for(let f=0;f<=c;f++)u+=e.binomialCoefficients[c][f]*Math.pow(1-a,c-f)*Math.pow(a,f)*o[f];return u}else{h=new Array(c);for(let f=0;f<c;f++)h[f]=c*(o[f+1]-o[f]);return i(l-1,a,h)}},s=(l,a,o)=>{let c=1,h=l/a,u=(l-o(h))/a,f=0;for(;c>.001;){const d=o(h+u),p=Math.abs(l-d)/a;if(p<c)c=p,h+=u;else{const m=o(h-u),g=Math.abs(l-m)/a;g<c?(c=g,h-=u):u/=2}if(f++,f>500)break}return h};e.t2length=s})(tU);Object.defineProperty(Kh,"__esModule",{value:!0});Kh.Path=void 0;const t2e=ut,n2e=Hn,r2e=ft,Uc=tU;class Nn extends n2e.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Nn.parsePathData(this.data()),this.pathLength=Nn.getPathLength(this.dataArray)}_sceneFunc(t){var n=this.dataArray;t.beginPath();for(var r=!1,i=0;i<n.length;i++){var s=n[i].command,l=n[i].points;switch(s){case"L":t.lineTo(l[0],l[1]);break;case"M":t.moveTo(l[0],l[1]);break;case"C":t.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);break;case"Q":t.quadraticCurveTo(l[0],l[1],l[2],l[3]);break;case"A":var a=l[0],o=l[1],c=l[2],h=l[3],u=l[4],f=l[5],d=l[6],p=l[7],m=c>h?c:h,g=c>h?1:c/h,v=c>h?h/c:1;t.translate(a,o),t.rotate(d),t.scale(g,v),t.arc(0,0,m,u,u+f,1-p),t.scale(1/g,1/v),t.rotate(-d),t.translate(-a,-o);break;case"z":r=!0,t.closePath();break}}!r&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(c){if(c.command==="A"){var h=c.points[4],u=c.points[5],f=c.points[4]+u,d=Math.PI/180;if(Math.abs(h-f)<d&&(d=Math.abs(h-f)),u<0)for(let p=h-d;p>f;p-=d){const m=Nn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],p,0);t.push(m.x,m.y)}else for(let p=h+d;p<f;p+=d){const m=Nn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],p,0);t.push(m.x,m.y)}}else if(c.command==="C")for(let p=0;p<=1;p+=.01){const m=Nn.getPointOnCubicBezier(p,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);t.push(m.x,m.y)}else t=t.concat(c.points)});for(var n=t[0],r=t[0],i=t[1],s=t[1],l,a,o=0;o<t.length/2;o++)l=t[o*2],a=t[o*2+1],isNaN(l)||(n=Math.min(n,l),r=Math.max(r,l)),isNaN(a)||(i=Math.min(i,a),s=Math.max(s,a));return{x:n,y:i,width:r-n,height:s-i}}getLength(){return this.pathLength}getPointAtLength(t){return Nn.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,n,r,i){return Math.sqrt((r-t)*(r-t)+(i-n)*(i-n))}static getPathLength(t){let n=0;for(var r=0;r<t.length;++r)n+=t[r].pathLength;return n}static getPointAtLengthOfDataArray(t,n){var r,i=0,s=n.length;if(!s)return null;for(;i<s&&t>n[i].pathLength;)t-=n[i].pathLength,++i;if(i===s)return r=n[i-1].points.slice(-2),{x:r[0],y:r[1]};if(t<.01)return r=n[i].points.slice(0,2),{x:r[0],y:r[1]};var l=n[i],a=l.points;switch(l.command){case"L":return Nn.getPointOnLine(t,l.start.x,l.start.y,a[0],a[1]);case"C":return Nn.getPointOnCubicBezier((0,Uc.t2length)(t,Nn.getPathLength(n),m=>(0,Uc.getCubicArcLength)([l.start.x,a[0],a[2],a[4]],[l.start.y,a[1],a[3],a[5]],m)),l.start.x,l.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Nn.getPointOnQuadraticBezier((0,Uc.t2length)(t,Nn.getPathLength(n),m=>(0,Uc.getQuadraticArcLength)([l.start.x,a[0],a[2]],[l.start.y,a[1],a[3]],m)),l.start.x,l.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],c=a[1],h=a[2],u=a[3],f=a[4],d=a[5],p=a[6];return f+=d*t/l.pathLength,Nn.getPointOnEllipticalArc(o,c,h,u,f,p)}return null}static getPointOnLine(t,n,r,i,s,l,a){l===void 0&&(l=n),a===void 0&&(a=r);var o=(s-r)/(i-n+1e-8),c=Math.sqrt(t*t/(1+o*o));i<n&&(c*=-1);var h=o*c,u;if(i===n)u={x:l,y:a+h};else if((a-r)/(l-n+1e-8)===o)u={x:l+c,y:a+h};else{var f,d,p=this.getLineLength(n,r,i,s),m=(l-n)*(i-n)+(a-r)*(s-r);m=m/(p*p),f=n+m*(i-n),d=r+m*(s-r);var g=this.getLineLength(l,a,f,d),v=Math.sqrt(t*t-g*g);c=Math.sqrt(v*v/(1+o*o)),i<n&&(c*=-1),h=o*c,u={x:f+c,y:d+h}}return u}static getPointOnCubicBezier(t,n,r,i,s,l,a,o,c){function h(g){return g*g*g}function u(g){return 3*g*g*(1-g)}function f(g){return 3*g*(1-g)*(1-g)}function d(g){return(1-g)*(1-g)*(1-g)}var p=o*h(t)+l*u(t)+i*f(t)+n*d(t),m=c*h(t)+a*u(t)+s*f(t)+r*d(t);return{x:p,y:m}}static getPointOnQuadraticBezier(t,n,r,i,s,l,a){function o(d){return d*d}function c(d){return 2*d*(1-d)}function h(d){return(1-d)*(1-d)}var u=l*o(t)+i*c(t)+n*h(t),f=a*o(t)+s*c(t)+r*h(t);return{x:u,y:f}}static getPointOnEllipticalArc(t,n,r,i,s,l){var a=Math.cos(l),o=Math.sin(l),c={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:t+(c.x*a-c.y*o),y:n+(c.x*o+c.y*a)}}static parsePathData(t){if(!t)return[];var n=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);var s=n.split("|"),l=[],a=[],o=0,c=0,h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,u;for(i=1;i<s.length;i++){var f=s[i],d=f.charAt(0);for(f=f.slice(1),a.length=0;u=h.exec(f);)a.push(u[0]);for(var p=[],m=0,g=a.length;m<g;m++){if(a[m]==="00"){p.push(0,0);continue}var v=parseFloat(a[m]);isNaN(v)?p.push(0):p.push(v)}for(;p.length>0&&!isNaN(p[0]);){var _="",y=[],b=o,S=c,x,C,w,k,I,R,j,G,B,$;switch(d){case"l":o+=p.shift(),c+=p.shift(),_="L",y.push(o,c);break;case"L":o=p.shift(),c=p.shift(),y.push(o,c);break;case"m":var V=p.shift(),W=p.shift();if(o+=V,c+=W,_="M",l.length>2&&l[l.length-1].command==="z"){for(var M=l.length-2;M>=0;M--)if(l[M].command==="M"){o=l[M].points[0]+V,c=l[M].points[1]+W;break}}y.push(o,c),d="l";break;case"M":o=p.shift(),c=p.shift(),_="M",y.push(o,c),d="L";break;case"h":o+=p.shift(),_="L",y.push(o,c);break;case"H":o=p.shift(),_="L",y.push(o,c);break;case"v":c+=p.shift(),_="L",y.push(o,c);break;case"V":c=p.shift(),_="L",y.push(o,c);break;case"C":y.push(p.shift(),p.shift(),p.shift(),p.shift()),o=p.shift(),c=p.shift(),y.push(o,c);break;case"c":y.push(o+p.shift(),c+p.shift(),o+p.shift(),c+p.shift()),o+=p.shift(),c+=p.shift(),_="C",y.push(o,c);break;case"S":C=o,w=c,x=l[l.length-1],x.command==="C"&&(C=o+(o-x.points[2]),w=c+(c-x.points[3])),y.push(C,w,p.shift(),p.shift()),o=p.shift(),c=p.shift(),_="C",y.push(o,c);break;case"s":C=o,w=c,x=l[l.length-1],x.command==="C"&&(C=o+(o-x.points[2]),w=c+(c-x.points[3])),y.push(C,w,o+p.shift(),c+p.shift()),o+=p.shift(),c+=p.shift(),_="C",y.push(o,c);break;case"Q":y.push(p.shift(),p.shift()),o=p.shift(),c=p.shift(),y.push(o,c);break;case"q":y.push(o+p.shift(),c+p.shift()),o+=p.shift(),c+=p.shift(),_="Q",y.push(o,c);break;case"T":C=o,w=c,x=l[l.length-1],x.command==="Q"&&(C=o+(o-x.points[0]),w=c+(c-x.points[1])),o=p.shift(),c=p.shift(),_="Q",y.push(C,w,o,c);break;case"t":C=o,w=c,x=l[l.length-1],x.command==="Q"&&(C=o+(o-x.points[0]),w=c+(c-x.points[1])),o+=p.shift(),c+=p.shift(),_="Q",y.push(C,w,o,c);break;case"A":k=p.shift(),I=p.shift(),R=p.shift(),j=p.shift(),G=p.shift(),B=o,$=c,o=p.shift(),c=p.shift(),_="A",y=this.convertEndpointToCenterParameterization(B,$,o,c,j,G,k,I,R);break;case"a":k=p.shift(),I=p.shift(),R=p.shift(),j=p.shift(),G=p.shift(),B=o,$=c,o+=p.shift(),c+=p.shift(),_="A",y=this.convertEndpointToCenterParameterization(B,$,o,c,j,G,k,I,R);break}l.push({command:_||d,points:y,start:{x:b,y:S},pathLength:this.calcLength(b,S,_||d,y)})}(d==="z"||d==="Z")&&l.push({command:"z",points:[],start:void 0,pathLength:0})}return l}static calcLength(t,n,r,i){var s,l,a,o,c=Nn;switch(r){case"L":return c.getLineLength(t,n,i[0],i[1]);case"C":return(0,Uc.getCubicArcLength)([t,i[0],i[2],i[4]],[n,i[1],i[3],i[5]],1);case"Q":return(0,Uc.getQuadraticArcLength)([t,i[0],i[2]],[n,i[1],i[3]],1);case"A":s=0;var h=i[4],u=i[5],f=i[4]+u,d=Math.PI/180;if(Math.abs(h-f)<d&&(d=Math.abs(h-f)),l=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),u<0)for(o=h-d;o>f;o-=d)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],o,0),s+=c.getLineLength(l.x,l.y,a.x,a.y),l=a;else for(o=h+d;o<f;o+=d)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],o,0),s+=c.getLineLength(l.x,l.y,a.x,a.y),l=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0),s+=c.getLineLength(l.x,l.y,a.x,a.y),s}return 0}static convertEndpointToCenterParameterization(t,n,r,i,s,l,a,o,c){var h=c*(Math.PI/180),u=Math.cos(h)*(t-r)/2+Math.sin(h)*(n-i)/2,f=-1*Math.sin(h)*(t-r)/2+Math.cos(h)*(n-i)/2,d=u*u/(a*a)+f*f/(o*o);d>1&&(a*=Math.sqrt(d),o*=Math.sqrt(d));var p=Math.sqrt((a*a*(o*o)-a*a*(f*f)-o*o*(u*u))/(a*a*(f*f)+o*o*(u*u)));s===l&&(p*=-1),isNaN(p)&&(p=0);var m=p*a*f/o,g=p*-o*u/a,v=(t+r)/2+Math.cos(h)*m-Math.sin(h)*g,_=(n+i)/2+Math.sin(h)*m+Math.cos(h)*g,y=function(I){return Math.sqrt(I[0]*I[0]+I[1]*I[1])},b=function(I,R){return(I[0]*R[0]+I[1]*R[1])/(y(I)*y(R))},S=function(I,R){return(I[0]*R[1]<I[1]*R[0]?-1:1)*Math.acos(b(I,R))},x=S([1,0],[(u-m)/a,(f-g)/o]),C=[(u-m)/a,(f-g)/o],w=[(-1*u-m)/a,(-1*f-g)/o],k=S(C,w);return b(C,w)<=-1&&(k=Math.PI),b(C,w)>=1&&(k=0),l===0&&k>0&&(k=k-2*Math.PI),l===1&&k<0&&(k=k+2*Math.PI),[v,_,a,o,x,k,h,l]}}Kh.Path=Nn;Nn.prototype.className="Path";Nn.prototype._attrsAffectingSize=["data"];(0,r2e._registerNode)(Nn);t2e.Factory.addGetterSetter(Nn,"data");Object.defineProperty(G1,"__esModule",{value:!0});G1.Arrow=void 0;const H1=ut,i2e=ig,nU=je,s2e=ft,cR=Kh;class yc extends i2e.Line{_sceneFunc(t){super._sceneFunc(t);var n=Math.PI*2,r=this.points(),i=r,s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());var l=this.pointerLength(),a=r.length,o,c;if(s){const f=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[a-2],r[a-1]],d=cR.Path.calcLength(i[i.length-4],i[i.length-3],"C",f),p=cR.Path.getPointOnQuadraticBezier(Math.min(1,1-l/d),f[0],f[1],f[2],f[3],f[4],f[5]);o=r[a-2]-p.x,c=r[a-1]-p.y}else o=r[a-2]-r[a-4],c=r[a-1]-r[a-3];var h=(Math.atan2(c,o)+n)%n,u=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[a-2],r[a-1]),t.rotate(h),t.moveTo(0,0),t.lineTo(-l,u/2),t.lineTo(-l,-u/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),s?(o=(i[0]+i[2])/2-r[0],c=(i[1]+i[3])/2-r[1]):(o=r[2]-r[0],c=r[3]-r[1]),t.rotate((Math.atan2(-c,-o)+n)%n),t.moveTo(0,0),t.lineTo(-l,u/2),t.lineTo(-l,-u/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+n*2,height:t.height+n*2}}}G1.Arrow=yc;yc.prototype.className="Arrow";(0,s2e._registerNode)(yc);H1.Factory.addGetterSetter(yc,"pointerLength",10,(0,nU.getNumberValidator)());H1.Factory.addGetterSetter(yc,"pointerWidth",10,(0,nU.getNumberValidator)());H1.Factory.addGetterSetter(yc,"pointerAtBeginning",!1);H1.Factory.addGetterSetter(yc,"pointerAtEnding",!0);var z1={};Object.defineProperty(z1,"__esModule",{value:!0});z1.Circle=void 0;const o2e=ut,a2e=Hn,l2e=je,c2e=ft;class Qh extends a2e.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}z1.Circle=Qh;Qh.prototype._centroid=!0;Qh.prototype.className="Circle";Qh.prototype._attrsAffectingSize=["radius"];(0,c2e._registerNode)(Qh);o2e.Factory.addGetterSetter(Qh,"radius",0,(0,l2e.getNumberValidator)());var W1={};Object.defineProperty(W1,"__esModule",{value:!0});W1.Ellipse=void 0;const FP=ut,u2e=Hn,rU=je,h2e=ft;class Xa extends u2e.Shape{_sceneFunc(t){var n=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),n!==r&&t.scale(1,r/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}W1.Ellipse=Xa;Xa.prototype.className="Ellipse";Xa.prototype._centroid=!0;Xa.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,h2e._registerNode)(Xa);FP.Factory.addComponentsGetterSetter(Xa,"radius",["x","y"]);FP.Factory.addGetterSetter(Xa,"radiusX",0,(0,rU.getNumberValidator)());FP.Factory.addGetterSetter(Xa,"radiusY",0,(0,rU.getNumberValidator)());var Y1={};Object.defineProperty(Y1,"__esModule",{value:!0});Y1.Image=void 0;const FS=un,_c=ut,f2e=Hn,d2e=ft,sg=je;let Ms=class iU extends f2e.Shape{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let l;if(s){const a=this.attrs.cropWidth,o=this.attrs.cropHeight;a&&o?l=[s,this.cropX(),this.cropY(),a,o,0,0,n,r]:l=[s,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(t.beginPath(),i?FS.Util.drawRoundedRectPath(t,n,r,i):t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)),s&&(i&&t.clip(),t.drawImage.apply(t,l))}_hitFunc(t){var n=this.width(),r=this.height(),i=this.cornerRadius();t.beginPath(),i?FS.Util.drawRoundedRectPath(t,n,r,i):t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(t,n,r=null){var i=FS.Util.createImageElement();i.onload=function(){var s=new iU({image:i});n(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=t}};Y1.Image=Ms;Ms.prototype.className="Image";(0,d2e._registerNode)(Ms);_c.Factory.addGetterSetter(Ms,"cornerRadius",0,(0,sg.getNumberOrArrayOfNumbersValidator)(4));_c.Factory.addGetterSetter(Ms,"image");_c.Factory.addComponentsGetterSetter(Ms,"crop",["x","y","width","height"]);_c.Factory.addGetterSetter(Ms,"cropX",0,(0,sg.getNumberValidator)());_c.Factory.addGetterSetter(Ms,"cropY",0,(0,sg.getNumberValidator)());_c.Factory.addGetterSetter(Ms,"cropWidth",0,(0,sg.getNumberValidator)());_c.Factory.addGetterSetter(Ms,"cropHeight",0,(0,sg.getNumberValidator)());var vh={};Object.defineProperty(vh,"__esModule",{value:!0});vh.Tag=vh.Label=void 0;const X1=ut,p2e=Hn,g2e=Xh,NP=je,sU=ft;var oU=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],m2e="Change.konva",v2e="none",F2="up",N2="right",j2="down",B2="left",y2e=oU.length;class jP extends g2e.Group{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var n=this,r,i=function(){n._sync()};for(r=0;r<y2e;r++)t.on(oU[r]+m2e,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t=this.getText(),n=this.getTag(),r,i,s,l,a,o,c;if(t&&n){switch(r=t.width(),i=t.height(),s=n.pointerDirection(),l=n.pointerWidth(),c=n.pointerHeight(),a=0,o=0,s){case F2:a=r/2,o=-1*c;break;case N2:a=r+l,o=i/2;break;case j2:a=r/2,o=i+c;break;case B2:a=-1*l,o=i/2;break}n.setAttrs({x:-1*a,y:-1*o,width:r,height:i}),t.setAttrs({x:-1*a,y:-1*o})}}}vh.Label=jP;jP.prototype.className="Label";(0,sU._registerNode)(jP);class bc extends p2e.Shape{_sceneFunc(t){var n=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),l=this.pointerHeight(),a=this.cornerRadius();let o=0,c=0,h=0,u=0;typeof a=="number"?o=c=h=u=Math.min(a,n/2,r/2):(o=Math.min(a[0]||0,n/2,r/2),c=Math.min(a[1]||0,n/2,r/2),u=Math.min(a[2]||0,n/2,r/2),h=Math.min(a[3]||0,n/2,r/2)),t.beginPath(),t.moveTo(o,0),i===F2&&(t.lineTo((n-s)/2,0),t.lineTo(n/2,-1*l),t.lineTo((n+s)/2,0)),t.lineTo(n-c,0),t.arc(n-c,c,c,Math.PI*3/2,0,!1),i===N2&&(t.lineTo(n,(r-l)/2),t.lineTo(n+s,r/2),t.lineTo(n,(r+l)/2)),t.lineTo(n,r-u),t.arc(n-u,r-u,u,0,Math.PI/2,!1),i===j2&&(t.lineTo((n+s)/2,r),t.lineTo(n/2,r+l),t.lineTo((n-s)/2,r)),t.lineTo(h,r),t.arc(h,r-h,h,Math.PI/2,Math.PI,!1),i===B2&&(t.lineTo(0,(r+l)/2),t.lineTo(-1*s,r/2),t.lineTo(0,(r-l)/2)),t.lineTo(0,o),t.arc(o,o,o,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),l=this.width(),a=this.height();return s===F2?(n-=i,a+=i):s===j2?a+=i:s===B2?(t-=r*1.5,l+=r):s===N2&&(l+=r*1.5),{x:t,y:n,width:l,height:a}}}vh.Tag=bc;bc.prototype.className="Tag";(0,sU._registerNode)(bc);X1.Factory.addGetterSetter(bc,"pointerDirection",v2e);X1.Factory.addGetterSetter(bc,"pointerWidth",0,(0,NP.getNumberValidator)());X1.Factory.addGetterSetter(bc,"pointerHeight",0,(0,NP.getNumberValidator)());X1.Factory.addGetterSetter(bc,"cornerRadius",0,(0,NP.getNumberOrArrayOfNumbersValidator)(4));var og={};Object.defineProperty(og,"__esModule",{value:!0});og.Rect=void 0;const _2e=ut,b2e=Hn,S2e=ft,x2e=un,w2e=je;class q1 extends b2e.Shape{_sceneFunc(t){var n=this.cornerRadius(),r=this.width(),i=this.height();t.beginPath(),n?x2e.Util.drawRoundedRectPath(t,r,i,n):t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)}}og.Rect=q1;q1.prototype.className="Rect";(0,S2e._registerNode)(q1);_2e.Factory.addGetterSetter(q1,"cornerRadius",0,(0,w2e.getNumberOrArrayOfNumbersValidator)(4));var K1={};Object.defineProperty(K1,"__esModule",{value:!0});K1.RegularPolygon=void 0;const aU=ut,C2e=Hn,lU=je,T2e=ft;class Sc extends C2e.Shape{_sceneFunc(t){const n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var i=0;i<t;i++)r.push({x:n*Math.sin(i*2*Math.PI/t),y:-1*n*Math.cos(i*2*Math.PI/t)});return r}getSelfRect(){const t=this._getPoints();var n=t[0].x,r=t[0].y,i=t[0].x,s=t[0].y;return t.forEach(l=>{n=Math.min(n,l.x),r=Math.max(r,l.x),i=Math.min(i,l.y),s=Math.max(s,l.y)}),{x:n,y:i,width:r-n,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}K1.RegularPolygon=Sc;Sc.prototype.className="RegularPolygon";Sc.prototype._centroid=!0;Sc.prototype._attrsAffectingSize=["radius"];(0,T2e._registerNode)(Sc);aU.Factory.addGetterSetter(Sc,"radius",0,(0,lU.getNumberValidator)());aU.Factory.addGetterSetter(Sc,"sides",0,(0,lU.getNumberValidator)());var Q1={};Object.defineProperty(Q1,"__esModule",{value:!0});Q1.Ring=void 0;const cU=ut,E2e=Hn,uU=je,P2e=ft;var uR=Math.PI*2;class xc extends E2e.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,uR,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),uR,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Q1.Ring=xc;xc.prototype.className="Ring";xc.prototype._centroid=!0;xc.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,P2e._registerNode)(xc);cU.Factory.addGetterSetter(xc,"innerRadius",0,(0,uU.getNumberValidator)());cU.Factory.addGetterSetter(xc,"outerRadius",0,(0,uU.getNumberValidator)());var J1={};Object.defineProperty(J1,"__esModule",{value:!0});J1.Sprite=void 0;const wc=ut,I2e=Hn,O2e=qh,hU=je,k2e=ft;class Ls extends I2e.Shape{constructor(t){super(t),this._updated=!0,this.anim=new O2e.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],l=this.frameOffsets(),a=s[i+0],o=s[i+1],c=s[i+2],h=s[i+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,c,h),t.closePath(),t.fillStrokeShape(this)),u)if(l){var f=l[n],d=r*2;t.drawImage(u,a,o,c,h,f[d+0],f[d+1],c,h)}else t.drawImage(u,a,o,c,h,0,0,c,h)}_hitFunc(t){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],l=this.frameOffsets(),a=s[i+2],o=s[i+3];if(t.beginPath(),l){var c=l[n],h=r*2;t.rect(c[h+0],c[h+1],a,o)}else t.rect(0,0,a,o);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],s=i.length/4;t<s-1?this.frameIndex(t+1):this.frameIndex(0)}}J1.Sprite=Ls;Ls.prototype.className="Sprite";(0,k2e._registerNode)(Ls);wc.Factory.addGetterSetter(Ls,"animation");wc.Factory.addGetterSetter(Ls,"animations");wc.Factory.addGetterSetter(Ls,"frameOffsets");wc.Factory.addGetterSetter(Ls,"image");wc.Factory.addGetterSetter(Ls,"frameIndex",0,(0,hU.getNumberValidator)());wc.Factory.addGetterSetter(Ls,"frameRate",17,(0,hU.getNumberValidator)());wc.Factory.backCompat(Ls,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Z1={};Object.defineProperty(Z1,"__esModule",{value:!0});Z1.Star=void 0;const BP=ut,A2e=Hn,UP=je,R2e=ft;class qa extends A2e.Shape{_sceneFunc(t){var n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var s=1;s<i*2;s++){var l=s%2===0?r:n,a=l*Math.sin(s*Math.PI/i),o=-1*l*Math.cos(s*Math.PI/i);t.lineTo(a,o)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Z1.Star=qa;qa.prototype.className="Star";qa.prototype._centroid=!0;qa.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,R2e._registerNode)(qa);BP.Factory.addGetterSetter(qa,"numPoints",5,(0,UP.getNumberValidator)());BP.Factory.addGetterSetter(qa,"innerRadius",0,(0,UP.getNumberValidator)());BP.Factory.addGetterSetter(qa,"outerRadius",0,(0,UP.getNumberValidator)());var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.Text=Zl.stringToArray=void 0;const U2=un,dr=ut,D2e=Hn,Ka=je,M2e=ft;function fU(e){return Array.from(e)}Zl.stringToArray=fU;var $c="auto",L2e="center",dU="inherit",Df="justify",F2e="Change.konva",N2e="2d",hR="-",pU="left",j2e="text",B2e="Text",U2e="top",$2e="bottom",fR="middle",gU="normal",G2e="px ",Pm=" ",V2e="right",dR="rtl",H2e="word",z2e="char",pR="none",NS="",mU=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],W2e=mU.length;function Y2e(e){return e.split(",").map(t=>{t=t.trim();const n=t.indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!r&&(t=`"${t}"`),t}).join(", ")}var Im;function jS(){return Im||(Im=U2.Util.createCanvasElement().getContext(N2e),Im)}function X2e(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function q2e(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function K2e(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class yn extends D2e.Shape{constructor(t){super(K2e(t)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<W2e;n++)this.on(mU[n]+F2e,this._setTextData);this._setTextData()}_sceneFunc(t){var n=this.textArr,r=n.length;if(this.text()){var i=this.padding(),s=this.fontSize(),l=this.lineHeight()*s,a=this.verticalAlign(),o=this.direction(),c=0,h=this.align(),u=this.getWidth(),f=this.letterSpacing(),d=this.fill(),p=this.textDecoration(),m=p.indexOf("underline")!==-1,g=p.indexOf("line-through")!==-1,v;o=o===dU?t.direction:o;var _=0,_=l/2,y=0,b=0;for(o===dR&&t.setAttr("direction",o),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",fR),t.setAttr("textAlign",pU),a===fR?c=(this.getHeight()-r*l-i*2)/2:a===$2e&&(c=this.getHeight()-r*l-i*2),t.translate(i,c+i),v=0;v<r;v++){var y=0,b=0,S=n[v],x=S.text,C=S.width,w=S.lastInParagraph,k,I,R;if(t.save(),h===V2e?y+=u-C-i*2:h===L2e&&(y+=(u-C-i*2)/2),m){t.save(),t.beginPath(),t.moveTo(y,_+b+Math.round(s/2)),k=x.split(" ").length-1,I=k===0,R=h===Df&&!w?u-i*2:C,t.lineTo(y+Math.round(R),_+b+Math.round(s/2)),t.lineWidth=s/15;const W=this._getLinearGradient();t.strokeStyle=W||d,t.stroke(),t.restore()}if(g){t.save(),t.beginPath(),t.moveTo(y,_+b),k=x.split(" ").length-1,I=k===0,R=h===Df&&w&&!I?u-i*2:C,t.lineTo(y+Math.round(R),_+b),t.lineWidth=s/15;const W=this._getLinearGradient();t.strokeStyle=W||d,t.stroke(),t.restore()}if(o!==dR&&(f!==0||h===Df)){k=x.split(" ").length-1;for(var j=fU(x),G=0;G<j.length;G++){var B=j[G];B===" "&&!w&&h===Df&&(y+=(u-i*2-C)/k),this._partialTextX=y,this._partialTextY=_+b,this._partialText=B,t.fillStrokeShape(this),y+=this.measureSize(B).width+f}}else f!==0&&t.setAttr("letterSpacing",`${f}px`),this._partialTextX=y,this._partialTextY=_+b,this._partialText=x,t.fillStrokeShape(this);t.restore(),r>1&&(_+=l)}}}_hitFunc(t){var n=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)}setText(t){var n=U2.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(j2e,n),this}getWidth(){var t=this.attrs.width===$c||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===$c||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return U2.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var n=jS(),r=this.fontSize(),i;return n.save(),n.font=this._getContextFont(),i=n.measureText(t),n.restore(),{width:i.width,height:r}}_getContextFont(){return this.fontStyle()+Pm+this.fontVariant()+Pm+(this.fontSize()+G2e)+Y2e(this.fontFamily())}_addTextLine(t){this.align()===Df&&(t=t.trim());var r=this._getTextWidth(t);return this.textArr.push({text:t,width:r,lastInParagraph:!1})}_getTextWidth(t){var n=this.letterSpacing(),r=t.length;return jS().measureText(t).width+(r?n*(r-1):0)}_setTextData(){var t=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,s=this.attrs.width,l=this.attrs.height,a=s!==$c&&s!==void 0,o=l!==$c&&l!==void 0,c=this.padding(),h=s-c*2,u=l-c*2,f=0,d=this.wrap(),p=d!==pR,m=d!==z2e&&p,g=this.ellipsis();this.textArr=[],jS().font=this._getContextFont();for(var v=g?this._getTextWidth(NS):0,_=0,y=t.length;_<y;++_){var b=t[_],S=this._getTextWidth(b);if(a&&S>h)for(;b.length>0;){for(var x=0,C=b.length,w="",k=0;x<C;){var I=x+C>>>1,R=b.slice(0,I+1),j=this._getTextWidth(R)+v;j<=h?(x=I+1,w=R,k=j):C=I}if(w){if(m){var G,B=b[w.length],$=B===Pm||B===hR;$&&k<=h?G=w.length:G=Math.max(w.lastIndexOf(Pm),w.lastIndexOf(hR))+1,G>0&&(x=G,w=w.slice(0,x),k=this._getTextWidth(w))}w=w.trimRight(),this._addTextLine(w),r=Math.max(r,k),f+=i;var V=this._shouldHandleEllipsis(f);if(V){this._tryToAddEllipsisToLastLine();break}if(b=b.slice(x),b=b.trimLeft(),b.length>0&&(S=this._getTextWidth(b),S<=h)){this._addTextLine(b),f+=i,r=Math.max(r,S);break}}else break}else this._addTextLine(b),f+=i,r=Math.max(r,S),this._shouldHandleEllipsis(f)&&_<y-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),o&&f+i>u)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(t){var n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,s=i!==$c&&i!==void 0,l=this.padding(),a=i-l*2,o=this.wrap(),c=o!==pR;return!c||s&&t+r>a}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,n=t!==$c&&t!==void 0,r=this.padding(),i=t-r*2,s=this.ellipsis(),l=this.textArr[this.textArr.length-1];if(!(!l||!s)){if(n){var a=this._getTextWidth(l.text+NS)<i;a||(l.text=l.text.slice(0,l.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(l.text+NS)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return t&&n?!0:super._useBufferCanvas()}}Zl.Text=yn;yn.prototype._fillFunc=X2e;yn.prototype._strokeFunc=q2e;yn.prototype.className=B2e;yn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,M2e._registerNode)(yn);dr.Factory.overWriteSetter(yn,"width",(0,Ka.getNumberOrAutoValidator)());dr.Factory.overWriteSetter(yn,"height",(0,Ka.getNumberOrAutoValidator)());dr.Factory.addGetterSetter(yn,"direction",dU);dr.Factory.addGetterSetter(yn,"fontFamily","Arial");dr.Factory.addGetterSetter(yn,"fontSize",12,(0,Ka.getNumberValidator)());dr.Factory.addGetterSetter(yn,"fontStyle",gU);dr.Factory.addGetterSetter(yn,"fontVariant",gU);dr.Factory.addGetterSetter(yn,"padding",0,(0,Ka.getNumberValidator)());dr.Factory.addGetterSetter(yn,"align",pU);dr.Factory.addGetterSetter(yn,"verticalAlign",U2e);dr.Factory.addGetterSetter(yn,"lineHeight",1,(0,Ka.getNumberValidator)());dr.Factory.addGetterSetter(yn,"wrap",H2e);dr.Factory.addGetterSetter(yn,"ellipsis",!1,(0,Ka.getBooleanValidator)());dr.Factory.addGetterSetter(yn,"letterSpacing",0,(0,Ka.getNumberValidator)());dr.Factory.addGetterSetter(yn,"text","",(0,Ka.getStringValidator)());dr.Factory.addGetterSetter(yn,"textDecoration","");var e_={};Object.defineProperty(e_,"__esModule",{value:!0});e_.TextPath=void 0;const BS=un,os=ut,Q2e=Hn,Mf=Kh,US=Zl,vU=je,J2e=ft;var Z2e="",yU="normal";function _U(e){e.fillText(this.partialText,0,0)}function bU(e){e.strokeText(this.partialText,0,0)}class zn extends Q2e.Shape{constructor(t){super(t),this.dummyCanvas=BS.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Mf.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const n=this.pathLength;return t-1>n?null:Mf.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Mf.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var n=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;n==="underline"&&t.beginPath();for(var l=0;l<s.length;l++){t.save();var a=s[l].p0;t.translate(a.x,a.y),t.rotate(s[l].rotation),this.partialText=s[l].text,t.fillStrokeShape(this),n==="underline"&&(l===0&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=r,t.lineWidth=i/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;t.moveTo(r.x,r.y)}for(var i=0;i<n.length;i++){var s=n[i].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return BS.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return US.Text.prototype.setText.call(this,t)}_getContextFont(){return US.Text.prototype._getContextFont.call(this)}_getTextSize(t){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var i=r.measureText(t);return r.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),i=this.align(),s=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let a=0;i==="center"&&(a=Math.max(0,this.pathLength/2-l/2)),i==="right"&&(a=Math.max(0,this.pathLength-l));const o=(0,US.stringToArray)(this.text());let c=a;for(var h=0;h<o.length;h++){const u=this._getPointAtLength(c);if(!u)return;let f=this._getTextSize(o[h]).width+r;if(o[h]===" "&&i==="justify"){const _=this.text().split(" ").length-1;f+=(this.pathLength-l)/_}const d=this._getPointAtLength(c+f);if(!d)return;const p=Mf.Path.getLineLength(u.x,u.y,d.x,d.y);let m=0;if(s)try{m=s(o[h-1],o[h])*this.fontSize()}catch{m=0}u.x+=m,d.x+=m,this.textWidth+=m;const g=Mf.Path.getPointOnLine(m+p/2,u.x,u.y,d.x,d.y),v=Math.atan2(d.y-u.y,d.x-u.x);this.glyphInfo.push({transposeX:g.x,transposeY:g.y,text:o[h],rotation:v,p0:u,p1:d}),c+=f}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(h){t.push(h.p0.x),t.push(h.p0.y),t.push(h.p1.x),t.push(h.p1.y)});for(var n=t[0]||0,r=t[0]||0,i=t[1]||0,s=t[1]||0,l,a,o=0;o<t.length/2;o++)l=t[o*2],a=t[o*2+1],n=Math.min(n,l),r=Math.max(r,l),i=Math.min(i,a),s=Math.max(s,a);var c=this.fontSize();return{x:n-c/2,y:i-c/2,width:r-n+c,height:s-i+c}}destroy(){return BS.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}e_.TextPath=zn;zn.prototype._fillFunc=_U;zn.prototype._strokeFunc=bU;zn.prototype._fillFuncHit=_U;zn.prototype._strokeFuncHit=bU;zn.prototype.className="TextPath";zn.prototype._attrsAffectingSize=["text","fontSize","data"];(0,J2e._registerNode)(zn);os.Factory.addGetterSetter(zn,"data");os.Factory.addGetterSetter(zn,"fontFamily","Arial");os.Factory.addGetterSetter(zn,"fontSize",12,(0,vU.getNumberValidator)());os.Factory.addGetterSetter(zn,"fontStyle",yU);os.Factory.addGetterSetter(zn,"align","left");os.Factory.addGetterSetter(zn,"letterSpacing",0,(0,vU.getNumberValidator)());os.Factory.addGetterSetter(zn,"textBaseline","middle");os.Factory.addGetterSetter(zn,"fontVariant",yU);os.Factory.addGetterSetter(zn,"text",Z2e);os.Factory.addGetterSetter(zn,"textDecoration",null);os.Factory.addGetterSetter(zn,"kerningFunc",null);var t_={};Object.defineProperty(t_,"__esModule",{value:!0});t_.Transformer=void 0;const Lt=un,kt=ut,gR=en,eCe=Hn,tCe=og,mR=Xh,Mi=ft,Qa=je,nCe=ft;var SU="tr-konva",rCe=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${SU}`).join(" "),vR="nodesRect",iCe=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],sCe={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const oCe="ontouchstart"in Mi.Konva._global;function aCe(e,t,n){if(e==="rotater")return n;t+=Lt.Util.degToRad(sCe[e]||0);var r=(Lt.Util.radToDeg(t)%360+360)%360;return Lt.Util._inRange(r,315+22.5,360)||Lt.Util._inRange(r,0,22.5)?"ns-resize":Lt.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":Lt.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":Lt.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":Lt.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":Lt.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":Lt.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":Lt.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(Lt.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var Hv=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],yR=1e8;function lCe(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function xU(e,t,n){const r=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),i=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:r,y:i}}function cCe(e,t){const n=lCe(e);return xU(e,t,n)}function uCe(e,t,n){let r=t;for(let i=0;i<e.length;i++){const s=Mi.Konva.getAngle(e[i]),l=Math.abs(s-t)%(Math.PI*2);Math.min(l,Math.PI*2-l)<n&&(r=s)}return r}class wt extends mR.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(rCe,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return Lt.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return SU+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(i=>i.isAncestorOf(this)?(Lt.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=t=n,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},l=i._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");i.on(l,s),i.on(iCe.map(a=>a+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,r=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(r,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const i=t.getAbsolutePosition(),s=i.x-n.x,l=i.y-n.y;this.nodes().forEach(a=>{if(a===t||a.isDragging())return;const o=a.getAbsolutePosition();a.setAbsolutePosition({x:o.x+s,y:o.y+l}),a.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(vR),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(vR,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),r){var i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(r),l=t.getAbsolutePosition(r),a=i.x*s.x-t.offsetX()*s.x,o=i.y*s.y-t.offsetY()*s.y;const c=(Mi.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),h={x:l.x+a*Math.cos(c)+o*Math.sin(-c),y:l.y+o*Math.cos(c)+a*Math.sin(c),width:i.width*s.x,height:i.height*s.y,rotation:c};return xU(h,-Mi.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-yR,y:-yR,width:0,height:0,rotation:0};const n=[];this.nodes().map(c=>{const h=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var u=[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}],f=c.getAbsoluteTransform();u.forEach(function(d){var p=f.point(d);n.push(p)})});const r=new Lt.Transform;r.rotate(-Mi.Konva.getAngle(this.rotation()));var i=1/0,s=1/0,l=-1/0,a=-1/0;n.forEach(function(c){var h=r.point(c);i===void 0&&(i=l=h.x,s=a=h.y),i=Math.min(i,h.x),s=Math.min(s,h.y),l=Math.max(l,h.x),a=Math.max(a,h.y)}),r.invert();const o=r.point({x:i,y:s});return{x:o.x,y:o.y,width:l-i,height:a-s,rotation:Mi.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Hv.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){var n=new tCe.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:oCe?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{var i=Mi.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),l=aCe(t,i,s);n.getStage().content&&(n.getStage().content.style.cursor=l),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var t=new eCe.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){var i=r.getParent(),s=i.padding();n.beginPath(),n.rect(-s,-s,r.width()+s*2,r.height()+s*2),n.moveTo(r.width()/2,-s),i.rotateEnabled()&&i.rotateLineVisible()&&n.lineTo(r.width()/2,-i.rotateAnchorOffset()*Lt.Util._sign(r.height())-s),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var n=this._getNodeRect(),r=n.width,i=n.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var l=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-l.x,y:a.y-l.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(o=>{o._fire("transformstart",{evt:t.evt,target:o})})}_handleMouseMove(t){var n,r,i,s=this.findOne("."+this._movingAnchorName),l=s.getStage();l.setPointersPositions(t);const a=l.getPointerPosition();let o={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const c=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(o=this.anchorDragBoundFunc()(c,o,t)),s.setAbsolutePosition(o);const h=s.getAbsolutePosition();if(!(c.x===h.x&&c.y===h.y)){if(this._movingAnchorName==="rotater"){var u=this._getNodeRect();n=s.x()-u.width/2,r=-s.y()+u.height/2;let G=Math.atan2(-r,n)+Math.PI/2;u.height<0&&(G-=Math.PI);var f=Mi.Konva.getAngle(this.rotation());const B=f+G,$=Mi.Konva.getAngle(this.rotationSnapTolerance()),W=uCe(this.rotationSnaps(),B,$)-u.rotation,M=cCe(u,W);this._fitNodesInto(M,t);return}var d=this.shiftBehavior(),p;d==="inverted"?p=this.keepRatio()&&!t.shiftKey:d==="none"?p=this.keepRatio():p=this.keepRatio()||t.shiftKey;var y=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(p){var m=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(m.x-s.x(),2)+Math.pow(m.y-s.y(),2));var g=this.findOne(".top-left").x()>m.x?-1:1,v=this.findOne(".top-left").y()>m.y?-1:1;n=i*this.cos*g,r=i*this.sin*v,this.findOne(".top-left").x(m.x-n),this.findOne(".top-left").y(m.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(p){var m=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-m.x,2)+Math.pow(m.y-s.y(),2));var g=this.findOne(".top-right").x()<m.x?-1:1,v=this.findOne(".top-right").y()>m.y?-1:1;n=i*this.cos*g,r=i*this.sin*v,this.findOne(".top-right").x(m.x+n),this.findOne(".top-right").y(m.y-r)}var _=s.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(p){var m=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(m.x-s.x(),2)+Math.pow(s.y()-m.y,2));var g=m.x<s.x()?-1:1,v=s.y()<m.y?-1:1;n=i*this.cos*g,r=i*this.sin*v,s.x(m.x-n),s.y(m.y+r)}_=s.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(p){var m=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-m.x,2)+Math.pow(s.y()-m.y,2));var g=this.findOne(".bottom-right").x()<m.x?-1:1,v=this.findOne(".bottom-right").y()<m.y?-1:1;n=i*this.cos*g,r=i*this.sin*v,this.findOne(".bottom-right").x(m.x+n),this.findOne(".bottom-right").y(m.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var y=this.centeredScaling()||t.altKey;if(y){var b=this.findOne(".top-left"),S=this.findOne(".bottom-right"),x=b.x(),C=b.y(),w=this.getWidth()-S.x(),k=this.getHeight()-S.y();S.move({x:-x,y:-C}),b.move({x:w,y:k})}var I=this.findOne(".top-left").getAbsolutePosition();n=I.x,r=I.y;var R=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),j=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:R,height:j,rotation:Mi.Konva.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:t,target:n}),n&&this._nodes.forEach(r=>{r._fire("transformend",{evt:t,target:r})}),this._movingAnchorName=null}}_fitNodesInto(t,n){var r=this._getNodeRect();const i=1;if(Lt.Util._inRange(t.width,-this.padding()*2-i,i)){this.update();return}if(Lt.Util._inRange(t.height,-this.padding()*2-i,i)){this.update();return}var s=new Lt.Transform;if(s.rotate(Mi.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=s.point({x:-this.padding()*2,y:0});t.x+=f.x,t.y+=f.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=s.point({x:0,y:-this.padding()*2});t.x+=f.x,t.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(r,t);f?t=f:Lt.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const l=1e7,a=new Lt.Transform;a.translate(r.x,r.y),a.rotate(r.rotation),a.scale(r.width/l,r.height/l);const o=new Lt.Transform,c=t.width/l,h=t.height/l;this.flipEnabled()===!1?(o.translate(t.x,t.y),o.rotate(t.rotation),o.translate(t.width<0?t.width:0,t.height<0?t.height:0),o.scale(Math.abs(c),Math.abs(h))):(o.translate(t.x,t.y),o.rotate(t.rotation),o.scale(c,h));const u=o.multiply(a.invert());this._nodes.forEach(f=>{var d;const p=f.getParent().getAbsoluteTransform(),m=f.getTransform().copy();m.translate(f.offsetX(),f.offsetY());const g=new Lt.Transform;g.multiply(p.copy().invert()).multiply(u).multiply(p).multiply(m);const v=g.decompose();f.setAttrs(v),this._fire("transform",{evt:n,target:f}),f._fire("transform",{evt:n,target:f}),(d=f.getLayer())===null||d===void 0||d.batchDraw()}),this.rotation(Lt.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t,n=this._getNodeRect();this.rotation(Lt.Util._getRotation(n.rotation));var r=n.width,i=n.height,s=this.enabledAnchors(),l=this.resizeEnabled(),a=this.padding(),o=this.anchorSize();const c=this.find("._anchor");c.forEach(u=>{u.setAttrs({width:o,height:o,offsetX:o/2,offsetY:o/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:o/2+a,offsetY:o/2+a,visible:l&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:o/2+a,visible:l&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:o/2-a,offsetY:o/2+a,visible:l&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:o/2+a,visible:l&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:o/2-a,visible:l&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:o/2+a,offsetY:o/2-a,visible:l&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:o/2-a,visible:l&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:o/2-a,offsetY:o/2-a,visible:l&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*Lt.Util._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const h=this.anchorStyleFunc();h&&c.forEach(u=>{h(u)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),mR.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return gR.Node.prototype.toObject.call(this)}clone(t){var n=gR.Node.prototype.clone.call(this,t);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}t_.Transformer=wt;function hCe(e){return e instanceof Array||Lt.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){Hv.indexOf(t)===-1&&Lt.Util.warn("Unknown anchor name: "+t+". Available names are: "+Hv.join(", "))}),e||[]}wt.prototype.className="Transformer";(0,nCe._registerNode)(wt);kt.Factory.addGetterSetter(wt,"enabledAnchors",Hv,hCe);kt.Factory.addGetterSetter(wt,"flipEnabled",!0,(0,Qa.getBooleanValidator)());kt.Factory.addGetterSetter(wt,"resizeEnabled",!0);kt.Factory.addGetterSetter(wt,"anchorSize",10,(0,Qa.getNumberValidator)());kt.Factory.addGetterSetter(wt,"rotateEnabled",!0);kt.Factory.addGetterSetter(wt,"rotateLineVisible",!0);kt.Factory.addGetterSetter(wt,"rotationSnaps",[]);kt.Factory.addGetterSetter(wt,"rotateAnchorOffset",50,(0,Qa.getNumberValidator)());kt.Factory.addGetterSetter(wt,"rotateAnchorCursor","crosshair");kt.Factory.addGetterSetter(wt,"rotationSnapTolerance",5,(0,Qa.getNumberValidator)());kt.Factory.addGetterSetter(wt,"borderEnabled",!0);kt.Factory.addGetterSetter(wt,"anchorStroke","rgb(0, 161, 255)");kt.Factory.addGetterSetter(wt,"anchorStrokeWidth",1,(0,Qa.getNumberValidator)());kt.Factory.addGetterSetter(wt,"anchorFill","white");kt.Factory.addGetterSetter(wt,"anchorCornerRadius",0,(0,Qa.getNumberValidator)());kt.Factory.addGetterSetter(wt,"borderStroke","rgb(0, 161, 255)");kt.Factory.addGetterSetter(wt,"borderStrokeWidth",1,(0,Qa.getNumberValidator)());kt.Factory.addGetterSetter(wt,"borderDash");kt.Factory.addGetterSetter(wt,"keepRatio",!0);kt.Factory.addGetterSetter(wt,"shiftBehavior","default");kt.Factory.addGetterSetter(wt,"centeredScaling",!1);kt.Factory.addGetterSetter(wt,"ignoreStroke",!1);kt.Factory.addGetterSetter(wt,"padding",0,(0,Qa.getNumberValidator)());kt.Factory.addGetterSetter(wt,"node");kt.Factory.addGetterSetter(wt,"nodes");kt.Factory.addGetterSetter(wt,"boundBoxFunc");kt.Factory.addGetterSetter(wt,"anchorDragBoundFunc");kt.Factory.addGetterSetter(wt,"anchorStyleFunc");kt.Factory.addGetterSetter(wt,"shouldOverdrawWholeArea",!1);kt.Factory.addGetterSetter(wt,"useSingleNodeRotation",!0);kt.Factory.backCompat(wt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var n_={};Object.defineProperty(n_,"__esModule",{value:!0});n_.Wedge=void 0;const r_=ut,fCe=Hn,dCe=ft,wU=je,pCe=ft;class Ro extends fCe.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,dCe.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}n_.Wedge=Ro;Ro.prototype.className="Wedge";Ro.prototype._centroid=!0;Ro.prototype._attrsAffectingSize=["radius"];(0,pCe._registerNode)(Ro);r_.Factory.addGetterSetter(Ro,"radius",0,(0,wU.getNumberValidator)());r_.Factory.addGetterSetter(Ro,"angle",0,(0,wU.getNumberValidator)());r_.Factory.addGetterSetter(Ro,"clockwise",!1);r_.Factory.backCompat(Ro,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var i_={};Object.defineProperty(i_,"__esModule",{value:!0});i_.Blur=void 0;const _R=ut,gCe=en,mCe=je;function bR(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var vCe=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],yCe=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function _Ce(e,t){var n=e.data,r=e.width,i=e.height,s,l,a,o,c,h,u,f,d,p,m,g,v,_,y,b,S,x,C,w,k,I,R,j,G=t+t+1,B=r-1,$=i-1,V=t+1,W=V*(V+1)/2,M=new bR,P=null,O=M,A=null,D=null,X=vCe[t],N=yCe[t];for(a=1;a<G;a++)O=O.next=new bR,a===V&&(P=O);for(O.next=M,u=h=0,l=0;l<i;l++){for(b=S=x=C=f=d=p=m=0,g=V*(w=n[h]),v=V*(k=n[h+1]),_=V*(I=n[h+2]),y=V*(R=n[h+3]),f+=W*w,d+=W*k,p+=W*I,m+=W*R,O=M,a=0;a<V;a++)O.r=w,O.g=k,O.b=I,O.a=R,O=O.next;for(a=1;a<V;a++)o=h+((B<a?B:a)<<2),f+=(O.r=w=n[o])*(j=V-a),d+=(O.g=k=n[o+1])*j,p+=(O.b=I=n[o+2])*j,m+=(O.a=R=n[o+3])*j,b+=w,S+=k,x+=I,C+=R,O=O.next;for(A=M,D=P,s=0;s<r;s++)n[h+3]=R=m*X>>N,R!==0?(R=255/R,n[h]=(f*X>>N)*R,n[h+1]=(d*X>>N)*R,n[h+2]=(p*X>>N)*R):n[h]=n[h+1]=n[h+2]=0,f-=g,d-=v,p-=_,m-=y,g-=A.r,v-=A.g,_-=A.b,y-=A.a,o=u+((o=s+t+1)<B?o:B)<<2,b+=A.r=n[o],S+=A.g=n[o+1],x+=A.b=n[o+2],C+=A.a=n[o+3],f+=b,d+=S,p+=x,m+=C,A=A.next,g+=w=D.r,v+=k=D.g,_+=I=D.b,y+=R=D.a,b-=w,S-=k,x-=I,C-=R,D=D.next,h+=4;u+=r}for(s=0;s<r;s++){for(S=x=C=b=d=p=m=f=0,h=s<<2,g=V*(w=n[h]),v=V*(k=n[h+1]),_=V*(I=n[h+2]),y=V*(R=n[h+3]),f+=W*w,d+=W*k,p+=W*I,m+=W*R,O=M,a=0;a<V;a++)O.r=w,O.g=k,O.b=I,O.a=R,O=O.next;for(c=r,a=1;a<=t;a++)h=c+s<<2,f+=(O.r=w=n[h])*(j=V-a),d+=(O.g=k=n[h+1])*j,p+=(O.b=I=n[h+2])*j,m+=(O.a=R=n[h+3])*j,b+=w,S+=k,x+=I,C+=R,O=O.next,a<$&&(c+=r);for(h=s,A=M,D=P,l=0;l<i;l++)o=h<<2,n[o+3]=R=m*X>>N,R>0?(R=255/R,n[o]=(f*X>>N)*R,n[o+1]=(d*X>>N)*R,n[o+2]=(p*X>>N)*R):n[o]=n[o+1]=n[o+2]=0,f-=g,d-=v,p-=_,m-=y,g-=A.r,v-=A.g,_-=A.b,y-=A.a,o=s+((o=l+V)<$?o:$)*r<<2,f+=b+=A.r=n[o],d+=S+=A.g=n[o+1],p+=x+=A.b=n[o+2],m+=C+=A.a=n[o+3],A=A.next,g+=w=D.r,v+=k=D.g,_+=I=D.b,y+=R=D.a,b-=w,S-=k,x-=I,C-=R,D=D.next,h+=r}}const bCe=function(t){var n=Math.round(this.blurRadius());n>0&&_Ce(t,n)};i_.Blur=bCe;_R.Factory.addGetterSetter(gCe.Node,"blurRadius",0,(0,mCe.getNumberValidator)(),_R.Factory.afterSetFilter);var s_={};Object.defineProperty(s_,"__esModule",{value:!0});s_.Brighten=void 0;const SR=ut,SCe=en,xCe=je,wCe=function(e){var t=this.brightness()*255,n=e.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=t,n[i+1]+=t,n[i+2]+=t};s_.Brighten=wCe;SR.Factory.addGetterSetter(SCe.Node,"brightness",0,(0,xCe.getNumberValidator)(),SR.Factory.afterSetFilter);var o_={};Object.defineProperty(o_,"__esModule",{value:!0});o_.Contrast=void 0;const xR=ut,CCe=en,TCe=je,ECe=function(e){var t=Math.pow((this.contrast()+100)/100,2),n=e.data,r=n.length,i=150,s=150,l=150,a;for(a=0;a<r;a+=4)i=n[a],s=n[a+1],l=n[a+2],i/=255,i-=.5,i*=t,i+=.5,i*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,l/=255,l-=.5,l*=t,l+=.5,l*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,n[a]=i,n[a+1]=s,n[a+2]=l};o_.Contrast=ECe;xR.Factory.addGetterSetter(CCe.Node,"contrast",0,(0,TCe.getNumberValidator)(),xR.Factory.afterSetFilter);var a_={};Object.defineProperty(a_,"__esModule",{value:!0});a_.Emboss=void 0;const Na=ut,l_=en,PCe=un,CU=je,ICe=function(e){var t=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=0,l=0,a=e.data,o=e.width,c=e.height,h=o*4,u=c;switch(r){case"top-left":s=-1,l=-1;break;case"top":s=-1,l=0;break;case"top-right":s=-1,l=1;break;case"right":s=0,l=1;break;case"bottom-right":s=1,l=1;break;case"bottom":s=1,l=0;break;case"bottom-left":s=1,l=-1;break;case"left":s=0,l=-1;break;default:PCe.Util.error("Unknown emboss direction: "+r)}do{var f=(u-1)*h,d=s;u+d<1&&(d=0),u+d>c&&(d=0);var p=(u-1+d)*o*4,m=o;do{var g=f+(m-1)*4,v=l;m+v<1&&(v=0),m+v>o&&(v=0);var _=p+(m-1+v)*4,y=a[g]-a[_],b=a[g+1]-a[_+1],S=a[g+2]-a[_+2],x=y,C=x>0?x:-x,w=b>0?b:-b,k=S>0?S:-S;if(w>C&&(x=b),k>C&&(x=S),x*=t,i){var I=a[g]+x,R=a[g+1]+x,j=a[g+2]+x;a[g]=I>255?255:I<0?0:I,a[g+1]=R>255?255:R<0?0:R,a[g+2]=j>255?255:j<0?0:j}else{var G=n-x;G<0?G=0:G>255&&(G=255),a[g]=a[g+1]=a[g+2]=G}}while(--m)}while(--u)};a_.Emboss=ICe;Na.Factory.addGetterSetter(l_.Node,"embossStrength",.5,(0,CU.getNumberValidator)(),Na.Factory.afterSetFilter);Na.Factory.addGetterSetter(l_.Node,"embossWhiteLevel",.5,(0,CU.getNumberValidator)(),Na.Factory.afterSetFilter);Na.Factory.addGetterSetter(l_.Node,"embossDirection","top-left",null,Na.Factory.afterSetFilter);Na.Factory.addGetterSetter(l_.Node,"embossBlend",!1,null,Na.Factory.afterSetFilter);var c_={};Object.defineProperty(c_,"__esModule",{value:!0});c_.Enhance=void 0;const wR=ut,OCe=en,kCe=je;function $S(e,t,n,r,i){var s=n-t,l=i-r,a;return s===0?r+l/2:l===0?r:(a=(e-t)/s,a=l*a+r,a)}const ACe=function(e){var t=e.data,n=t.length,r=t[0],i=r,s,l=t[1],a=l,o,c=t[2],h=c,u,f,d=this.enhance();if(d!==0){for(f=0;f<n;f+=4)s=t[f+0],s<r?r=s:s>i&&(i=s),o=t[f+1],o<l?l=o:o>a&&(a=o),u=t[f+2],u<c?c=u:u>h&&(h=u);i===r&&(i=255,r=0),a===l&&(a=255,l=0),h===c&&(h=255,c=0);var p,m,g,v,_,y,b,S,x;for(d>0?(m=i+d*(255-i),g=r-d*(r-0),_=a+d*(255-a),y=l-d*(l-0),S=h+d*(255-h),x=c-d*(c-0)):(p=(i+r)*.5,m=i+d*(i-p),g=r+d*(r-p),v=(a+l)*.5,_=a+d*(a-v),y=l+d*(l-v),b=(h+c)*.5,S=h+d*(h-b),x=c+d*(c-b)),f=0;f<n;f+=4)t[f+0]=$S(t[f+0],r,i,g,m),t[f+1]=$S(t[f+1],l,a,y,_),t[f+2]=$S(t[f+2],c,h,x,S)}};c_.Enhance=ACe;wR.Factory.addGetterSetter(OCe.Node,"enhance",0,(0,kCe.getNumberValidator)(),wR.Factory.afterSetFilter);var u_={};Object.defineProperty(u_,"__esModule",{value:!0});u_.Grayscale=void 0;const RCe=function(e){var t=e.data,n=t.length,r,i;for(r=0;r<n;r+=4)i=.34*t[r]+.5*t[r+1]+.16*t[r+2],t[r]=i,t[r+1]=i,t[r+2]=i};u_.Grayscale=RCe;var h_={};Object.defineProperty(h_,"__esModule",{value:!0});h_.HSL=void 0;const yh=ut,$P=en,GP=je;yh.Factory.addGetterSetter($P.Node,"hue",0,(0,GP.getNumberValidator)(),yh.Factory.afterSetFilter);yh.Factory.addGetterSetter($P.Node,"saturation",0,(0,GP.getNumberValidator)(),yh.Factory.afterSetFilter);yh.Factory.addGetterSetter($P.Node,"luminance",0,(0,GP.getNumberValidator)(),yh.Factory.afterSetFilter);const DCe=function(e){var t=e.data,n=t.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l=this.luminance()*127,a,o=r*i*Math.cos(s*Math.PI/180),c=r*i*Math.sin(s*Math.PI/180),h=.299*r+.701*o+.167*c,u=.587*r-.587*o+.33*c,f=.114*r-.114*o-.497*c,d=.299*r-.299*o-.328*c,p=.587*r+.413*o+.035*c,m=.114*r-.114*o+.293*c,g=.299*r-.3*o+1.25*c,v=.587*r-.586*o-1.05*c,_=.114*r+.886*o-.2*c,y,b,S,x;for(a=0;a<n;a+=4)y=t[a+0],b=t[a+1],S=t[a+2],x=t[a+3],t[a+0]=h*y+u*b+f*S+l,t[a+1]=d*y+p*b+m*S+l,t[a+2]=g*y+v*b+_*S+l,t[a+3]=x};h_.HSL=DCe;var f_={};Object.defineProperty(f_,"__esModule",{value:!0});f_.HSV=void 0;const _h=ut,VP=en,HP=je,MCe=function(e){var t=e.data,n=t.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l,a=r*i*Math.cos(s*Math.PI/180),o=r*i*Math.sin(s*Math.PI/180),c=.299*r+.701*a+.167*o,h=.587*r-.587*a+.33*o,u=.114*r-.114*a-.497*o,f=.299*r-.299*a-.328*o,d=.587*r+.413*a+.035*o,p=.114*r-.114*a+.293*o,m=.299*r-.3*a+1.25*o,g=.587*r-.586*a-1.05*o,v=.114*r+.886*a-.2*o,_,y,b,S;for(l=0;l<n;l+=4)_=t[l+0],y=t[l+1],b=t[l+2],S=t[l+3],t[l+0]=c*_+h*y+u*b,t[l+1]=f*_+d*y+p*b,t[l+2]=m*_+g*y+v*b,t[l+3]=S};f_.HSV=MCe;_h.Factory.addGetterSetter(VP.Node,"hue",0,(0,HP.getNumberValidator)(),_h.Factory.afterSetFilter);_h.Factory.addGetterSetter(VP.Node,"saturation",0,(0,HP.getNumberValidator)(),_h.Factory.afterSetFilter);_h.Factory.addGetterSetter(VP.Node,"value",0,(0,HP.getNumberValidator)(),_h.Factory.afterSetFilter);var d_={};Object.defineProperty(d_,"__esModule",{value:!0});d_.Invert=void 0;const LCe=function(e){var t=e.data,n=t.length,r;for(r=0;r<n;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]};d_.Invert=LCe;var p_={};Object.defineProperty(p_,"__esModule",{value:!0});p_.Kaleidoscope=void 0;const zv=ut,TU=en,CR=un,EU=je;var FCe=function(e,t,n){var r=e.data,i=t.data,s=e.width,l=e.height,a=n.polarCenterX||s/2,o=n.polarCenterY||l/2,c,h,u,f=0,d=0,p=0,m=0,g,v=Math.sqrt(a*a+o*o);h=s-a,u=l-o,g=Math.sqrt(h*h+u*u),v=g>v?g:v;var _=l,y=s,b,S,x=360/y*Math.PI/180,C,w;for(S=0;S<y;S+=1)for(C=Math.sin(S*x),w=Math.cos(S*x),b=0;b<_;b+=1)h=Math.floor(a+v*b/_*w),u=Math.floor(o+v*b/_*C),c=(u*s+h)*4,f=r[c+0],d=r[c+1],p=r[c+2],m=r[c+3],c=(S+b*s)*4,i[c+0]=f,i[c+1]=d,i[c+2]=p,i[c+3]=m},NCe=function(e,t,n){var r=e.data,i=t.data,s=e.width,l=e.height,a=n.polarCenterX||s/2,o=n.polarCenterY||l/2,c,h,u,f,d,p=0,m=0,g=0,v=0,_,y=Math.sqrt(a*a+o*o);h=s-a,u=l-o,_=Math.sqrt(h*h+u*u),y=_>y?_:y;var b=l,S=s,x,C,w=n.polarRotation||0,k,I;for(h=0;h<s;h+=1)for(u=0;u<l;u+=1)f=h-a,d=u-o,x=Math.sqrt(f*f+d*d)*b/y,C=(Math.atan2(d,f)*180/Math.PI+360+w)%360,C=C*S/360,k=Math.floor(C),I=Math.floor(x),c=(I*s+k)*4,p=r[c+0],m=r[c+1],g=r[c+2],v=r[c+3],c=(u*s+h)*4,i[c+0]=p,i[c+1]=m,i[c+2]=g,i[c+3]=v};const jCe=function(e){var t=e.width,n=e.height,r,i,s,l,a,o,c,h,u,f,d=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),m=Math.floor(t*(p%360)/360);if(!(d<1)){var g=CR.Util.createCanvasElement();g.width=t,g.height=n;var v=g.getContext("2d").getImageData(0,0,t,n);CR.Util.releaseCanvas(g),FCe(e,v,{polarCenterX:t/2,polarCenterY:n/2});for(var _=t/Math.pow(2,d);_<=8;)_=_*2,d-=1;_=Math.ceil(_);var y=_,b=0,S=y,x=1;for(m+_>t&&(b=y,S=0,x=-1),i=0;i<n;i+=1)for(r=b;r!==S;r+=x)s=Math.round(r+m)%t,u=(t*i+s)*4,a=v.data[u+0],o=v.data[u+1],c=v.data[u+2],h=v.data[u+3],f=(t*i+r)*4,v.data[f+0]=a,v.data[f+1]=o,v.data[f+2]=c,v.data[f+3]=h;for(i=0;i<n;i+=1)for(y=Math.floor(_),l=0;l<d;l+=1){for(r=0;r<y+1;r+=1)u=(t*i+r)*4,a=v.data[u+0],o=v.data[u+1],c=v.data[u+2],h=v.data[u+3],f=(t*i+y*2-r-1)*4,v.data[f+0]=a,v.data[f+1]=o,v.data[f+2]=c,v.data[f+3]=h;y*=2}NCe(v,e,{polarRotation:0})}};p_.Kaleidoscope=jCe;zv.Factory.addGetterSetter(TU.Node,"kaleidoscopePower",2,(0,EU.getNumberValidator)(),zv.Factory.afterSetFilter);zv.Factory.addGetterSetter(TU.Node,"kaleidoscopeAngle",0,(0,EU.getNumberValidator)(),zv.Factory.afterSetFilter);var g_={};Object.defineProperty(g_,"__esModule",{value:!0});g_.Mask=void 0;const TR=ut,BCe=en,UCe=je;function Om(e,t,n){var r=(n*e.width+t)*4,i=[];return i.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),i}function Lf(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function $Ce(e){for(var t=[0,0,0],n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function GCe(e,t){var n=Om(e,0,0),r=Om(e,e.width-1,0),i=Om(e,0,e.height-1),s=Om(e,e.width-1,e.height-1),l=t||10;if(Lf(n,r)<l&&Lf(r,s)<l&&Lf(s,i)<l&&Lf(i,n)<l){for(var a=$Ce([r,n,s,i]),o=[],c=0;c<e.width*e.height;c++){var h=Lf(a,[e.data[c*4],e.data[c*4+1],e.data[c*4+2]]);o[c]=h<l?0:255}return o}}function VCe(e,t){for(var n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function HCe(e,t,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),l=[],a=0;a<n;a++)for(var o=0;o<t;o++){for(var c=a*t+o,h=0,u=0;u<i;u++)for(var f=0;f<i;f++){var d=a+u-s,p=o+f-s;if(d>=0&&d<n&&p>=0&&p<t){var m=d*t+p,g=r[u*i+f];h+=e[m]*g}}l[c]=h===255*8?255:0}return l}function zCe(e,t,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),l=[],a=0;a<n;a++)for(var o=0;o<t;o++){for(var c=a*t+o,h=0,u=0;u<i;u++)for(var f=0;f<i;f++){var d=a+u-s,p=o+f-s;if(d>=0&&d<n&&p>=0&&p<t){var m=d*t+p,g=r[u*i+f];h+=e[m]*g}}l[c]=h>=255*4?255:0}return l}function WCe(e,t,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),l=[],a=0;a<n;a++)for(var o=0;o<t;o++){for(var c=a*t+o,h=0,u=0;u<i;u++)for(var f=0;f<i;f++){var d=a+u-s,p=o+f-s;if(d>=0&&d<n&&p>=0&&p<t){var m=d*t+p,g=r[u*i+f];h+=e[m]*g}}l[c]=h}return l}const YCe=function(e){var t=this.threshold(),n=GCe(e,t);return n&&(n=HCe(n,e.width,e.height),n=zCe(n,e.width,e.height),n=WCe(n,e.width,e.height),VCe(e,n)),e};g_.Mask=YCe;TR.Factory.addGetterSetter(BCe.Node,"threshold",0,(0,UCe.getNumberValidator)(),TR.Factory.afterSetFilter);var m_={};Object.defineProperty(m_,"__esModule",{value:!0});m_.Noise=void 0;const ER=ut,XCe=en,qCe=je,KCe=function(e){var t=this.noise()*255,n=e.data,r=n.length,i=t/2,s;for(s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()};m_.Noise=KCe;ER.Factory.addGetterSetter(XCe.Node,"noise",.2,(0,qCe.getNumberValidator)(),ER.Factory.afterSetFilter);var v_={};Object.defineProperty(v_,"__esModule",{value:!0});v_.Pixelate=void 0;const PR=ut,QCe=un,JCe=en,ZCe=je,eTe=function(e){var t=Math.ceil(this.pixelSize()),n=e.width,r=e.height,i,s,l,a,o,c,h,u=Math.ceil(n/t),f=Math.ceil(r/t),d,p,m,g,v,_,y,b=e.data;if(t<=0){QCe.Util.error("pixelSize value can not be <= 0");return}for(v=0;v<u;v+=1)for(_=0;_<f;_+=1){for(a=0,o=0,c=0,h=0,d=v*t,p=d+t,m=_*t,g=m+t,y=0,i=d;i<p;i+=1)if(!(i>=n))for(s=m;s<g;s+=1)s>=r||(l=(n*s+i)*4,a+=b[l+0],o+=b[l+1],c+=b[l+2],h+=b[l+3],y+=1);for(a=a/y,o=o/y,c=c/y,h=h/y,i=d;i<p;i+=1)if(!(i>=n))for(s=m;s<g;s+=1)s>=r||(l=(n*s+i)*4,b[l+0]=a,b[l+1]=o,b[l+2]=c,b[l+3]=h)}};v_.Pixelate=eTe;PR.Factory.addGetterSetter(JCe.Node,"pixelSize",8,(0,ZCe.getNumberValidator)(),PR.Factory.afterSetFilter);var y_={};Object.defineProperty(y_,"__esModule",{value:!0});y_.Posterize=void 0;const IR=ut,tTe=en,nTe=je,rTe=function(e){var t=Math.round(this.levels()*254)+1,n=e.data,r=n.length,i=255/t,s;for(s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i};y_.Posterize=rTe;IR.Factory.addGetterSetter(tTe.Node,"levels",.5,(0,nTe.getNumberValidator)(),IR.Factory.afterSetFilter);var __={};Object.defineProperty(__,"__esModule",{value:!0});__.RGB=void 0;const Wv=ut,zP=en,iTe=je,sTe=function(e){var t=e.data,n=t.length,r=this.red(),i=this.green(),s=this.blue(),l,a;for(l=0;l<n;l+=4)a=(.34*t[l]+.5*t[l+1]+.16*t[l+2])/255,t[l]=a*r,t[l+1]=a*i,t[l+2]=a*s,t[l+3]=t[l+3]};__.RGB=sTe;Wv.Factory.addGetterSetter(zP.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Wv.Factory.addGetterSetter(zP.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Wv.Factory.addGetterSetter(zP.Node,"blue",0,iTe.RGBComponent,Wv.Factory.afterSetFilter);var b_={};Object.defineProperty(b_,"__esModule",{value:!0});b_.RGBA=void 0;const cp=ut,S_=en,oTe=je,aTe=function(e){var t=e.data,n=t.length,r=this.red(),i=this.green(),s=this.blue(),l=this.alpha(),a,o;for(a=0;a<n;a+=4)o=1-l,t[a]=r*l+t[a]*o,t[a+1]=i*l+t[a+1]*o,t[a+2]=s*l+t[a+2]*o};b_.RGBA=aTe;cp.Factory.addGetterSetter(S_.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});cp.Factory.addGetterSetter(S_.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});cp.Factory.addGetterSetter(S_.Node,"blue",0,oTe.RGBComponent,cp.Factory.afterSetFilter);cp.Factory.addGetterSetter(S_.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});var x_={};Object.defineProperty(x_,"__esModule",{value:!0});x_.Sepia=void 0;const lTe=function(e){var t=e.data,n=t.length,r,i,s,l;for(r=0;r<n;r+=4)i=t[r+0],s=t[r+1],l=t[r+2],t[r+0]=Math.min(255,i*.393+s*.769+l*.189),t[r+1]=Math.min(255,i*.349+s*.686+l*.168),t[r+2]=Math.min(255,i*.272+s*.534+l*.131)};x_.Sepia=lTe;var w_={};Object.defineProperty(w_,"__esModule",{value:!0});w_.Solarize=void 0;const cTe=function(e){var t=e.data,n=e.width,r=e.height,i=n*4,s=r;do{var l=(s-1)*i,a=n;do{var o=l+(a-1)*4,c=t[o],h=t[o+1],u=t[o+2];c>127&&(c=255-c),h>127&&(h=255-h),u>127&&(u=255-u),t[o]=c,t[o+1]=h,t[o+2]=u}while(--a)}while(--s)};w_.Solarize=cTe;var C_={};Object.defineProperty(C_,"__esModule",{value:!0});C_.Threshold=void 0;const OR=ut,uTe=en,hTe=je,fTe=function(e){var t=this.threshold()*255,n=e.data,r=n.length,i;for(i=0;i<r;i+=1)n[i]=n[i]<t?0:255};C_.Threshold=fTe;OR.Factory.addGetterSetter(uTe.Node,"threshold",.5,(0,hTe.getNumberValidator)(),OR.Factory.afterSetFilter);Object.defineProperty(D1,"__esModule",{value:!0});D1.Konva=void 0;const kR=zB,dTe=B1,pTe=G1,gTe=z1,mTe=W1,vTe=Y1,AR=vh,yTe=ig,_Te=Kh,bTe=og,STe=K1,xTe=Q1,wTe=J1,CTe=Z1,TTe=Zl,ETe=e_,PTe=t_,ITe=n_,OTe=i_,kTe=s_,ATe=o_,RTe=a_,DTe=c_,MTe=u_,LTe=h_,FTe=f_,NTe=d_,jTe=p_,BTe=g_,UTe=m_,$Te=v_,GTe=y_,VTe=__,HTe=b_,zTe=x_,WTe=w_,YTe=C_;D1.Konva=kR.Konva.Util._assign(kR.Konva,{Arc:dTe.Arc,Arrow:pTe.Arrow,Circle:gTe.Circle,Ellipse:mTe.Ellipse,Image:vTe.Image,Label:AR.Label,Tag:AR.Tag,Line:yTe.Line,Path:_Te.Path,Rect:bTe.Rect,RegularPolygon:STe.RegularPolygon,Ring:xTe.Ring,Sprite:wTe.Sprite,Star:CTe.Star,Text:TTe.Text,TextPath:ETe.TextPath,Transformer:PTe.Transformer,Wedge:ITe.Wedge,Filters:{Blur:OTe.Blur,Brighten:kTe.Brighten,Contrast:ATe.Contrast,Emboss:RTe.Emboss,Enhance:DTe.Enhance,Grayscale:MTe.Grayscale,HSL:LTe.HSL,HSV:FTe.HSV,Invert:NTe.Invert,Kaleidoscope:jTe.Kaleidoscope,Mask:BTe.Mask,Noise:UTe.Noise,Pixelate:$Te.Pixelate,Posterize:GTe.Posterize,RGB:VTe.RGB,RGBA:HTe.RGBA,Sepia:zTe.Sepia,Solarize:WTe.Solarize,Threshold:YTe.Threshold}});var XTe=AP.exports;Object.defineProperty(XTe,"__esModule",{value:!0});const qTe=D1;AP.exports=qTe.Konva;var WP=AP.exports;const u6e=Tr(WP);(function(e){var t=Wr&&Wr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.getTotalClientRect=e.getClientRect=void 0;const n=t(WP);function r(l,a,o,c,h){const u=Math.sqrt(o*o+c*c);return h+=Math.atan2(c,o),{x:l+u*Math.cos(h),y:a+u*Math.sin(h)}}function i(l){const{x:a,y:o,width:c,height:h}=l,u=n.default.Util.degToRad(l.rotation),f=r(a,o,0,0,u),d=r(a,o,c,0,u),p=r(a,o,c,h,u),m=r(a,o,0,h,u),g=Math.min(f.x,d.x,p.x,m.x),v=Math.min(f.y,d.y,p.y,m.y),_=Math.max(f.x,d.x,p.x,m.x),y=Math.max(f.y,d.y,p.y,m.y);return{x:g,y:v,width:_-g,height:y-v,minX:g,minY:v,maxX:_,maxY:y}}function s(l){const a=l.map(f=>i(f)),o=Math.min(...a.map(f=>f.minX)),c=Math.min(...a.map(f=>f.minY)),h=Math.max(...a.map(f=>f.maxX)),u=Math.max(...a.map(f=>f.maxY));return{x:o,y:c,width:h-o,height:u-c,minX:o,minY:c,maxX:h,maxY:u}}e.getClientRect=i,e.getTotalClientRect=s})(Gr);function $2(e,t,n){return Math.min(Math.max(e,t),n)}function KTe(e,t,n){return e+(t-e)*n}function h6e(e,t,n){return(n-e)/(t-e)*100}function QTe(e,t=2){let n=e.toString();return n=n.slice(0,n.indexOf(".")+t+1),Number(n)}const f6e=(e,t,n,r,i)=>{let s=null,l=null,a=!1;const o=c=>{if(a)return;s||(s=c);const h=c-s,u=Math.min(h/n,1),f=KTe(e,t,u),d=$2(f,0,t)*100;r(d),!a&&f<t?l=requestAnimationFrame(o):a||i==null||i()};return a||(l=requestAnimationFrame(o)),()=>(l&&cancelAnimationFrame(l),a=!0,a)};function d6e(e,t,n){return t===n?0:(e-t)/(n-t)}function rt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var JTe={};function YP(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:JTe}var PU=Object.assign,Yv=Object.getOwnPropertyDescriptor,As=Object.defineProperty,ag=Object.prototype,G2=[];Object.freeze(G2);var XP={};Object.freeze(XP);var ZTe=typeof Proxy<"u",eEe=Object.toString();function IU(){ZTe||rt("Proxy not available")}function OU(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Su=function(){};function Jr(e){return typeof e=="function"}function ec(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function T_(e){return e!==null&&typeof e=="object"}function So(e){if(!T_(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n.toString()===eEe}function kU(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function lg(e,t,n){As(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function AU(e,t,n){As(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Ja(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(r){return T_(r)&&r[n]===!0}}function Jh(e){return e instanceof Map}function cg(e){return e instanceof Set}var RU=typeof Object.getOwnPropertySymbols<"u";function tEe(e){var t=Object.keys(e);if(!RU)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(r){return ag.propertyIsEnumerable.call(e,r)})):t}var bh=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:RU?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function DU(e){return e===null?null:typeof e=="object"?""+e:e}function co(e,t){return ag.hasOwnProperty.call(e,t)}var nEe=Object.getOwnPropertyDescriptors||function(t){var n={};return bh(t).forEach(function(r){n[r]=Yv(t,r)}),n};function RR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sEe(r.key),r)}}function qP(e,t,n){return t&&RR(e.prototype,t),n&&RR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ja(){return ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ja.apply(this,arguments)}function MU(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,V2(e,t)}function V2(e,t){return V2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},V2(e,t)}function GS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rEe(e,t){if(e){if(typeof e=="string")return DR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DR(e,t)}}function DR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xu(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=rEe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iEe(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sEe(e){var t=iEe(e,"string");return typeof t=="symbol"?t:String(t)}var Ts=Symbol("mobx-stored-annotations");function Wi(e){function t(n,r){if(ug(r))return e.decorate_20223_(n,r);Zh(n,r,e)}return Object.assign(t,e)}function Zh(e,t,n){co(e,Ts)||lg(e,Ts,ja({},e[Ts])),pEe(n)||(e[Ts][t]=n)}function oEe(e){return co(e,Ts)||lg(e,Ts,ja({},e[Ts])),e[Ts]}function ug(e){return typeof e=="object"&&typeof e.kind=="string"}var $e=Symbol("mobx administration"),hg=function(){function e(n){n===void 0&&(n="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Tt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.reportObserved=function(){return e$(this)},t.reportChanged=function(){Lr(),t$(this),Fr()},t.toString=function(){return this.name_},e}(),KP=Ja("Atom",hg);function QP(e,t,n){t===void 0&&(t=Su),n===void 0&&(n=Su);var r=new hg(e);return t!==Su&&u$(r,t),n!==Su&&r4(r,n),r}function aEe(e,t){return e===t}function lEe(e,t){return c4(e,t)}function cEe(e,t){return c4(e,t,1)}function uEe(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var tc={identity:aEe,structural:lEe,default:uEe,shallow:cEe};function nc(e,t,n){return R_(e)?e:Array.isArray(e)?Yn.array(e,{name:n}):So(e)?Yn.object(e,void 0,{name:n}):Jh(e)?Yn.map(e,{name:n}):cg(e)?Yn.set(e,{name:n}):typeof e=="function"&&!pg(e)&&!wh(e)?kU(e)?ic(e):xh(n,e):e}function hEe(e,t,n){if(e==null||nr(e)||$r(e)||ir(e)||Cr(e))return e;if(Array.isArray(e))return Yn.array(e,{name:n,deep:!1});if(So(e))return Yn.object(e,void 0,{name:n,deep:!1});if(Jh(e))return Yn.map(e,{name:n,deep:!1});if(cg(e))return Yn.set(e,{name:n,deep:!1})}function E_(e){return e}function fEe(e,t){return c4(e,t)?t:e}var LU="override",dEe=Wi({annotationType_:LU,make_:gEe,extend_:mEe,decorate_20223_:vEe});function pEe(e){return e.annotationType_===LU}function gEe(e,t){return 0}function mEe(e,t,n,r){rt("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function vEe(e,t){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function fg(e,t){return{annotationType_:e,options_:t,make_:yEe,extend_:_Ee,decorate_20223_:bEe}}function yEe(e,t,n,r){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,t,n,!1)===null?0:1;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if(pg(n.value))return 1;var s=FU(e,this,t,n,!1);return As(r,t,s),2}function _Ee(e,t,n,r){var i=FU(e,this,t,n);return e.defineProperty_(t,i,r)}function bEe(e,t){var n=t.kind,r=t.name,i=t.addInitializer,s=this,l=function(c){var h,u,f,d;return Ba((h=(u=s.options_)==null?void 0:u.name)!=null?h:r.toString(),c,(f=(d=s.options_)==null?void 0:d.autoAction)!=null?f:!1)};if(n=="field"){i(function(){Zh(this,r,s)});return}if(n=="method"){var a;return pg(e)||(e=l(e)),(a=this.options_)!=null&&a.bound&&i(function(){var o=this,c=o[r].bind(o);c.isMobxAction=!0,o[r]=c}),e}rt("Cannot apply '"+s.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function SEe(e,t,n,r){t.annotationType_,r.value}function FU(e,t,n,r,i){var s,l,a,o,c,h,u;i===void 0&&(i=we.safeDescriptors),SEe(e,t,n,r);var f=r.value;if((s=t.options_)!=null&&s.bound){var d;f=f.bind((d=e.proxy_)!=null?d:e.target_)}return{value:Ba((l=(a=t.options_)==null?void 0:a.name)!=null?l:n.toString(),f,(o=(c=t.options_)==null?void 0:c.autoAction)!=null?o:!1,(h=t.options_)!=null&&h.bound?(u=e.proxy_)!=null?u:e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function NU(e,t){return{annotationType_:e,options_:t,make_:xEe,extend_:wEe,decorate_20223_:CEe}}function xEe(e,t,n,r){var i;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!co(e.target_,t)||!wh(e.target_[t]))&&this.extend_(e,t,n,!1)===null)return 0;if(wh(n.value))return 1;var s=jU(e,this,t,n,!1,!1);return As(r,t,s),2}function wEe(e,t,n,r){var i,s=jU(e,this,t,n,(i=this.options_)==null?void 0:i.bound);return e.defineProperty_(t,s,r)}function CEe(e,t){var n,r=t.name,i=t.addInitializer;return wh(e)||(e=ic(e)),(n=this.options_)!=null&&n.bound&&i(function(){var s=this,l=s[r].bind(s);l.isMobXFlow=!0,s[r]=l}),e}function TEe(e,t,n,r){t.annotationType_,r.value}function jU(e,t,n,r,i,s){s===void 0&&(s=we.safeDescriptors),TEe(e,t,n,r);var l=r.value;if(wh(l)||(l=ic(l)),i){var a;l=l.bind((a=e.proxy_)!=null?a:e.target_),l.isMobXFlow=!0}return{value:l,configurable:s?e.isPlainObject_:!0,enumerable:!1,writable:!s}}function JP(e,t){return{annotationType_:e,options_:t,make_:EEe,extend_:PEe,decorate_20223_:IEe}}function EEe(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function PEe(e,t,n,r){return OEe(e,this,t,n),e.defineComputedProperty_(t,ja({},this.options_,{get:n.get,set:n.set}),r)}function IEe(e,t){var n=this,r=t.name,i=t.addInitializer;return i(function(){var s=Tc(this)[$e],l=ja({},n.options_,{get:e,context:this});l.name||(l.name="ObservableObject."+r.toString()),s.values_.set(r,new Sh(l))}),function(){return this[$e].getObservablePropValue_(r)}}function OEe(e,t,n,r){t.annotationType_,r.get}function P_(e,t){return{annotationType_:e,options_:t,make_:kEe,extend_:AEe,decorate_20223_:REe}}function kEe(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function AEe(e,t,n,r){var i,s;return DEe(e,this),e.defineObservableProperty_(t,n.value,(i=(s=this.options_)==null?void 0:s.enhancer)!=null?i:nc,r)}function REe(e,t){var n=this,r=t.kind,i=t.name,s=new WeakSet;function l(a,o){var c,h,u=Tc(a)[$e],f=new Pa(o,(c=(h=n.options_)==null?void 0:h.enhancer)!=null?c:nc,"ObservableObject."+i.toString(),!1);u.values_.set(i,f),s.add(a)}if(r=="accessor")return{get:function(){return s.has(this)||l(this,e.get.call(this)),this[$e].getObservablePropValue_(i)},set:function(o){return s.has(this)||l(this,o),this[$e].setObservablePropValue_(i,o)},init:function(o){return s.has(this)||l(this,o),o}}}function DEe(e,t,n,r){t.annotationType_}var MEe="true",LEe=BU();function BU(e){return{annotationType_:MEe,options_:e,make_:FEe,extend_:NEe,decorate_20223_:jEe}}function FEe(e,t,n,r){var i,s;if(n.get)return dg.make_(e,t,n,r);if(n.set){var l=Ba(t.toString(),n.set);return r===e.target_?e.defineProperty_(t,{configurable:we.safeDescriptors?e.isPlainObject_:!0,set:l})===null?0:2:(As(r,t,{configurable:!0,set:l}),2)}if(r!==e.target_&&typeof n.value=="function"){var a;if(kU(n.value)){var o,c=(o=this.options_)!=null&&o.autoBind?ic.bound:ic;return c.make_(e,t,n,r)}var h=(a=this.options_)!=null&&a.autoBind?xh.bound:xh;return h.make_(e,t,n,r)}var u=((i=this.options_)==null?void 0:i.deep)===!1?Yn.ref:Yn;if(typeof n.value=="function"&&(s=this.options_)!=null&&s.autoBind){var f;n.value=n.value.bind((f=e.proxy_)!=null?f:e.target_)}return u.make_(e,t,n,r)}function NEe(e,t,n,r){var i,s;if(n.get)return dg.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:we.safeDescriptors?e.isPlainObject_:!0,set:Ba(t.toString(),n.set)},r);if(typeof n.value=="function"&&(i=this.options_)!=null&&i.autoBind){var l;n.value=n.value.bind((l=e.proxy_)!=null?l:e.target_)}var a=((s=this.options_)==null?void 0:s.deep)===!1?Yn.ref:Yn;return a.extend_(e,t,n,r)}function jEe(e,t){rt("'"+this.annotationType_+"' cannot be used as a decorator")}var BEe="observable",UEe="observable.ref",$Ee="observable.shallow",GEe="observable.struct",UU={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(UU);function km(e){return e||UU}var H2=P_(BEe),VEe=P_(UEe,{enhancer:E_}),HEe=P_($Ee,{enhancer:hEe}),zEe=P_(GEe,{enhancer:fEe}),$U=Wi(H2);function Am(e){return e.deep===!0?nc:e.deep===!1?E_:YEe(e.defaultDecorator)}function WEe(e){var t;return e?(t=e.defaultDecorator)!=null?t:BU(e):void 0}function YEe(e){var t,n;return e&&(t=(n=e.options_)==null?void 0:n.enhancer)!=null?t:nc}function GU(e,t,n){if(ug(t))return H2.decorate_20223_(e,t);if(ec(t)){Zh(e,t,H2);return}return R_(e)?e:So(e)?Yn.object(e,t,n):Array.isArray(e)?Yn.array(e,t):Jh(e)?Yn.map(e,t):cg(e)?Yn.set(e,t):typeof e=="object"&&e!==null?e:Yn.box(e,t)}PU(GU,$U);var XEe={box:function(t,n){var r=km(n);return new Pa(t,Am(r),r.name,!0,r.equals)},array:function(t,n){var r=km(n);return(we.useProxies===!1||r.proxy===!1?d4e:r4e)(t,Am(r),r.name)},map:function(t,n){var r=km(n);return new o4(t,Am(r),r.name)},set:function(t,n){var r=km(n);return new a4(t,Am(r),r.name)},object:function(t,n,r){return Za(function(){return i4(we.useProxies===!1||(r==null?void 0:r.proxy)===!1?Tc({},r):JPe({},r),t,n)})},ref:Wi(VEe),shallow:Wi(HEe),deep:$U,struct:Wi(zEe)},Yn=PU(GU,XEe),VU="computed",qEe="computed.struct",z2=JP(VU),KEe=JP(qEe,{equals:tc.structural}),dg=function(t,n){if(ug(n))return z2.decorate_20223_(t,n);if(ec(n))return Zh(t,n,z2);if(So(t))return Wi(JP(VU,t));var r=So(n)?n:{};return r.get=t,r.name||(r.name=t.name||""),new Sh(r)};Object.assign(dg,z2);dg.struct=Wi(KEe);var MR,LR,Xv=0,QEe=1,JEe=(MR=(LR=Yv(function(){},"name"))==null?void 0:LR.configurable)!=null?MR:!1,FR={value:"action",configurable:!0,writable:!1,enumerable:!1};function Ba(e,t,n,r){n===void 0&&(n=!1);function i(){return HU(e,n,t,r||this,arguments)}return i.isMobxAction=!0,i.toString=function(){return t.toString()},JEe&&(FR.value=e,As(i,"name",FR)),i}function HU(e,t,n,r,i){var s=zU(e,t);try{return n.apply(r,i)}catch(l){throw s.error_=l,l}finally{WU(s)}}function zU(e,t,n,r){var i=!1,s=0,l=we.trackingDerivation,a=!t||!l;Lr();var o=we.allowStateChanges;a&&(Cc(),o=I_(!0));var c=k_(!0),h={runAsAction_:a,prevDerivation_:l,prevAllowStateChanges_:o,prevAllowStateReads_:c,notifySpy_:i,startTime_:s,actionId_:QEe++,parentActionId_:Xv};return Xv=h.actionId_,h}function WU(e){Xv!==e.actionId_&&rt(30),Xv=e.parentActionId_,e.error_!==void 0&&(we.suppressReactionErrors=!0),O_(e.prevAllowStateChanges_),Uu(e.prevAllowStateReads_),Fr(),e.runAsAction_&&uo(e.prevDerivation_),we.suppressReactionErrors=!1}function ZP(e,t){var n=I_(e);try{return t()}finally{O_(n)}}function I_(e){var t=we.allowStateChanges;return we.allowStateChanges=e,t}function O_(e){we.allowStateChanges=e}var YU;YU=Symbol.toPrimitive;var Pa=function(e){MU(t,e);function t(r,i,s,l,a){var o;return s===void 0&&(s="ObservableValue"),a===void 0&&(a=tc.default),o=e.call(this,s)||this,o.enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=i,o.name_=s,o.equals=a,o.value_=i(r,void 0,s),o}var n=t.prototype;return n.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},n.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==we.UNCHANGED&&this.setNewValue_(i)},n.prepareNewValue_=function(i){if(bi(this)){var s=Si(this,{object:this,type:Rs,newValue:i});if(!s)return we.UNCHANGED;i=s.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?we.UNCHANGED:i},n.setNewValue_=function(i){var s=this.value_;this.value_=i,this.reportChanged(),Yi(this)&&Xi(this,{type:Rs,object:this,newValue:i,oldValue:s})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(i){return gg(this,i)},n.observe_=function(i,s){return s&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:Rs,newValue:this.value_,oldValue:void 0}),mg(this,i)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return DU(this.get())},n[YU]=function(){return this.valueOf()},t}(hg),e4=Ja("ObservableValue",Pa),XU;XU=Symbol.toPrimitive;var Sh=function(){function e(n){this.dependenciesState_=Tt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Tt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Kv(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=qv.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||rt(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=Ba("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?tc.structural:tc.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){cPe(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.get=function(){if(this.isComputing_&&rt(32,this.name_,this.derivation),we.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)W2(this)&&(this.warnAboutUntrackedRead_(),Lr(),this.value_=this.computeValue_(!1),Fr());else if(e$(this),W2(this)){var r=we.trackingContext;this.keepAlive_&&!r&&(we.trackingContext=this),this.trackAndCompute()&&lPe(this),we.trackingContext=r}var i=this.value_;if(S0(i))throw i.cause;return i},t.set=function(r){if(this.setter_){this.isRunningSetter_&&rt(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,r)}finally{this.isRunningSetter_=!1}}else rt(34,this.name_)},t.trackAndCompute=function(){var r=this.value_,i=this.dependenciesState_===Tt.NOT_TRACKING_,s=this.computeValue_(!0),l=i||S0(r)||S0(s)||!this.equals_(r,s);return l&&(this.value_=s),l},t.computeValue_=function(r){this.isComputing_=!0;var i=I_(!1),s;if(r)s=qU(this,this.derivation,this.scope_);else if(we.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(l){s=new Kv(l)}return O_(i),this.isComputing_=!1,s},t.suspend_=function(){this.keepAlive_||(Y2(this),this.value_=void 0)},t.observe_=function(r,i){var s=this,l=!0,a=void 0;return n4(function(){var o=s.get();if(!l||i){var c=Cc();r({observableKind:"computed",debugObjectName:s.name_,type:Rs,object:s,newValue:o,oldValue:a}),uo(c)}l=!1,a=o})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return DU(this.get())},t[XU]=function(){return this.valueOf()},e}(),rc=Ja("ComputedValue",Sh),Tt;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(Tt||(Tt={}));var qv;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(qv||(qv={}));var Kv=function(t){this.cause=void 0,this.cause=t};function S0(e){return e instanceof Kv}function W2(e){switch(e.dependenciesState_){case Tt.UP_TO_DATE_:return!1;case Tt.NOT_TRACKING_:case Tt.STALE_:return!0;case Tt.POSSIBLY_STALE_:{for(var t=k_(!0),n=Cc(),r=e.observing_,i=r.length,s=0;s<i;s++){var l=r[s];if(rc(l)){if(we.disableErrorBoundaries)l.get();else try{l.get()}catch{return uo(n),Uu(t),!0}if(e.dependenciesState_===Tt.STALE_)return uo(n),Uu(t),!0}}return KU(e),uo(n),Uu(t),!1}}}function ZEe(){return we.trackingDerivation!==null}function qU(e,t,n){var r=k_(!0);KU(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++we.runId;var i=we.trackingDerivation;we.trackingDerivation=e,we.inBatch++;var s;if(we.disableErrorBoundaries===!0)s=t.call(n);else try{s=t.call(n)}catch(l){s=new Kv(l)}return we.inBatch--,we.trackingDerivation=i,ePe(e),Uu(r),s}function ePe(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Tt.UP_TO_DATE_,i=0,s=e.unboundDepsCount_,l=0;l<s;l++){var a=n[l];a.diffValue_===0&&(a.diffValue_=1,i!==l&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}for(n.length=i,e.newObserving_=null,s=t.length;s--;){var o=t[s];o.diffValue_===0&&JU(o,e),o.diffValue_=0}for(;i--;){var c=n[i];c.diffValue_===1&&(c.diffValue_=0,aPe(c,e))}r!==Tt.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}function Y2(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)JU(t[n],e);e.dependenciesState_=Tt.NOT_TRACKING_}function t4(e){var t=Cc();try{return e()}finally{uo(t)}}function Cc(){var e=we.trackingDerivation;return we.trackingDerivation=null,e}function uo(e){we.trackingDerivation=e}function k_(e){var t=we.allowStateReads;return we.allowStateReads=e,t}function Uu(e){we.allowStateReads=e}function KU(e){if(e.dependenciesState_!==Tt.UP_TO_DATE_){e.dependenciesState_=Tt.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Tt.UP_TO_DATE_}}var tPe=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],dd=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},x0=!0,QU=!1,we=function(){var e=YP();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(x0=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new dd().version&&(x0=!1),x0?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new dd):(setTimeout(function(){QU||rt(35)},1),new dd)}();function nPe(){if((we.pendingReactions.length||we.inBatch||we.isRunningReactions)&&rt(36),QU=!0,x0){var e=YP();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),we=new dd}}function rPe(){return we}function iPe(){var e=new dd;for(var t in e)tPe.indexOf(t)===-1&&(we[t]=e[t]);we.allowStateChanges=!we.enforceActions}function sPe(e){return e.observers_&&e.observers_.size>0}function oPe(e){return e.observers_}function aPe(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function JU(e,t){e.observers_.delete(t),e.observers_.size===0&&ZU(e)}function ZU(e){e.isPendingUnobservation_===!1&&(e.isPendingUnobservation_=!0,we.pendingUnobservations.push(e))}function Lr(){we.inBatch++}function Fr(){if(--we.inBatch===0){n$();for(var e=we.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,n.observers_.size===0&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Sh&&n.suspend_())}we.pendingUnobservations=[]}}function e$(e){var t=we.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&we.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(e.observers_.size===0&&we.inBatch>0&&ZU(e),!1)}function t$(e){e.lowestObserverState_!==Tt.STALE_&&(e.lowestObserverState_=Tt.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Tt.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=Tt.STALE_}))}function lPe(e){e.lowestObserverState_!==Tt.STALE_&&(e.lowestObserverState_=Tt.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Tt.POSSIBLY_STALE_?t.dependenciesState_=Tt.STALE_:t.dependenciesState_===Tt.UP_TO_DATE_&&(e.lowestObserverState_=Tt.UP_TO_DATE_)}))}function cPe(e){e.lowestObserverState_===Tt.UP_TO_DATE_&&(e.lowestObserverState_=Tt.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Tt.UP_TO_DATE_&&(t.dependenciesState_=Tt.POSSIBLY_STALE_,t.onBecomeStale_())}))}var up=function(){function e(n,r,i,s){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Tt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=qv.NONE,this.name_=n,this.onInvalidate_=r,this.errorHandler_=i,this.requiresObservable_=s}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,we.pendingReactions.push(this),n$())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){Lr(),this.isScheduled_=!1;var r=we.trackingContext;if(we.trackingContext=this,W2(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}we.trackingContext=r,Fr()}},t.track=function(r){if(!this.isDisposed_){Lr(),this.isRunning_=!0;var i=we.trackingContext;we.trackingContext=this;var s=qU(this,r,void 0);we.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Y2(this),S0(s)&&this.reportExceptionInDerivation_(s.cause),Fr()}},t.reportExceptionInDerivation_=function(r){var i=this;if(this.errorHandler_){this.errorHandler_(r,this);return}if(we.disableErrorBoundaries)throw r;var s="[mobx] uncaught error in '"+this+"'";we.suppressReactionErrors||console.error(s,r),we.globalReactionErrorHandlers.forEach(function(l){return l(r,i)})},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Lr(),Y2(this),Fr()))},t.getDisposer_=function(r){var i=this,s=function l(){i.dispose(),r==null||r.removeEventListener==null||r.removeEventListener("abort",l)};return r==null||r.addEventListener==null||r.addEventListener("abort",s),s[$e]=this,s},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(r){},e}();function uPe(e){return we.globalReactionErrorHandlers.push(e),function(){var t=we.globalReactionErrorHandlers.indexOf(e);t>=0&&we.globalReactionErrorHandlers.splice(t,1)}}var hPe=100,X2=function(t){return t()};function n$(){we.inBatch>0||we.isRunningReactions||X2(fPe)}function fPe(){we.isRunningReactions=!0;for(var e=we.pendingReactions,t=0;e.length>0;){++t===hPe&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}we.isRunningReactions=!1}var Qv=Ja("Reaction",up);function dPe(e){var t=X2;X2=function(r){return e(function(){return t(r)})}}function pd(){return!1}function r$(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var i$="action",pPe="action.bound",s$="autoAction",gPe="autoAction.bound",o$="<unnamed action>",q2=fg(i$),mPe=fg(pPe,{bound:!0}),K2=fg(s$,{autoAction:!0}),vPe=fg(gPe,{autoAction:!0,bound:!0});function a$(e){var t=function(r,i){if(Jr(r))return Ba(r.name||o$,r,e);if(Jr(i))return Ba(r,i,e);if(ug(i))return(e?K2:q2).decorate_20223_(r,i);if(ec(i))return Zh(r,i,e?K2:q2);if(ec(r))return Wi(fg(e?s$:i$,{name:r,autoAction:e}))};return t}var ua=a$(!1);Object.assign(ua,q2);var xh=a$(!0);Object.assign(xh,K2);ua.bound=Wi(mPe);xh.bound=Wi(vPe);function NR(e){return HU(e.name||o$,!1,e,this,void 0)}function pg(e){return Jr(e)&&e.isMobxAction===!0}function n4(e,t){var n,r,i,s,l;t===void 0&&(t=XP);var a=(n=(r=t)==null?void 0:r.name)!=null?n:"Autorun",o=!t.scheduler&&!t.delay,c;if(o)c=new up(a,function(){this.track(f)},t.onError,t.requiresObservable);else{var h=l$(t),u=!1;c=new up(a,function(){u||(u=!0,h(function(){u=!1,c.isDisposed_||c.track(f)}))},t.onError,t.requiresObservable)}function f(){e(c)}return(i=t)!=null&&(s=i.signal)!=null&&s.aborted||c.schedule_(),c.getDisposer_((l=t)==null?void 0:l.signal)}var yPe=function(t){return t()};function l$(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:yPe}function c$(e,t,n){var r,i,s,l;n===void 0&&(n=XP);var a=(r=n.name)!=null?r:"Reaction",o=ua(a,n.onError?_Pe(n.onError,t):t),c=!n.scheduler&&!n.delay,h=l$(n),u=!0,f=!1,d,p,m=n.compareStructural?tc.structural:n.equals||tc.default,g=new up(a,function(){u||c?v():f||(f=!0,h(v))},n.onError,n.requiresObservable);function v(){if(f=!1,!g.isDisposed_){var _=!1;g.track(function(){var y=ZP(!1,function(){return e(g)});_=u||!m(d,y),p=d,d=y}),(u&&n.fireImmediately||!u&&_)&&o(d,p,g),u=!1}}return(i=n)!=null&&(s=i.signal)!=null&&s.aborted||g.schedule_(),g.getDisposer_((l=n)==null?void 0:l.signal)}function _Pe(e,t){return function(){try{return t.apply(this,arguments)}catch(n){e.call(this,n)}}}var bPe="onBO",SPe="onBUO";function u$(e,t,n){return h$(bPe,e,t,n)}function r4(e,t,n){return h$(SPe,e,t,n)}function h$(e,t,n,r){var i=typeof r=="function"?xo(t,n):xo(t),s=Jr(r)?r:n,l=e+"L";return i[l]?i[l].add(s):i[l]=new Set([s]),function(){var a=i[l];a&&(a.delete(s),a.size===0&&delete i[l])}}var xPe="never",Rm="always",wPe="observed";function CPe(e){e.isolateGlobalState===!0&&nPe();var t=e.useProxies,n=e.enforceActions;if(t!==void 0&&(we.useProxies=t===Rm?!0:t===xPe?!1:typeof Proxy<"u"),t==="ifavailable"&&(we.verifyProxies=!0),n!==void 0){var r=n===Rm?Rm:n===wPe;we.enforceActions=r,we.allowStateChanges=!(r===!0||r===Rm)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in e&&(we[i]=!!e[i])}),we.allowStateReads=!we.observableRequiresReaction,e.reactionScheduler&&dPe(e.reactionScheduler)}function i4(e,t,n,r){var i=nEe(t);return Za(function(){var s=Tc(e,r)[$e];bh(i).forEach(function(l){s.extend_(l,i[l],n&&l in n?n[l]:!0)})}),e}function TPe(e,t){return f$(xo(e,t))}function f$(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=PPe(e.observing_).map(f$)),t}function EPe(e,t){return d$(xo(e,t))}function d$(e){var t={name:e.name_};return sPe(e)&&(t.observers=Array.from(oPe(e)).map(d$)),t}function PPe(e){return Array.from(new Set(e))}var IPe=0;function A_(){this.message="FLOW_CANCELLED"}A_.prototype=Object.create(Error.prototype);function OPe(e){return e instanceof A_}var VS=NU("flow"),kPe=NU("flow.bound",{bound:!0}),ic=Object.assign(function(t,n){if(ug(n))return VS.decorate_20223_(t,n);if(ec(n))return Zh(t,n,VS);var r=t,i=r.name||"<unnamed flow>",s=function(){var a=this,o=arguments,c=++IPe,h=ua(i+" - runid: "+c+" - init",r).apply(a,o),u,f=void 0,d=new Promise(function(p,m){var g=0;u=m;function v(b){f=void 0;var S;try{S=ua(i+" - runid: "+c+" - yield "+g++,h.next).call(h,b)}catch(x){return m(x)}y(S)}function _(b){f=void 0;var S;try{S=ua(i+" - runid: "+c+" - yield "+g++,h.throw).call(h,b)}catch(x){return m(x)}y(S)}function y(b){if(Jr(b==null?void 0:b.then)){b.then(y,m);return}return b.done?p(b.value):(f=Promise.resolve(b.value),f.then(v,_))}v(void 0)});return d.cancel=ua(i+" - runid: "+c+" - cancel",function(){try{f&&jR(f);var p=h.return(void 0),m=Promise.resolve(p.value);m.then(Su,Su),jR(m),u(new A_)}catch(g){u(g)}}),d};return s.isMobXFlow=!0,s},VS);ic.bound=Wi(kPe);function jR(e){Jr(e.cancel)&&e.cancel()}function APe(e){return e}function wh(e){return(e==null?void 0:e.isMobXFlow)===!0}function RPe(e,t,n){var r;return ir(e)||$r(e)||e4(e)?r=wo(e):nr(e)&&(r=wo(e,t)),r.dehancer=typeof t=="function"?t:n,function(){r.dehancer=void 0}}function DPe(e,t,n){return Jr(n)?LPe(e,t,n):MPe(e,t)}function MPe(e,t){return wo(e).intercept_(t)}function LPe(e,t,n){return wo(e,t).intercept_(n)}function p$(e,t){if(t===void 0)return rc(e);if(nr(e)===!1||!e[$e].values_.has(t))return!1;var n=xo(e,t);return rc(n)}function FPe(e){return p$(e)}function NPe(e,t){return p$(e,t)}function g$(e,t){return e?t!==void 0?nr(e)?e[$e].values_.has(t):!1:nr(e)||!!e[$e]||KP(e)||Qv(e)||rc(e):!1}function R_(e){return g$(e)}function jPe(e,t){return g$(e,t)}function hp(e){if(nr(e))return e[$e].keys_();if(ir(e)||Cr(e))return Array.from(e.keys());if($r(e))return e.map(function(t,n){return n});rt(5)}function BPe(e){if(nr(e))return hp(e).map(function(t){return e[t]});if(ir(e))return hp(e).map(function(t){return e.get(t)});if(Cr(e))return Array.from(e.values());if($r(e))return e.slice();rt(6)}function UPe(e){if(nr(e))return hp(e).map(function(t){return[t,e[t]]});if(ir(e))return hp(e).map(function(t){return[t,e.get(t)]});if(Cr(e))return Array.from(e.entries());if($r(e))return e.map(function(t,n){return[n,t]});rt(7)}function m$(e,t,n){if(arguments.length===2&&!Cr(e)){Lr();var r=t;try{for(var i in r)m$(e,i,r[i])}finally{Fr()}return}nr(e)?e[$e].set_(t,n):ir(e)?e.set(t,n):Cr(e)?e.add(t):$r(e)?(typeof t!="number"&&(t=parseInt(t,10)),t<0&&rt("Invalid index: '"+t+"'"),Lr(),t>=e.length&&(e.length=t+1),e[t]=n,Fr()):rt(8)}function $Pe(e,t){nr(e)?e[$e].delete_(t):ir(e)||Cr(e)?e.delete(t):$r(e)?(typeof t!="number"&&(t=parseInt(t,10)),e.splice(t,1)):rt(9)}function v$(e,t){if(nr(e))return e[$e].has_(t);if(ir(e))return e.has(t);if(Cr(e))return e.has(t);if($r(e))return t>=0&&t<e.length;rt(10)}function GPe(e,t){if(v$(e,t)){if(nr(e))return e[$e].get_(t);if(ir(e))return e.get(t);if($r(e))return e[t];rt(11)}}function VPe(e,t,n){if(nr(e))return e[$e].defineProperty_(t,n);rt(39)}function y$(e){if(nr(e))return e[$e].ownKeys_();rt(38)}function HPe(e,t,n,r){return Jr(n)?WPe(e,t,n,r):zPe(e,t,n)}function zPe(e,t,n){return wo(e).observe_(t,n)}function WPe(e,t,n,r){return wo(e,t).observe_(n,r)}function Dm(e,t,n){return e.set(t,n),n}function Yc(e,t){if(e==null||typeof e!="object"||e instanceof Date||!R_(e))return e;if(e4(e)||rc(e))return Yc(e.get(),t);if(t.has(e))return t.get(e);if($r(e)){var n=Dm(t,e,new Array(e.length));return e.forEach(function(l,a){n[a]=Yc(l,t)}),n}if(Cr(e)){var r=Dm(t,e,new Set);return e.forEach(function(l){r.add(Yc(l,t))}),r}if(ir(e)){var i=Dm(t,e,new Map);return e.forEach(function(l,a){i.set(a,Yc(l,t))}),i}else{var s=Dm(t,e,{});return y$(e).forEach(function(l){ag.propertyIsEnumerable.call(e,l)&&(s[l]=Yc(e[l],t))}),s}}function YPe(e,t){return Yc(e,new Map)}function XPe(){}function _s(e,t){t===void 0&&(t=void 0),Lr();try{return e.apply(t)}finally{Fr()}}function qPe(e,t,n){return arguments.length===1||t&&typeof t=="object"?KPe(e,t):_$(e,t,n||{})}function _$(e,t,n){var r;if(typeof n.timeout=="number"){var i=new Error("WHEN_TIMEOUT");r=setTimeout(function(){if(!l[$e].isDisposed_)if(l(),n.onError)n.onError(i);else throw i},n.timeout)}n.name="When";var s=Ba("When-effect",t),l=n4(function(a){var o=ZP(!1,e);o&&(a.dispose(),r&&clearTimeout(r),s())},n);return l}function KPe(e,t){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var r,i,s=new Promise(function(l,a){var o,c=_$(e,l,ja({},t,{onError:a}));r=function(){c(),a(new Error("WHEN_CANCELLED"))},i=function(){c(),a(new Error("WHEN_ABORTED"))},t==null||(o=t.signal)==null||o.addEventListener==null||o.addEventListener("abort",i)}).finally(function(){var l;return t==null||(l=t.signal)==null||l.removeEventListener==null?void 0:l.removeEventListener("abort",i)});return s.cancel=r,s}function Gc(e){return e[$e]}var QPe={has:function(t,n){return Gc(t).has_(n)},get:function(t,n){return Gc(t).get_(n)},set:function(t,n,r){var i;return ec(n)?(i=Gc(t).set_(n,r,!0))!=null?i:!0:!1},deleteProperty:function(t,n){var r;return ec(n)?(r=Gc(t).delete_(n,!0))!=null?r:!0:!1},defineProperty:function(t,n,r){var i;return(i=Gc(t).defineProperty_(n,r))!=null?i:!0},ownKeys:function(t){return Gc(t).ownKeys_()},preventExtensions:function(t){rt(13)}};function JPe(e,t){var n,r;return IU(),e=Tc(e,t),(r=(n=e[$e]).proxy_)!=null?r:n.proxy_=new Proxy(e,QPe)}function bi(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function gg(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),OU(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function Si(e,t){var n=Cc();try{for(var r=[].concat(e.interceptors_||[]),i=0,s=r.length;i<s&&(t=r[i](t),t&&!t.type&&rt(14),!!t);i++);return t}finally{uo(n)}}function Yi(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function mg(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),OU(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function Xi(e,t){var n=Cc(),r=e.changeListeners_;if(r){r=r.slice();for(var i=0,s=r.length;i<s;i++)r[i](t);uo(n)}}function ZPe(e,t,n){return Za(function(){var r,i=Tc(e,n)[$e];(r=t)!=null||(t=oEe(e)),bh(t).forEach(function(s){return i.make_(s,t[s])})}),e}var HS=Symbol("mobx-keys");function e4e(e,t,n){return So(e)?i4(e,e,t,n):(Za(function(){var r=Tc(e,n)[$e];if(!e[HS]){var i=Object.getPrototypeOf(e),s=new Set([].concat(bh(e),bh(i)));s.delete("constructor"),s.delete($e),lg(i,HS,s)}e[HS].forEach(function(l){return r.make_(l,t&&l in t?t[l]:!0)})}),e)}var BR="splice",Rs="update",t4e=1e4,n4e={get:function(t,n){var r=t[$e];return n===$e?r:n==="length"?r.getArrayLength_():typeof n=="string"&&!isNaN(n)?r.get_(parseInt(n)):co(Jv,n)?Jv[n]:t[n]},set:function(t,n,r){var i=t[$e];return n==="length"&&i.setArrayLength_(r),typeof n=="symbol"||isNaN(n)?t[n]=r:i.set_(parseInt(n),r),!0},preventExtensions:function(){rt(15)}},s4=function(){function e(n,r,i,s){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=s,this.atom_=new hg(n),this.enhancer_=function(l,a){return r(l,a,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.dehanceValues_=function(r){return this.dehancer!==void 0&&r.length>0?r.map(this.dehancer):r},t.intercept_=function(r){return gg(this,r)},t.observe_=function(r,i){return i===void 0&&(i=!1),i&&r({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),mg(this,r)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(r){(typeof r!="number"||isNaN(r)||r<0)&&rt("Out of range: "+r);var i=this.values_.length;if(r!==i)if(r>i){for(var s=new Array(r-i),l=0;l<r-i;l++)s[l]=void 0;this.spliceWithArray_(i,0,s)}else this.spliceWithArray_(r,i-r)},t.updateArrayLength_=function(r,i){r!==this.lastKnownLength_&&rt(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&I$(r+i+1)},t.spliceWithArray_=function(r,i,s){var l=this;this.atom_;var a=this.values_.length;if(r===void 0?r=0:r>a?r=a:r<0&&(r=Math.max(0,a+r)),arguments.length===1?i=a-r:i==null?i=0:i=Math.max(0,Math.min(i,a-r)),s===void 0&&(s=G2),bi(this)){var o=Si(this,{object:this.proxy_,type:BR,index:r,removedCount:i,added:s});if(!o)return G2;i=o.removedCount,s=o.added}if(s=s.length===0?s:s.map(function(u){return l.enhancer_(u,void 0)}),this.legacyMode_){var c=s.length-i;this.updateArrayLength_(a,c)}var h=this.spliceItemsIntoValues_(r,i,s);return(i!==0||s.length!==0)&&this.notifyArraySplice_(r,s,h),this.dehanceValues_(h)},t.spliceItemsIntoValues_=function(r,i,s){if(s.length<t4e){var l;return(l=this.values_).splice.apply(l,[r,i].concat(s))}else{var a=this.values_.slice(r,r+i),o=this.values_.slice(r+i);this.values_.length+=s.length-i;for(var c=0;c<s.length;c++)this.values_[r+c]=s[c];for(var h=0;h<o.length;h++)this.values_[r+s.length+h]=o[h];return a}},t.notifyArrayChildUpdate_=function(r,i,s){var l=!this.owned_&&pd(),a=Yi(this),o=a||l?{observableKind:"array",object:this.proxy_,type:Rs,debugObjectName:this.atom_.name_,index:r,newValue:i,oldValue:s}:null;this.atom_.reportChanged(),a&&Xi(this,o)},t.notifyArraySplice_=function(r,i,s){var l=!this.owned_&&pd(),a=Yi(this),o=a||l?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:BR,index:r,removed:s,added:i,removedCount:s.length,addedCount:i.length}:null;this.atom_.reportChanged(),a&&Xi(this,o)},t.get_=function(r){if(this.legacyMode_&&r>=this.values_.length){console.warn("[mobx] Out of bounds read: "+r);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[r])},t.set_=function(r,i){var s=this.values_;if(this.legacyMode_&&r>s.length&&rt(17,r,s.length),r<s.length){this.atom_;var l=s[r];if(bi(this)){var a=Si(this,{type:Rs,object:this.proxy_,index:r,newValue:i});if(!a)return;i=a.newValue}i=this.enhancer_(i,l);var o=i!==l;o&&(s[r]=i,this.notifyArrayChildUpdate_(r,i,l))}else{for(var c=new Array(r+1-s.length),h=0;h<c.length-1;h++)c[h]=void 0;c[c.length-1]=i,this.spliceWithArray_(s.length,0,c)}},e}();function r4e(e,t,n,r){return n===void 0&&(n="ObservableArray"),r===void 0&&(r=!1),IU(),Za(function(){var i=new s4(n,t,r,!1);AU(i.values_,$e,i);var s=new Proxy(i.values_,n4e);return i.proxy_=s,e&&e.length&&i.spliceWithArray_(0,0,e),s})}var Jv={clear:function(){return this.splice(0)},replace:function(t){var n=this[$e];return n.spliceWithArray_(0,n.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];var l=this[$e];switch(arguments.length){case 0:return[];case 1:return l.spliceWithArray_(t);case 2:return l.spliceWithArray_(t,n)}return l.spliceWithArray_(t,n,i)},spliceWithArray:function(t,n,r){return this[$e].spliceWithArray_(t,n,r)},push:function(){for(var t=this[$e],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,r),t.values_.length},pop:function(){return this.splice(Math.max(this[$e].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[$e],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.spliceWithArray_(0,0,r),t.values_.length},reverse:function(){return we.trackingDerivation&&rt(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){we.trackingDerivation&&rt(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var n=this[$e],r=n.dehanceValues_(n.values_).indexOf(t);return r>-1?(this.splice(r,1),!0):!1}};Yt("at",oi);Yt("concat",oi);Yt("flat",oi);Yt("includes",oi);Yt("indexOf",oi);Yt("join",oi);Yt("lastIndexOf",oi);Yt("slice",oi);Yt("toString",oi);Yt("toLocaleString",oi);Yt("toSorted",oi);Yt("toSpliced",oi);Yt("with",oi);Yt("every",as);Yt("filter",as);Yt("find",as);Yt("findIndex",as);Yt("findLast",as);Yt("findLastIndex",as);Yt("flatMap",as);Yt("forEach",as);Yt("map",as);Yt("some",as);Yt("toReversed",as);Yt("reduce",b$);Yt("reduceRight",b$);function Yt(e,t){typeof Array.prototype[e]=="function"&&(Jv[e]=t(e))}function oi(e){return function(){var t=this[$e];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function as(e){return function(t,n){var r=this,i=this[$e];i.atom_.reportObserved();var s=i.dehanceValues_(i.values_);return s[e](function(l,a){return t.call(n,l,a,r)})}}function b$(e){return function(){var t=this,n=this[$e];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(s,l,a){return i(s,l,a,t)},r[e].apply(r,arguments)}}var i4e=Ja("ObservableArrayAdministration",s4);function $r(e){return T_(e)&&i4e(e[$e])}var S$,x$,s4e={},ha="add",Zv="delete";S$=Symbol.iterator;x$=Symbol.toStringTag;var o4=function(){function e(n,r,i){var s=this;r===void 0&&(r=nc),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$e]=s4e,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=r,this.name_=i,Jr(Map)||rt(18),Za(function(){s.keysAtom_=QP("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,n&&s.merge(n)})}var t=e.prototype;return t.has_=function(r){return this.data_.has(r)},t.has=function(r){var i=this;if(!we.trackingDerivation)return this.has_(r);var s=this.hasMap_.get(r);if(!s){var l=s=new Pa(this.has_(r),E_,"ObservableMap.key?",!1);this.hasMap_.set(r,l),r4(l,function(){return i.hasMap_.delete(r)})}return s.get()},t.set=function(r,i){var s=this.has_(r);if(bi(this)){var l=Si(this,{type:s?Rs:ha,object:this,newValue:i,name:r});if(!l)return this;i=l.newValue}return s?this.updateValue_(r,i):this.addValue_(r,i),this},t.delete=function(r){var i=this;if(this.keysAtom_,bi(this)){var s=Si(this,{type:Zv,object:this,name:r});if(!s)return!1}if(this.has_(r)){var l=pd(),a=Yi(this),o=a||l?{observableKind:"map",debugObjectName:this.name_,type:Zv,object:this,oldValue:this.data_.get(r).value_,name:r}:null;return _s(function(){var c;i.keysAtom_.reportChanged(),(c=i.hasMap_.get(r))==null||c.setNewValue_(!1);var h=i.data_.get(r);h.setNewValue_(void 0),i.data_.delete(r)}),a&&Xi(this,o),!0}return!1},t.updateValue_=function(r,i){var s=this.data_.get(r);if(i=s.prepareNewValue_(i),i!==we.UNCHANGED){var l=pd(),a=Yi(this),o=a||l?{observableKind:"map",debugObjectName:this.name_,type:Rs,object:this,oldValue:s.value_,name:r,newValue:i}:null;s.setNewValue_(i),a&&Xi(this,o)}},t.addValue_=function(r,i){var s=this;this.keysAtom_,_s(function(){var c,h=new Pa(i,s.enhancer_,"ObservableMap.key",!1);s.data_.set(r,h),i=h.value_,(c=s.hasMap_.get(r))==null||c.setNewValue_(!0),s.keysAtom_.reportChanged()});var l=pd(),a=Yi(this),o=a||l?{observableKind:"map",debugObjectName:this.name_,type:ha,object:this,name:r,newValue:i}:null;a&&Xi(this,o)},t.get=function(r){return this.has(r)?this.dehanceValue_(this.data_.get(r).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var r=this,i=this.keys();return fp({next:function(){var l=i.next(),a=l.done,o=l.value;return{done:a,value:a?void 0:r.get(o)}}})},t.entries=function(){var r=this,i=this.keys();return fp({next:function(){var l=i.next(),a=l.done,o=l.value;return{done:a,value:a?void 0:[o,r.get(o)]}}})},t[S$]=function(){return this.entries()},t.forEach=function(r,i){for(var s=xu(this),l;!(l=s()).done;){var a=l.value,o=a[0],c=a[1];r.call(i,c,o,this)}},t.merge=function(r){var i=this;return ir(r)&&(r=new Map(r)),_s(function(){So(r)?tEe(r).forEach(function(s){return i.set(s,r[s])}):Array.isArray(r)?r.forEach(function(s){var l=s[0],a=s[1];return i.set(l,a)}):Jh(r)?(r.constructor!==Map&&rt(19,r),r.forEach(function(s,l){return i.set(l,s)})):r!=null&&rt(20,r)}),this},t.clear=function(){var r=this;_s(function(){t4(function(){for(var i=xu(r.keys()),s;!(s=i()).done;){var l=s.value;r.delete(l)}})})},t.replace=function(r){var i=this;return _s(function(){for(var s=o4e(r),l=new Map,a=!1,o=xu(i.data_.keys()),c;!(c=o()).done;){var h=c.value;if(!s.has(h)){var u=i.delete(h);if(u)a=!0;else{var f=i.data_.get(h);l.set(h,f)}}}for(var d=xu(s.entries()),p;!(p=d()).done;){var m=p.value,g=m[0],v=m[1],_=i.data_.has(g);if(i.set(g,v),i.data_.has(g)){var y=i.data_.get(g);l.set(g,y),_||(a=!0)}}if(!a)if(i.data_.size!==l.size)i.keysAtom_.reportChanged();else for(var b=i.data_.keys(),S=l.keys(),x=b.next(),C=S.next();!x.done;){if(x.value!==C.value){i.keysAtom_.reportChanged();break}x=b.next(),C=S.next()}i.data_=l}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(r,i){return mg(this,r)},t.intercept_=function(r){return gg(this,r)},qP(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:x$,get:function(){return"Map"}}]),e}(),ir=Ja("ObservableMap",o4);function o4e(e){if(Jh(e)||ir(e))return e;if(Array.isArray(e))return new Map(e);if(So(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}else return rt(21,e)}var w$,C$,a4e={};w$=Symbol.iterator;C$=Symbol.toStringTag;var a4=function(){function e(n,r,i){var s=this;r===void 0&&(r=nc),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[$e]=a4e,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Jr(Set)||rt(22),this.enhancer_=function(l,a){return r(l,a,i)},Za(function(){s.atom_=QP(s.name_),n&&s.replace(n)})}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.clear=function(){var r=this;_s(function(){t4(function(){for(var i=xu(r.data_.values()),s;!(s=i()).done;){var l=s.value;r.delete(l)}})})},t.forEach=function(r,i){for(var s=xu(this),l;!(l=s()).done;){var a=l.value;r.call(i,a,a,this)}},t.add=function(r){var i=this;if(this.atom_,bi(this)){var s=Si(this,{type:ha,object:this,newValue:r});if(!s)return this}if(!this.has(r)){_s(function(){i.data_.add(i.enhancer_(r,void 0)),i.atom_.reportChanged()});var l=!1,a=Yi(this),o=a||l?{observableKind:"set",debugObjectName:this.name_,type:ha,object:this,newValue:r}:null;a&&Xi(this,o)}return this},t.delete=function(r){var i=this;if(bi(this)){var s=Si(this,{type:Zv,object:this,oldValue:r});if(!s)return!1}if(this.has(r)){var l=!1,a=Yi(this),o=a||l?{observableKind:"set",debugObjectName:this.name_,type:Zv,object:this,oldValue:r}:null;return _s(function(){i.atom_.reportChanged(),i.data_.delete(r)}),a&&Xi(this,o),!0}return!1},t.has=function(r){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(r))},t.entries=function(){var r=0,i=Array.from(this.keys()),s=Array.from(this.values());return fp({next:function(){var a=r;return r+=1,a<s.length?{value:[i[a],s[a]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var r=this,i=0,s=Array.from(this.data_.values());return fp({next:function(){return i<s.length?{value:r.dehanceValue_(s[i++]),done:!1}:{done:!0}}})},t.replace=function(r){var i=this;return Cr(r)&&(r=new Set(r)),_s(function(){Array.isArray(r)?(i.clear(),r.forEach(function(s){return i.add(s)})):cg(r)?(i.clear(),r.forEach(function(s){return i.add(s)})):r!=null&&rt("Cannot initialize set from "+r)}),this},t.observe_=function(r,i){return mg(this,r)},t.intercept_=function(r){return gg(this,r)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[w$]=function(){return this.values()},qP(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:C$,get:function(){return"Set"}}]),e}(),Cr=Ja("ObservableSet",a4),UR=Object.create(null),$R="remove",T$=function(){function e(n,r,i,s){r===void 0&&(r=new Map),s===void 0&&(s=LEe),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=r,this.name_=i,this.defaultAnnotation_=s,this.keysAtom_=new hg("ObservableObject.keys"),this.isPlainObject_=So(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(r){return this.values_.get(r).get()},t.setObservablePropValue_=function(r,i){var s=this.values_.get(r);if(s instanceof Sh)return s.set(i),!0;if(bi(this)){var l=Si(this,{type:Rs,object:this.proxy_||this.target_,name:r,newValue:i});if(!l)return null;i=l.newValue}if(i=s.prepareNewValue_(i),i!==we.UNCHANGED){var a=Yi(this),o=!1,c=a||o?{type:Rs,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:r,newValue:i}:null;s.setNewValue_(i),a&&Xi(this,c)}return!0},t.get_=function(r){return we.trackingDerivation&&!co(this.target_,r)&&this.has_(r),this.target_[r]},t.set_=function(r,i,s){return s===void 0&&(s=!1),co(this.target_,r)?this.values_.has(r)?this.setObservablePropValue_(r,i):s?Reflect.set(this.target_,r,i):(this.target_[r]=i,!0):this.extend_(r,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},t.has_=function(r){if(!we.trackingDerivation)return r in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(r);return i||(i=new Pa(r in this.target_,E_,"ObservableObject.key?",!1),this.pendingKeys_.set(r,i)),i.get()},t.make_=function(r,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(r in this.target_)){var s;if((s=this.target_[Ts])!=null&&s[r])return;rt(1,i.annotationType_,this.name_+"."+r.toString())}for(var l=this.target_;l&&l!==ag;){var a=Yv(l,r);if(a){var o=i.make_(this,r,a,l);if(o===0)return;if(o===1)break}l=Object.getPrototypeOf(l)}VR(this,i,r)}},t.extend_=function(r,i,s,l){if(l===void 0&&(l=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(r,i,l);var a=s.extend_(this,r,i,l);return a&&VR(this,s,r),a},t.defineProperty_=function(r,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Lr();var l=this.delete_(r);if(!l)return l;if(bi(this)){var a=Si(this,{object:this.proxy_||this.target_,name:r,type:ha,newValue:i.value});if(!a)return null;var o=a.newValue;i.value!==o&&(i=ja({},i,{value:o}))}if(s){if(!Reflect.defineProperty(this.target_,r,i))return!1}else As(this.target_,r,i);this.notifyPropertyAddition_(r,i.value)}finally{Fr()}return!0},t.defineObservableProperty_=function(r,i,s,l){l===void 0&&(l=!1),this.keysAtom_;try{Lr();var a=this.delete_(r);if(!a)return a;if(bi(this)){var o=Si(this,{object:this.proxy_||this.target_,name:r,type:ha,newValue:i});if(!o)return null;i=o.newValue}var c=GR(r),h={configurable:we.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:c.get,set:c.set};if(l){if(!Reflect.defineProperty(this.target_,r,h))return!1}else As(this.target_,r,h);var u=new Pa(i,s,"ObservableObject.key",!1);this.values_.set(r,u),this.notifyPropertyAddition_(r,u.value_)}finally{Fr()}return!0},t.defineComputedProperty_=function(r,i,s){s===void 0&&(s=!1),this.keysAtom_;try{Lr();var l=this.delete_(r);if(!l)return l;if(bi(this)){var a=Si(this,{object:this.proxy_||this.target_,name:r,type:ha,newValue:void 0});if(!a)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var o=GR(r),c={configurable:we.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:o.get,set:o.set};if(s){if(!Reflect.defineProperty(this.target_,r,c))return!1}else As(this.target_,r,c);this.values_.set(r,new Sh(i)),this.notifyPropertyAddition_(r,void 0)}finally{Fr()}return!0},t.delete_=function(r,i){if(i===void 0&&(i=!1),this.keysAtom_,!co(this.target_,r))return!0;if(bi(this)){var s=Si(this,{object:this.proxy_||this.target_,name:r,type:$R});if(!s)return null}try{var l,a;Lr();var o=Yi(this),c=!1,h=this.values_.get(r),u=void 0;if(!h&&(o||c)){var f;u=(f=Yv(this.target_,r))==null?void 0:f.value}if(i){if(!Reflect.deleteProperty(this.target_,r))return!1}else delete this.target_[r];if(h&&(this.values_.delete(r),h instanceof Pa&&(u=h.value_),t$(h)),this.keysAtom_.reportChanged(),(l=this.pendingKeys_)==null||(a=l.get(r))==null||a.set(r in this.target_),o||c){var d={type:$R,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:u,name:r};o&&Xi(this,d)}}finally{Fr()}return!0},t.observe_=function(r,i){return mg(this,r)},t.intercept_=function(r){return gg(this,r)},t.notifyPropertyAddition_=function(r,i){var s,l,a=Yi(this),o=!1;if(a||o){var c=a||o?{type:ha,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:r,newValue:i}:null;a&&Xi(this,c)}(s=this.pendingKeys_)==null||(l=s.get(r))==null||l.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),bh(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Tc(e,t){var n;if(co(e,$e))return e;var r=(n=t==null?void 0:t.name)!=null?n:"ObservableObject",i=new T$(e,new Map,String(r),WEe(t));return lg(e,$e,i),e}var l4e=Ja("ObservableObjectAdministration",T$);function GR(e){return UR[e]||(UR[e]={get:function(){return this[$e].getObservablePropValue_(e)},set:function(n){return this[$e].setObservablePropValue_(e,n)}})}function nr(e){return T_(e)?l4e(e[$e]):!1}function VR(e,t,n){var r;(r=e.target_[Ts])==null||delete r[n]}var c4e=P$(0),u4e=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),zS=0,E$=function(){};function h4e(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}h4e(E$,Array.prototype);var l4=function(e,t,n){MU(r,e);function r(s,l,a,o){var c;return a===void 0&&(a="ObservableArray"),o===void 0&&(o=!1),c=e.call(this)||this,Za(function(){var h=new s4(a,l,o,!0);h.proxy_=GS(c),AU(GS(c),$e,h),s&&s.length&&c.spliceWithArray(0,0,s),u4e&&Object.defineProperty(GS(c),"0",c4e)}),c}var i=r.prototype;return i.concat=function(){this[$e].atom_.reportObserved();for(var l=arguments.length,a=new Array(l),o=0;o<l;o++)a[o]=arguments[o];return Array.prototype.concat.apply(this.slice(),a.map(function(c){return $r(c)?c.slice():c}))},i[n]=function(){var s=this,l=0;return fp({next:function(){return l<s.length?{value:s[l++],done:!1}:{done:!0,value:void 0}}})},qP(r,[{key:"length",get:function(){return this[$e].getArrayLength_()},set:function(l){this[$e].setArrayLength_(l)}},{key:t,get:function(){return"Array"}}]),r}(E$,Symbol.toStringTag,Symbol.iterator);Object.entries(Jv).forEach(function(e){var t=e[0],n=e[1];t!=="concat"&&lg(l4.prototype,t,n)});function P$(e){return{enumerable:!1,configurable:!0,get:function(){return this[$e].get_(e)},set:function(n){this[$e].set_(e,n)}}}function f4e(e){As(l4.prototype,""+e,P$(e))}function I$(e){if(e>zS){for(var t=zS;t<e+100;t++)f4e(t);zS=e}}I$(1e3);function d4e(e,t,n){return new l4(e,t,n)}function xo(e,t){if(typeof e=="object"&&e!==null){if($r(e))return t!==void 0&&rt(23),e[$e].atom_;if(Cr(e))return e.atom_;if(ir(e)){if(t===void 0)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||rt(25,t,ey(e)),n}if(nr(e)){if(!t)return rt(26);var r=e[$e].values_.get(t);return r||rt(27,t,ey(e)),r}if(KP(e)||rc(e)||Qv(e))return e}else if(Jr(e)&&Qv(e[$e]))return e[$e];rt(28)}function wo(e,t){if(e||rt(29),t!==void 0)return wo(xo(e,t));if(KP(e)||rc(e)||Qv(e)||ir(e)||Cr(e))return e;if(e[$e])return e[$e];rt(24,e)}function ey(e,t){var n;if(t!==void 0)n=xo(e,t);else{if(pg(e))return e.name;nr(e)||ir(e)||Cr(e)?n=wo(e):n=xo(e)}return n.name_}function Za(e){var t=Cc(),n=I_(!0);Lr();try{return e()}finally{Fr(),O_(n),uo(t)}}var HR=ag.toString;function c4(e,t,n){return n===void 0&&(n=-1),Q2(e,t,n)}function Q2(e,t,n,r,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var s=typeof e;if(s!=="function"&&s!=="object"&&typeof t!="object")return!1;var l=HR.call(e);if(l!==HR.call(t))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++;break}e=zR(e),t=zR(t);var a=l==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var o=e.constructor,c=t.constructor;if(o!==c&&!(Jr(o)&&o instanceof o&&Jr(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(n===0)return!1;n<0&&(n=-1),r=r||[],i=i||[];for(var h=r.length;h--;)if(r[h]===e)return i[h]===t;if(r.push(e),i.push(t),a){if(h=e.length,h!==t.length)return!1;for(;h--;)if(!Q2(e[h],t[h],n-1,r,i))return!1}else{var u=Object.keys(e),f;if(h=u.length,Object.keys(t).length!==h)return!1;for(;h--;)if(f=u[h],!(co(t,f)&&Q2(e[f],t[f],n-1,r,i)))return!1}return r.pop(),i.pop(),!0}function zR(e){return $r(e)?e.slice():Jh(e)||ir(e)||cg(e)||Cr(e)?Array.from(e.entries()):e}function fp(e){return e[Symbol.iterator]=p4e,e}function p4e(){return this}["Symbol","Map","Set"].forEach(function(e){var t=YP();typeof t[e]>"u"&&rt("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:r$,extras:{getDebugName:ey},$mobx:$e});const p6e=Object.freeze(Object.defineProperty({__proto__:null,$mobx:$e,FlowCancellationError:A_,ObservableMap:o4,ObservableSet:a4,Reaction:up,_allowStateChanges:ZP,_allowStateChangesInsideComputed:NR,_allowStateReadsEnd:Uu,_allowStateReadsStart:k_,_autoAction:xh,_endAction:WU,_getAdministration:wo,_getGlobalState:rPe,_interceptReads:RPe,_isComputingDerivation:ZEe,_resetGlobalState:iPe,_startAction:zU,action:ua,autorun:n4,comparer:tc,computed:dg,configure:CPe,createAtom:QP,defineProperty:VPe,entries:UPe,extendObservable:i4,flow:ic,flowResult:APe,get:GPe,getAtom:xo,getDebugName:ey,getDependencyTree:TPe,getObserverTree:EPe,has:v$,intercept:DPe,isAction:pg,isBoxedObservable:e4,isComputed:FPe,isComputedProp:NPe,isFlow:wh,isFlowCancellationError:OPe,isObservable:R_,isObservableArray:$r,isObservableMap:ir,isObservableObject:nr,isObservableProp:jPe,isObservableSet:Cr,keys:hp,makeAutoObservable:e4e,makeObservable:ZPe,observable:Yn,observe:HPe,onBecomeObserved:u$,onBecomeUnobserved:r4,onReactionError:uPe,override:dEe,ownKeys:y$,reaction:c$,remove:$Pe,runInAction:NR,set:m$,spy:r$,toJS:YPe,trace:XPe,transaction:_s,untracked:t4,values:BPe,when:qPe},Symbol.toStringTag,{value:"Module"})),O$=T.createContext(null);function g4e(){const e=T.useContext(O$);if(!e)throw new Error("useSettings must be used within a Settings.Root");return e}const WS="cf-studio-show-rulers";function g6e({children:e}){const t=Pn(),[n,r]=T.useState(!1),[i,s]=T.useState(()=>({showGuides:!1,showRulers:localStorage.getItem(WS)==="true",showGrid:!1})),l=!!Object.values(i).find(c=>c),a=t.toggleRulers,o=T.useCallback(c=>{"showRulers"in c&&(localStorage.setItem(WS,`${c.showRulers}`),a(c.showRulers)),s(h=>({...h,...c}))},[s,a]);return T.useEffect(()=>{o({showRulers:localStorage.getItem(WS)==="true"})},[o]),E.jsx(O$.Provider,{value:T.useMemo(()=>({isOpen:n,options:i,hasAnOptionEnabled:l,setIsOpen:r,handleUpdateOptions:o}),[n,r,i,o,l]),children:e})}var J2={},k$={},u4={},Ec=Ec||{};Ec.stringify=function(){var e={"visit_linear-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return e.visit_gradient(t)},"visit_radial-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return e.visit_gradient(t)},visit_gradient:function(t){var n=e.visit(t.orientation);return n&&(n+=", "),t.type+"("+n+e.visit(t.colorStops)+")"},visit_shape:function(t){var n=t.value,r=e.visit(t.at),i=e.visit(t.style);return i&&(n+=" "+i),r&&(n+=" at "+r),n},"visit_default-radial":function(t){var n="",r=e.visit(t.at);return r&&(n+=r),n},"visit_extent-keyword":function(t){var n=t.value,r=e.visit(t.at);return r&&(n+=" at "+r),n},"visit_position-keyword":function(t){return t.value},visit_position:function(t){return e.visit(t.value.x)+" "+e.visit(t.value.y)},"visit_%":function(t){return t.value+"%"},visit_em:function(t){return t.value+"em"},visit_px:function(t){return t.value+"px"},visit_literal:function(t){return e.visit_color(t.value,t)},visit_hex:function(t){return e.visit_color("#"+t.value,t)},visit_rgb:function(t){return e.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return e.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,n){var r=t,i=e.visit(n.length);return i&&(r+=" "+i),r},visit_angular:function(t){return t.value+"deg"},visit_directional:function(t){return"to "+t.value},visit_array:function(t){var n="",r=t.length;return t.forEach(function(i,s){n+=e.visit(i),s<r-1&&(n+=", ")}),n},visit:function(t){if(!t)return"";var n="";if(t instanceof Array)return e.visit_array(t,n);if(t.type){var r=e["visit_"+t.type];if(r)return r(t);throw Error("Missing visitor visit_"+t.type)}else throw Error("Invalid node.")}};return function(t){return e.visit(t)}}();var Ec=Ec||{};Ec.parse=function(){var e={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(W){var M=new Error(t+": "+W);throw M.source=t,M}function r(){var W=i();return t.length>0&&n("Invalid input not EOF"),W}function i(){return y(s)}function s(){return l("linear-gradient",e.linearGradient,o)||l("repeating-linear-gradient",e.repeatingLinearGradient,o)||l("radial-gradient",e.radialGradient,u)||l("repeating-radial-gradient",e.repeatingRadialGradient,u)}function l(W,M,P){return a(M,function(O){var A=P();return A&&($(e.comma)||n("Missing comma before color stops")),{type:W,orientation:A,colorStops:y(b)}})}function a(W,M){var P=$(W);if(P){$(e.startCall)||n("Missing (");var O=M(P);return $(e.endCall)||n("Missing )"),O}}function o(){return c()||h()}function c(){return B("directional",e.sideOrCorner,1)}function h(){return B("angular",e.angleValue,1)}function u(){var W,M=f(),P;return M&&(W=[],W.push(M),P=t,$(e.comma)&&(M=f(),M?W.push(M):t=P)),W}function f(){var W=d()||p();if(W)W.at=g();else{var M=m();if(M){W=M;var P=g();P&&(W.at=P)}else{var O=v();O&&(W={type:"default-radial",at:O})}}return W}function d(){var W=B("shape",/^(circle)/i,0);return W&&(W.style=G()||m()),W}function p(){var W=B("shape",/^(ellipse)/i,0);return W&&(W.style=R()||m()),W}function m(){return B("extent-keyword",e.extentKeywords,1)}function g(){if(B("position",/^at/,0)){var W=v();return W||n("Missing positioning value"),W}}function v(){var W=_();if(W.x||W.y)return{type:"position",value:W}}function _(){return{x:R(),y:R()}}function y(W){var M=W(),P=[];if(M)for(P.push(M);$(e.comma);)M=W(),M?P.push(M):n("One extra comma");return P}function b(){var W=S();return W||n("Expected color definition"),W.length=R(),W}function S(){return C()||k()||w()||x()}function x(){return B("literal",e.literalColor,0)}function C(){return B("hex",e.hexColor,1)}function w(){return a(e.rgbColor,function(){return{type:"rgb",value:y(I)}})}function k(){return a(e.rgbaColor,function(){return{type:"rgba",value:y(I)}})}function I(){return $(e.number)[1]}function R(){return B("%",e.percentageValue,1)||j()||G()}function j(){return B("position-keyword",e.positionKeywords,1)}function G(){return B("px",e.pixelValue,1)||B("em",e.emValue,1)}function B(W,M,P){var O=$(M);if(O)return{type:W,value:O[P]}}function $(W){var M,P;return P=/^[\n\r\t\s]+/.exec(t),P&&V(P[0].length),M=W.exec(t),M&&V(M[0].length),M}function V(W){t=t.substr(W)}return function(W){return t=W.toString(),r()}}();u4.parse=Ec.parse;u4.stringify=Ec.stringify;(function(e){var t=Wr&&Wr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.parseColor=e.isGradient=void 0;const n=t(u4),r=l=>l.indexOf("linear-gradient")>=0;e.isGradient=r;const i=l=>l.type==="hex"?"#"+l.value:l.type==="literal"?l.value:`${l.type}(${l.value.join(",")})`,s=l=>{if(!(0,e.isGradient)(l))return{rotation:0,stops:[{offset:0,color:l},{offset:1,color:l}]};const a=n.default.parse(l)[0];return{rotation:parseFloat(a.orientation.value),stops:a.colorStops.map((o,c)=>({color:i(o),offset:o.length?parseFloat(o.length.value)/100:c/(a.colorStops.length-1)}))}};e.parseColor=s})(k$);(function(e){var t=Wr&&Wr.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.useSvgColors=e.replaceColors=e.sameColors=e.fixSize=e.getSvgSize=e.svgToURL=e.getColors=e.urlToString=e.urlToBase64=void 0;const n=t(WP),r=t(T),i=k$;function s(y){for(;y.parentNode;){if(y.nodeName==="defs")return!0;y=y.parentNode}return!1}function l(y){const b={fill:"",stroke:""};return y.getAttribute("fill")&&y.getAttribute("fill")!=="none"&&(b.fill=y.getAttribute("fill")),!b.fill&&y.style.fill&&y.style.fill!=="none"&&(b.fill=y.style.fill),y.getAttribute("stroke")&&(b.stroke=y.getAttribute("stroke")),!b.stroke&&y.style.stroke&&(b.stroke=y.style.stroke),b.stroke||b.fill||(b.fill="black"),b}const a=["path","rect","circle"];function o(y){for(var b=[],S=y.getElementsByTagName("*"),x=0,C=S.length;x<C;x++){const w=S[x];s(w)||(w.getAttribute("fill")!==null&&b.push(w),(w.getAttribute("stroke")!==null||w.style&&w.style.fill||a.indexOf(w.nodeName)>=0)&&b.push(w))}return b}async function c(y){const b=await fetch(y);return f(await b.text())}async function h(y){return await(await fetch(y,{mode:"cors"})).text()}function u(y){const b=o(new DOMParser().parseFromString(y,"image/svg+xml")),S=[];return b.forEach(x=>{const{fill:C,stroke:w}=l(x);[C,w].forEach(k=>{k&&n.default.Util.colorToRGBA(k)&&S.indexOf(k)===-1&&S.push(k)})}),S}function f(y){return"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(y)))}async function d(y){const b=await h(y),S=new DOMParser().parseFromString(b,"image/svg+xml").documentElement.getAttribute("viewBox"),[x,C,w,k]=(S==null?void 0:S.split(" "))||[];return{width:parseFloat(w),height:parseFloat(k)}}function p(y){var b=new DOMParser().parseFromString(y,"image/svg+xml");const S=b.documentElement.getAttribute("viewBox"),[x,C,w,k]=(S==null?void 0:S.split(" "))||[],I=b.documentElement.getAttribute("width");!I&&b.documentElement.setAttribute("width",w+"px");const R=b.documentElement.getAttribute("height");if((!R||R.indexOf("%")>=0)&&b.documentElement.setAttribute("height",k+"px"),I&&I.indexOf("%")>=0&&R&&R.indexOf("%")===-1){const j=parseFloat(R)/parseFloat(k);b.documentElement.setAttribute("width",j*parseFloat(w)+"px")}if(R&&R.indexOf("%")>=0&&I&&I.indexOf("%")===-1){const j=parseFloat(I)/parseFloat(w);b.documentElement.setAttribute("height",j*parseFloat(k)+"px")}return new XMLSerializer().serializeToString(b)}e.urlToBase64=c,e.urlToString=h,e.getColors=u,e.svgToURL=f,e.getSvgSize=d,e.fixSize=p;const m=(y,b)=>{if(!y||!b)return!1;const S=n.default.Util.colorToRGBA(y),x=n.default.Util.colorToRGBA(b);return S&&x?S.r===x.r&&S.g===x.g&&S.b===x.b&&S.a===x.a:void 0};function g(y,b,S,x){var C=y.namespaceURI,w=document.createElementNS(C,"linearGradient");const k=n.default.Util.degToRad(S+90),I=(Math.cos(k)+1)/2,R=(Math.sin(k)+1)/2,j=(Math.cos(k+Math.PI)+1)/2,G=(Math.sin(k+Math.PI)+1)/2;w.setAttribute("x1",100*I+"%"),w.setAttribute("y1",100*R+"%"),w.setAttribute("x2",100*j+"%"),w.setAttribute("y2",100*G+"%"),w.setAttribute("gradientUnits","userSpaceOnUse"),w.setAttribute("id",b);for(var B=0;B<x.length;B++){var $=x[B],V=document.createElementNS(C,"stop");for(var W in $)$.hasOwnProperty(W)&&V.setAttribute(W,$[W]);w.appendChild(V)}return(y.querySelector("defs")||y.insertBefore(document.createElementNS(C,"defs"),y.firstChild)).appendChild(w)}function v(y,b){var S=new DOMParser().parseFromString(y,"image/svg+xml");const x=o(S),C=Array.from(b.keys());return x.forEach(w=>{const{fill:k,stroke:I}=l(w);[{prop:"fill",color:k},{prop:"stroke",color:I}].forEach(({prop:R,color:j})=>{const G=C.find(B=>(0,e.sameColors)(B,j));if(G){const B=b.get(G);if((0,i.isGradient)(B)){const{rotation:$,stops:V}=(0,i.parseColor)(B),W=V.map(P=>({offset:100*P.offset+"%","stop-color":P.color})),M="color"+Math.round(1e8*Math.random());g(S.children[0],M,$,W),w.style[R]=null,w.setAttribute(R,`url('#${M}')`)}else w.style[R]=b.get(G)}})}),f(new XMLSerializer().serializeToString(S))}e.sameColors=m,e.replaceColors=v;const _=y=>{const[b,S]=r.default.useState([]);return r.default.useEffect(()=>{let x=!1;return(async()=>{S([]);const C=u(await h(y));x||S(C)})(),()=>{x=!0}},[y]),b};e.useSvgColors=_})(J2);function m4e(){function e(n){n==null||n.toggleCropMode()}function t(n,r){n.set({...n,...r})}return{setCroppingMode:e,setCrop:t}}function m6e(){var i;const e=Pn(),t=e.selectedElements;function n(s){e.history.transaction(()=>{t.forEach(l=>{l.set({stroke:s})})})}return{borderColor:(i=t[0])==null?void 0:i.stroke,onBorderColor:n}}function v6e(){var i;const e=Pn(),t=e.selectedElements;function n(s){e.history.transaction(()=>{t.forEach(l=>{l.set({strokeWidth:s})})})}return{borderWeight:(i=t[0])==null?void 0:i.strokeWidth,onBorderWeight:n}}function y6e(){const{onPosition:e}=v4e(),{activeDistribution:t,onDistribution:n}=y4e(),{activeLayers:r,onLayer:i}=_4e();return{onLayer:i,onPosition:e,onDistribution:n,activeDistribution:t,activeLayers:r}}function v4e(){const e=Pn();function t(n){var r,i,s,l,a,o,c,h;if(n==="left"){let u=(r=e.activePage)==null?void 0:r.computedWidth;e.selectedElements.forEach(f=>{u=Math.min(u,Gr.getClientRect(f).x)}),e.selectedElements.length===1&&(u=0),e.selectedElements.forEach(f=>{const d=Gr.getClientRect(f);f.set({x:f.x-d.x+u})})}if(n==="center"){let u=(i=e.activePage)==null?void 0:i.computedWidth,f=0;e.selectedElements.forEach(p=>{const m=Gr.getClientRect(p);u=Math.min(u,m.x),f=Math.max(f,m.x+m.width)});let d=(f+u)/2;e.selectedElements.length===1&&(d=((s=e.activePage)==null?void 0:s.computedWidth)/2),e.selectedElements.forEach(p=>{const m=Gr.getClientRect(p),g=p.x-m.x;p.set({x:d+g-m.width/2})})}if(n==="right"){let u=0;e.selectedElements.forEach(f=>{const d=Gr.getClientRect(f);u=Math.max(u,d.x+d.width)}),e.selectedElements.length===1&&(u=(l=e.activePage)==null?void 0:l.computedWidth),e.selectedElements.forEach(f=>{const d=Gr.getClientRect(f);f.set({x:f.x-d.x+u-d.width})})}if(n==="top"){let u=(a=e.activePage)==null?void 0:a.computedHeight;e.selectedElements.forEach(f=>{u=Math.min(u,Gr.getClientRect(f).y)}),e.selectedElements.length===1&&(u=0),e.selectedElements.forEach(f=>{const d=Gr.getClientRect(f);f.set({y:f.y-d.y+u})})}if(n==="middle"){let u=(o=e.activePage)==null?void 0:o.computedHeight,f=0;e.selectedElements.forEach(p=>{const m=Gr.getClientRect(p);u=Math.min(u,m.y),f=Math.max(f,m.y+m.height)});let d=(f+u)/2;e.selectedElements.length===1&&(d=((c=e.activePage)==null?void 0:c.computedHeight)/2),e.selectedElements.forEach(p=>{const m=Gr.getClientRect(p),g=p.y-m.y;p.set({y:d+g-m.height/2})})}if(n==="bottom"){let u=0;e.selectedElements.forEach(f=>{const d=Gr.getClientRect(f);u=Math.max(u,d.y+d.height)}),e.selectedElements.length===1&&(u=(h=e.activePage)==null?void 0:h.computedHeight),e.selectedElements.forEach(f=>{const d=Gr.getClientRect(f);f.set({y:f.y-d.y+u-d.height})})}}return{onPosition:t}}function y4e(){const e=Pn(),t=e.selectedElements;function n(i){if(i==="vertical"){const s=e.selectedElements.slice().sort((m,g)=>m.y-g.y),l=s.find(m=>m.type==="text"),a=s[s.length-1],o=l.y,c=a.y+a.height,h=s.reduce((m,g)=>m+g.height,0),d=(c-o-h)/(s.length-1);let p=o;e.history.transaction(()=>{for(const m of s)m.set({y:p}),p+=m.height+d})}if(i==="horizontal"){const s=e.selectedElements.slice().sort((m,g)=>m.x-g.x),l=s.find(m=>m.type==="text"),a=s[s.length-1],o=l.x,c=a.x+a.width,h=s.reduce((m,g)=>m+g.width,0),d=(c-o-h)/(s.length-1);let p=o;e.history.transaction(()=>{for(const m of s)m.set({x:p}),p+=m.width+d})}}const r=new Set;return t.length>1&&(r.add("vertical"),r.add("horizontal")),{onDistribution:n,activeDistribution:r}}function _4e(){var i,s,l,a;const e=Pn(),t=e.selectedElements.map(o=>o.id);function n(o){var c,h,u,f;o==="up"&&((c=e.activePage)==null||c.moveElementsUp(t)),o==="down"&&((h=e.activePage)==null||h.moveElementsDown(t)),o==="top"&&((u=e.activePage)==null||u.moveElementsTop(t)),o==="bottom"&&((f=e.activePage)==null||f.moveElementsBottom(t))}const r=new Set;return(i=e.activePage)!=null&&i.canMoveElementsTop(t)&&r.add("top"),(s=e.activePage)!=null&&s.canMoveElementsUp(t)&&r.add("up"),(l=e.activePage)!=null&&l.canMoveElementsDown(t)&&r.add("down"),(a=e.activePage)!=null&&a.canMoveElementsBottom(t)&&r.add("bottom"),{onLayer:n,activeLayers:r}}function _6e(){const e=Pn(),t=e.selectedElements;function n(r){e.history.transaction(()=>{t.forEach(i=>{i.set({align:r})})})}return{onAlign:n}}function WR(e){var a,o,c,h;if((e.children||[]).length<2)return;const t=document.querySelector("#polotno-controls-ref"),n=(a=e.children)==null?void 0:a[0];n.style.backgroundColor="#3D424B",n.style.fontSize="10px",n.style.color="#9ca3af";const r=(t==null?void 0:t.clientWidth)||0;if(n.style.width=`${r}px`,(o=n.children)!=null&&o.length){let p=13,m=r||0,g=0;if(Array.from(n.children).forEach((v,_)=>{const y=v,b=_==0;p+=b?0:40,y.innerText=`${g}`,g+=10,y.style.left=b?"13px":`${p}px`,y.style.paddingLeft="2px",y.style.width="40px",m=b?m-(13+40):m-40}),m!==0){const v=n.children[1],_=Math.ceil(m/40)+1;Array.from({length:_},()=>{const y=v.cloneNode(!0);y.style.left=`${p}px`,p+=40,y.style.paddingLeft="2px",y.style.width="40px",y.innerText=`${g}`,g+=10,n.appendChild(y)})}}const i=(c=e.children)==null?void 0:c[1];i.style.backgroundColor="#3D424B",i.style.fontSize="10px",i.style.color="#9ca3af";const s=(t==null?void 0:t.clientHeight)||0,l=14;if(i.style.height=`${s-l}px`,(h=i.children)!=null&&h.length){let d=0,p=s-l||0,m=0;if(Array.from(i.children).forEach((g,v)=>{const _=g,y=v==0;y&&(_.style.borderLeft="none"),d+=y?0:41,_.innerText=`${m}`,m+=10,_.style.paddingLeft="2px",_.style.top=`${d}px`,p=p-41}),p!==0){const g=i.children[1],v=Math.ceil(p/41)+1;Array.from({length:v},()=>{const _=g.cloneNode(!0);_.style.top=`${d}px`,d+=41,_.style.paddingLeft="2px",_.style.width="41px",_.innerText=`${m}`,m+=10,i.appendChild(_)})}}}function b6e(){const e=Pn(),t=T.useRef(),[n,r]=T.useState();return T.useLayoutEffect(()=>{!e.rulesVisible||!t.current||(WR(t.current),r(t.current))},[e.rulesVisible,e.width,e.height,e.scale]),T.useLayoutEffect(()=>{var l;if(!e.rulesVisible&&t.current)return;const i=document.querySelector(".polotno-page-container"),s=((l=i==null?void 0:i.parentNode)==null?void 0:l.children)||[];Array.from(s).forEach(a=>{if(a!==i&&a.tagName==="DIV"&&a instanceof HTMLElement&&!a.className)if(t.current)a.style.display="none";else{a.style.display="none";const c=a.cloneNode(!0);c.style.display="block",WR(c),t.current=c,r(t.current)}})},[e.rulesVisible]),{rulers:n}}function b4e(){const e=Pn(),t=T.useCallback(()=>{var s,l;const i=(l=(s=e.activePage)==null?void 0:s.children)==null?void 0:l.find(a=>a.type==="group"&&a.name===$u);i!=null&&i.id&&e.deleteElements([i.id])},[e]),n=T.useCallback(()=>{var s,l;const i=(l=(s=e.activePage)==null?void 0:s.children)==null?void 0:l.find(a=>a.type==="group"&&a.name===$u);i!=null&&i.id&&i.set({visible:!1})},[e]),r=T.useCallback(()=>{var s,l;const i=(l=(s=e.activePage)==null?void 0:s.children)==null?void 0:l.find(a=>a.type==="group"&&a.name===$u);i!=null&&i.id&&i.set({visible:!0})},[e]);return{removeGrid:t,hideGrid:n,showGrid:r}}const $u="grid-group",YS="cf-studio-grid-size",Z2=10,XS=100,S4e=e=>e<Z2?Z2:e;function S6e(){var c;const e=Pn(),{removeGrid:t}=b4e(),{options:n}=g4e(),[r,i]=T.useState(()=>{const h=localStorage.getItem(YS);return h?S4e(Number(h)):XS}),s=T.useCallback(async()=>{const h=localStorage.getItem(YS),f=(h?Number(h):XS)*5;t();const{width:d,height:p}=e,m=Math.ceil(d/f),g=Math.ceil(p/f),v=Math.ceil(d/m),_=Math.ceil(p/g),y=[];for(let R=1;R<m;R++)y.push(`<line x1="${v*R}" y1="0" x2="${v*R}" y2="${p}" stroke="blue" stroke-width="2"/>`);for(let R=1;R<g;R++)y.push(`<line x1="0" y1="${_*R}" x2="${d}" y2="${_*R}" stroke="blue" stroke-width="2"/>`);const b=J2.svgToURL(`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${d} ${p}">
      ${y.join("")}
    </svg>`),S=e.activePage.addElement({type:"svg",width:d,height:p,src:b,name:"grid",selectable:!1,opacity:.2,alwaysOnTop:!0}),x=[],C=e.activePage.addElement({x:0,y:0,type:"svg",width:1,height:1,src:J2.svgToURL('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"></svg>'),selectable:!1});for(let R=1;R<m;R++){const j=C.clone();j.set({x:v*R,y:0}),x.push(j.id)}for(let R=1;R<g;R++){const j=C.clone();j.set({x:_*R,y:0}),x.push(j.id)}const w=e.groupElements([S.id,...x]),{id:k}=w,I=e.getElementById(k);I.set({name:$u}),await e.waitLoading(),e.deleteElements([C.id]),e.selectElements([I.id]),await e.waitLoading()},[t,e]),l=T.useMemo(()=>hA(()=>s(),500),[s]);T.useEffect(()=>()=>{l.cancel()},[l]);const a=T.useMemo(()=>hA(h=>i(h),500),[]);T.useEffect(()=>()=>{a.cancel()},[a]),T.useEffect(()=>{var h,u;if(n.showGrid){if(!!((u=(h=e.activePage)==null?void 0:h.children)!=null&&u.find(d=>d.type==="group"&&d.name===$u)))return;l()}else t()},[n.showGrid,t,(c=e.activePage)==null?void 0:c.children,l]),c$(()=>[e.width,e.height],()=>{n.showGrid&&s()});async function o(h){const u=Math.min(Math.max(h,Z2),XS);i(()=>(localStorage.setItem(YS,`${u}`),l(),h)),a(u)}return{gridSize:r,onGridSize:o}}function x6e(){var i;const e=Pn(),t=e.selectedElements,n=(i=t[0])==null?void 0:i.opacity;function r(s){e.history.transaction(()=>{t.forEach(l=>{l.set({opacity:s/100})})})}return{onTransparency:r,transparency:n*100}}const x4e=400;function w6e(){const e=Pn(),{onLock:t}=P1e(),[n,r]=T.useState(!1),[i,s]=T.useState(""),[l,a]=T.useState(!1),o=e.selectedElements,c=e.width,h=e.height,u=e.on,f=o.find(_=>_.type==="text");T.useEffect(()=>{const _=()=>{const b=o==null?void 0:o[0];if(!b)return;const{width:S,height:x}=b.toJSON(),C=Math.ceil(c/S),w=Math.ceil(h/x);if(C*w>x4e){s("Item too small to repeat"),r(!0);return}if(o.length>1||o[0].type==="group"){s("Can only repeat single elements"),r(!0);return}s(""),r(!1)};_();const y=u("change",_);return()=>{y()}},[o,c,h,u]);function d(){const _=e.selectedElements.filter(y=>y.removable);e.deleteElements(_.map(y=>y.id))}function p(){const _=[];e.selectedElements.forEach(y=>{const b=y.clone();y.type==="group"?b.children.forEach(S=>{S.set({x:S.x+50,y:S.y+50})}):b.set({x:y.x+50,y:y.y+50}),_.push(b.id)}),e.selectElements(_)}async function m(){const _=o==null?void 0:o[0];if(!_)return;a(!0);const y=[],b=_.toJSON(),{width:S,height:x}=w4e(b.width,b.height,b.rotation),C=Math.ceil(c/S),w=Math.ceil(h/x),k=(c-(C-1)*S)/2,I=(h-(w-1)*x)/2;for(let j=0;j<C;j++)for(let G=0;G<w;G++){const B=_.clone();B.set({x:k+j*S-S/2,y:I+G*x-x/2}),y.push(B.id)}const R=e.groupElements(y);e.selectElements([R.id]),await e.waitLoading(),a(!1)}const g=f==null?void 0:f.locked;return{onLock:()=>t(e.selectedElements),onDelete:d,onCopy:p,onRepeat:m,defaultValueControls:g?["lock"]:void 0,isLocked:g,shouldDisableRepeat:n,disabledRepeatCustomMessage:i,isRepeatElementsLoading:l}}function C6e(){const e=Pn(),t=e.selectedElements;function n(){e.history.transaction(()=>{t.forEach(i=>{i.set({flipX:!i.flipX})})})}function r(){e.history.transaction(()=>{t.forEach(i=>{i.set({flipY:!i.flipY})})})}return{onFlipX:n,onFlipY:r}}function T6e(e){const{setCrop:t,setCroppingMode:n}=m4e(),r=e.filter(f=>f.type==="image"||f.type==="content-image");function i(){r.forEach(f=>{n(f)})}function s(){r.forEach(f=>{const{width:d,height:p,cropHeight:m,cropWidth:g,x:v,y:_,cropX:y,cropY:b}=f,S=p/m,x=d/g,C=v-x*y,w=_-S*b;t(f,{width:x,cropWidth:1,x:C,cropX:0,height:S,cropHeight:1,y:w,cropY:0,cornerRadius:0})})}function l(f,d,p=0){const{width:m,cropWidth:g,x:v,cropX:_,height:y,cropHeight:b,y:S,cropY:x,cornerRadius:C}=f;if(m/y===d&&C===p)return;const k=y/b,I=m/g,R=v-I*_,j=S-k*x,G=I/k,B=G<d?I:k*d,$=G<d?I/d:k,V=G<d?1:1-(I-B)/I,W=G<d?1-(k-$)/k:1,M=G<d?0:(1-V)/2,P=G<d?(1-W)/2:0,O=(I-B)/2,A=(k-$)/2,D=G<d?R-O:R+O,X=G<d?j+A:j-A;t(f,{width:B,cropWidth:V,x:D,cropX:M,height:$,cropHeight:W,y:X,cropY:P,cornerRadius:p})}function a(){r.forEach(f=>{l(f,1)})}function o(){r.forEach(f=>{l(f,3/4)})}function c(){r.forEach(f=>{l(f,4/3)})}function h(){r.forEach(f=>{l(f,16/9)})}function u(){r.forEach(f=>{l(f,1,Math.max(f.width,f.height))})}return{setCroppingMode:i,setCropOriginal:s,setCropSquare:a,setCropPortrait:o,setCropLandscape:c,setCropWide:h,setCropCircle:u}}function w4e(e,t,n){const r=n*Math.PI/180,i=Math.abs(Math.cos(r)),s=Math.abs(Math.sin(r)),l=e*i+t*s,a=e*s+t*i;return{width:l,height:a}}function E6e(){var s,l;const e=Pn();function t(a,o){var h,u;const c=(u=(h=e.selectedElements[0])==null?void 0:h.custom)==null?void 0:u[a];return c!==void 0&&typeof c==typeof o?c:o}const n=(l=(s=e.selectedElements[0])==null?void 0:s.custom)==null?void 0:l.transformation;function r(a){const o=e.selectedElements;e.history.transaction(()=>{if(e.selectElements([]),o==null?void 0:o.every(h=>h.custom.transformation===a.type)){o==null||o.forEach(h=>{h.set({x:a.type==="circle"?h.x-h.width/2:h.x,custom:{...h.custom,transformation:void 0}})}),e.selectElements(o.map(h=>h.id));return}a.type==="circle"&&(o==null||o.forEach(h=>{h.set({x:h.custom.transformation?h.x:h.x+h.width/2,custom:{...h.custom,transformation:"circle",radius:50}})})),a.type!=="circle"&&HB.has(a.type)&&(o==null||o.forEach(h=>{let u=h.custom.bend||25;h.custom.transformation!==a.type&&["bend","waveUpper","waveLower"].includes(a.type)&&(u=Math.abs(u)||25),h.set({custom:{...h.custom,bend:u,transformation:a.type}})})),e.selectElements(o.map(h=>h.id))})}function i(a,o){const c=e.selectedElements;e.history.transaction(()=>{e.selectElements([]),c==null||c.forEach(h=>{h.set({custom:{...h.custom,[a]:o}})}),e.selectElements(c.map(h=>h.id))})}return{onToggleValue:r,onSetCustom:i,getCustomValue:t,value:n}}function P6e(){var r;const e=Pn(),t=(r=e.selectedElements[0])==null?void 0:r.text;function n(i){const s=e.selectedElements;e.history.transaction(()=>{e.selectElements([]),s==null||s.forEach(l=>{l.set({text:i})}),e.selectElements(s.map(l=>l.id))})}return{text:t,onSetText:n}}function I6e(){const e=Pn();return Kxe(e.selectedElements[0])}function O6e(){const e=Pn(),t=e.selectedElements,n=t.find(s=>s.type==="text");function r(s){e.history.transaction(()=>{const l=Math.floor(s)/100;t.forEach(a=>{a.type==="text"&&a.set({letterSpacing:l})})})}function i(s){e.history.transaction(()=>{const l=QTe(s,2);t.forEach(a=>{a.type==="text"&&a.set({lineHeight:l})})})}return{tracking:$2(((n==null?void 0:n.letterSpacing)??0)*100,-50,250),minTracking:-50,maxTracking:250,setTracking:r,leading:$2((n==null?void 0:n.lineHeight)??0,.5,2.5),minLeading:.5,maxLeading:2.5,setLeading:i}}function C4e(e){var r;const n=(((r=e.activePage)==null?void 0:r.children)??[]).find(i=>i.type==="group"&&i.name===$u);return[n==null?void 0:n.id].filter(i=>i)}function YR(e){var r;const t=JSON.parse(JSON.stringify(e.toJSON())),n=C4e(e)??[];return(r=t==null?void 0:t.pages)==null||r.forEach(i=>{var s;i.children=(s=i==null?void 0:i.children)==null?void 0:s.filter(l=>!n.includes(l.id))}),t}function T4e(){const e="polotno-state";localStorage.removeItem(e)}function k6e(e,t){try{const n=JSON.parse(t);e.loadJSON(n,!0)}catch(n){console.error(n)}}async function h4(e,t){e&&ime(e).then(n=>{var h;let r=n.width,i=n.height;const s=n.src,l=r/i;l>1?(r=Math.min(r,t.width*.8),i=r/l):(i=Math.min(i,t.height*.8),r=i*l);const a=t.width/2-r/2,o=t.height/2-i/2,c=(h=t.activePage)==null?void 0:h.addElement({type:"image",src:s,width:r,height:i,x:a,y:o});Dke(c)}).catch(()=>null)}function XR(e,t,n,r){const i=c=>c*r/2.54,s=c=>c*2.54/r,l={cm:1,mm:10,pixels:t===la.PX||n===la.PX?1:i(1),in:.39370078740157},a=t===la.PX?s(e):e/l[t],o=n===la.PX?i(a):a*l[n];return parseInt(o.toFixed(2))}function qR({width:e,height:t,dpi:n,unit:r}){const i=lA.find(s=>s.id===n)||lA[0];return{...l1e,width:XR(e,r,la.PX,i.dpi),height:XR(t,r,la.PX,i.dpi),dpi:i.dpi,unit:la.PX}}const E4e=({children:e,open:t,defaultOpen:n=!1,onOpenChange:r,zIndex:i,className:s})=>E.jsx(Rp,{open:t,onOpenChange:r,defaultOpen:n,children:E.jsx(I4e,{zIndex:i,className:s,children:e})}),A$=T.createContext(null);function P4e(){const e=T.useContext(A$);if(!e)throw new Error("useSimpleDialog must be used within a SimpleDialog.Root");return e}const I4e=({children:e,zIndex:t,className:n})=>{const{handleClose:r}=MN(),[i,s]=T.useState();return T.useEffect(()=>{let l=null,a=null,o=null,c=null;const h=[];T.Children.forEach(e,u=>{if(T.isValidElement(u))switch(u.type){case on.Trigger:l=u;break;case on.Content:a=u;break;case on.Actions:o=u;break;case on.CloseX:c=u;break;default:h.push(u);break}}),s({triggerChild:l,contentChild:a,actionsChild:o,closeXChild:c,restOfChildren:h})},[e]),E.jsxs(A$.Provider,{value:T.useMemo(()=>({handleClose:r}),[r]),children:[i==null?void 0:i.restOfChildren,(i==null?void 0:i.triggerChild)&&E.jsx(g1,{asChild:!0,children:i.triggerChild}),E.jsx(m1,{className:"h-screen w-screen",children:E.jsxs(Dp,{className:Fe("bg-gray-1000 rounded-4 m-auto flex h-fit w-[455px] flex-col border-[1px] border-gray-600",n),zIndex:t,children:[i==null?void 0:i.contentChild,i==null?void 0:i.actionsChild,i==null?void 0:i.closeXChild]})})]})},O4e=()=>E.jsx(LN,{variant:"primary"}),R$=T.forwardRef(({children:e},t)=>E.jsx(g1,{ref:t,asChild:!0,children:e}));R$.displayName="Trigger";const k4e=({children:e,title:t,icon:n,iconClassName:r,contentClassName:i,isTextOnly:s,className:l})=>E.jsxs("section",{className:Fe("flex w-[455px] flex-row items-start justify-start gap-6 p-6",l),children:[n?E.jsx("section",{className:Fe("simple-dialog-icon rounded-2 inline-flex h-10 w-10 items-center justify-center gap-2.5 bg-violet-500 p-1.5",r),children:n}):null,E.jsxs("section",{className:Fe("flex w-[318px] flex-col items-start justify-start gap-2",i),children:[t&&E.jsx("span",{className:"shrink grow basis-0 text-lg text-gray-50",children:t}),s?E.jsx("section",{className:"text-14 text-gray-400",children:e}):e]})]}),A4e=({children:e})=>{const{handleClose:t}=P4e();return E.jsxs("section",{className:"flex w-full flex-col",children:[E.jsx("div",{className:"h-px w-full bg-gray-800"}),E.jsx("section",{className:"flex h-full flex-row items-center justify-between p-3",children:e({handleClose:t})})]})},on={Root:E4e,Trigger:R$,Content:k4e,Actions:A4e,CloseX:O4e},D$=`
    fragment ProjectSimple on StudioProject {
  id
  name
  team {
    id
  }
  userPermissions {
    projectRole
    teamRole
    user {
      id
    }
  }
  activeRevision {
    id
    fileUrl
  }
}
    `,R4e=`
    fragment FolderSimple on StudioProjectFolder {
  id
  parentFolderId
  name
  collaborators {
    id
    avatarUrl
    displayName
  }
}
    `,vg=`
    fragment Project on StudioProject {
  id
  name
  updateTime
  createTime
  lastViewTime
  deleteTime
  restoreTime
  folderId
  team {
    id
  }
  projectOwner {
    id
    avatarUrl
    displayName
  }
  activeRevision {
    id
    projectId
    projectName
    fileUrl
    thumbnailUrl
    createTime
    isAutoSave
    editor
  }
  userPermissions {
    projectRole
    teamRole
    user {
      id
    }
  }
}
    `,M$=`
    fragment Folder on StudioProjectFolder {
  id
  parentFolderId
  name
  createdAt
  updatedAt
  deletedAt
  projects {
    ...Project
  }
  folders {
    id
    parentFolderId
    name
    createdAt
    updatedAt
    deletedAt
    team {
      id
    }
    collaborators {
      id
      avatarUrl
      displayName
    }
    owner {
      id
      avatarUrl
    }
    userPermissions {
      projectRole
      teamRole
      user {
        id
      }
    }
  }
  team {
    id
  }
  collaborators {
    id
    avatarUrl
    displayName
  }
  owner {
    id
    avatarUrl
  }
  userPermissions {
    projectRole
    teamRole
    user {
      id
    }
  }
}
    ${vg}`,L$=`
    mutation StudioProjectsCreateProject($input: StudioProjectsCreateProjectInput!) {
  studioProjectsCreateProject(input: $input) {
    project {
      ...ProjectSimple
    }
    errors {
      code
      message
    }
  }
}
    ${D$}`,Fi=e=>Ke(["StudioProjectsCreateProject"],t=>oe(L$,t)(),e);Fi.getKey=()=>["StudioProjectsCreateProject"];Fi.fetcher=(e,t)=>oe(L$,e,t);const f4=`
    query StudioProjectsGetProject($projectId: ID!) {
  studioProjectsGetProject(projectId: $projectId) {
    project {
      ...ProjectSimple
    }
    errors {
      code
      message
    }
  }
}
    ${D$}`,Ch=(e,t)=>Ot(["StudioProjectsGetProject",e],oe(f4,e),t);Ch.document=f4;Ch.getKey=e=>["StudioProjectsGetProject",e];Ch.rootKey="StudioProjectsGetProject";Ch.fetcher=(e,t)=>oe(f4,e,t);const d4=`
    query StudioProjectsListMostRecent($input: StudioProjectsListMostRecentInput!) {
  studioProjectsListMostRecent(input: $input) {
    projects {
      ...Project
    }
    errors {
      code
      message
    }
  }
}
    ${vg}`,D_=(e,t)=>Ot(["StudioProjectsListMostRecent",e],oe(d4,e),t);D_.document=d4;D_.getKey=e=>["StudioProjectsListMostRecent",e];D_.rootKey="StudioProjectsListMostRecent";D_.fetcher=(e,t)=>oe(d4,e,t);const p4=`
    query StudioProjectsListProjects($input: StudioProjectsListProjectsInput!) {
  studioProjectsListProjects(input: $input) {
    projects {
      ...Project
    }
    folders {
      ...Folder
    }
    errors {
      code
      message
    }
  }
}
    ${vg}
${M$}`,M_=(e,t)=>Ot(["StudioProjectsListProjects",e],oe(p4,e),t);M_.document=p4;M_.getKey=e=>["StudioProjectsListProjects",e];M_.rootKey="StudioProjectsListProjects";M_.fetcher=(e,t)=>oe(p4,e,t);const g4=`
    query StudioGetFoldersWithProjectCountList($input: StudioProjectsListProjectsInput!) {
  studioProjectsListProjects(input: $input) {
    folders {
      id
      name
      projectCount
    }
    errors {
      code
      message
    }
  }
}
    `,L_=(e,t)=>Ot(["StudioGetFoldersWithProjectCountList",e],oe(g4,e),t);L_.document=g4;L_.getKey=e=>["StudioGetFoldersWithProjectCountList",e];L_.rootKey="StudioGetFoldersWithProjectCountList";L_.fetcher=(e,t)=>oe(g4,e,t);const m4=`
    query StudioProjectsListItemsInTrash($input: StudioProjectsListItemsInTrashInput!) {
  studioProjectsListItemsInTrash(input: $input) {
    projects {
      ...Project
    }
    folders {
      ...Folder
    }
    errors {
      code
      message
    }
  }
}
    ${vg}
${M$}`,F_=(e,t)=>Ot(["StudioProjectsListItemsInTrash",e],oe(m4,e),t);F_.document=m4;F_.getKey=e=>["StudioProjectsListItemsInTrash",e];F_.rootKey="StudioProjectsListItemsInTrash";F_.fetcher=(e,t)=>oe(m4,e,t);const F$=`
    mutation StudioProjectsMoveProjects($input: StudioProjectMoveProjectsInput!) {
  studioProjectsMoveProjects(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,N$=e=>Ke(["StudioProjectsMoveProjects"],t=>oe(F$,t)(),e);N$.getKey=()=>["StudioProjectsMoveProjects"];N$.fetcher=(e,t)=>oe(F$,e,t);const j$=`
    mutation StudioProjectsUpdateProject($input: StudioProjectsUpdateProjectInput!) {
  studioProjectsUpdateProject(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,B$=e=>Ke(["StudioProjectsUpdateProject"],t=>oe(j$,t)(),e);B$.getKey=()=>["StudioProjectsUpdateProject"];B$.fetcher=(e,t)=>oe(j$,e,t);const U$=`
    mutation StudioProjectsDeleteProject($input: StudioProjectDeleteProjectInput!) {
  studioProjectsDeleteProject(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,$$=e=>Ke(["StudioProjectsDeleteProject"],t=>oe(U$,t)(),e);$$.getKey=()=>["StudioProjectsDeleteProject"];$$.fetcher=(e,t)=>oe(U$,e,t);const G$=`
    mutation StudioProjectsRestoreProject($input: StudioProjectRestoreProjectInput!) {
  studioProjectsRestoreProject(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,V$=e=>Ke(["StudioProjectsRestoreProject"],t=>oe(G$,t)(),e);V$.getKey=()=>["StudioProjectsRestoreProject"];V$.fetcher=(e,t)=>oe(G$,e,t);const H$=`
    mutation StudioProjectsOptimizeProject($input: StudioProjectOptimizeProjectInput!) {
  studioProjectsOptimizeProject(input: $input) {
    url
    success
    errors {
      code
      message
    }
  }
}
    `,z$=e=>Ke(["StudioProjectsOptimizeProject"],t=>oe(H$,t)(),e);z$.getKey=()=>["StudioProjectsOptimizeProject"];z$.fetcher=(e,t)=>oe(H$,e,t);const W$=`
    mutation StudioProjectsCreateFolder($input: StudioProjectCreateFolderInput!) {
  studioProjectsCreateFolder(input: $input) {
    folder {
      id
      name
      parentFolderId
      team {
        id
      }
      createdAt
      updatedAt
    }
    errors {
      code
      message
    }
  }
}
    `,Y$=e=>Ke(["StudioProjectsCreateFolder"],t=>oe(W$,t)(),e);Y$.getKey=()=>["StudioProjectsCreateFolder"];Y$.fetcher=(e,t)=>oe(W$,e,t);const v4=`
    query StudioProjectsFolderGetSimple($input: StudioProjectsFolderGetInput!) {
  studioProjectsFolderGet(input: $input) {
    folder {
      ...FolderSimple
    }
    errors {
      code
      message
    }
  }
}
    ${R4e}`,N_=(e,t)=>Ot(["StudioProjectsFolderGetSimple",e],oe(v4,e),t);N_.document=v4;N_.getKey=e=>["StudioProjectsFolderGetSimple",e];N_.rootKey="StudioProjectsFolderGetSimple";N_.fetcher=(e,t)=>oe(v4,e,t);const y4=`
    query StudioProjectsListProjectsSharedWithMe($input: StudioProjectsListProjectsSharedWithMeInput!) {
  studioProjectsListProjectsSharedWithMe(input: $input) {
    teamsProjects {
      team {
        id
        name
        logoUrl
      }
      projects {
        ...Project
      }
    }
    userProjects {
      owner {
        id
        displayName
        avatarUrl
      }
      projects {
        ...Project
      }
    }
    pagination {
      totalPages
      limit
      currentPage
    }
    errors {
      code
      message
    }
  }
}
    ${vg}`,j_=(e,t)=>Ot(["StudioProjectsListProjectsSharedWithMe",e],oe(y4,e),t);j_.document=y4;j_.getKey=e=>["StudioProjectsListProjectsSharedWithMe",e];j_.rootKey="StudioProjectsListProjectsSharedWithMe";j_.fetcher=(e,t)=>oe(y4,e,t);const _4=`
    query StudioProjectsGetTeam($input: StudioProjectsGetTeamInput!) {
  studioProjectsGetTeam(input: $input) {
    team {
      id
      name
      logoUrl
      avatarInitials
      avatarColour
    }
    errors {
      code
      message
    }
  }
}
    `,B_=(e,t)=>Ot(["StudioProjectsGetTeam",e],oe(_4,e),t);B_.document=_4;B_.getKey=e=>["StudioProjectsGetTeam",e];B_.rootKey="StudioProjectsGetTeam";B_.fetcher=(e,t)=>oe(_4,e,t);const X$=`
    mutation StudioProjectsFolderRename($input: StudioProjectsFolderRenameInput!) {
  studioProjectsFolderRename(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,q$=e=>Ke(["StudioProjectsFolderRename"],t=>oe(X$,t)(),e);q$.getKey=()=>["StudioProjectsFolderRename"];q$.fetcher=(e,t)=>oe(X$,e,t);const K$=`
    mutation StudioProjectsFolderDelete($input: StudioProjectFolderDeleteInput!) {
  studioProjectsFolderDelete(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,Q$=e=>Ke(["StudioProjectsFolderDelete"],t=>oe(K$,t)(),e);Q$.getKey=()=>["StudioProjectsFolderDelete"];Q$.fetcher=(e,t)=>oe(K$,e,t);const J$=`
    mutation studioProjectsFolderRestore($input: StudioProjectsFolderRestoreInput!) {
  studioProjectsFolderRestore(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,Z$=e=>Ke(["studioProjectsFolderRestore"],t=>oe(J$,t)(),e);Z$.getKey=()=>["studioProjectsFolderRestore"];Z$.fetcher=(e,t)=>oe(J$,e,t);const eG=`
    mutation StudioProjectsEmptyTrash($input: StudioProjectEmptyTrashInput!) {
  studioProjectsEmptyTrash(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,tG=e=>Ke(["StudioProjectsEmptyTrash"],t=>oe(eG,t)(),e);tG.getKey=()=>["StudioProjectsEmptyTrash"];tG.fetcher=(e,t)=>oe(eG,e,t);const nG=`
    mutation StudioProjectsAddMember($input: StudioProjectsAddMemberInput!) {
  studioProjectsAddMember(input: $input) {
    success
    status
    errors {
      code
      message
    }
  }
}
    `,rG=e=>Ke(["StudioProjectsAddMember"],t=>oe(nG,t)(),e);rG.getKey=()=>["StudioProjectsAddMember"];rG.fetcher=(e,t)=>oe(nG,e,t);const iG=`
    mutation StudioProjectsConfirmInvite($input: StudioProjectsConfirmInviteInput!) {
  studioProjectsConfirmInvite(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,sG=e=>Ke(["StudioProjectsConfirmInvite"],t=>oe(iG,t)(),e);sG.getKey=()=>["StudioProjectsConfirmInvite"];sG.fetcher=(e,t)=>oe(iG,e,t);function D4e(){return new URLSearchParams(window.location.search).get("fabricate")||window.location.pathname.startsWith("/studio/fabricate")?gi.Fabric:gi.Polotno}const eC=D4e(),qS=eC===gi.Fabric,mi={STUDIO:{ROOT:"/studio",HOME:"/studio",DEFAULT_LOGGED_OUT:qS?"/studio/fabricate":"/studio/create",UNAUTHORIZED_TO_VIEW_PROJECT:"/studio?unauthorized=true",NEW_PROJECT:qS?"/studio/fabricate":"/studio/create",SHARED_PROJECTS:{ROOT:"/studio/shared-projects",TEAMS:"/studio/shared-projects/teams",USERS:"/studio/shared-projects/users"},PROJECT:e=>qS?e?`/studio/fabricate/${e}`:"/studio/fabricate/:id":e?`/studio/create/${e}`:"/studio/create/:id",PROJECTS:"/studio/projects",FOLDERS:{FOLDER:e=>e?`/studio/folders/${e}`:"/studio/folders/:folderId"},TEAMS:{TEAM:{ROOT:e=>e?`/studio/teams/${e}`:"/studio/teams/:teamId",PROJECTS:e=>e?`/studio/teams/${e}/projects`:"/studio/teams/:teamId/projects",FOLDERS:{FOLDER:(e,t)=>e&&t?`/studio/teams/${e}/folders/${t}`:"/studio/teams/:teamId/folders/:folderId"},USERS:e=>e?`/studio/teams/${e}/users`:"/studio/teams/:teamId/users",TEMPLATES:e=>e?`/studio/teams/${e}/templates`:"/studio/teams/:teamId/templates",BRAND_HUB:e=>e?`/studio/teams/${e}/brand-hub`:"/studio/teams/:teamId/brand-hub",TRASH:e=>e?`/studio/teams/${e}/trash`:"/studio/teams/:teamId/trash"}},TRASH:"/studio/trash"},DESIGN_REVIEWER:{ROOT:"/design-reviewer",DESIGN:e=>e?`/design-reviewer/${e}`:"/design-reviewer/:id"},VECTORIZER:{ROOT:"/vectorizer",VECTORIZED_IMAGE:e=>e?`/vectorizer/${e}`:"/vectorizer/:id"},FLOW:{ROOT:"/flow",FLOWS:e=>e?`/flow/${e}`:"/flow/:id",ALLFLOWS:"/flow/all"},BOARDS:{ROOT:"/boards"},HEALTH_CHECK:{ROOT:"/healthcheck"},TRANSFER:{ROOT:"/transfer"}},ty="cf_pslc",b4="cf_pslc_data";function KR(){const e=localStorage.getItem(b4);return e?(oG(),e):null}function oG(){localStorage.removeItem(b4)}function QR(e){const t=JSON.stringify(e);localStorage.setItem(b4,t)}function JR(){const e=new URL(window.location.href);e.searchParams.append(ty,"true"),window.history.pushState({},"",e.href)}function M4e(){const e=new URL(window.location.href);e.searchParams.delete(ty),window.history.pushState({},"",e.href)}function L4e(e={}){const[t,n]=T.useState(!!(e!=null&&e.open)),r=Pn(),i=aT(),s=Fi({onSuccess:l=>{var o,c;const a=(c=(o=l==null?void 0:l.studioProjectsCreateProject)==null?void 0:o.project)==null?void 0:c.id;l&&!l.studioProjectsCreateProject.errors&&a&&i(mi.STUDIO.PROJECT(a))}});return{getRootProps(){return{open:t,defaultOpen:t,onOpenChange(l){l||(oG(),M4e()),n(l)}}},getTriggerProps(){return{onClick:async function(){if(eC===gi.Polotno){r&&(QR(YR(r)),JR());return}else{const a=await Ve(()=>Promise.resolve().then(()=>JV),void 0);a!=null&&a.toJson&&(QR(a.toJson()),JR())}}}},getAuthDialogProps(){return{onSuccess:function(){if(r){const a=JSON.stringify(YR(r));s.mutate({input:{content:a,editor:eC}})}}}},getBodyProps(){return{dismissable:!1,zIndex:50}}}}function F4e(...e){return(...t)=>{e.forEach(n=>typeof n=="function"&&n(...t))}}const aG=hc(()=>Ve(()=>import("./index-cea10d42.js"),["assets/index-cea10d42.js","assets/index-cc47a534.js","assets/social-22364841.js"]).then(e=>e.AuthDialog)),N4e=T.forwardRef(function(t,n){return E.jsxs(En,{ref:n,...t,className:Fe("flex cursor-pointer items-center self-center",t.className),onMouseOver:F4e(t.onMouseOver,aG.preload),children:[E.jsx(jge,{className:"mr-2"}),"Log in"]})});function j4e({children:e}){const t=L4e();return E.jsxs(Rp,{...t.getRootProps(),children:[E.jsx(g1,{asChild:!0,...t.getTriggerProps(),children:e||E.jsx(N4e,{})}),E.jsx(T.Suspense,{fallback:null,children:E.jsx(m1,{forceMount:!0,children:E.jsx(Dp,{...t.getBodyProps(),className:"p-[16px]",children:E.jsx(aG.component,{...t.getAuthDialogProps()})})})})]})}function B4e({list:e,deleteItem:t,refetch:n,update:r,generate:i,id:s}){const{selectedTab:l}=pr(),a=Pn(),o=h1(),{deleteSessionArtItem:c,deleteSessionCrystallineItem:h}=Kp(),[u,f]=T.useState({}),d=(v,_)=>{const y=v.currentTarget;f(b=>({...b,[_]:{width:y.naturalWidth,height:y.naturalHeight}}))},p=v=>async()=>{r({status:"generate",prompt:{value:v,dirty:!1}}),await i(v).catch(()=>{s&&t(s)}),n(),r({status:"prompt",crystallineId:""})},m=(v,_)=>async()=>{var y;(y=o.data)!=null&&y.id?(await t(_),n()):$G[l].id==="crystalline"?h(_):c(_),v()},g=v=>()=>{h4(v,a)};return E.jsxs(E.Fragment,{children:[E.jsx("h3",{className:"mb-3",children:"Generated images"}),e.map(({id:v,prompt:_,images:y})=>E.jsx(T.Fragment,{children:y.some(({state:b})=>b==="generated")?E.jsxs("div",{className:"mb-4 flex flex-col items-center",children:[E.jsxs("div",{className:"rounded-2 group mb-2 w-full border border-gray-400 bg-gray-700 px-3 py-3 text-sm text-gray-200",children:[_,E.jsxs("div",{className:"absolute right-2 -mt-6 hidden group-hover:flex",children:[E.jsx(rp,{value:"Regenerate images with this prompt",children:E.jsx(_r,{className:"ml-2",variant:"primary",onClick:p(_),children:E.jsx(NE,{})})}),E.jsxs(on.Root,{zIndex:100,children:[E.jsx(on.Trigger,{children:E.jsx(_r,{className:"ml-2",variant:"primary","aria-label":"delete",children:E.jsx(KN,{})})}),E.jsx(on.Content,{title:"Delete this prompt",icon:E.jsx(Qd,{className:"h-6 w-6"}),isTextOnly:!0,children:"Are you sure you want to delete this prompt and its generated art? This action is permanent and cannot be undone."}),E.jsx(on.CloseX,{}),E.jsx(on.Actions,{children:({handleClose:b})=>E.jsxs("section",{className:"flex w-full items-center justify-between",children:[E.jsx(En,{onClick:b,variant:"outline",children:"Cancel"}),E.jsx(En,{onClick:m(b,v),children:"Remove"})]})})]})]})]}),E.jsx("div",{className:"grid w-full grid-cols-2 gap-2",children:y.map(({thumbnailUrl:b,originalUrl:S,id:x,state:C})=>{const w=b?u[b]:{},k=w?`aspect-[${w.width}/${w.height}]`:"aspect-square";return E.jsx(T.Fragment,{children:b&&S&&C==="generated"?E.jsx("button",{type:"button",className:"rounded-2",onClick:g(S),children:E.jsx("img",{onLoad:I=>d(I,b),src:b,className:Fe("rounded-2 cursor-pointer object-cover",k)})},x):null},x)})},v)]},v):null},v))]})}function U4e(){var t;const e=h1();return(t=e==null?void 0:e.data)!=null&&t.id?E.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:E.jsxs("p",{className:"mb-4 text-center text-gray-400",children:["You have not generated any images yet.",E.jsx("br",{}),'Edit the prompt and click "Create Image" to get started.']})}):E.jsxs("div",{className:"flex h-full flex-col items-center justify-center",children:[E.jsx("p",{className:"text-center text-gray-400",children:"You have not generated any images yet."}),E.jsx("p",{className:"mb-4 text-center text-gray-400",children:'Edit the prompt and click "Create Image" to get started.'}),E.jsx("br",{}),E.jsx("p",{className:"text-center text-gray-400",children:"In order to preserve your generated assets for future use, log in to Creative Fabrica Studio."}),E.jsx("br",{}),E.jsx(j4e,{})]})}const ny={Root:B4e,EmptyState:U4e};function $4e(){const{crystallineState:{previousPrompt:e,prompt:t,status:n,crystallineId:r},updateCrystallineState:i}=pr(),{generateCrystalline:s}=Xj(),{refetch:l}=S2(),{deleteCrystalline:a}=Kj(),o=d=>{i({prompt:{value:d.target.value,dirty:!0},previousPrompt:""})},c=()=>{t.dirty?i({previousPrompt:t.value,prompt:{...t,value:sy()}}):i({prompt:{value:sy(),dirty:t.dirty}})},h=()=>{i({previousPrompt:"",prompt:{value:e,dirty:t.dirty}})},u=async()=>{i({status:"generate"});try{await s(t.value)}catch{r&&a(r)}i({status:"prompt",crystallineId:""}),l()},f=()=>{r&&a(r),i({status:"prompt",crystallineId:""})};return E.jsx(E.Fragment,{children:n==="prompt"?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"pb-2 tracking-[-1px] text-gray-400",children:"Describe what you want, and let our AI do the rest"}),E.jsxs("div",{className:"pb-2",children:[E.jsx(qj,{value:t.value,onChange:o}),E.jsxs("div",{className:Fe("width-full rounded-b-2 mb-4 flex rounded-t-none bg-gray-700 p-2",e&&"gap-2"),children:[E.jsx(En,{onClick:u,disabled:!t.value,className:Fe("z-10 flex flex-grow justify-center",!t.value&&"text-grey-100 cursor-not-allowed disabled:bg-gray-600 hover:disabled:bg-gray-600"),children:"Create Image"}),E.jsx(rp,{value:"Randomize prompt",children:E.jsx(En,{onClick:c,className:"rounded-2 -ml-5 flex items-center justify-center overflow-hidden bg-gray-800 text-center text-gray-50 hover:bg-gray-500 hover:text-gray-100",children:E.jsx(NE,{className:"ml-5 h-6 w-6"})})}),E.jsx(rp,{value:"Back to your prompt",children:E.jsx(Qs.button,{className:"rounded-2 flex items-center justify-center overflow-hidden bg-gray-800 text-center text-gray-50 hover:bg-gray-500 hover:text-gray-100",disabled:!e,initial:{width:0},animate:{width:e?56:0,transition:{duration:.1,...ZN}},onClick:h,children:E.jsx(jE,{className:"h-6 w-6 shrink-0"})})})]})]})]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"pb-2 tracking-[-1px] text-gray-400",children:"Generating images"}),E.jsxs("div",{className:"flex flex-grow flex-col justify-between",children:[E.jsx(kj,{prompt:t.value}),E.jsx(En,{variant:"fill",onClick:f,className:"mb-4 mt-2 flex justify-center",children:"Cancel"})]})]})})}function G4e(e,t){var f,d,p,m;const n=S2(),r=Kp(),i=h1(),s=n.isLoading,l=(f=i.data)!=null&&f.id?n.data:r.crystallineData,{deleteCrystalline:a}=Kj(),{refetch:o}=S2(),{updateCrystallineState:c,crystallineState:{crystallineId:h}}=pr(),{generateCrystalline:u}=Xj();return E.jsx("div",{ref:t,...e,className:Fe("flex flex-grow flex-col justify-between",e.className),children:E.jsxs("div",{children:[E.jsx($4e,{}),s?E.jsx("div",{className:"flex h-12 items-center justify-center pt-32",children:E.jsx(ej,{})}):E.jsx(E.Fragment,{children:(p=(d=l==null?void 0:l.sparkCrystallineList)==null?void 0:d.list)!=null&&p.some(({images:g})=>g.some(({state:v})=>v==="generated"))?E.jsx(ny.Root,{list:((m=l==null?void 0:l.sparkCrystallineList)==null?void 0:m.list)||[],deleteItem:a,generate:u,refetch:o,update:c,id:h}):E.jsx(ny.EmptyState,{})})]})})}const V4e=T.forwardRef(G4e);function ry(e,[t,n]){return Math.min(n,Math.max(t,e))}function lG(e){const t=e+"CollectionProvider",[n,r]=fc(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=d=>{const{scope:p,children:m}=d,g=Jt.useRef(null),v=Jt.useRef(new Map).current;return Jt.createElement(i,{scope:p,itemMap:v,collectionRef:g},m)},a=e+"CollectionSlot",o=Jt.forwardRef((d,p)=>{const{scope:m,children:g}=d,v=s(a,m),_=It(p,v.collectionRef);return Jt.createElement(Qi,{ref:_},g)}),c=e+"CollectionItemSlot",h="data-radix-collection-item",u=Jt.forwardRef((d,p)=>{const{scope:m,children:g,...v}=d,_=Jt.useRef(null),y=It(p,_),b=s(c,m);return Jt.useEffect(()=>(b.itemMap.set(_,{ref:_,...v}),()=>void b.itemMap.delete(_))),Jt.createElement(Qi,{[h]:"",ref:y},g)});function f(d){const p=s(e+"CollectionConsumer",d);return Jt.useCallback(()=>{const g=p.collectionRef.current;if(!g)return[];const v=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(p.itemMap.values()).sort((b,S)=>v.indexOf(b.ref.current)-v.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:l,Slot:o,ItemSlot:u},f,r]}const H4e=T.createContext(void 0);function cG(e){const t=T.useContext(H4e);return e||t||"ltr"}const uG="Popper",[hG,fG]=fc(uG),[z4e,dG]=hG(uG),W4e=e=>{const{__scopePopper:t,children:n}=e,[r,i]=T.useState(null);return T.createElement(z4e,{scope:t,anchor:r,onAnchorChange:i},n)},Y4e="PopperAnchor",X4e=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=dG(Y4e,n),l=T.useRef(null),a=It(t,l);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:T.createElement(Nt.div,Be({},i,{ref:a}))}),pG="PopperContent",[q4e,K4e]=hG(pG),Q4e=T.forwardRef((e,t)=>{var n,r,i,s,l,a,o,c;const{__scopePopper:h,side:u="bottom",sideOffset:f=0,align:d="center",alignOffset:p=0,arrowPadding:m=0,collisionBoundary:g=[],collisionPadding:v=0,sticky:_="partial",hideWhenDetached:y=!1,avoidCollisions:b=!0,onPlaced:S,...x}=e,C=dG(pG,h),[w,k]=T.useState(null),I=It(t,J=>k(J)),[R,j]=T.useState(null),G=GE(R),B=(n=G==null?void 0:G.width)!==null&&n!==void 0?n:0,$=(r=G==null?void 0:G.height)!==null&&r!==void 0?r:0,V=u+(d!=="center"?"-"+d:""),W=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},M=Array.isArray(g)?g:[g],P=M.length>0,O={padding:W,boundary:M.filter(tIe),altBoundary:P},{refs:A,floatingStyles:D,placement:X,isPositioned:N,middlewareData:F}=bj({strategy:"fixed",placement:V,whileElementsMounted:vj,elements:{reference:C.anchor},middleware:[oj({mainAxis:f+$,alignmentAxis:p}),b&&lj({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?cj():void 0,...O}),b&&ij({...O}),uj({...O,apply:({elements:J,rects:ne,availableWidth:ie,availableHeight:re})=>{const{width:he,height:fe}=ne.reference,be=J.floating.style;be.setProperty("--radix-popper-available-width",`${ie}px`),be.setProperty("--radix-popper-available-height",`${re}px`),be.setProperty("--radix-popper-anchor-width",`${he}px`),be.setProperty("--radix-popper-anchor-height",`${fe}px`)}}),R&&yj({element:R,padding:m}),nIe({arrowWidth:B,arrowHeight:$}),y&&sj({strategy:"referenceHidden"})]}),[z,L]=gG(X),H=Oi(S);fr(()=>{N&&(H==null||H())},[N,H]);const K=(i=F.arrow)===null||i===void 0?void 0:i.x,Z=(s=F.arrow)===null||s===void 0?void 0:s.y,ee=((l=F.arrow)===null||l===void 0?void 0:l.centerOffset)!==0,[ae,te]=T.useState();return fr(()=>{w&&te(window.getComputedStyle(w).zIndex)},[w]),T.createElement("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:N?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(a=F.transformOrigin)===null||a===void 0?void 0:a.x,(o=F.transformOrigin)===null||o===void 0?void 0:o.y].join(" ")},dir:e.dir},T.createElement(q4e,{scope:h,placedSide:z,onArrowChange:j,arrowX:K,arrowY:Z,shouldHideArrow:ee},T.createElement(Nt.div,Be({"data-side":z,"data-align":L},x,{ref:I,style:{...x.style,animation:N?void 0:"none",opacity:(c=F.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),J4e="PopperArrow",Z4e={top:"bottom",right:"left",bottom:"top",left:"right"},eIe=T.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=K4e(J4e,r),l=Z4e[s.placedSide];return T.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},T.createElement(Sj,Be({},i,{ref:n,style:{...i.style,display:"block"}})))});function tIe(e){return e!==null}const nIe=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,s,l;const{placement:a,rects:o,middlewareData:c}=t,u=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=u?0:e.arrowWidth,d=u?0:e.arrowHeight,[p,m]=gG(a),g={start:"0%",center:"50%",end:"100%"}[m],v=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,_=((s=(l=c.arrow)===null||l===void 0?void 0:l.y)!==null&&s!==void 0?s:0)+d/2;let y="",b="";return p==="bottom"?(y=u?g:`${v}px`,b=`${-d}px`):p==="top"?(y=u?g:`${v}px`,b=`${o.floating.height+d}px`):p==="right"?(y=`${-d}px`,b=u?g:`${_}px`):p==="left"&&(y=`${o.floating.width+d}px`,b=u?g:`${_}px`),{data:{x:y,y:b}}}});function gG(e){const[t,n="center"]=e.split("-");return[t,n]}const rIe=W4e,iIe=X4e,sIe=Q4e,oIe=eIe;function mG(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const aIe=[" ","Enter","ArrowUp","ArrowDown"],lIe=[" ","Enter"],U_="Select",[$_,G_,cIe]=lG(U_),[ef,A6e]=fc(U_,[cIe,fG]),V_=fG(),[uIe,el]=ef(U_),[hIe,fIe]=ef(U_),dIe=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:l,defaultValue:a,onValueChange:o,dir:c,name:h,autoComplete:u,disabled:f,required:d}=e,p=V_(t),[m,g]=T.useState(null),[v,_]=T.useState(null),[y,b]=T.useState(!1),S=cG(c),[x=!1,C]=Wd({prop:r,defaultProp:i,onChange:s}),[w,k]=Wd({prop:l,defaultProp:a,onChange:o}),I=T.useRef(null),R=m?!!m.closest("form"):!0,[j,G]=T.useState(new Set),B=Array.from(j).map($=>$.props.value).join(";");return T.createElement(rIe,p,T.createElement(uIe,{required:d,scope:t,trigger:m,onTriggerChange:g,valueNode:v,onValueNodeChange:_,valueNodeHasChildren:y,onValueNodeHasChildrenChange:b,contentId:Fu(),value:w,onValueChange:k,open:x,onOpenChange:C,dir:S,triggerPointerDownPosRef:I,disabled:f},T.createElement($_.Provider,{scope:t},T.createElement(hIe,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback($=>{G(V=>new Set(V).add($))},[]),onNativeOptionRemove:T.useCallback($=>{G(V=>{const W=new Set(V);return W.delete($),W})},[])},n)),R?T.createElement(bG,{key:B,"aria-hidden":!0,required:d,tabIndex:-1,name:h,autoComplete:u,value:w,onChange:$=>k($.target.value),disabled:f},w===void 0?T.createElement("option",{value:""}):null,Array.from(j)):null))},pIe="SelectTrigger",gIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,s=V_(n),l=el(pIe,n),a=l.disabled||r,o=It(t,l.onTriggerChange),c=G_(n),[h,u,f]=SG(p=>{const m=c().filter(_=>!_.disabled),g=m.find(_=>_.value===l.value),v=xG(m,p,g);v!==void 0&&l.onValueChange(v.value)}),d=()=>{a||(l.onOpenChange(!0),f())};return T.createElement(iIe,Be({asChild:!0},s),T.createElement(Nt.button,Be({type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":l.value===void 0?"":void 0},i,{ref:o,onClick:ht(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:ht(i.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(d(),l.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:ht(i.onKeyDown,p=>{const m=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&u(p.key),!(m&&p.key===" ")&&aIe.includes(p.key)&&(d(),p.preventDefault())})})))}),mIe="SelectValue",vIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:l,...a}=e,o=el(mIe,n),{onValueNodeHasChildrenChange:c}=o,h=s!==void 0,u=It(t,o.onValueNodeChange);return fr(()=>{c(h)},[c,h]),T.createElement(Nt.span,Be({},a,{ref:u,style:{pointerEvents:"none"}}),o.value===void 0&&l!==void 0?l:s)}),yIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return T.createElement(Nt.span,Be({"aria-hidden":!0},i,{ref:t}),r||"")}),_Ie=e=>T.createElement(k7,Be({asChild:!0},e)),Th="SelectContent",bIe=T.forwardRef((e,t)=>{const n=el(Th,e.__scopeSelect),[r,i]=T.useState();if(fr(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?ac.createPortal(T.createElement(vG,{scope:e.__scopeSelect},T.createElement($_.Slot,{scope:e.__scopeSelect},T.createElement("div",null,e.children))),s):null}return T.createElement(SIe,Be({},e,{ref:t}))}),Ws=10,[vG,tl]=ef(Th),SIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:l,side:a,sideOffset:o,align:c,alignOffset:h,arrowPadding:u,collisionBoundary:f,collisionPadding:d,sticky:p,hideWhenDetached:m,avoidCollisions:g,...v}=e,_=el(Th,n),[y,b]=T.useState(null),[S,x]=T.useState(null),C=It(t,L=>b(L)),[w,k]=T.useState(null),[I,R]=T.useState(null),j=G_(n),[G,B]=T.useState(!1),$=T.useRef(!1);T.useEffect(()=>{if(y)return $7(y)},[y]),A7();const V=T.useCallback(L=>{const[H,...K]=j().map(ae=>ae.ref.current),[Z]=K.slice(-1),ee=document.activeElement;for(const ae of L)if(ae===ee||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===H&&S&&(S.scrollTop=0),ae===Z&&S&&(S.scrollTop=S.scrollHeight),ae==null||ae.focus(),document.activeElement!==ee))return},[j,S]),W=T.useCallback(()=>V([w,y]),[V,w,y]);T.useEffect(()=>{G&&W()},[G,W]);const{onOpenChange:M,triggerPointerDownPosRef:P}=_;T.useEffect(()=>{if(y){let L={x:0,y:0};const H=Z=>{var ee,ae,te,J;L={x:Math.abs(Math.round(Z.pageX)-((ee=(ae=P.current)===null||ae===void 0?void 0:ae.x)!==null&&ee!==void 0?ee:0)),y:Math.abs(Math.round(Z.pageY)-((te=(J=P.current)===null||J===void 0?void 0:J.y)!==null&&te!==void 0?te:0))}},K=Z=>{L.x<=10&&L.y<=10?Z.preventDefault():y.contains(Z.target)||M(!1),document.removeEventListener("pointermove",H),P.current=null};return P.current!==null&&(document.addEventListener("pointermove",H),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",K,{capture:!0})}}},[y,M,P]),T.useEffect(()=>{const L=()=>M(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[M]);const[O,A]=SG(L=>{const H=j().filter(ee=>!ee.disabled),K=H.find(ee=>ee.ref.current===document.activeElement),Z=xG(H,L,K);Z&&setTimeout(()=>Z.ref.current.focus())}),D=T.useCallback((L,H,K)=>{const Z=!$.current&&!K;(_.value!==void 0&&_.value===H||Z)&&(k(L),Z&&($.current=!0))},[_.value]),X=T.useCallback(()=>y==null?void 0:y.focus(),[y]),N=T.useCallback((L,H,K)=>{const Z=!$.current&&!K;(_.value!==void 0&&_.value===H||Z)&&R(L)},[_.value]),F=r==="popper"?ZR:xIe,z=F===ZR?{side:a,sideOffset:o,align:c,alignOffset:h,arrowPadding:u,collisionBoundary:f,collisionPadding:d,sticky:p,hideWhenDetached:m,avoidCollisions:g}:{};return T.createElement(vG,{scope:n,content:y,viewport:S,onViewportChange:x,itemRefCallback:D,selectedItem:w,onItemLeave:X,itemTextRefCallback:N,focusSelectedItem:W,selectedItemText:I,position:r,isPositioned:G,searchRef:O},T.createElement(B7,{as:Qi,allowPinchZoom:!0},T.createElement(I7,{asChild:!0,trapped:_.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:ht(i,L=>{var H;(H=_.trigger)===null||H===void 0||H.focus({preventScroll:!0}),L.preventDefault()})},T.createElement(E7,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>_.onOpenChange(!1)},T.createElement(F,Be({role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:L=>L.preventDefault()},v,z,{onPlaced:()=>B(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ht(v.onKeyDown,L=>{const H=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!H&&L.key.length===1&&A(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let Z=j().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);if(["ArrowUp","End"].includes(L.key)&&(Z=Z.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const ee=L.target,ae=Z.indexOf(ee);Z=Z.slice(ae+1)}setTimeout(()=>V(Z)),L.preventDefault()}})}))))))}),xIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,s=el(Th,n),l=tl(Th,n),[a,o]=T.useState(null),[c,h]=T.useState(null),u=It(t,C=>h(C)),f=G_(n),d=T.useRef(!1),p=T.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:v,focusSelectedItem:_}=l,y=T.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&g&&v){const C=s.trigger.getBoundingClientRect(),w=c.getBoundingClientRect(),k=s.valueNode.getBoundingClientRect(),I=v.getBoundingClientRect();if(s.dir!=="rtl"){const ee=I.left-w.left,ae=k.left-ee,te=C.left-ae,J=C.width+te,ne=Math.max(J,w.width),ie=window.innerWidth-Ws,re=ry(ae,[Ws,ie-ne]);a.style.minWidth=J+"px",a.style.left=re+"px"}else{const ee=w.right-I.right,ae=window.innerWidth-k.right-ee,te=window.innerWidth-C.right-ae,J=C.width+te,ne=Math.max(J,w.width),ie=window.innerWidth-Ws,re=ry(ae,[Ws,ie-ne]);a.style.minWidth=J+"px",a.style.right=re+"px"}const R=f(),j=window.innerHeight-Ws*2,G=m.scrollHeight,B=window.getComputedStyle(c),$=parseInt(B.borderTopWidth,10),V=parseInt(B.paddingTop,10),W=parseInt(B.borderBottomWidth,10),M=parseInt(B.paddingBottom,10),P=$+V+G+M+W,O=Math.min(g.offsetHeight*5,P),A=window.getComputedStyle(m),D=parseInt(A.paddingTop,10),X=parseInt(A.paddingBottom,10),N=C.top+C.height/2-Ws,F=j-N,z=g.offsetHeight/2,L=g.offsetTop+z,H=$+V+L,K=P-H;if(H<=N){const ee=g===R[R.length-1].ref.current;a.style.bottom="0px";const ae=c.clientHeight-m.offsetTop-m.offsetHeight,te=Math.max(F,z+(ee?X:0)+ae+W),J=H+te;a.style.height=J+"px"}else{const ee=g===R[0].ref.current;a.style.top="0px";const te=Math.max(N,$+m.offsetTop+(ee?D:0)+z)+K;a.style.height=te+"px",m.scrollTop=H-N+m.offsetTop}a.style.margin=`${Ws}px 0`,a.style.minHeight=O+"px",a.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>d.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,g,v,s.dir,r]);fr(()=>y(),[y]);const[b,S]=T.useState();fr(()=>{c&&S(window.getComputedStyle(c).zIndex)},[c]);const x=T.useCallback(C=>{C&&p.current===!0&&(y(),_==null||_(),p.current=!1)},[y,_]);return T.createElement(wIe,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:d,onScrollButtonChange:x},T.createElement("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b}},T.createElement(Nt.div,Be({},i,{ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),ZR=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Ws,...s}=e,l=V_(n);return T.createElement(sIe,Be({},l,s,{ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[wIe,S4]=ef(Th,{}),eD="SelectViewport",CIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=tl(eD,n),s=S4(eD,n),l=It(t,i.onViewportChange),a=T.useRef(0);return T.createElement(T.Fragment,null,T.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),T.createElement($_.Slot,{scope:n},T.createElement(Nt.div,Be({"data-radix-select-viewport":"",role:"presentation"},r,{ref:l,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:ht(r.onScroll,o=>{const c=o.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:u}=s;if(u!=null&&u.current&&h){const f=Math.abs(a.current-c.scrollTop);if(f>0){const d=window.innerHeight-Ws*2,p=parseFloat(h.style.minHeight),m=parseFloat(h.style.height),g=Math.max(p,m);if(g<d){const v=g+f,_=Math.min(d,v),y=v-_;h.style.height=_+"px",h.style.bottom==="0px"&&(c.scrollTop=y>0?y:0,h.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),TIe="SelectGroup";ef(TIe);const tC="SelectItem",[EIe,yG]=ef(tC),PIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...l}=e,a=el(tC,n),o=tl(tC,n),c=a.value===r,[h,u]=T.useState(s??""),[f,d]=T.useState(!1),p=It(t,v=>{var _;return(_=o.itemRefCallback)===null||_===void 0?void 0:_.call(o,v,r,i)}),m=Fu(),g=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};return T.createElement(EIe,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:T.useCallback(v=>{u(_=>{var y;return _||((y=v==null?void 0:v.textContent)!==null&&y!==void 0?y:"").trim()})},[])},T.createElement($_.ItemSlot,{scope:n,value:r,disabled:i,textValue:h},T.createElement(Nt.div,Be({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},l,{ref:p,onFocus:ht(l.onFocus,()=>d(!0)),onBlur:ht(l.onBlur,()=>d(!1)),onPointerUp:ht(l.onPointerUp,g),onPointerMove:ht(l.onPointerMove,v=>{if(i){var _;(_=o.onItemLeave)===null||_===void 0||_.call(o)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ht(l.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var _;(_=o.onItemLeave)===null||_===void 0||_.call(o)}}),onKeyDown:ht(l.onKeyDown,v=>{var _;((_=o.searchRef)===null||_===void 0?void 0:_.current)!==""&&v.key===" "||(lIe.includes(v.key)&&g(),v.key===" "&&v.preventDefault())})}))))}),Mm="SelectItemText",IIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...s}=e,l=el(Mm,n),a=tl(Mm,n),o=yG(Mm,n),c=fIe(Mm,n),[h,u]=T.useState(null),f=It(t,v=>u(v),o.onItemTextChange,v=>{var _;return(_=a.itemTextRefCallback)===null||_===void 0?void 0:_.call(a,v,o.value,o.disabled)}),d=h==null?void 0:h.textContent,p=T.useMemo(()=>T.createElement("option",{key:o.value,value:o.value,disabled:o.disabled},d),[o.disabled,o.value,d]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=c;return fr(()=>(m(p),()=>g(p)),[m,g,p]),T.createElement(T.Fragment,null,T.createElement(Nt.span,Be({id:o.textId},s,{ref:f})),o.isSelected&&l.valueNode&&!l.valueNodeHasChildren?ac.createPortal(s.children,l.valueNode):null)}),OIe="SelectItemIndicator",kIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return yG(OIe,n).isSelected?T.createElement(Nt.span,Be({"aria-hidden":!0},r,{ref:t})):null}),tD="SelectScrollUpButton",AIe=T.forwardRef((e,t)=>{const n=tl(tD,e.__scopeSelect),r=S4(tD,e.__scopeSelect),[i,s]=T.useState(!1),l=It(t,r.onScrollButtonChange);return fr(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=a.scrollTop>0;s(c)};const a=n.viewport;return o(),a.addEventListener("scroll",o),()=>a.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?T.createElement(_G,Be({},e,{ref:l,onAutoScroll:()=>{const{viewport:a,selectedItem:o}=n;a&&o&&(a.scrollTop=a.scrollTop-o.offsetHeight)}})):null}),nD="SelectScrollDownButton",RIe=T.forwardRef((e,t)=>{const n=tl(nD,e.__scopeSelect),r=S4(nD,e.__scopeSelect),[i,s]=T.useState(!1),l=It(t,r.onScrollButtonChange);return fr(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=a.scrollHeight-a.clientHeight,h=Math.ceil(a.scrollTop)<c;s(h)};const a=n.viewport;return o(),a.addEventListener("scroll",o),()=>a.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?T.createElement(_G,Be({},e,{ref:l,onAutoScroll:()=>{const{viewport:a,selectedItem:o}=n;a&&o&&(a.scrollTop=a.scrollTop+o.offsetHeight)}})):null}),_G=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,s=tl("SelectScrollButton",n),l=T.useRef(null),a=G_(n),o=T.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return T.useEffect(()=>()=>o(),[o]),fr(()=>{var c;const h=a().find(u=>u.ref.current===document.activeElement);h==null||(c=h.ref.current)===null||c===void 0||c.scrollIntoView({block:"nearest"})},[a]),T.createElement(Nt.div,Be({"aria-hidden":!0},i,{ref:t,style:{flexShrink:0,...i.style},onPointerDown:ht(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:ht(i.onPointerMove,()=>{var c;(c=s.onItemLeave)===null||c===void 0||c.call(s),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:ht(i.onPointerLeave,()=>{o()})}))}),rD="SelectArrow",DIe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=V_(n),s=el(rD,n),l=tl(rD,n);return s.open&&l.position==="popper"?T.createElement(oIe,Be({},i,r,{ref:t})):null}),bG=T.forwardRef((e,t)=>{const{value:n,...r}=e,i=T.useRef(null),s=It(t,i),l=mG(n);return T.useEffect(()=>{const a=i.current,o=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(o,"value").set;if(l!==n&&h){const u=new Event("change",{bubbles:!0});h.call(a,n),a.dispatchEvent(u)}},[l,n]),T.createElement(Ij,{asChild:!0},T.createElement("select",Be({},r,{ref:s,defaultValue:n})))});bG.displayName="BubbleSelect";function SG(e){const t=Oi(e),n=T.useRef(""),r=T.useRef(0),i=T.useCallback(l=>{const a=n.current+l;t(a),function o(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>o(""),1e3))}(a)},[t]),s=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function xG(e,t,n){const i=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let l=MIe(e,Math.max(s,0));i.length===1&&(l=l.filter(c=>c!==n));const o=l.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return o!==n?o:void 0}function MIe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const LIe=dIe,FIe=gIe,NIe=vIe,R6e=yIe,wG=_Ie,jIe=bIe,CG=CIe,BIe=PIe,UIe=IIe,$Ie=kIe,GIe=AIe,VIe=RIe,HIe=DIe;function zIe({children:e,...t}){return E.jsx(LIe,{...t,children:e})}function WIe({children:e,...t}){return E.jsx(FIe,{...t,className:Fe("rounded-2 flex flex-row items-center gap-1 border-[1px] border-gray-700 bg-gray-800 pb-[5px] pl-3 pr-[5px] pt-[5px] text-gray-50 disabled:cursor-not-allowed disabled:opacity-50",t.className),children:e})}function YIe({children:e,...t}){return E.jsx(wG,{children:E.jsxs(jIe,{...t,className:Fe("bg-gray-1000 rounded-4 cursor-pointer p-[5px] text-gray-50",t.className),children:[E.jsx(GIe,{className:"flex w-full flex-row items-center justify-center p-[5px]",children:E.jsx(Lge,{})}),E.jsx(CG,{children:e}),E.jsx(VIe,{className:"flex w-full flex-row items-center justify-center p-[5px]",children:E.jsx(LE,{})}),E.jsx(HIe,{})]})})}const XIe=T.forwardRef(function(t,n){return E.jsxs(BIe,{className:Fe("rounded-2 flex w-full flex-row items-center justify-between p-2 hover:bg-gray-800",t.className),...t,ref:n,children:[E.jsx(UIe,{children:t.children}),E.jsx($Ie,{children:E.jsx(RN,{})})]})});function qIe({selected:e,setSelected:t}){const n=r=>()=>{if(r)e.includes(r)?t(e.filter(i=>i!==r),r,!1):t([...e,r],r,!0);else if(e.length<Nm.length){const i=Nm.map(({key:l})=>l).filter(l=>!e.includes(l)),s=i[Math.floor(Math.random()*i.length)];t([...e,s],s,!0)}};return E.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[E.jsx("div",{className:"text-gray-50",children:"Choose style"}),E.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("div",{className:Fe("rounded-2 flex h-[94px] w-[94px] cursor-pointer items-center justify-center bg-gray-800 hover:ring hover:ring-gray-600",e.length>=Nm.length&&"cursor-not-allowed text-gray-700 hover:ring-0"),onClick:n(),children:E.jsx(_ve,{className:"h-8 w-8"})}),E.jsx("div",{className:"text-center text-sm text-gray-50",children:"Random"})]}),Nm.map(({key:r,name:i,image:s})=>E.jsxs("div",{className:"flex flex-col gap-2",onClick:n(r),children:[E.jsx("img",{src:s,alt:i,className:Fe("rounded-2 cursor-pointer hover:ring hover:ring-gray-600",e.includes(r)&&"ring ring-violet-500 hover:ring-violet-500")}),E.jsx("div",{className:"text-center text-sm text-gray-50",children:i})]},r))]})]})}function nC(){return Bp({input:{currentPage:1,itemsPerPage:30}})}function TG(){const{mutateAsync:e,...t}=qE(),{updateSessionArtData:n}=Kp(),{updateArtState:r}=pr();async function i(s,l,a=_i.Square){return new Promise((o,c)=>{async function h(){var m,g;const u=await e({input:{prompt:`${s}${l?`, ${l}`:""}`,aspectRatio:a}}),{errors:f}=(u==null?void 0:u.sparkArtGenerate)??{};f!=null&&f.length&&c(f);const d=(g=(m=u==null?void 0:u.sparkArtGenerate)==null?void 0:m.art)==null?void 0:g.id;r({artId:d,status:"generate"});function p(v){jp.fetcher({input:{id:v}})().then(({sparkArt:_})=>{var S,x;if(((S=_==null?void 0:_.art)==null?void 0:S.images.some(({state:C})=>C==="failed"))||!(_!=null&&_.art)){c("Something went wrong. Please try again.");return}((x=_.art)==null?void 0:x.images.every(({originalUrl:C})=>C!==""))?_.art&&(n(_.art),o(_.art.images)):setTimeout(()=>{p(v)},2e3)})}d&&p(d)}h()})}return{generateArt:i,rest:t}}function EG(){const{mutateAsync:e,...t}=JE();async function n(r){return new Promise((i,s)=>{async function l(){const a=await e({input:{id:r}}),{errors:o}=(a==null?void 0:a.sparkArtDelete)??{};o!=null&&o.length&&s(o),i()}l()})}return{deleteArt:n,rest:t}}function KIe({selectedRatio:e,setSelectedRatio:t,selectedAspectRatioStyles:n}){const{artState:{previousPrompt:r,prompt:i,status:s,artId:l,style:a},updateArtState:o}=pr(),{generateArt:c}=TG(),{refetch:h}=nC(),{deleteArt:u}=EG(),f=y=>{let b=a;a.forEach(S=>{const x=a.includes(S),C=y.target.value.includes(S);x&&!C&&(b=b.filter(w=>w!==S)),!x&&C&&(b=[...b,S])}),o({prompt:{value:y.target.value,dirty:!0},previousPrompt:"",style:b})},d=()=>{i.dirty?o({previousPrompt:i.value,prompt:{...i,value:sy()}}):o({prompt:{value:sy(),dirty:i.dirty}})},p=()=>{o({previousPrompt:"",prompt:{value:r,dirty:i.dirty}})},m=async()=>{o({status:"generate"});try{await c(i.value,a.join(", "),e.id)}catch{l&&u(l)}o({status:"prompt",artId:""}),h()},g=()=>{l&&u(l),o({status:"prompt",artId:""})},v=(y,b,S)=>{o({style:y});const x=S?`${i.value}, ${b}`:i.value.replace(RegExp(`, ${b}`,"g"),"").trim();o({prompt:{value:x,dirty:!0},previousPrompt:i.value,style:y})},_=y=>{t(w0.find(b=>b.id===y)||w0[0])};return E.jsx(E.Fragment,{children:s==="prompt"?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"pb-2 tracking-[-1px] text-gray-400",children:"What would you like to create with AI Studio"}),E.jsxs("div",{className:"pb-2",children:[E.jsx(qj,{value:i.value,onChange:f}),E.jsx("div",{className:Fe("width-full flex bg-gray-700 p-2",r&&"gap-2"),children:E.jsxs(zIe,{value:e.id,onValueChange:_,children:[E.jsx(WIe,{"aria-label":"Unit",className:"flex h-[50px] w-full cursor-pointer flex-row items-center justify-between gap-2 border-none bg-gray-800 px-4 py-2 outline-none",asChild:!0,children:E.jsxs("div",{children:[E.jsxs("span",{className:"flex h-[34px] items-center gap-1",children:[E.jsx(e.Icon,{className:"w-auto pt-1",height:24}),E.jsx("div",{className:"flex max-w-[74px] flex-grow flex-col text-left",children:E.jsx(NIe,{})})]}),E.jsx(LE,{className:"shrink-0"})]})}),E.jsx(wG,{children:E.jsx(YIe,{className:"z-[100]",children:E.jsx(CG,{className:"z-[100] p-[5px]",children:w0.map(({id:y,name:b,Icon:S})=>E.jsx(XIe,{value:y,children:E.jsxs("div",{className:"flex flex-grow flex-row gap-2",children:[E.jsx(S,{height:16}),E.jsx("div",{className:"text-nowrap",children:b})]})},y))})})})]})}),E.jsxs("div",{className:Fe("width-full rounded-b-2 mb-4 flex rounded-t-none bg-gray-700 p-2",r&&"gap-2"),children:[E.jsx(En,{onClick:m,disabled:!i.value,className:Fe("z-10 flex flex-grow justify-center",!i.value&&"text-grey-100 cursor-not-allowed disabled:bg-gray-600 hover:disabled:bg-gray-600"),children:"Create Image"}),E.jsx(rp,{value:"Randomize prompt",children:E.jsx(En,{onClick:d,className:"rounded-2 -ml-5 flex items-center justify-center overflow-hidden bg-gray-800 text-center text-gray-50 hover:bg-gray-500 hover:text-gray-100",children:E.jsx(NE,{className:"ml-5 h-6 w-6"})})}),E.jsx(rp,{value:"Back to your prompt",children:E.jsx(Qs.button,{className:"rounded-2 flex items-center justify-center overflow-hidden bg-gray-800 text-center text-gray-50 hover:bg-gray-500 hover:text-gray-100",disabled:!r,initial:{width:0},animate:{width:r?56:0,transition:{duration:.1,...ZN}},onClick:p,children:E.jsx(jE,{className:"h-6 w-6 shrink-0"})})})]}),E.jsx(qIe,{selected:a,setSelected:v})]})]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"pb-2 tracking-[-1px] text-gray-400",children:"Generating images"}),E.jsxs("div",{className:"flex flex-grow flex-col justify-between",children:[E.jsx(kj,{prompt:i.value,small:!0,className:n}),E.jsx(En,{variant:"fill",onClick:g,className:"mb-4 mt-2 flex justify-center",children:"Cancel"})]})]})})}function QIe(e,t){var v,_,y;const n=nC(),r=Kp(),i=h1(),s=n.isLoading,l=(v=i.data)!=null&&v.id?n.data:r.artData,[a,o]=T.useState(w0[0]),c=JIe(a==null?void 0:a.id),{deleteArt:h}=EG(),{refetch:u}=nC(),{artState:{artId:f,status:d},updateArtState:p}=pr(),{generateArt:m}=TG(),g=T.useMemo(()=>{var b,S;return(S=(b=l==null?void 0:l.sparkArtList)==null?void 0:b.list)==null?void 0:S.some(({images:x})=>x.some(({state:C})=>C==="generated"))},[(_=l==null?void 0:l.sparkArtList)==null?void 0:_.list]);return E.jsx("div",{ref:t,...e,className:Fe("flex flex-grow flex-col justify-between",e.className),children:E.jsxs("div",{children:[E.jsx(KIe,{selectedRatio:a,setSelectedRatio:o,selectedAspectRatioStyles:c}),s?E.jsx("div",{className:"flex h-12 items-center justify-center pt-32",children:E.jsx(ej,{})}):E.jsx(E.Fragment,{children:g?E.jsx(ny.Root,{list:((y=l==null?void 0:l.sparkArtList)==null?void 0:y.list)||[],deleteItem:h,generate:m,refetch:u,update:p,id:f}):d==="generate"?null:E.jsx(ny.EmptyState,{})})]})})}function JIe(e){switch(e){case _i.Landscape_16_9:return"aspect-[16/9]";case _i.Portrait_9_16:return"aspect-[9/16]";case _i.Landscape_4_3:return"aspect-[4/3]";case _i.Portrait_3_4:return"aspect-[3/4]";case _i.Square:default:return"aspect-[1/1]"}}const ZIe=T.forwardRef(QIe);function eOe(){const{mutateAsync:e}=tP();async function t(s){return new Promise((l,a)=>{async function o(){var f,d,p,m;const c=await e({input:{imageUrl:s}}),{errors:h}=(c==null?void 0:c.sparkRemoveBackground)??{};h!=null&&h.length&&a(h),((d=(f=c==null?void 0:c.sparkRemoveBackground)==null?void 0:f.removedBackground)==null?void 0:d.state)==="failed"&&a(KS);const u=(m=(p=c==null?void 0:c.sparkRemoveBackground)==null?void 0:p.removedBackground)==null?void 0:m.id;u&&l(u)}o()})}async function n(s){return new Promise((l,a)=>{function o(c){Gp.fetcher({input:{id:c}})().then(h=>{var d;const u=(d=h==null?void 0:h.sparkRemovedBackground)==null?void 0:d.removedBackground;if((u==null?void 0:u.state)==="failed"){a(KS);return}const{generatedImagelUrl:f}=u??{};l(f||"")}).catch(h=>{a(h)})}o(s)})}async function r(s){return new Promise((l,a)=>{function o(c){Up.fetcher({productId:c})().then(h=>{const u=h==null?void 0:h.productsDownloadContentWithBackgroundRemoved;if((u==null?void 0:u.state)==="failed"){a(KS);return}const{id:f,generatedImageUrl:d}=u??{};l(d&&f||"")}).catch(h=>{a(h)})}o(s)})}async function i(s){return new Promise((l,a)=>{function o(c){$p.fetcher({ids:c})().then(h=>{const u=h==null?void 0:h.contentDownloadAssets,{url:f}=u[0]??{};l(f||"")}).catch(h=>{a(h)})}o(s)})}return{removeBackground:t,removeBackgroundFetch:n,removeBackgroundFetchForContentImages:r,getContentAssets:i}}const iD={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpeg",svg:"image/svg+xml",webp:"image/webp"},D6e=e=>{const t=[];return e.forEach(n=>iD[n]&&t.push(iD[n])),t};function M6e(e,t){return t.includes(e)}const tOe=new Set(["image/svg+xml","image/png","image/jpeg","image/webp"]),nOe=new Set(["image/svg+xml","image/png","image/jpeg"]);function rOe(e,t=tOe){return t.has(e)}const iOe=e=>{const t=e.map(r=>`.${r.toUpperCase()}`);return`The file format you uploaded is not supported at this point in time. Please choose ${t.length===1?t[0]:t.join(", ")}`},L6e=e=>`The file size of the image you are uploading is too large. Please reduce the file size to max ${e}MB.`,F6e=(e,t)=>`The image you are uploading is too large. Please upload an image that has a max width and height of ${e}x${t}px.`,N6e=(e,t)=>`The image you uploading is too small. Please upload an image of at least  ${e}x${t}px.`;function sOe(e){const[t,n]=T.useState(!1),r=T.useMemo(()=>typeof window<"u"?new IntersectionObserver(function(i){n(i[0].isIntersecting)}):null,[]);return T.useEffect(()=>{e.current&&r!==null&&r.observe(e.current)},[r,e]),T.useEffect(()=>{if(r)return()=>r.disconnect()},[r]),t}function oOe(){const[e,t]=T.useState(!1);return T.useEffect(()=>{t(!0)},[]),e}function aOe({asChild:e,className:t,children:n}){const r=e?Qi:"div";return E.jsx(r,{className:Fe("relative",t),children:n})}function lOe({asChild:e,children:t}){const n=e?Qi:"div";return E.jsx(n,{children:t})}function cOe({position:e,className:t}){const n=T.useRef(null),r=sOe(n),i=oOe();return E.jsxs(E.Fragment,{children:[E.jsx("div",{ref:n}),E.jsx("div",{className:Fe(i?r?"opacity-0":"opacity-100":"opacity-0",e==="bottom"&&"bottom-0 left-0 h-8 w-full bg-gradient-to-t from-current from-[25%] to-transparent",e==="top"&&"left-0 top-0 h-8 w-full bg-gradient-to-b from-current from-[25%] to-transparent",e==="left"&&"left-0 top-0 h-full w-8 bg-gradient-to-r from-current from-[0%] to-transparent",e==="right"&&"right-0 top-0 h-full w-8 bg-gradient-to-l from-current from-[0%] to-transparent","ease-smooth text-gray-1000 duration-400 pointer-events-none absolute transition-opacity",t)})]})}const uOe={Root:aOe,Scroller:lOe,Shadow:cOe},hOe="/assets/dot-3676460f.svg",PG=["PageUp","PageDown"],IG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],OG={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},yg="Slider",[rC,fOe,dOe]=lG(yg),[kG,j6e]=fc(yg,[dOe]),[pOe,H_]=kG(yg),gOe=T.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:l="horizontal",disabled:a=!1,minStepsBetweenThumbs:o=0,defaultValue:c=[r],value:h,onValueChange:u=()=>{},onValueCommit:f=()=>{},inverted:d=!1,...p}=e,[m,g]=T.useState(null),v=It(t,B=>g(B)),_=T.useRef(new Set),y=T.useRef(0),b=l==="horizontal",S=m?!!m.closest("form"):!0,x=b?mOe:vOe,[C=[],w]=Wd({prop:h,defaultProp:c,onChange:B=>{var $;($=[..._.current][y.current])===null||$===void 0||$.focus(),u(B)}}),k=T.useRef(C);function I(B){const $=EOe(C,B);G(B,$)}function R(B){G(B,y.current)}function j(){const B=k.current[y.current];C[y.current]!==B&&f(C)}function G(B,$,{commit:V}={commit:!1}){const W=kOe(s),M=AOe(Math.round((B-r)/s)*s+r,W),P=ry(M,[r,i]);w((O=[])=>{const A=COe(O,P,$);if(OOe(A,o*s)){y.current=A.indexOf(P);const D=String(A)!==String(O);return D&&V&&f(A),D?A:O}else return O})}return T.createElement(pOe,{scope:e.__scopeSlider,disabled:a,min:r,max:i,valueIndexToChangeRef:y,thumbs:_.current,values:C,orientation:l},T.createElement(rC.Provider,{scope:e.__scopeSlider},T.createElement(rC.Slot,{scope:e.__scopeSlider},T.createElement(x,Be({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:v,onPointerDown:ht(p.onPointerDown,()=>{a||(k.current=C)}),min:r,max:i,inverted:d,onSlideStart:a?void 0:I,onSlideMove:a?void 0:R,onSlideEnd:a?void 0:j,onHomeKeyDown:()=>!a&&G(r,0,{commit:!0}),onEndKeyDown:()=>!a&&G(i,C.length-1,{commit:!0}),onStepKeyDown:({event:B,direction:$})=>{if(!a){const M=PG.includes(B.key)||B.shiftKey&&IG.includes(B.key)?10:1,P=y.current,O=C[P],A=s*M*$;G(O+A,P,{commit:!0})}}})))),S&&C.map((B,$)=>T.createElement(wOe,{key:$,name:n?n+(C.length>1?"[]":""):void 0,value:B})))}),[AG,RG]=kG(yg,{startEdge:"left",endEdge:"right",size:"width",direction:1}),mOe=T.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:l,onSlideMove:a,onSlideEnd:o,onStepKeyDown:c,...h}=e,[u,f]=T.useState(null),d=It(t,y=>f(y)),p=T.useRef(),m=cG(i),g=m==="ltr",v=g&&!s||!g&&s;function _(y){const b=p.current||u.getBoundingClientRect(),S=[0,b.width],C=x4(S,v?[n,r]:[r,n]);return p.current=b,C(y-b.left)}return T.createElement(AG,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width"},T.createElement(DG,Be({dir:m,"data-orientation":"horizontal"},h,{ref:d,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:y=>{const b=_(y.clientX);l==null||l(b)},onSlideMove:y=>{const b=_(y.clientX);a==null||a(b)},onSlideEnd:()=>{p.current=void 0,o==null||o()},onStepKeyDown:y=>{const S=OG[v?"from-left":"from-right"].includes(y.key);c==null||c({event:y,direction:S?-1:1})}})))}),vOe=T.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:l,onSlideEnd:a,onStepKeyDown:o,...c}=e,h=T.useRef(null),u=It(t,h),f=T.useRef(),d=!i;function p(m){const g=f.current||h.current.getBoundingClientRect(),v=[0,g.height],y=x4(v,d?[r,n]:[n,r]);return f.current=g,y(m-g.top)}return T.createElement(AG,{scope:e.__scopeSlider,startEdge:d?"bottom":"top",endEdge:d?"top":"bottom",size:"height",direction:d?1:-1},T.createElement(DG,Be({"data-orientation":"vertical"},c,{ref:u,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const g=p(m.clientY);s==null||s(g)},onSlideMove:m=>{const g=p(m.clientY);l==null||l(g)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const v=OG[d?"from-bottom":"from-top"].includes(m.key);o==null||o({event:m,direction:v?-1:1})}})))}),DG=T.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:l,onEndKeyDown:a,onStepKeyDown:o,...c}=e,h=H_(yg,n);return T.createElement(Nt.span,Be({},c,{ref:t,onKeyDown:ht(e.onKeyDown,u=>{u.key==="Home"?(l(u),u.preventDefault()):u.key==="End"?(a(u),u.preventDefault()):PG.concat(IG).includes(u.key)&&(o(u),u.preventDefault())}),onPointerDown:ht(e.onPointerDown,u=>{const f=u.target;f.setPointerCapture(u.pointerId),u.preventDefault(),h.thumbs.has(f)?f.focus():r(u)}),onPointerMove:ht(e.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&i(u)}),onPointerUp:ht(e.onPointerUp,u=>{const f=u.target;f.hasPointerCapture(u.pointerId)&&(f.releasePointerCapture(u.pointerId),s(u))})}))}),yOe="SliderTrack",_Oe=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=H_(yOe,n);return T.createElement(Nt.span,Be({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:t}))}),sD="SliderRange",bOe=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=H_(sD,n),s=RG(sD,n),l=T.useRef(null),a=It(t,l),o=i.values.length,c=i.values.map(f=>MG(f,i.min,i.max)),h=o>1?Math.min(...c):0,u=100-Math.max(...c);return T.createElement(Nt.span,Be({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},r,{ref:a,style:{...e.style,[s.startEdge]:h+"%",[s.endEdge]:u+"%"}}))}),oD="SliderThumb",SOe=T.forwardRef((e,t)=>{const n=fOe(e.__scopeSlider),[r,i]=T.useState(null),s=It(t,a=>i(a)),l=T.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return T.createElement(xOe,Be({},e,{ref:s,index:l}))}),xOe=T.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,...i}=e,s=H_(oD,n),l=RG(oD,n),[a,o]=T.useState(null),c=It(t,g=>o(g)),h=GE(a),u=s.values[r],f=u===void 0?0:MG(u,s.min,s.max),d=TOe(r,s.values.length),p=h==null?void 0:h[l.size],m=p?POe(p,f,l.direction):0;return T.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),T.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${f}% + ${m}px)`}},T.createElement(rC.ItemSlot,{scope:e.__scopeSlider},T.createElement(Nt.span,Be({role:"slider","aria-label":e["aria-label"]||d,"aria-valuemin":s.min,"aria-valuenow":u,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},i,{ref:c,style:u===void 0?{display:"none"}:e.style,onFocus:ht(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})}))))}),wOe=e=>{const{value:t,...n}=e,r=T.useRef(null),i=mG(t);return T.useEffect(()=>{const s=r.current,l=window.HTMLInputElement.prototype,o=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==t&&o){const c=new Event("input",{bubbles:!0});o.call(s,t),s.dispatchEvent(c)}},[i,t]),T.createElement("input",Be({style:{display:"none"}},n,{ref:r,defaultValue:t}))};function COe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((i,s)=>i-s)}function MG(e,t,n){const s=100/(n-t)*(e-t);return ry(s,[0,100])}function TOe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function EOe(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),r=Math.min(...n);return n.indexOf(r)}function POe(e,t,n){const r=e/2,s=x4([0,50],[0,r]);return(r-s(t)*n)*n}function IOe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function OOe(e,t){if(t>0){const n=IOe(e);return Math.min(...n)>=t}return!0}function x4(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function kOe(e){return(String(e).split(".")[1]||"").length}function AOe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}const ROe=gOe,DOe=_Oe,MOe=bOe,LOe=SOe;function FOe(e,t,n=0){return e!=null&&e.current?n>250?t:e.current:FOe(e,t,n+1)}function NOe(e,t){const n=T.createContext(t);function r(){const s=T.useContext(n);if(!s)throw new Error(`use${e} must be used within a ${e}Provider`);return s}function i(s){return E.jsx(n.Provider,{value:s,children:s.children})}return i.displayName=`${e}Provider`,[i,r]}const[jOe,LG]=NOe("Slider",null);function BOe(e){return E.jsx(jOe,{...e,children:E.jsx(ROe,{...e,asChild:!0,children:E.jsx("div",{className:Fe("group relative flex cursor-pointer items-center justify-center bg-transparent",e.orientation==="horizontal"?"h-6 w-full":"h-full w-6",e.disabled&&"cursor-not-allowed",e.className),children:e.children})})})}function UOe(e){const t=LG();return E.jsx(DOe,{...e,className:Fe("relative block rounded-full bg-gray-700",t.orientation==="horizontal"?"h-1 w-full":"h-full w-1",e.className)})}function $Oe(e){const t=LG();return E.jsx(MOe,{...e,className:Fe("absolute rounded-full bg-violet-500",t.orientation==="horizontal"?"h-full":"w-full",e.className)})}function GOe(e){return E.jsx(LOe,{...e,className:Fe("block h-3 w-3 cursor-pointer rounded-full border border-gray-500 bg-gray-600 transition-transform focus:scale-100 group-hover:scale-125",e.disabled&&"cursor-not-allowed",e.className)})}function FG(){const{backgroundRemovalState:e,imageMixState:t,inpaintState:n,outpaintState:r,selectedTab:i}=pr();switch(i){case At.IMAGE_MIX:return(t==null?void 0:t.result)??"";case At.BACKGROUND_REMOVER:return(e==null?void 0:e.result)??"";case At.INPAINTING:return(n==null?void 0:n.result)??"";case At.OUTPAINTING:return(r==null?void 0:r.result)??"";default:return""}}function VOe({onBack:e,onUpload:t}){const n=Pn(),{sourceImage:r,backgroundRemovalState:i,brushSize:s,updateBrushSize:l,zoomIn:a,zoomOut:o,selectedTab:c,clear:h,imageMixState:u,inpaintState:f,outpaintState:d}=pr(),{navigateToBar:p}=FE(),m=FG(),v={[At.IMAGE_MIX]:u==null?void 0:u.isLoading,[At.BACKGROUND_REMOVER]:i.isLoading,[At.INPAINTING]:f.isLoading,[At.OUTPAINTING]:d.isLoading}[c],_=c===At.INPAINTING||c===At.OUTPAINTING||c===At.IMAGE_MIX;if(v)return"";const y=w=>{w.stopPropagation(),h4(m,n),p(null),h()},b=w=>{l(w[0])},S=()=>{l(Math.min(s+5,gD))},x=()=>{l(Math.max(s-5,pD))},C=m||t||e;return E.jsx(E.Fragment,{children:r||m?E.jsxs("div",{className:Fe("absolute right-[30px] z-20 mb-8 mt-4 flex w-[54px] flex-col justify-between","h-[-moz-available]","h-[-webkit-fill-available]",_&&"right-[323px]"),children:[E.jsxs("div",{className:Fe("bg-gray-1000 rounded-4 flex flex-col gap-1 p-[10px]","invisible h-0"),children:[E.jsx(_r,{className:"bg-gray-900",children:E.jsx(Nge,{})}),E.jsx(_r,{className:"bg-gray-900",children:E.jsx(Sve,{})}),E.jsx(_r,{className:"bg-gray-900",children:E.jsx(bve,{})}),E.jsx(_r,{className:"bg-gray-900",children:E.jsx(xve,{})})]}),E.jsxs("div",{className:Fe("bg-gray-1000 rounded-4 tall:h-72 flex h-48 flex-col items-center gap-2 py-4",c!==At.INPAINTING||v?"invisible h-0":""),children:[E.jsx(_r,{onClick:S,className:"bg-gray-900",children:E.jsx(Eve,{})}),E.jsxs(BOe,{orientation:"vertical",min:pD,max:gD,value:[s],onValueChange:b,className:"h-52 w-full",children:[E.jsx(UOe,{children:E.jsx($Oe,{})}),E.jsx(GOe,{})]}),E.jsx(_r,{onClick:x,className:"bg-gray-900",children:E.jsx(JN,{})})]}),E.jsxs("div",{className:"flex flex-col gap-2",children:[v?null:E.jsxs("div",{className:"bg-gray-1000 rounded-4 flex flex-col gap-1 p-[10px]",children:[E.jsx(_r,{className:"bg-gray-900",onClick:a,children:E.jsx(wve,{})}),E.jsx(_r,{className:"bg-gray-900",onClick:o,children:E.jsx(Cve,{})})]}),C?E.jsxs("div",{className:"bg-gray-1000 rounded-4 flex flex-col items-end gap-1 p-[10px]",children:[e?E.jsx(_r,{className:"bg-gray-900",onClick:e,children:E.jsx(jE,{})}):null,t?E.jsxs("label",{className:"rounded-2 h-[34px] w-[34px] cursor-pointer bg-gray-900 p-[5px] hover:bg-violet-500",children:[E.jsx("input",{type:"file",onChange:t,style:{display:"none"},accept:".jpg,.jpeg,.png,.svg"}),E.jsx(QN,{})]}):null,m&&!v?E.jsxs(En,{className:"flex h-9 w-max flex-row items-center gap-1 bg-violet-500 pr-0",onClick:y,children:["Save and place on Canvas",E.jsx(Tve,{className:"m-2 h-6 w-6"})]}):null]}):null]})]}):null})}function HOe({children:e,onBack:t,history:n}){const[r,i]=T.useState(!1),[s,l]=T.useState(!1),{sourceImage:a,updateInputFile:o,updateBackgroundRemovalState:c,updateImageMixState:h,updateImage:u,selectedTab:f,updateInpaintState:d,updateOutpaintState:p,updateFileOriginTab:m,errorMessage:g,updateErrorMessage:v}=pr(),_=FG(),y=function(C){C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?i(w=>w||!0):C.type==="dragleave"&&i(!1)},b=C=>Array.from(C).filter(k=>rOe(k.type,nOe))[0],S=async function(C){if(C.preventDefault(),C.stopPropagation(),i(!1),C.dataTransfer.files){const w=b(C.dataTransfer.files);w?await bD(w)||f!==At.IMAGE_MIX?(o(w),m(f)):v(`The image you uploaded is too large. Please upload an image that is less than ${iy}px in height and width.`):l(!0)}},x=async function(C){if(!C.target.files)return;const w=b(C.target.files);w?await bD(w)||f!==At.IMAGE_MIX?(c({result:"",isLoading:!1,source:""}),h({result:"",isLoading:!1,data:void 0,source:"",imageMixId:""}),d({result:"",source:""}),p({result:"",source:""}),o(null),u(""),o(w),m(f)):v(`The image you uploaded is too large. Please upload an image that is less than ${iy}px in height and width.`):l(!0)};return E.jsxs("section",{className:"flex h-full w-full gap-2 overflow-hidden",children:[E.jsxs("div",{className:"flex w-full overflow-hidden",children:[E.jsx(VOe,{onBack:t,onUpload:x}),E.jsx("div",{className:Fe("rounded-2 relative flex h-full w-full items-center justify-center overflow-hidden bg-gray-800 bg-repeat-space",r&&"ring-2 ring-gray-500"),style:{backgroundImage:`url(${hOe})`},onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:S,children:a||_?E.jsx(E.Fragment,{children:e}):E.jsxs("label",{className:"cursor-pointer",children:[E.jsx("input",{type:"file",onChange:x,style:{display:"none"},accept:".jpg,.jpeg,.png,.svg"}),E.jsxs("div",{className:Fe("rounded-4 flex h-[132px] w-[328px] flex-col items-center justify-center gap-2 border-2 border-dashed border-gray-700 bg-gray-900 text-gray-400 hover:border-gray-500 hover:bg-gray-800",r&&"border-gray-500 bg-gray-800"),children:[E.jsx(QN,{className:"h-[24px] w-[24px]"}),"Add file or drag & drop here"]})]})})]}),n,E.jsxs(on.Root,{defaultOpen:!1,open:s,onOpenChange:l,zIndex:100,children:[E.jsx(on.Content,{title:"File Format Issue",icon:E.jsx(Qd,{className:"h-6 w-6"}),iconClassName:"w-9",isTextOnly:!0,children:iOe(["png","jpeg","svg"])}),E.jsx(on.CloseX,{})]}),E.jsxs(on.Root,{defaultOpen:!1,open:!!g,onOpenChange:()=>v(""),zIndex:100,children:[E.jsx(on.Content,{title:"Error generating variant",icon:E.jsx(Qd,{className:"h-6 w-6"}),iconClassName:"w-9",isTextOnly:!0,children:g}),E.jsx(on.CloseX,{})]})]})}function zOe({children:e,icon:t,onCancel:n}){return E.jsxs("div",{className:"rounded-4 absolute top-[38px] z-20 h-[54px] w-[495px] bg-violet-500 p-3.5 text-base",children:[E.jsx("span",{className:"text-cf-white",children:t}),E.jsxs("div",{className:"bg-gray-1000 rounded-4 absolute left-12 right-0 top-0 z-30 flex h-full items-center justify-between gap-2.5 px-2",children:[E.jsxs("span",{className:"flex items-center gap-4",children:[E.jsx("span",{children:e}),E.jsx(Ap,{className:"animate-spin"})]}),E.jsx(En,{size:"small",onClick:n,children:"Cancel"})]})]})}function WOe({children:e,icon:t,label:n}){const{selectedTab:r,sourceImage:i,updateBackgroundRemovalState:s,updateFileOriginTab:l,updateImageMixState:a}=pr(),o=()=>{switch(l(r),r){case At.BACKGROUND_REMOVER:s({isLoading:!0,source:i});break;case At.IMAGE_MIX:a({isLoading:!0,source:i});break}};return E.jsxs("div",{className:"rounded-4 absolute top-[38px] h-[54px] w-[495px] bg-violet-500 p-3.5 text-base",children:[t,E.jsxs("div",{className:"bg-gray-1000 rounded-4 absolute left-12 right-0 top-0 z-10 flex h-full items-center justify-between gap-2.5 px-4",children:[E.jsx("span",{className:"text-sm text-gray-300",children:e}),E.jsx(En,{size:"small",onClick:o,children:n})]})]})}function YOe({state:e,update:t,index:n=0,swapper:r}){var m;const[i,s]=T.useState(n),{updateImage:l,clear:a}=pr(),{navigateToBar:o}=FE(),c=Pn();T.useEffect(()=>{s(n)},[n]);const h=g=>{var v;s(g),t&&t({result:((v=e==null?void 0:e.data)==null?void 0:v.images[g].originalUrl)||"",isLoading:!1}),r&&r(!0)},u=()=>i>0&&h(i-1),f=()=>{var g,v;return i<(((v=(g=e==null?void 0:e.data)==null?void 0:g.images)==null?void 0:v.length)||0)-1&&h(i+1)},d=()=>{t&&t({result:"",isLoading:!1,data:void 0,source:""}),l("")},p=g=>{g.stopPropagation(),h4((e==null?void 0:e.result)??"",c),o(null),a()};return E.jsx(E.Fragment,{children:e!=null&&e.data?E.jsxs("div",{className:"rounded-4 absolute top-[38px] h-[54px] w-[400px] bg-violet-500 p-3.5 text-base",children:[E.jsx(Av,{className:"text-cf-white bg-violet-500"}),E.jsxs("div",{className:"bg-gray-1000 rounded-4 absolute left-[50px] right-0 top-0 z-10 flex h-[54px] w-[350px] gap-2 p-[10px]",children:[E.jsx(_r,{className:"bg-gray-900",onClick:u,children:E.jsx(Pve,{className:"h-6 w-6"})}),(m=e==null?void 0:e.data)==null?void 0:m.images.reverse().map(({originalUrl:g,id:v},_)=>E.jsx(JN,{className:Fe("cursor-pointer text-gray-700",i===_&&"text-violet-500"),onClick:()=>{s(_),t&&t({result:g||"",isLoading:!1})},height:36,width:36},v)),E.jsx(_r,{className:"bg-gray-900",onClick:f,children:E.jsx(Ive,{className:"h-6 w-6"})}),E.jsx(En,{className:"hover:text-cf-white bg-gray-900 text-gray-50",size:"small",onClick:d,children:"Cancel"}),E.jsx(En,{className:"hover:text-cf-white  bg-gray-900 text-gray-50",size:"small",onClick:p,children:"Accept"})]})]}):null})}function XOe({historyData:e,removeAll:t,removeOne:n,select:r}){const[i,s]=T.useState(!1),[l,a]=T.useState(!1),[o,c]=T.useState(""),h=()=>{t(),s(!1)},u=d=>()=>{c(d),a(!0)},f=()=>{n(o),a(!1),c("")};return E.jsxs("div",{className:"rounded-2 flex w-[337px] flex-col gap-2 bg-gray-900 px-2 py-4",children:[E.jsx("div",{className:"px-2 py-1 text-gray-200",children:"History"}),E.jsx(uOe.Scroller,{asChild:!0,children:E.jsx("div",{className:"scroller-xs flex-over flex h-96 grow flex-row flex-wrap content-baseline overflow-scroll px-0 pl-1.5",style:{"--scroller-gutter":"var(--gutter)"},children:e.length?e.map(d=>E.jsx(qOe,{data:d,removeOne:u,select:r},d.id)):E.jsx("div",{className:"flex h-1 flex-grow items-center justify-center"})})}),e.length?E.jsxs(En,{className:"flex gap-2 pl-2 text-gray-200",size:"small",variant:"invisible",onClick:()=>s(!0),children:[E.jsx(KN,{className:"h-6 w-6"})," ",E.jsx("span",{children:"Clear all"})]}):null,E.jsxs(on.Root,{defaultOpen:!1,open:i,onOpenChange:s,zIndex:100,children:[E.jsx(on.Content,{title:"Remove all previous results",icon:E.jsx(Qd,{className:"h-6 w-6"}),iconClassName:"w-9",isTextOnly:!0,children:"Are you sure you want to remove all results? This action is permanent and cannot be undone."}),E.jsx(on.CloseX,{}),E.jsx(on.Actions,{children:({handleClose:d})=>E.jsxs("section",{className:"flex w-full items-center justify-between",children:[E.jsx(En,{onClick:d,variant:"outline",children:"Cancel"}),E.jsx(En,{onClick:h,children:"Remove all"})]})})]}),E.jsxs(on.Root,{defaultOpen:!1,open:l,onOpenChange:a,zIndex:100,children:[E.jsx(on.Content,{title:"Remove your result",icon:E.jsx(Qd,{className:"h-6 w-6"}),iconClassName:"w-9",isTextOnly:!0,children:"Are you sure you want to delete this result? This action is permanent and cannot be undone."}),E.jsx(on.CloseX,{}),E.jsx(on.Actions,{children:({handleClose:d})=>E.jsxs("section",{className:"flex w-full items-center justify-between",children:[E.jsx(En,{onClick:d,variant:"outline",children:"Cancel"}),E.jsx(En,{onClick:f,children:"Remove"})]})})]})]})}function qOe({data:e,removeOne:t,select:n}){const r=(i,s)=>()=>{n(i,s)};return"images"in e?E.jsxs("div",{className:"group relative",children:[E.jsx("div",{className:"rounded-2 flex justify-between gap-1.5 p-2 hover:bg-gray-800",children:e.images.map(({id:i,thumbnailUrl:s},l)=>E.jsx("div",{onClick:r(e,l),style:{backgroundImage:`url(${s})`},className:"rounded-2 h-[51px] w-[51px] cursor-pointer bg-cover bg-center bg-no-repeat hover:ring-1 hover:ring-violet-500"},i))}),E.jsx(_r,{type:"button",className:"bg-gray-1000 absolute right-0 top-0 h-5 w-5 rounded leading-4 opacity-0 group-hover:opacity-100",onClick:t(e.id),children:E.jsx(Ov,{className:"h-5 w-5 text-gray-400"})})]},e.id):E.jsxs("div",{className:"group relative",onClick:r(e),children:[E.jsx("div",{className:"rounded-2 flex gap-1 p-1 hover:bg-gray-800",children:E.jsx("div",{style:{backgroundImage:`url(${e.thumbnailUrl})`},className:"rounded-2 h-[51px] w-[51px] cursor-pointer bg-cover bg-center bg-no-repeat hover:ring-1 hover:ring-violet-500"})}),E.jsx(_r,{type:"button",className:"bg-gray-1000 absolute right-0 top-0 h-5 w-5 rounded leading-4 opacity-0 group-hover:opacity-100",onClick:t(e.id),children:E.jsx(Ov,{className:"h-5 w-5 text-gray-400"})})]},e.id)}const Dr={Root:HOe,LoadingBar:zOe,ActionBar:WOe,VariantNavigator:YOe,History:XOe};function KOe(){const{mutateAsync:e,...t}=rP();async function n(r){var c;let i=null,s;try{const u=(await e({input:{uploadFile:r.name}})).sparkUploadsCreateSignedUrl;if(!u)throw new Error("Error in sparkBackgroundRemovalUpload: No data.");if(!(u!=null&&u.signedUrl))throw new Error("Error in sparkBackgroundRemovalUpload: Signed url must be provided.");if(!(u!=null&&u.id))throw new Error("Error in sparkBackgroundRemovalUpload: id must be provided.");s=u}catch(h){h instanceof Error&&(console.log(h),i=h)}const a=[...((c=s==null?void 0:s.errors)==null?void 0:c.map(h=>h.message))||[],...i?[i]:[]],o=a.length>0?{messages:a}:null;return s?{...s,errors:o}:{errors:o}}return{createSignedUrl:n,...t}}function QOe(){const{createSignedUrl:e,...t}=KOe();async function n(i){let s=0;return new Promise((l,a)=>{function o(c){zp.fetcher({input:{uploadId:c}})().then(({sparkGetUploaded:h})=>{const{imageUrl:u}=h;if(s>=5){a("Failed to get image url");return}if(!u){s++,setTimeout(()=>{o(i)},2e3);return}l(u)}).catch(h=>{a(h)})}setTimeout(()=>{o(i)},2e3)})}async function r(i){var h;let s=null,l;try{if(!i)throw new Error("Error within useSparkCreateSignedUploadUrl in uploadSignedImage File must be passed in.");const u=await e(i);if(!u||!("signedUrl"in u&&u.signedUrl))throw new Error("Error within useSparkCreateSignedUploadUrl in uploadSignedImage Signed URL data is missing or invalid.");const{signedUrl:f,errors:d}=u,p=new Headers({"Content-Type":i.type});if(!(await fetch(f,{method:"PUT",body:i,headers:p})).ok)throw new Error("Error within useSparkCreateSignedUploadUrl in uploadSignedImage Image upload failed.");const g=await n(u.id).catch(()=>null);if(!g)throw new Error("Error in sparkGetUploaded: image url not found.");l={url:g,errors:d}}catch(u){u instanceof Error&&(console.log(u),s=u)}const o=[...((h=l==null?void 0:l.errors)==null?void 0:h.messages)||[],...s?[s]:[]],c=o.length>0?{messages:o}:null;return l?{...l,errors:c}:{errors:c}}return{uploadSignedImage:r,...t}}function z_(){const{uploadSignedImage:e}=QOe();async function t(n){var o;const i=(n.match(/data:image\/.*;base64,/)?n:await ome(n)).replace("data:application/octet-stream","data:image/png"),s=((o=i.match(/data:image\/(.*);base64,/))==null?void 0:o[1])||"png",l=sme(i,`new-image.${s}`),{url:a}=await e(l);return a||""}return t}function JOe(){const{backgroundRemovalState:{result:e,isLoading:t,source:n,removeBackgroundId:r},canvasDimensions:{width:i,height:s},fileOriginTab:l,inputFile:a,selectedTab:o,sourceImage:c,updateBackgroundRemovalState:h,updateImage:u,updateInputFile:f,updateErrorMessage:d}=pr(),{removeBackground:p,removeBackgroundFetch:m}=eOe(),g=z_();T.useEffect(()=>{let y;const b=async()=>{try{const x=await m(r);x&&(h({result:x,isLoading:!1,removeBackgroundId:""}),clearInterval(y))}catch(x){d(typeof x=="string"?x:"Error outpainting image"),h({removeBackgroundId:"",isLoading:!1}),clearInterval(y)}};return r&&!e&&(()=>{b(),y=setInterval(()=>{b()},5e3)})(),()=>{clearInterval(y)}},[r,e]),T.useEffect(()=>{n&&!e&&(h({isLoading:!0}),v(n))},[n]),T.useEffect(()=>{const y=async b=>{const S=await W_(b);u(S),v(S)};a&&l===At.BACKGROUND_REMOVER&&!e&&(h({isLoading:!0}),y(a))},[a]);const v=async y=>{try{const b=await g(y),S=await p(b);h({removeBackgroundId:S,isLoading:!0})}catch(b){d(b),h({result:"",isLoading:!1,removeBackgroundId:""}),f(null),u("")}},_=()=>{h({result:"",isLoading:!1,source:"",removeBackgroundId:""}),f(null),u("")};return E.jsxs(Dr.Root,{onBack:_,children:[t?E.jsx(Dr.LoadingBar,{icon:E.jsx(u2,{className:" bg-violet-500"}),onCancel:_,children:"Removing background..."}):null,e?E.jsx("img",{src:e,height:s,width:i,onLoad:()=>{h({isLoading:!1})},style:{background:"repeating-conic-gradient(#d9d9d9 0% 25%, #ffffff 0% 50%) 50% / 15px 15px"},className:"pointer-events-none select-none"}):E.jsxs(E.Fragment,{children:[l!==o&&!t?E.jsx(Dr.ActionBar,{icon:E.jsx(u2,{className:"bg-violet-500"}),label:"Remove Background",children:"Remove background from this image"}):null,E.jsx("img",{src:c,height:s,width:i,className:"pointer-events-none select-none"})]})]})}const ZOe=T.forwardRef(JOe);function eke(){const{mutateAsync:e}=iP(),{mutateAsync:t}=aP(),{mutateAsync:n}=lP();async function r(o){return new Promise((c,h)=>{async function u(){var m,g,v;const f=await e({input:{imageUrl:o,prompt:"Mix with another image",strength:.9}}),{errors:d}=(f==null?void 0:f.sparkImageMixGenerate)??{};d!=null&&d.length&&h(d),(m=f==null?void 0:f.sparkImageMixGenerate)!=null&&m.imageMix.images.some(({state:_})=>_==="failed")&&h(vD);const p=(v=(g=f==null?void 0:f.sparkImageMixGenerate)==null?void 0:g.imageMix)==null?void 0:v.id;p&&c(p)}u()})}async function i(o){return new Promise((c,h)=>{function u(f){Vp.fetcher({input:{id:f}})().then(({sparkImageMixGet:d})=>{var g,v,_,y;if(((g=d==null?void 0:d.imageMix)==null?void 0:g.images.length)&&((v=d==null?void 0:d.imageMix)==null?void 0:v.images.every(({state:b})=>b==="failed"))||!(d!=null&&d.imageMix)){h(vD);return}const m=((_=d==null?void 0:d.imageMix)==null?void 0:_.images.length)&&((y=d==null?void 0:d.imageMix)==null?void 0:y.images.every(({originalUrl:b})=>b!==""&&b!==null));c(m?d.imageMix:!1)}).catch(d=>{h(d)})}u(o)})}async function s(){return new Promise((o,c)=>{async function h(){var d;const u=await Hp.fetcher({input:{currentPage:1,itemsPerPage:30}})(),{errors:f}=(u==null?void 0:u.sparkImageMixList)??{};f!=null&&f.length&&c(f),o(((d=u==null?void 0:u.sparkImageMixList)==null?void 0:d.list)||[])}h()})}async function l(o){return new Promise((c,h)=>{async function u(){const f=await t({input:{id:o}}),{errors:d}=(f==null?void 0:f.sparkImageMixDelete)??{};d!=null&&d.length&&h(d),c()}u()})}async function a(){return new Promise((o,c)=>{async function h(){const u=await n({}),{errors:f}=(u==null?void 0:u.sparkImageMixDeleteAll)??{};f!=null&&f.length&&c(f),o()}h()})}return{imageMix:r,imageMixFetch:i,imageMixFetchList:s,imageMixDeleteItem:l,imageMixDeleteAll:a}}function tke(){const{sourceImage:e,canvasDimensions:{width:t,height:n},imageMixState:r,updateImageMixState:i,updateImage:s,updateInputFile:l,inputFile:a,fileOriginTab:o,selectedTab:c,updateErrorMessage:h}=pr(),{imageMix:u,imageMixFetch:f,imageMixFetchList:d,imageMixDeleteItem:p,imageMixDeleteAll:m}=eke(),g=z_(),[v,_]=T.useState(!1),[y,b]=T.useState([]),[S,x]=T.useState(0);T.useEffect(()=>{(async()=>{const G=await d();b(G.filter(B=>B.images.some($=>$.state==="generated")))})()},[r==null?void 0:r.result]),T.useEffect(()=>{let j;const G=async()=>{try{const $=await f(r.imageMixId);$&&(i({data:$,result:$.images[0].originalUrl||"",isLoading:!1,imageMixId:""}),clearInterval(j))}catch($){h(typeof $=="string"?$:"Error mixing image"),p(r.imageMixId),i({imageMixId:"",isLoading:!1}),clearInterval(j)}},B=()=>{G(),j=setInterval(()=>{G()},5e3)};return r.imageMixId&&!r.data&&B(),()=>{clearInterval(j)}},[r.imageMixId,r.data]),T.useEffect(()=>{(r!=null&&r.source||e)&&!(r!=null&&r.result)&&!a&&!(r!=null&&r.imageMixId)&&(i({isLoading:!0}),C((r==null?void 0:r.source)||e))},[r==null?void 0:r.source]),T.useEffect(()=>{const j=async G=>{const B=await W_(G);s(B),C(B)};a&&o===At.IMAGE_MIX&&!(r!=null&&r.result)&&(i({isLoading:!0}),j(a))},[a,o]);const C=async j=>{try{const G=await g(j),B=await u(G);i({imageMixId:B,isLoading:!0})}catch(G){p(r.imageMixId),i({result:"",isLoading:!1,imageMixId:""}),l(null),s(""),h(G)}},w=()=>{i({result:"",isLoading:!1,data:void 0,source:"",imageMixId:""}),l(null),s("")},k=j=>{p(j),b(y.filter(G=>G.id!==j))},I=()=>{m(),b([])},R=(j,G=0)=>{_(!0),i({data:j,source:j.imageUrl,result:j.images[G].originalUrl}),x(G)};return E.jsxs(Dr.Root,{onBack:r!=null&&r.result?w:void 0,history:E.jsx(Dr.History,{historyData:y,removeOne:k,removeAll:I,select:R}),children:[r!=null&&r.isLoading?E.jsx(Dr.LoadingBar,{icon:E.jsx(Av,{className:"bg-violet-500"}),onCancel:w,children:"Generating images..."}):E.jsx(Dr.VariantNavigator,{state:r,update:i,index:S,swapper:_}),v?E.jsx(Ap,{className:"animate-spin"}):null,r!=null&&r.result?E.jsx("img",{src:r.result,height:n,width:t,onLoad:()=>{i({isLoading:!1}),_(!1)},onError:()=>_(!1),className:Fe("pointer-events-none",v?"hidden":"block")}):E.jsxs(E.Fragment,{children:[o!==c&&!(r!=null&&r.isLoading)?E.jsxs(Dr.ActionBar,{icon:E.jsx(Av,{className:"bg-violet-500"}),label:"Generate variations",children:["Generate new images using ",E.jsx("br",{})," CF Spark Image Mix"]}):null,E.jsx("img",{src:(r==null?void 0:r.source)||e,height:n,width:t,className:"pointer-events-none select-none"})]})]})}const nke=T.forwardRef(tke),rke={primary:"bg-gray-700 text-gray-300 placeholder:text-gray-300 ring-gray-800 focus:ring-primary-500 ring-gray-300",clear:"text-gray-800 placeholder:text-gray-300 focus:ring-violet-500 ring-gray-300"};function aD(e){return E.jsx("div",{...e,className:Fe("rounded-2 relative mt-2 shadow-sm",e.className)})}const ike=T.forwardRef(function({variant:t,...n},r){return E.jsx("input",{...n,ref:r,className:Fe("rounded-2 block w-full border-0 px-3 py-1.5 text-sm leading-7 outline-none ring-1 ring-inset focus:ring-2",rke[t??"clear"],n.className)})});function ske({className:e,...t}){return E.jsx("div",{...t,className:Fe("pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-current",e)})}function oke({className:e,...t}){return E.jsx("div",{...t,className:Fe("pointer-events-none absolute inset-y-0 left-0 flex items-center px-3 text-current",e)})}function ake({className:e,...t}){return E.jsx("div",{...t,className:Fe("absolute inset-y-0 right-0 flex items-center pl-3 text-current",e)})}function lke({className:e,...t}){return E.jsx("div",{...t,className:Fe("absolute inset-y-0 left-0 flex items-center pr-3 text-current",e)})}const cke=Object.assign(aD,{Root:aD,Field:ike,IconRight:ske,IconLeft:oke,ContentRight:ake,ContentLeft:lke});function NG({children:e,visible:t,createImage:n,promptRequired:r=!0}){const[i,s]=T.useState(""),l=o=>{s(o.target.value)},a=()=>{n(i)};return E.jsx(E.Fragment,{children:t?E.jsxs("div",{className:"rounded-4 absolute top-[38px] z-20 flex h-[54px] items-center gap-2 bg-violet-500 pl-4",children:[e,E.jsxs("div",{className:"bg-gray-1000 rounded-4 flex h-[54px] w-[510px] gap-2 px-[10px] py-[10px]",children:[E.jsx(cke.Field,{className:"w-40 grow bg-gray-700 text-gray-300 ring-0 focus:ring-0",placeholder:"Business woman in red shirt holding a coffee",value:i,onChange:l}),E.jsx(En,{className:"w-fit ",onClick:a,disabled:!!(!i&&r),size:"small",children:"Create Image"})]})]}):null})}function uke(){const{mutateAsync:e}=gP(),{mutateAsync:t}=yP(),{mutateAsync:n}=_P();async function r(o,c,{increaseLeft:h=0,increaseRight:u=0,increaseUp:f=0,increaseDown:d=0}){return new Promise((p,m)=>{async function g(){var S,x;const v=await e({input:{imageUrl:o,prompt:c,increaseLeft:h,increaseRight:u,increaseUp:f,increaseDown:d}}),{errors:_,outpaint:y}=(v==null?void 0:v.sparkOutpaintImage)??{};if(_!=null&&_.length){m(_);return}if((y==null?void 0:y.state)==="failed"){m(_D);return}const b=(x=(S=v==null?void 0:v.sparkOutpaintImage)==null?void 0:S.outpaint)==null?void 0:x.id;b&&p(b)}g()})}async function i(o){return new Promise((c,h)=>{function u(f){Xp.fetcher({input:{id:f}})().then(({sparkOutpaintGet:d})=>{var m;if(((m=d.outpaint)==null?void 0:m.state)==="failed"){h(_D);return}const{imageUrl:p}=(d==null?void 0:d.outpaint)??{};c(p||"")}).catch(d=>{h(d)})}u(o)})}async function s(){return new Promise((o,c)=>{async function h(){var d;const u=await qp.fetcher({input:{currentPage:1,itemsPerPage:30}})(),{errors:f}=(u==null?void 0:u.sparkOutpaintList)??{};f!=null&&f.length&&c(f),o(((d=u==null?void 0:u.sparkOutpaintList)==null?void 0:d.list)||[])}h()})}async function l(o){return new Promise((c,h)=>{async function u(){const f=await t({input:{id:o}}),{errors:d}=(f==null?void 0:f.sparkOutpaintDelete)??{};d!=null&&d.length&&h(d),c()}u()})}async function a(){return new Promise((o,c)=>{async function h(){const u=await n({}),{errors:f}=(u==null?void 0:u.sparkOutpaintDeleteAll)??{};f!=null&&f.length&&c(f),o()}h()})}return{outpaint:r,outpaintFetch:i,outpaintFetchList:s,outpaintDeleteItem:l,outpaintDeleteAll:a}}function hke(){const[e,t]=T.useState({x:0,y:0}),[n,r]=T.useState(""),[i,s]=T.useState(""),{sourceImage:l,canvasDimensions:{width:a,height:o},updateImage:c,inputFile:h,fileOriginTab:u,outpaintState:{source:f,result:d,isLoading:p,outpaintId:m},updateOutpaintState:g,updateErrorMessage:v,updateInputFile:_}=pr(),{outpaint:y,outpaintFetch:b,outpaintFetchList:S,outpaintDeleteItem:x,outpaintDeleteAll:C}=uke(),w=z_(),k={backgroundImage:`url(${d||l})`,height:`${o+e.y}px`,width:`${a+e.x}px`,backgroundSize:"contain",backgroundRepeat:"no-repeat",position:"relative",backgroundColor:"white",backgroundPosition:`${n} ${i}`},[I,R]=T.useState([]);T.useEffect(()=>{(async()=>{const X=await S();R(X.filter(N=>N.state==="generated"))})()},[d]),T.useEffect(()=>{let D;const X=async()=>{try{const F=await b(m);F&&(await Lke(F),g({result:F,isLoading:!1,outpaintId:""}),$(),clearInterval(D))}catch(F){v(typeof F=="string"?F:"Error outpainting image"),x(m),g({outpaintId:"",isLoading:!1}),clearInterval(D)}};return m&&!d&&(()=>{X(),D=setInterval(()=>{X()},5e3)})(),()=>{clearInterval(D)}},[m,d]),T.useEffect(()=>{const D=async()=>{const X=h?await W_(h):"",N=X&&typeof X=="string"?X:l;g({source:N,isLoading:!1}),c(N),$()};h&&u===At.OUTPAINTING&&!d&&D()},[h]);const j=D=>D==="left"||D==="right"?!!e.y||!!e.x&&n===D:!!e.x||!!e.y&&i===D,G=D=>X=>{D==="left"||D==="right"?(r(D==="left"?"right":"left"),s("")):(s(D==="top"?"bottom":"top"),r(""));const N=e,F={x:X.pageX,y:X.pageY},z=H=>{t(Ake(N,F,D,H))},L=()=>{document.body.removeEventListener("mousemove",z)};document.body.addEventListener("mousemove",z),document.body.addEventListener("mouseup",L,{once:!0})},B=()=>{e.x+e.y>0?$():(M(),_(null),c(""))},$=()=>{t({x:0,y:0}),r(""),s("")},V=(D,X)=>{switch(X){case"left":return{increaseRight:D.x};case"right":return{increaseLeft:D.x};case"top":return{increaseDown:D.y};case"bottom":return{increaseUp:D.y}}return{}},W=async(D="")=>{try{g({isLoading:!0});const X=await w(f||l);if(!X)throw"Error uploading image to outpaint";const N=V(e,n||i),F=await y(X,D,N);g({outpaintId:F,isLoading:!0})}catch(X){v(typeof X=="string"?X:"Error Outpainting image"),x(m),g({outpaintId:"",isLoading:!1})}},M=()=>{x(m),g({source:"",result:"",isLoading:!1,outpaintId:""})},P=D=>{x(D),R(I.filter(X=>X.id!==D))},O=()=>{C(),R([])},A=D=>{g({source:D.srcImageUrl,result:D.imageUrl})};return E.jsxs(Dr.Root,{onBack:B,history:E.jsx(Dr.History,{historyData:I,removeOne:P,removeAll:O,select:A}),children:[p?E.jsx(Dr.LoadingBar,{icon:E.jsx(p2,{className:" bg-violet-500"}),onCancel:M,children:"Outpainting..."}):E.jsx(NG,{visible:e.x+e.y>0,createImage:W,promptRequired:!1,children:E.jsx(p2,{className:"mr-2"})}),E.jsxs("div",{style:k,className:"ring-1 ring-violet-500",children:[E.jsx("button",{disabled:j("right"),type:"button",onMouseDown:G("right"),className:Fe("absolute -right-[5px] top-1/2 h-5 w-2 rounded border border-gray-500 bg-gray-50",j("right")?"bg-gray-500":"")}),E.jsx("button",{disabled:j("left"),type:"button",onMouseDown:G("left"),className:Fe("absolute -left-[5px] top-1/2 h-5 w-2 rounded border border-gray-500 bg-gray-50",j("left")?"bg-gray-500":"")}),E.jsx("button",{disabled:j("top"),type:"button",onMouseDown:G("top"),className:Fe("absolute -top-[5px] right-1/2 h-2 w-5 rounded border border-gray-500 bg-gray-50",j("top")?"bg-gray-500":"")}),E.jsx("button",{disabled:j("bottom"),type:"button",onMouseDown:G("bottom"),className:Fe("absolute -bottom-[5px] right-1/2 h-2 w-5 rounded border border-gray-500 bg-gray-50",j("bottom")?"bg-gray-500":"")})]})]})}const fke=T.forwardRef(hke);function lD(e,t,n,r,i,s,l){try{var a=e[s](l),o=a.value}catch(c){n(c);return}a.done?t(o):Promise.resolve(o).then(r,i)}function dke(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function l(o){lD(s,r,i,l,a,"next",o)}function a(o){lD(s,r,i,l,a,"throw",o)}l(void 0)})}}function Nl(){return Nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nl.apply(this,arguments)}var jG={exports:{}};(function(e){var t=function(n){var r=Object.prototype,i=r.hasOwnProperty,s,l=typeof Symbol=="function"?Symbol:{},a=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function h(M,P,O){return Object.defineProperty(M,P,{value:O,enumerable:!0,configurable:!0,writable:!0}),M[P]}try{h({},"")}catch{h=function(P,O,A){return P[O]=A}}function u(M,P,O,A){var D=P&&P.prototype instanceof _?P:_,X=Object.create(D.prototype),N=new $(A||[]);return X._invoke=R(M,O,N),X}n.wrap=u;function f(M,P,O){try{return{type:"normal",arg:M.call(P,O)}}catch(A){return{type:"throw",arg:A}}}var d="suspendedStart",p="suspendedYield",m="executing",g="completed",v={};function _(){}function y(){}function b(){}var S={};h(S,a,function(){return this});var x=Object.getPrototypeOf,C=x&&x(x(V([])));C&&C!==r&&i.call(C,a)&&(S=C);var w=b.prototype=_.prototype=Object.create(S);y.prototype=b,h(w,"constructor",b),h(b,"constructor",y),y.displayName=h(b,c,"GeneratorFunction");function k(M){["next","throw","return"].forEach(function(P){h(M,P,function(O){return this._invoke(P,O)})})}n.isGeneratorFunction=function(M){var P=typeof M=="function"&&M.constructor;return P?P===y||(P.displayName||P.name)==="GeneratorFunction":!1},n.mark=function(M){return Object.setPrototypeOf?Object.setPrototypeOf(M,b):(M.__proto__=b,h(M,c,"GeneratorFunction")),M.prototype=Object.create(w),M},n.awrap=function(M){return{__await:M}};function I(M,P){function O(X,N,F,z){var L=f(M[X],M,N);if(L.type==="throw")z(L.arg);else{var H=L.arg,K=H.value;return K&&typeof K=="object"&&i.call(K,"__await")?P.resolve(K.__await).then(function(Z){O("next",Z,F,z)},function(Z){O("throw",Z,F,z)}):P.resolve(K).then(function(Z){H.value=Z,F(H)},function(Z){return O("throw",Z,F,z)})}}var A;function D(X,N){function F(){return new P(function(z,L){O(X,N,z,L)})}return A=A?A.then(F,F):F()}this._invoke=D}k(I.prototype),h(I.prototype,o,function(){return this}),n.AsyncIterator=I,n.async=function(M,P,O,A,D){D===void 0&&(D=Promise);var X=new I(u(M,P,O,A),D);return n.isGeneratorFunction(P)?X:X.next().then(function(N){return N.done?N.value:X.next()})};function R(M,P,O){var A=d;return function(X,N){if(A===m)throw new Error("Generator is already running");if(A===g){if(X==="throw")throw N;return W()}for(O.method=X,O.arg=N;;){var F=O.delegate;if(F){var z=j(F,O);if(z){if(z===v)continue;return z}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(A===d)throw A=g,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);A=m;var L=f(M,P,O);if(L.type==="normal"){if(A=O.done?g:p,L.arg===v)continue;return{value:L.arg,done:O.done}}else L.type==="throw"&&(A=g,O.method="throw",O.arg=L.arg)}}}function j(M,P){var O=M.iterator[P.method];if(O===s){if(P.delegate=null,P.method==="throw"){if(M.iterator.return&&(P.method="return",P.arg=s,j(M,P),P.method==="throw"))return v;P.method="throw",P.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var A=f(O,M.iterator,P.arg);if(A.type==="throw")return P.method="throw",P.arg=A.arg,P.delegate=null,v;var D=A.arg;if(!D)return P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,v;if(D.done)P[M.resultName]=D.value,P.next=M.nextLoc,P.method!=="return"&&(P.method="next",P.arg=s);else return D;return P.delegate=null,v}k(w),h(w,c,"Generator"),h(w,a,function(){return this}),h(w,"toString",function(){return"[object Generator]"});function G(M){var P={tryLoc:M[0]};1 in M&&(P.catchLoc=M[1]),2 in M&&(P.finallyLoc=M[2],P.afterLoc=M[3]),this.tryEntries.push(P)}function B(M){var P=M.completion||{};P.type="normal",delete P.arg,M.completion=P}function $(M){this.tryEntries=[{tryLoc:"root"}],M.forEach(G,this),this.reset(!0)}n.keys=function(M){var P=[];for(var O in M)P.push(O);return P.reverse(),function A(){for(;P.length;){var D=P.pop();if(D in M)return A.value=D,A.done=!1,A}return A.done=!0,A}};function V(M){if(M){var P=M[a];if(P)return P.call(M);if(typeof M.next=="function")return M;if(!isNaN(M.length)){var O=-1,A=function D(){for(;++O<M.length;)if(i.call(M,O))return D.value=M[O],D.done=!1,D;return D.value=s,D.done=!0,D};return A.next=A}}return{next:W}}n.values=V;function W(){return{value:s,done:!0}}return $.prototype={constructor:$,reset:function(M){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(B),!M)for(var P in this)P.charAt(0)==="t"&&i.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=s)},stop:function(){this.done=!0;var M=this.tryEntries[0],P=M.completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(M){if(this.done)throw M;var P=this;function O(z,L){return X.type="throw",X.arg=M,P.next=z,L&&(P.method="next",P.arg=s),!!L}for(var A=this.tryEntries.length-1;A>=0;--A){var D=this.tryEntries[A],X=D.completion;if(D.tryLoc==="root")return O("end");if(D.tryLoc<=this.prev){var N=i.call(D,"catchLoc"),F=i.call(D,"finallyLoc");if(N&&F){if(this.prev<D.catchLoc)return O(D.catchLoc,!0);if(this.prev<D.finallyLoc)return O(D.finallyLoc)}else if(N){if(this.prev<D.catchLoc)return O(D.catchLoc,!0)}else if(F){if(this.prev<D.finallyLoc)return O(D.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(M,P){for(var O=this.tryEntries.length-1;O>=0;--O){var A=this.tryEntries[O];if(A.tryLoc<=this.prev&&i.call(A,"finallyLoc")&&this.prev<A.finallyLoc){var D=A;break}}D&&(M==="break"||M==="continue")&&D.tryLoc<=P&&P<=D.finallyLoc&&(D=null);var X=D?D.completion:{};return X.type=M,X.arg=P,D?(this.method="next",this.next=D.finallyLoc,v):this.complete(X)},complete:function(M,P){if(M.type==="throw")throw M.arg;return M.type==="break"||M.type==="continue"?this.next=M.arg:M.type==="return"?(this.rval=this.arg=M.arg,this.method="return",this.next="end"):M.type==="normal"&&P&&(this.next=P),v},finish:function(M){for(var P=this.tryEntries.length-1;P>=0;--P){var O=this.tryEntries[P];if(O.finallyLoc===M)return this.complete(O.completion,O.afterLoc),B(O),v}},catch:function(M){for(var P=this.tryEntries.length-1;P>=0;--P){var O=this.tryEntries[P];if(O.tryLoc===M){var A=O.completion;if(A.type==="throw"){var D=A.arg;B(O)}return D}}throw new Error("illegal catch attempt")},delegateYield:function(M,P,O){return this.delegate={iterator:V(M),resultName:P,nextLoc:O},this.method==="next"&&(this.arg=s),v}},n}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(jG);var cD=jG.exports,BG=function(t){var n=t.paths,r=t.id,i=t.strokeWidth,s=t.strokeColor,l=t.command,a=l===void 0?UG:l;if(n.length===1){var o=n[0],c=o.x,h=o.y,u=i/2;return T.createElement("circle",{key:r,id:r,cx:c,cy:h,r:u,stroke:s,fill:s})}var f=n.reduce(function(d,p,m,g){return m===0?"M "+p.x+","+p.y:d+" "+a(p,m,g)},"");return T.createElement("path",{key:r,id:r,d:f,fill:"none",strokeLinecap:"round",stroke:s,strokeWidth:i})},pke=function(t,n){var r=n.x-t.x,i=n.y-t.y;return{length:Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),angle:Math.atan2(i,r)}},Lm=function(t){var n=t.current,r=t.next,i=t.previous,s=t.reverse,l=i||n,a=r||n,o=.2,c=pke(l,a),h=c.angle+(s?Math.PI:0),u=c.length*o,f=n.x+Math.cos(h)*u,d=n.y+Math.sin(h)*u;return[f,d]},UG=function(t,n,r){var i=null,s=null;switch(n){case 0:var l=Lm({current:t});i=l[0],s=l[1];break;case 1:var a=Lm({current:r[n-1],next:t});i=a[0],s=a[1];break;default:var o=Lm({current:r[n-1],previous:r[n-2],next:t});i=o[0],s=o[1];break}var c=Lm({current:t,previous:r[n-1],next:r[n+1],reverse:!0}),h=c[0],u=c[1];return"C "+i+","+s+" "+h+","+u+" "+t.x+", "+t.y},gke=function(t){var n=t.id,r=t.paths;return T.createElement(T.Fragment,null,r.map(function(i,s){return T.createElement(BG,{key:n+"__"+s,paths:i.paths,id:n+"__"+s,strokeWidth:i.strokeWidth,strokeColor:i.strokeColor,command:UG})}))},uD=function(t){return new Promise(function(n,r){var i=new Image;i.addEventListener("load",function(){i.width>0&&n(i),r("Image not found")}),i.addEventListener("error",function(s){return r(s)}),i.src=t,i.setAttribute("crossorigin","anonymous")})};function hD(e){var t,n=(t=e.firstChild)==null?void 0:t.cloneNode(!0),r=e.offsetWidth,i=e.offsetHeight;return n.setAttribute("viewBox","0 0 "+r+" "+i),n.setAttribute("width",r.toString()),n.setAttribute("height",i.toString()),{svgCanvas:n,width:r,height:i}}var mke=T.forwardRef(function(e,t){var n=e.paths,r=e.isDrawing,i=e.onPointerDown,s=e.onPointerMove,l=e.onPointerUp,a=e.id,o=a===void 0?"react-sketch-canvas":a,c=e.width,h=c===void 0?"100%":c,u=e.height,f=u===void 0?"100%":u,d=e.className,p=d===void 0?"react-sketch-canvas":d,m=e.canvasColor,g=m===void 0?"red":m,v=e.backgroundImage,_=v===void 0?"":v,y=e.exportWithBackgroundImage,b=y===void 0?!1:y,S=e.preserveBackgroundImageAspectRatio,x=S===void 0?"none":S,C=e.allowOnlyPointerType,w=C===void 0?"all":C,k=e.style,I=k===void 0?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:k,R=e.svgStyle,j=R===void 0?{}:R,G=T.useRef(null),B=function(D){var X,N,F,z=(X=G.current)==null?void 0:X.getBoundingClientRect(),L=(N=window.scrollX)!=null?N:0,H=(F=window.scrollY)!=null?F:0;if(!z)return{x:0,y:0};var K={x:D.pageX-z.left-L,y:D.pageY-z.top-H};return K},$=function(D){if(!(w!=="all"&&D.pointerType!==w)&&!(D.pointerType==="mouse"&&D.button!==0)){var X=B(D);i(X)}},V=function(D){if(r&&!(w!=="all"&&D.pointerType!==w)){var X=B(D);s(X)}},W=function(D){D.pointerType==="mouse"&&D.button!==0||w!=="all"&&D.pointerType!==w||l()};T.useImperativeHandle(t,function(){return{exportImage:function(D){return new Promise(function(){var X=dke(cD.mark(function N(F,z){var L,H,K,Z,ee,ae,te,J;return cD.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(ie.prev=0,L=G.current,L){ie.next=4;break}throw Error("Canvas not rendered yet");case 4:return H=hD(L),K=H.svgCanvas,Z=H.width,ee=H.height,ae="data:image/svg+xml;base64,"+btoa(K.outerHTML),ie.next=8,uD(ae);case 8:if(ie.t0=ie.sent,te=[ie.t0],!b){ie.next=21;break}return ie.prev=11,ie.next=14,uD(_);case 14:J=ie.sent,te.push(J),ie.next=21;break;case 18:ie.prev=18,ie.t1=ie.catch(11),console.warn("exportWithBackgroundImage props is set without a valid background image URL. This option is ignored");case 21:Promise.all(te).then(function(re){var he=document.createElement("canvas");he.setAttribute("width",Z.toString()),he.setAttribute("height",ee.toString());var fe=he.getContext("2d");if(!fe)throw Error("Canvas not rendered yet");re.reverse().forEach(function(be){fe.drawImage(be,0,0)}),F(he.toDataURL("image/"+D))}).catch(function(re){throw re}),ie.next=27;break;case 24:ie.prev=24,ie.t2=ie.catch(0),z(ie.t2);case 27:case"end":return ie.stop()}},N,null,[[0,24],[11,18]])}));return function(N,F){return X.apply(this,arguments)}}())},exportSvg:function(){return new Promise(function(D,X){try{var N,F=(N=G.current)!=null?N:null;if(F!==null){var z,L,H=hD(F),K=H.svgCanvas;if(b){D(K.outerHTML);return}(z=K.querySelector("#"+o+"__background"))==null||z.remove(),(L=K.querySelector("#"+o+"__canvas-background"))==null||L.setAttribute("fill",g),D(K.outerHTML)}X(new Error("Canvas not loaded"))}catch(Z){X(Z)}})}}}),T.useEffect(function(){return document.addEventListener("pointerup",W),function(){document.removeEventListener("pointerup",W)}},[W]);var M=n.filter(function(A){return!A.drawMode}),P=0,O=n.reduce(function(A,D){return D.drawMode?(A[P]===void 0&&(A[P]=[]),A[P].push(D),A):(P+=1,A)},[[]]);return T.createElement("div",{role:"presentation",ref:G,className:p,style:Nl({touchAction:"none",width:h,height:f},I),"touch-action":"none",onPointerDown:$,onPointerMove:V,onPointerUp:W},T.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:Nl({width:"100%",height:"100%"},j),id:o},T.createElement("g",{id:o+"__eraser-stroke-group",display:"none"},T.createElement("rect",{id:o+"__mask-background",x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),M.map(function(A,D){return T.createElement(BG,{key:o+"__eraser-"+D,id:o+"__eraser-"+D,paths:A.paths,strokeColor:"#000000",strokeWidth:A.strokeWidth})})),T.createElement("defs",null,_&&T.createElement("pattern",{id:o+"__background",x:"0",y:"0",width:"100%",height:"100%",patternUnits:"userSpaceOnUse"},T.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",xlinkHref:_,preserveAspectRatio:x})),M.map(function(A,D){return T.createElement("mask",{id:o+"__eraser-mask-"+D,key:o+"__eraser-mask-"+D,maskUnits:"userSpaceOnUse"},T.createElement("use",{href:"#"+o+"__mask-background"}),Array.from({length:M.length-D},function(X,N){return N+D}).map(function(X){return T.createElement("use",{key:X.toString(),href:"#"+o+"__eraser-"+X.toString()})}))})),T.createElement("g",{id:o+"__canvas-background-group"},T.createElement("rect",{id:o+"__canvas-background",x:"0",y:"0",width:"100%",height:"100%",fill:_?"url(#"+o+"__background)":g})),O.map(function(A,D){return T.createElement("g",{id:o+"__stroke-group-"+D,key:o+"__stroke-group-"+D,mask:"url(#"+o+"__eraser-mask-"+D+")"},T.createElement(gke,{id:o,paths:A}))})))}),vke=T.forwardRef(function(e,t){var n=e.id,r=n===void 0?"react-sketch-canvas":n,i=e.width,s=i===void 0?"100%":i,l=e.height,a=l===void 0?"100%":l,o=e.className,c=o===void 0?"":o,h=e.canvasColor,u=h===void 0?"white":h,f=e.strokeColor,d=f===void 0?"red":f,p=e.backgroundImage,m=p===void 0?"":p,g=e.exportWithBackgroundImage,v=g===void 0?!1:g,_=e.preserveBackgroundImageAspectRatio,y=_===void 0?"none":_,b=e.strokeWidth,S=b===void 0?4:b,x=e.eraserWidth,C=x===void 0?8:x,w=e.allowOnlyPointerType,k=w===void 0?"all":w,I=e.style,R=I===void 0?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:I,j=e.svgStyle,G=j===void 0?{}:j,B=e.onChange,$=B===void 0?function(be){}:B,V=e.onStroke,W=V===void 0?function(be,pe){}:V,M=e.withTimestamp,P=M===void 0?!1:M,O=T.createRef(),A=T.useState(!0),D=A[0],X=A[1],N=T.useState(!1),F=N[0],z=N[1],L=T.useState([]),H=L[0],K=L[1],Z=T.useState([]),ee=Z[0],ae=Z[1],te=T.useState([]),J=te[0],ne=te[1],ie=T.useCallback(function(){var be,pe,se=(be=(pe=J.slice(-1))==null?void 0:pe[0])!=null?be:null;if(se===null){console.warn("No stroke found!");return}W(se,!se.drawMode)},[F]);T.useEffect(function(){ie()},[F]),T.useEffect(function(){$(J)},[J]),T.useImperativeHandle(t,function(){return{eraseMode:function(pe){X(!pe)},clearCanvas:function(){K([].concat(J)),ne([])},undo:function(){if(H.length!==0){ne([].concat(H)),K([]);return}ae(function(pe){return[].concat(pe,J.slice(-1))}),ne(function(pe){return pe.slice(0,-1)})},redo:function(){ee.length!==0&&(ne(function(pe){return[].concat(pe,ee.slice(-1))}),ae(function(pe){return pe.slice(0,-1)}))},exportImage:function(pe){var se,me=(se=O.current)==null?void 0:se.exportImage;if(me)return me(pe);throw Error("Export function called before canvas loaded")},exportSvg:function(){return new Promise(function(pe,se){var me,Re=(me=O.current)==null?void 0:me.exportSvg;Re?Re().then(function(ze){pe(ze)}).catch(function(ze){se(ze)}):se(Error("Export function called before canvas loaded"))})},exportPaths:function(){return new Promise(function(pe,se){try{pe(J)}catch(me){se(me)}})},loadPaths:function(pe){ne(function(se){return[].concat(se,pe)})},getSketchingTime:function(){return new Promise(function(pe,se){P||se(new Error("Set 'withTimestamp' prop to get sketching time"));try{var me=J.reduce(function(Re,ze){var _t,st,tn=(_t=ze.startTimestamp)!=null?_t:0,Ut=(st=ze.endTimestamp)!=null?st:0;return Re+(Ut-tn)},0);pe(me)}catch(Re){se(Re)}})},resetCanvas:function(){K([]),ae([]),ne([])}}});var re=function(pe){z(!0),ae([]);var se={drawMode:D,strokeColor:D?d:"#000000",strokeWidth:D?S:C,paths:[pe]};P&&(se=Nl({},se,{startTimestamp:Date.now(),endTimestamp:0})),ne(function(me){return[].concat(me,[se])})},he=function(pe){if(F){var se=J.slice(-1)[0],me=Nl({},se,{paths:[].concat(se.paths,[pe])});ne(function(Re){return[].concat(Re.slice(0,-1),[me])})}},fe=function(){var pe,se;if(F&&(z(!1),!!P)){var me=(pe=(se=J.slice(-1))==null?void 0:se[0])!=null?pe:null;if(me!==null){var Re=Nl({},me,{endTimestamp:Date.now()});ne(function(ze){return[].concat(ze.slice(0,-1),[Re])})}}};return T.createElement(mke,{ref:O,id:r,width:s,height:a,className:c,canvasColor:u,backgroundImage:m,exportWithBackgroundImage:v,preserveBackgroundImageAspectRatio:y,allowOnlyPointerType:k,style:R,svgStyle:G,paths:J,isDrawing:F,onPointerDown:re,onPointerMove:he,onPointerUp:fe})});function yke(){const{mutateAsync:e}=uP(),{mutateAsync:t}=dP(),{mutateAsync:n}=pP();async function r(o,c,h){return new Promise((u,f)=>{async function d(){var v,_,y,b;const p=await e({input:{imageUrl:o,inpaintAreaImageUrl:c,prompt:h}}),{errors:m}=(p==null?void 0:p.sparkInpaintImage)??{};if(m!=null&&m.length){f(m);return}if(((_=(v=p==null?void 0:p.sparkInpaintImage)==null?void 0:v.inpaint)==null?void 0:_.state)==="failed"){f(yD);return}const g=(b=(y=p==null?void 0:p.sparkInpaintImage)==null?void 0:y.inpaint)==null?void 0:b.id;g&&u(g)}d()})}async function i(o){return new Promise((c,h)=>{function u(f){Wp.fetcher({input:{id:f}})().then(({sparkInpaintGet:d})=>{var m;if(((m=d.inpaint)==null?void 0:m.state)==="failed"){h(yD);return}const{imageUrl:p}=(d==null?void 0:d.inpaint)??{};c(p||"")}).catch(d=>{h(d)})}u(o)})}async function s(){return new Promise((o,c)=>{async function h(){var d;const u=await Yp.fetcher({input:{currentPage:1,itemsPerPage:30}})(),{errors:f}=(u==null?void 0:u.sparkInpaintList)??{};f!=null&&f.length&&c(f),o(((d=u==null?void 0:u.sparkInpaintList)==null?void 0:d.list)||[])}h()})}async function l(o){return new Promise((c,h)=>{async function u(){const f=await t({input:{id:o}}),{errors:d}=(f==null?void 0:f.sparkInpaintDelete)??{};d!=null&&d.length&&h(d),c()}u()})}async function a(){return new Promise((o,c)=>{async function h(){const u=await n({}),{errors:f}=(u==null?void 0:u.sparkInpaintDeleteAll)??{};f!=null&&f.length&&c(f),o()}h()})}return{inpaint:r,inpaintFetch:i,inpaintFetchList:s,inpaintDeleteItem:l,inpaintDeleteAll:a}}function _ke(){const[e,t]=T.useState(!1),{sourceImage:n,updateImage:r,canvasDimensions:{width:i,height:s},brushSize:l,inputFile:a,fileOriginTab:o,inpaintState:{source:c,result:h,isLoading:u,inpaintId:f},updateInpaintState:d,updateInputFile:p,updateErrorMessage:m}=pr(),{inpaint:g,inpaintFetch:v,inpaintFetchList:_,inpaintDeleteItem:y,inpaintDeleteAll:b}=yke(),S=z_(),x=T.useRef(null),w={cursor:kke(l)},[k,I]=T.useState([]);T.useEffect(()=>{(async()=>{const P=await _();I(P.filter(O=>O.state==="generated"))})()},[h]),T.useEffect(()=>{let M;const P=async()=>{try{const A=await v(f);A&&(d({result:A,isLoading:!1,inpaintId:""}),clearInterval(M))}catch(A){m(typeof A=="string"?A:"Error inpainting image"),y(f),d({inpaintId:"",isLoading:!1}),clearInterval(M)}};return f&&!h&&(()=>{P(),M=setInterval(()=>{P()},5e3)})(),()=>{clearInterval(M)}},[f,h]),T.useEffect(()=>{const M=async()=>{const P=a?await W_(a):"",O=P&&typeof P=="string"?P:n;d({source:O,isLoading:!1}),r(O)};a&&o===At.INPAINTING&&!h&&M()},[a]);const R=async()=>{var P,O;const M=((O=await((P=x.current)==null?void 0:P.exportPaths()))==null?void 0:O.length)||0;t(M>0)};T.useEffect(()=>{const M=document.getElementById("react-sketch-canvas__stroke-group-0");return M==null||M.addEventListener("mouseup",R),()=>{M==null||M.removeEventListener("mouseup",R)}});const j=async()=>{var P,O,A;(((O=await((P=x.current)==null?void 0:P.exportPaths()))==null?void 0:O.length)||0)>0?(A=x.current)==null||A.undo():(B(),p(null),r("")),setTimeout(R,0)},G=async M=>{var P,O;try{d({isLoading:!0});const A=await((P=x.current)==null?void 0:P.exportImage("png"));if(A&&(c||n)){const D=await Mke(A),[X,N]=await Promise.all([S(D),S(c||n)]),F=await g(N,X,M);(O=x.current)==null||O.clearCanvas(),d({inpaintId:F,isLoading:!0})}}catch(A){m(typeof A=="string"?A:"Error Inpainting image"),y(f),d({inpaintId:"",isLoading:!1})}},B=()=>{y(f),d({source:"",result:"",isLoading:!1,inpaintId:""})},$=M=>{y(M),I(k.filter(P=>P.id!==M))},V=()=>{b(),I([])},W=M=>{d({source:M.srcImageUrl,result:M.imageUrl})};return E.jsxs(Dr.Root,{onBack:j,history:E.jsx(Dr.History,{historyData:k,removeOne:$,removeAll:V,select:W}),children:[u?E.jsx(Dr.LoadingBar,{icon:E.jsx(g2,{className:" bg-violet-500"}),onCancel:B,children:"Inpainting..."}):E.jsx(NG,{visible:e,createImage:G,children:E.jsx(g2,{className:"mr-2"})}),E.jsx("div",{className:"flex h-full w-full items-center justify-center",children:E.jsxs("div",{style:{width:i,height:s},className:"absolute",children:[E.jsx(vke,{ref:x,style:w,width:`${i}px`,height:`${s}px`,strokeWidth:l,strokeColor:"white",canvasColor:"transparent",className:Fe("pointer absolute left-0 top-0 z-10 [&>svg>g:nth-child(4)>path]:stroke-violet-500 [&>svg>g:nth-child(4)]:opacity-50",u&&"pointer-events-none")}),E.jsx("img",{className:Fe("absolute left-0 top-0",u&&"pointer-events-none"),src:h||n,alt:"source",height:s,width:i})]})})]})}const bke=T.forwardRef(_ke),Ske="/assets/cartoon-73a9fbc4.png",xke="/assets/coloring-982f0ccf.png",wke="/assets/illustration-49363324.png",Cke="/assets/kawaii-c61a9ba6.png",Tke="/assets/painting-d0c42b0e.png",Eke="/assets/photograph-5a92203e.png",Pke="/assets/realistic-b5f87f8c.png",Ike="/assets/watercolor-df61830f.png",At={INPAINTING:0,OUTPAINTING:1,BACKGROUND_REMOVER:2,IMAGE_MIX:3,IMAGE_GENERATION:4,ELEMENT_GENERATION:5},fD=At.ELEMENT_GENERATION,Fm=750,dD=25,pD=10,gD=50,$G=[{id:"inpainting",label:"Inpainting",Component:bke,Icon:g2,fullBar:!0},{id:"outpainting",label:"Outpainting",Component:fke,Icon:p2,fullBar:!0},{id:"backgroundRemover",label:"Bg. Remover",Component:ZOe,Icon:u2,fullBar:!0},{id:"imageMix",label:"ImageMix",Component:nke,Icon:Av,fullBar:!0},{id:"imageGeneration",label:"Generate image",Component:ZIe,Icon:Uve},{id:"crystalline",label:"Free text",Component:V4e,Icon:Bve}],mD=["Art Nouveau painting of a female botanist surrounded by exotic plants in a greenhouse","Gothic painting of an ancient castle at night, with a full moon, gargoyles, and shadows","Macro photography of dewdrops on a spiderweb, with morning sunlight creating rainbows","Underwater photography of a coral reef, with diverse marine life and a scuba diver for scale","Renaissance-style painting of a floating island, detailed sea, palm trees","Renaissance-style painting of a king crown, highly detailed","Surrealist painting of a cow with giant horns, surrounded by mythical creatures","Romantic painting of santa claus sitting on a roof, with dramatic lighting","Baroque-style phone","Macro photography of a snowflake","Impressionist landscape of a highly detailed autumn leave"],Nm=[{key:"illustration",name:"Illustration",image:wke},{key:"painting",name:"Painting",image:Tke},{key:"coloring page black and white",name:"Coloring",image:xke},{key:"watercolor",name:"Watercolor",image:Ike},{key:"photograph",name:"Photograph",image:Eke},{key:"kawaii chibi",name:"Kawaii",image:Cke},{key:"cartoon",name:"Cartoon",image:Ske},{key:"hyper realistic, intricate detail",name:"Hyper realistic",image:Pke}],w0=[{id:_i.Square,name:"Square (1:1)",Icon:Ove},{id:_i.Portrait_3_4,name:"Portrait (3:4)",Icon:kve},{id:_i.Portrait_9_16,name:"Portrait (9:16)",Icon:Ave},{id:_i.Landscape_4_3,name:"Landscape (4:3)",Icon:Rve},{id:_i.Landscape_16_9,name:"Landscape (16:9)",Icon:Dve}],KS="Failed to remove background. Please try again later or select a different source image.",vD="Failed to generate Image Mix variants. Please try again later or select a different source image.",yD="Failed to Inpaint image. Please try again later or select a different source image.",_D="Failed to OutpaintImage. Please try again later or select a different source image.",iy=4e3;function sy(){return mD[Math.floor(Math.random()*mD.length)]}function B6e(e){return $G[e].fullBar}function Oke(e,t){return new Promise((n,r)=>{const i=new Image;i.onload=()=>{const{width:s,height:l}=i;let a,o;s>l?(a=Fm,o=l/s*Fm):(o=Fm,a=s/l*Fm),n({width:a*t,height:o*t})},i.onerror=r,i.src=e})}function kke(e){return`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${e}'><circle cx='${e/2}' cy='${e/2}' r='${e/2-2}' fill='rgba(133,89,249,0.4)' stroke='white' stroke-width='2' /></svg>") ${e/2} ${e/2}, auto`}function Ake(e,t,n,r){let i;return n==="left"||n==="right"?i={x:Math.min(Math.max(n==="right"?e.x-t.x+r.pageX:e.x+(t.x-r.pageX),0),512),y:e.y}:i={x:e.x,y:Math.min(Math.max(n==="bottom"?e.y-t.y+r.pageY:e.y+(t.y-r.pageY),0),512)},i}function W_(e){return new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=n})}function Rke(e,t){const n=e.width,r=e.height,i=document.createElement("canvas"),s=i.getContext("2d"),l=e.getContext("2d");s&&l&&(i.width=n,i.height=r,s.drawImage(e,0,0),e.width*=t,e.height*=t,l.drawImage(i,0,0,n,r,0,0,n*t,r*t))}function Dke(e){const t=new Image;t.crossOrigin="Anonymous",t.src=e.src,t.onload=()=>{const n=document.createElement("canvas");n.id=e.id;const r=n.getContext("2d");if(!r)throw new Error("Unable to get canvas context");n.width=t.width,n.height=t.height,r.drawImage(t,0,0);const i=e.width/t.width;Rke(n,i);const l=r.getImageData(0,0,n.width,n.height).data;let a=n.width,o=n.height,c=0,h=0;for(let y=0;y<n.width;y++)for(let b=0;b<n.height;b++){const S=(b*n.width+y)*4;l[S+3]>0&&(y<a&&(a=y),b<o&&(o=b),y>c&&(c=y),b>h&&(h=b))}const u=c-a+1,f=u/n.width,d=h-o+1,p=d/n.height,m=e.x+a,g=e.y+o,v=a/n.width,_=o/n.height;e.set({height:d,width:u,cropX:v,cropY:_,cropWidth:f,cropHeight:p,x:m,y:g})}}function Mke(e){return new Promise((t,n)=>{const r=new Image;r.onload=function(){const i=document.createElement("canvas"),s=i.getContext("2d");s&&(i.width=r.width,i.height=r.height,s.fillStyle="black",s.fillRect(0,0,i.width,i.height),s.drawImage(r,0,0),t(i.toDataURL()))},r.onerror=function(i){n(i)},r.src=e})}function Lke(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>t(),r.onerror=n,r.src=e})}function bD(e){return new Promise((t,n)=>{const r=new Image;r.onload=function(){t(r.width<iy&&r.height<iy)},r.onerror=n,r.src=URL.createObjectURL(e)})}const Fke="Renaissance-style portrait of an astronaut in space, detailed starry background, reflective helmet",Nke="White Background with border of glitter, sparkles, shimmer, Christmas theme, Centered Vector, highly detailed matte render, contrast, ultra detailed, cinematic lighting, beautiful lighting,  beautiful, dreamy, vivid, colorful, high definition, 8k resolution",SD=["inpainting","outpainting","removebg","imagemix","art","crystalline"],xD={prompt:"",isLoading:!1,result:""},wD={prompt:"",isLoading:!1,result:""},jke={previousPrompt:"",prompt:{value:Nke,dirty:!1},status:"prompt",style:[],results:[]},Bke={previousPrompt:"",prompt:{value:Fke,dirty:!1},status:"prompt",results:[]},Gs={sourceImage:"spark-source-image",backgroundRemovalState:"spark-background-removal-state",selectedTab:"spark-selected-tab",brushSize:"spark-brush-size",inputFile:"spark-file",crystallineState:"spark-crystallyne-state",artState:"spark-art-state",imageMixState:"spark-image-mix-state",inpaintState:"spark-inpaint-state",outpaintState:"spark-outpaint-state"},CD=()=>{Object.values(Gs).forEach(e=>sessionStorage.removeItem(e))},GG=T.createContext(null);function U6e({children:e}){var H,K;const{activeBar:t}=FE(),n=z3(t)&&((H=t.state)==null?void 0:H.image),r=z3(t)&&((K=t.state)==null?void 0:K.tab),[i,s]=ds(Gs.sourceImage,n,!!n),[l,a]=ds(Gs.backgroundRemovalState,{result:"",isLoading:!1,source:r===At.BACKGROUND_REMOVER?i:""},!!n),[o,c]=ds(Gs.imageMixState,{result:"",isLoading:!1,source:r===At.IMAGE_MIX?i:"",imageMixId:""},!!n),[h,u]=ds(Gs.inpaintState,{...xD,source:r===At.IMAGE_MIX?i:""},!!n),[f,d]=ds(Gs.outpaintState,{...wD,source:r===At.OUTPAINTING?i:""},!!n),[p,m]=ds(Gs.selectedTab,r||fD,!0),[g,v]=T.useState(dD),[_,y]=T.useState({width:0,height:0}),[b,S]=T.useState(1),[x,C]=T.useState(null),[w,k]=T.useState(null),[I,R]=ds(Gs.crystallineState,Bke),[j,G]=ds(Gs.artState,jke),[B,$]=T.useState(!1),[V,W]=T.useState("");T.useEffect(()=>{n&&s(n),typeof r=="number"&&m(r)},[n,r]),T.useEffect(()=>{const ee=new URLSearchParams(window.location.search).get("tab");if(ee&&new Set(SD).has(ee)){const ae=new URL(window.location.href),te=kv(ae,["tab"]);GN(te),m(SD.indexOf(ee))}},[m]),T.useEffect(()=>{y({width:0,height:0}),(async()=>{let ee;switch(p){case At.INPAINTING:ee=(h==null?void 0:h.result)||(h==null?void 0:h.source)||i;break;case At.OUTPAINTING:ee=(f==null?void 0:f.result)||(f==null?void 0:f.source)||i;break;case At.IMAGE_MIX:ee=(o==null?void 0:o.result)||(o==null?void 0:o.source)||i;break;case At.BACKGROUND_REMOVER:ee=(l==null?void 0:l.result)||(l==null?void 0:l.source)||i;break;default:ee=i}if(ee){const{width:ae,height:te}=await Oke(ee,b);y({width:ae,height:te})}})()},[i,b,o==null?void 0:o.result,l==null?void 0:l.result,h==null?void 0:h.result,f==null?void 0:f.result,o==null?void 0:o.source,l==null?void 0:l.source,h==null?void 0:h.source,f==null?void 0:f.source,p]);const M=T.useCallback(()=>{b<1.5&&S(b+.1)},[b]),P=T.useCallback(()=>{b>.5&&S(b-.1)},[b]),O=T.useCallback(()=>{s(""),a({result:"",isLoading:!1}),C(null),k(null),S(1),y({width:0,height:0}),sessionStorage.clear(),v(dD),m(fD),c({resultImage:"",isLoading:!1}),$(!1),u({...xD,source:""}),d({...wD,source:""}),W("")},[s,a,C,S,y,v,m,c,u,d]),A=T.useCallback(Z=>{R({...I,...Z})},[I,R]),D=T.useCallback(Z=>{G({...j,...Z})},[j,G]),X=T.useCallback(Z=>{u({...h,...Z})},[h,u]),N=T.useCallback(Z=>{d({...f,...Z})},[f,d]),F=T.useCallback(Z=>{a({...l,...Z})},[l,a]),z=T.useCallback(Z=>{c({...o,...Z})},[o,c]),L=T.useMemo(()=>({sourceImage:i,selectedTab:p,canvasDimensions:_,brushSize:g,inputFile:x,fileOriginTab:w,crystallineState:I,artState:j,inpaintState:h,outpaintState:f,imageMixState:o,backgroundRemovalState:l,updateImage:s,updateBackgroundRemovalState:F,updateSelectedTab:m,updateBrushSize:v,updateInputFile:C,updateFileOriginTab:k,zoomIn:M,zoomOut:P,clear:O,updateCrystallineState:A,updateArtState:D,updateInpaintState:X,updateOutpaintState:N,updateImageMixState:z,isImageMixing:B,updateIsImageMixing:$,errorMessage:V,updateErrorMessage:W}),[i,p,_,g,x,w,I,j,o,M,P,O,A,D,z,s,m,v,C,l,F,B,X,h,N,f,V]);return E.jsx(GG.Provider,{value:L,children:T.useMemo(()=>e,[e])})}const pr=()=>{const e=T.useContext(GG);if(!e)throw new Error("`useSparkAi` must be used within a <SparkAiContextProvider /> component");return e};function Ar(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function Sl(e){return Ar(e)==="object"}function Uke(e){return Array.isArray(e)&&e.length>0&&e.every(t=>"message"in t)}function TD(e,t){return e.length<124?e:t}const $ke="graphql-transport-ws";var Vr;(function(e){e[e.InternalServerError=4500]="InternalServerError",e[e.InternalClientError=4005]="InternalClientError",e[e.BadRequest=4400]="BadRequest",e[e.BadResponse=4004]="BadResponse",e[e.Unauthorized=4401]="Unauthorized",e[e.Forbidden=4403]="Forbidden",e[e.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",e[e.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",e[e.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",e[e.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",e[e.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(Vr||(Vr={}));var wn;(function(e){e.ConnectionInit="connection_init",e.ConnectionAck="connection_ack",e.Ping="ping",e.Pong="pong",e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete"})(wn||(wn={}));function VG(e){if(!Sl(e))throw new Error(`Message is expected to be an object, but got ${Ar(e)}`);if(!e.type)throw new Error("Message is missing the 'type' property");if(typeof e.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${Ar(e.type)}`);switch(e.type){case wn.ConnectionInit:case wn.ConnectionAck:case wn.Ping:case wn.Pong:{if(e.payload!=null&&!Sl(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${e.payload}"`);break}case wn.Subscribe:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${Ar(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Sl(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${Ar(e.payload)}`);if(typeof e.payload.query!="string")throw new Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${Ar(e.payload.query)}`);if(e.payload.variables!=null&&!Sl(e.payload.variables))throw new Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${Ar(e.payload.variables)}`);if(e.payload.operationName!=null&&Ar(e.payload.operationName)!=="string")throw new Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${Ar(e.payload.operationName)}`);if(e.payload.extensions!=null&&!Sl(e.payload.extensions))throw new Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${Ar(e.payload.extensions)}`);break}case wn.Next:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${Ar(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Sl(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${Ar(e.payload)}`);break}case wn.Error:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${Ar(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Uke(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break}case wn.Complete:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${Ar(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${e.type}"`)}return e}function Gke(e,t){return VG(typeof e=="string"?JSON.parse(e,t):e)}function Ff(e,t){return VG(e),JSON.stringify(e,t)}var Gu=globalThis&&globalThis.__await||function(e){return this instanceof Gu?(this.v=e,this):new Gu(e)},Vke=globalThis&&globalThis.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i;function l(f){r[f]&&(i[f]=function(d){return new Promise(function(p,m){s.push([f,d,p,m])>1||a(f,d)})})}function a(f,d){try{o(r[f](d))}catch(p){u(s[0][3],p)}}function o(f){f.value instanceof Gu?Promise.resolve(f.value.v).then(c,h):u(s[0][2],f)}function c(f){a("next",f)}function h(f){a("throw",f)}function u(f,d){f(d),s.shift(),s.length&&a(s[0][0],s[0][1])}};function Hke(e){const{url:t,connectionParams:n,lazy:r=!0,onNonLazyError:i=console.error,lazyCloseTimeout:s=0,keepAlive:l=0,disablePong:a,connectionAckWaitTimeout:o=0,retryAttempts:c=5,retryWait:h=async function($){let V=1e3;for(let W=0;W<$;W++)V*=2;await new Promise(W=>setTimeout(W,V+Math.floor(Math.random()*(3e3-300)+300)))},shouldRetry:u=jm,isFatalConnectionProblem:f,on:d,webSocketImpl:p,generateID:m=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,$=>{const V=Math.random()*16|0;return($=="x"?V:V&3|8).toString(16)})},jsonMessageReplacer:g,jsonMessageReviver:v}=e;let _;if(p){if(!Wke(p))throw new Error("Invalid WebSocket implementation provided");_=p}else typeof WebSocket<"u"?_=WebSocket:typeof global<"u"?_=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(_=window.WebSocket||window.MozWebSocket);if(!_)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const y=_,b=(()=>{const B=(()=>{const V={};return{on(W,M){return V[W]=M,()=>{delete V[W]}},emit(W){var M;"id"in W&&((M=V[W.id])===null||M===void 0||M.call(V,W))}}})(),$={connecting:d!=null&&d.connecting?[d.connecting]:[],opened:d!=null&&d.opened?[d.opened]:[],connected:d!=null&&d.connected?[d.connected]:[],ping:d!=null&&d.ping?[d.ping]:[],pong:d!=null&&d.pong?[d.pong]:[],message:d!=null&&d.message?[B.emit,d.message]:[B.emit],closed:d!=null&&d.closed?[d.closed]:[],error:d!=null&&d.error?[d.error]:[]};return{onMessage:B.on,on(V,W){const M=$[V];return M.push(W),()=>{M.splice(M.indexOf(W),1)}},emit(V,...W){for(const M of[...$[V]])M(...W)}}})();function S(B){const $=[b.on("error",V=>{$.forEach(W=>W()),B(V)}),b.on("closed",V=>{$.forEach(W=>W()),B(V)})]}let x,C=0,w,k=!1,I=0,R=!1;async function j(){clearTimeout(w);const[B,$]=await(x??(x=new Promise((M,P)=>(async()=>{if(k){if(await h(I),!C)return x=void 0,P({code:1e3,reason:"All Subscriptions Gone"});I++}b.emit("connecting");const O=new y(typeof t=="function"?await t():t,$ke);let A,D;function X(){isFinite(l)&&l>0&&(clearTimeout(D),D=setTimeout(()=>{O.readyState===y.OPEN&&(O.send(Ff({type:wn.Ping})),b.emit("ping",!1,void 0))},l))}S(F=>{x=void 0,clearTimeout(A),clearTimeout(D),P(F),jm(F)&&F.code===4499&&(O.close(4499,"Terminated"),O.onerror=null,O.onclose=null)}),O.onerror=F=>b.emit("error",F),O.onclose=F=>b.emit("closed",F),O.onopen=async()=>{try{b.emit("opened",O);const F=typeof n=="function"?await n():n;if(O.readyState!==y.OPEN)return;O.send(Ff(F?{type:wn.ConnectionInit,payload:F}:{type:wn.ConnectionInit},g)),isFinite(o)&&o>0&&(A=setTimeout(()=>{O.close(Vr.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},o)),X()}catch(F){b.emit("error",F),O.close(Vr.InternalClientError,TD(F instanceof Error?F.message:new Error(F).message,"Internal client error"))}};let N=!1;O.onmessage=({data:F})=>{try{const z=Gke(F,v);if(b.emit("message",z),z.type==="ping"||z.type==="pong"){b.emit(z.type,!0,z.payload),z.type==="pong"?X():a||(O.send(Ff(z.payload?{type:wn.Pong,payload:z.payload}:{type:wn.Pong})),b.emit("pong",!1,z.payload));return}if(N)return;if(z.type!==wn.ConnectionAck)throw new Error(`First message cannot be of type ${z.type}`);clearTimeout(A),N=!0,b.emit("connected",O,z.payload),k=!1,I=0,M([O,new Promise((L,H)=>S(H))])}catch(z){O.onmessage=null,b.emit("error",z),O.close(Vr.BadResponse,TD(z instanceof Error?z.message:new Error(z).message,"Bad response"))}}})())));B.readyState===y.CLOSING&&await $;let V=()=>{};const W=new Promise(M=>V=M);return[B,V,Promise.race([W.then(()=>{if(!C){const M=()=>B.close(1e3,"Normal Closure");isFinite(s)&&s>0?w=setTimeout(()=>{B.readyState===y.OPEN&&M()},s):M()}}),$])]}function G(B){if(jm(B)&&(zke(B.code)||[Vr.InternalServerError,Vr.InternalClientError,Vr.BadRequest,Vr.BadResponse,Vr.Unauthorized,Vr.SubprotocolNotAcceptable,Vr.SubscriberAlreadyExists,Vr.TooManyInitialisationRequests].includes(B.code)))throw B;if(R)return!1;if(jm(B)&&B.code===1e3)return C>0;if(!c||I>=c||!u(B)||f!=null&&f(B))throw B;return k=!0}return r||(async()=>{for(C++;;)try{const[,,B]=await j();await B}catch(B){try{if(!G(B))return}catch($){return i==null?void 0:i($)}}})(),{on:b.on,subscribe(B,$){const V=m(B);let W=!1,M=!1,P=()=>{C--,W=!0};return(async()=>{for(C++;;)try{const[O,A,D]=await j();if(W)return A();const X=b.onMessage(V,N=>{switch(N.type){case wn.Next:{$.next(N.payload);return}case wn.Error:{M=!0,W=!0,$.error(N.payload),P();return}case wn.Complete:{W=!0,P();return}}});O.send(Ff({id:V,type:wn.Subscribe,payload:B},g)),P=()=>{!W&&O.readyState===y.OPEN&&O.send(Ff({id:V,type:wn.Complete},g)),C--,W=!0,A()},await D.finally(X);return}catch(O){if(!G(O))return}})().then(()=>{M||$.complete()}).catch(O=>{$.error(O)}),()=>{W||P()}},iterate(B){const $=[],V={done:!1,error:null,resolve:()=>{}},W=this.subscribe(B,{next(P){$.push(P),V.resolve()},error(P){V.done=!0,V.error=P,V.resolve()},complete(){V.done=!0,V.resolve()}}),M=function(){return Vke(this,arguments,function*(){for(;;){for($.length||(yield Gu(new Promise(A=>V.resolve=A)));$.length;)yield yield Gu($.shift());if(V.error)throw V.error;if(V.done)return yield Gu(void 0)}})}();return M.throw=async P=>(V.done||(V.done=!0,V.error=P,V.resolve()),{done:!0,value:void 0}),M.return=async()=>(W(),{done:!0,value:void 0}),M},async dispose(){if(R=!0,x){const[B]=await x;B.close(1e3,"Normal Closure")}},terminate(){x&&b.emit("closed",{code:4499,reason:"Terminated",wasClean:!1})}}}function jm(e){return Sl(e)&&"code"in e&&"reason"in e}function zke(e){return[1e3,1001,1006,1005,1012,1013,1014].includes(e)?!1:e>=1e3&&e<=1999}function Wke(e){return typeof e=="function"&&"constructor"in e&&"CLOSED"in e&&"CLOSING"in e&&"CONNECTING"in e&&"OPEN"in e}const HG={}.NEXT_PUBLIC_GRAPHQL_SUBSCRIPTIONS_URL||"wss://graphql-gw.creativefabrica.com/query",QS=new Map;ri(HG,"GRAPHQL_SUBSCRIPTIONS_URL must be set inside packages/hooks/use-subscription");function Yke(){var n,r,i,s,l;const e=Ji.getQueryData(Ki.getKey()),t=[(r=(n=e==null?void 0:e.me)==null?void 0:n.user)==null?void 0:r.id,(i=e==null?void 0:e.me)==null?void 0:i.token].filter(Boolean).join(":");if(!QS.get(t)){const a=(s=e==null?void 0:e.me)!=null&&s.token?`?token=${(l=e==null?void 0:e.me)==null?void 0:l.token}`:"",o=Hke({url:HG+a,connectionParams:function(){var h;return{token:((h=e==null?void 0:e.me)==null?void 0:h.token)||null}}});QS.set(t,o)}return QS.get(t)}function Xke(e){return Yke().iterate(e)}const gd=new Map,iC=new Map,wu=new Map;function qke({query:e,callback:t,variables:n}){const r=zG(e,n);if(clearTimeout(iC.get(r)),gd.get(r)||Kke(e,n),t){const i=wu.get(r),s=i?[...i,t]:[t];wu.set(r,s)}return()=>{const i=wu.get(r)??[],s=t&&i?i.filter(l=>l!==t):[];t&&wu.set(r,s),s.length===0&&Qke(r)}}function Kke(e,t){const n=zG(e,t),r=Xke({query:e,variables:t});(async()=>{for await(const i of r){const s=wu.get(n);if(s)for(const l of s)l(i.data)}})(),gd.set(n,r),wu.set(n,[])}function Qke(e){clearTimeout(iC.get(e));const t=setTimeout(()=>{var n;try{const r=gd.get(e);(n=r==null?void 0:r.return)==null||n.call(r),gd.delete(e)}catch(r){console.error("[use-subscription] Did not unsubscribe iterator",o7(r)?r.message:String(r)),gd.delete(e)}},1e3);iC.set(e,t)}function zG(e,t){return JSON.stringify({query:e,variables:t})}function Jke({subscription:e,variables:t,callback:n,enabled:r=!0}){T.useEffect(()=>{if(r)return qke({query:e,variables:t,callback:n})},[e,n,t,r])}const Zke=`
    subscription HealthCheck {
  healthz {
    timestamp
    userId
  }
}
    `;function e5e(e){return Jke({subscription:Zke,...e})}function t5e(){var r,i,s;const e=Ki(),[t,n]=T.useState(null);return e5e({enabled:!!((s=(i=(r=e.data)==null?void 0:r.me)==null?void 0:i.user)!=null&&s.id),callback(l){n(l)}}),E.jsxs("div",{className:"space-y-10",children:[E.jsxs("div",{className:"space-y-4",children:[E.jsx("h2",{children:"Data"}),E.jsxs("pre",{className:"whitespace-nowrap",children:["Timestamp: ",t==null?void 0:t.healthz.timestamp]}),E.jsxs("pre",{className:"whitespace-nowrap",children:["UserID: ",t==null?void 0:t.healthz.userId]})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("h2",{children:"User"}),E.jsx("pre",{className:"whitespace-nowrap",children:JSON.stringify({data:e.data,status:e.status},null,2)})]})]})}function n5e(){if(typeof window>"u")return{};const e=new URLSearchParams(window.location.search),t=e.get("setup_intent_client_secret"),n=e.get("payment_intent_client_secret"),r=e.get("cf_user_id"),i=e.get("cf_tax"),s=e.get("cf_currency"),l=e.get("cf_subscription_type"),a=e.get("cf_subscription_id"),o=e.get("payment_intent")||e.get("setup_intent");return(t||n)&&window.history.replaceState({},"",window.location.pathname),{setupIntentClientSecret:t,paymentIntentClientSecret:n,userId:r,tax:i,currency:s,subscriptionType:l,subscriptionId:a,id:o}}const ED=n5e();function r5e(){return{getRootProps(e){return{defaultOpen:!!(ED.paymentIntentClientSecret||ED.setupIntentClientSecret),...e}}}}const i5e=hc(()=>Ve(()=>import("./index-2431b2d0.js"),["assets/index-2431b2d0.js","assets/index-cc47a534.js","assets/social-22364841.js","assets/img-f5456793.js","assets/index-7dad8cc3.js","assets/button-176a6d23.js"]).then(e=>e.PaymentsCompleteScreenDialog));function s5e(){const{getRootProps:e}=r5e();return E.jsxs(T.Suspense,{fallback:E.jsx("div",{className:"flex h-screen w-screen items-center justify-center",children:E.jsxs(Qs.div,{className:"flex flex-col items-center justify-center gap-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:4},children:[E.jsx(NN,{className:"h-auto w-[75px]"}),E.jsx(Ap,{className:"w-4 animate-spin"})]})}),children:[E.jsx(r0,{}),E.jsx(T.Suspense,{fallback:null,children:E.jsx(Rp,{...e(),children:E.jsx(m1,{forceMount:!0,children:E.jsx(Dp,{zIndex:80,children:E.jsx(i5e.component,{})})})})})]})}function md(){return Ji.fetchQuery({queryFn:Ra.fetcher(),queryKey:Ra.getKey(),staleTime:u1("15s")}).then(e=>{var t,n;return!!((n=(t=e.me)==null?void 0:t.user)!=null&&n.id)})}function o5e(){return Ji.fetchQuery({queryFn:Ra.fetcher(),queryKey:Ra.getKey(),staleTime:u1("15s")}).then(e=>{var t,n;return(n=(t=e.me)==null?void 0:t.user)==null?void 0:n.id})}const w4=`
    query Teams {
  me {
    user {
      teams {
        id
        name
        logoUrl
        members {
          role
          member {
            id
            profileUrls {
              crafter
              designer
              teacher
              theArtistry
            }
          }
        }
      }
    }
  }
}
    `,Y_=(e,t)=>Ot(e===void 0?["Teams"]:["Teams",e],oe(w4,e),t);Y_.document=w4;Y_.getKey=e=>e===void 0?["Teams"]:["Teams",e];Y_.rootKey="Teams";Y_.fetcher=(e,t)=>oe(w4,e,t);const C4=`
    query TeamsGetPendingInvitations($input: TeamsGetTeamInput!) {
  teamsGet(input: $input) {
    team {
      id
      pendingInvitations {
        invitationId
        email
        role
      }
    }
    errors {
      code
      message
    }
  }
}
    `,X_=(e,t)=>Ot(["TeamsGetPendingInvitations",e],oe(C4,e),t);X_.document=C4;X_.getKey=e=>["TeamsGetPendingInvitations",e];X_.rootKey="TeamsGetPendingInvitations";X_.fetcher=(e,t)=>oe(C4,e,t);const T4=`
    query TeamsGet($input: TeamsGetTeamInput!) {
  teamsGet(input: $input) {
    team {
      id
      name
      avatarInitials
      description
      avatarColour
      logoUrl
      owner {
        id
      }
      members {
        role
        member {
          id
          displayName
          avatarUrl
          following
          isTemporary
        }
      }
    }
    errors {
      code
      message
    }
  }
}
    `,Eh=(e,t)=>Ot(["TeamsGet",e],oe(T4,e),t);Eh.document=T4;Eh.getKey=e=>["TeamsGet",e];Eh.rootKey="TeamsGet";Eh.fetcher=(e,t)=>oe(T4,e,t);const WG=`
    mutation TeamsCreateTeam($input: TeamsCreateTeamInput!) {
  teamsCreateTeam(input: $input) {
    team {
      id
      name
      logoUrl
    }
    errors {
      code
      message
    }
  }
}
    `,YG=e=>Ke(["TeamsCreateTeam"],t=>oe(WG,t)(),e);YG.getKey=()=>["TeamsCreateTeam"];YG.fetcher=(e,t)=>oe(WG,e,t);const XG=`
    mutation TeamsUpdateTeam($input: TeamsUpdateTeamInput!) {
  teamsUpdateTeam(input: $input) {
    team {
      id
      name
      logoUrl
      avatarInitials
      description
      avatarColour
      logoUrl
    }
    errors {
      code
      message
    }
  }
}
    `,qG=e=>Ke(["TeamsUpdateTeam"],t=>oe(XG,t)(),e);qG.getKey=()=>["TeamsUpdateTeam"];qG.fetcher=(e,t)=>oe(XG,e,t);const KG=`
    mutation TeamsInviteUsers($input: TeamsInviteUsersInput!) {
  teamsInviteUsers(input: $input) {
    status
    errors {
      code
      message
    }
  }
}
    `,QG=e=>Ke(["TeamsInviteUsers"],t=>oe(KG,t)(),e);QG.getKey=()=>["TeamsInviteUsers"];QG.fetcher=(e,t)=>oe(KG,e,t);const JG=`
    mutation TeamsResendInvite($input: TeamsResendInviteInput!) {
  teamsResendInvite(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,ZG=e=>Ke(["TeamsResendInvite"],t=>oe(JG,t)(),e);ZG.getKey=()=>["TeamsResendInvite"];ZG.fetcher=(e,t)=>oe(JG,e,t);const eV=`
    mutation TeamsCancelInvite($input: TeamsCancelInviteInput!) {
  teamsCancelInvite(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,tV=e=>Ke(["TeamsCancelInvite"],t=>oe(eV,t)(),e);tV.getKey=()=>["TeamsCancelInvite"];tV.fetcher=(e,t)=>oe(eV,e,t);const nV=`
    mutation TeamsApproveAdminRequest($input: TeamsApproveAdminRequestInput!) {
  teamsApproveAdminRequest(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,rV=e=>Ke(["TeamsApproveAdminRequest"],t=>oe(nV,t)(),e);rV.getKey=()=>["TeamsApproveAdminRequest"];rV.fetcher=(e,t)=>oe(nV,e,t);const iV=`
    mutation TeamsApproveTeamMemberRoleChange($input: TeamsApproveTeamMemberRoleChangeInput!) {
  teamsApproveTeamMemberRoleChange(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,sV=e=>Ke(["TeamsApproveTeamMemberRoleChange"],t=>oe(iV,t)(),e);sV.getKey=()=>["TeamsApproveTeamMemberRoleChange"];sV.fetcher=(e,t)=>oe(iV,e,t);const oV=`
    mutation TeamsConfirmInvite($input: TeamsConfirmInviteInput!) {
  teamsConfirmInvite(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,aV=e=>Ke(["TeamsConfirmInvite"],t=>oe(oV,t)(),e);aV.getKey=()=>["TeamsConfirmInvite"];aV.fetcher=(e,t)=>oe(oV,e,t);const lV=`
    mutation TeamsChangeUserRole($input: TeamsChangeUserRoleInput!) {
  teamsChangeUserRole(input: $input) {
    status
    errors {
      code
      message
    }
  }
}
    `,cV=e=>Ke(["TeamsChangeUserRole"],t=>oe(lV,t)(),e);cV.getKey=()=>["TeamsChangeUserRole"];cV.fetcher=(e,t)=>oe(lV,e,t);const uV=`
    mutation TeamsRemoveUsers($input: TeamsRemoveUsersInput!) {
  teamsRemoveUsers(input: $input) {
    teamId
    removedUserIds
    errors {
      code
      message
    }
  }
}
    `,hV=e=>Ke(["TeamsRemoveUsers"],t=>oe(uV,t)(),e);hV.getKey=()=>["TeamsRemoveUsers"];hV.fetcher=(e,t)=>oe(uV,e,t);const fV=`
    mutation TeamsDeactivateTeam($input: TeamsDeactivateTeamInput!) {
  teamsDeactivateTeam(input: $input) {
    success
    errors {
      code
      message
    }
  }
}
    `,dV=e=>Ke(["TeamsDeactivateTeam"],t=>oe(fV,t)(),e);dV.getKey=()=>["TeamsDeactivateTeam"];dV.fetcher=(e,t)=>oe(fV,e,t);const pV=`
    mutation VectorizerCreateSignedUploadUrl($input: VectorizerCreateSignedUploadUrl!) {
  vectorizerCreateSignedUploadUrl(input: $input) {
    id
    signedUrl
    errors {
      message
    }
  }
}
    `,gV=e=>Ke(["VectorizerCreateSignedUploadUrl"],t=>oe(pV,t)(),e);gV.getKey=()=>["VectorizerCreateSignedUploadUrl"];gV.fetcher=(e,t)=>oe(pV,e,t);const E4=`
    query VectorizerGetImage($input: VectorizerGetImageInput!) {
  vectorizerGetImage(input: $input) {
    image {
      id
      name
      status
      originalUrl
      vectorizedUrl
      thumbnailUrl
    }
    errors {
      message
    }
  }
}
    `,Ph=(e,t)=>Ot(["VectorizerGetImage",e],oe(E4,e),t);Ph.document=E4;Ph.getKey=e=>["VectorizerGetImage",e];Ph.rootKey="VectorizerGetImage";Ph.fetcher=(e,t)=>oe(E4,e,t);const P4=`
    query VectorizerListImages {
  vectorizerListImages {
    images {
      id
      name
      status
      thumbnailUrl
    }
    errors {
      message
    }
  }
}
    `,q_=(e,t)=>Ot(e===void 0?["VectorizerListImages"]:["VectorizerListImages",e],oe(P4,e),t);q_.document=P4;q_.getKey=e=>e===void 0?["VectorizerListImages"]:["VectorizerListImages",e];q_.rootKey="VectorizerListImages";q_.fetcher=(e,t)=>oe(P4,e,t);const mV=`
    mutation VectorizerDeleteAllImages {
  vectorizerDeleteAllImages {
    success
    errors {
      message
    }
  }
}
    `,vV=e=>Ke(["VectorizerDeleteAllImages"],t=>oe(mV,t)(),e);vV.getKey=()=>["VectorizerDeleteAllImages"];vV.fetcher=(e,t)=>oe(mV,e,t);const yV=`
    mutation VectorizerDeleteImage($input: VectorizerDeleteImageInput!) {
  vectorizerDeleteImage(input: $input) {
    success
    errors {
      message
    }
  }
}
    `,_V=e=>Ke(["VectorizerDeleteImage"],t=>oe(yV,t)(),e);_V.getKey=()=>["VectorizerDeleteImage"];_V.fetcher=(e,t)=>oe(yV,e,t);const bV=`
    mutation VectorizerCancelVectorization($input: VectorizerCancelImageVectorizationInput!) {
  vectorizerCancelVectorization(input: $input) {
    success
    errors {
      message
    }
  }
}
    `,SV=e=>Ke(["VectorizerCancelVectorization"],t=>oe(bV,t)(),e);SV.getKey=()=>["VectorizerCancelVectorization"];SV.fetcher=(e,t)=>oe(bV,e,t);const xV=`
    mutation VectorizerPublishImage($input: VectorizerPublishImageInput!) {
  vectorizerPublishImage(input: $input) {
    upload {
      id
      folderId
      url
      type
      updatedAt
    }
    errors {
      message
    }
  }
}
    `,wV=e=>Ke(["VectorizerPublishImage"],t=>oe(xV,t)(),e);wV.getKey=()=>["VectorizerPublishImage"];wV.fetcher=(e,t)=>oe(xV,e,t);const CV=`
    mutation VectorizerRegisterImagesToUser($input: VectorizerImagesRegisterToUserInput!) {
  vectorizerRegisterImagesToUser(input: $input) {
    images {
      id
    }
    errors {
      message
    }
  }
}
    `,TV=e=>Ke(["VectorizerRegisterImagesToUser"],t=>oe(CV,t)(),e);TV.getKey=()=>["VectorizerRegisterImagesToUser"];TV.fetcher=(e,t)=>oe(CV,e,t);var EV={exports:{}};/*! algoliasearch.umd.js | 4.22.1 |  Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(e,t){(function(n,r){e.exports=r()})(Wr,function(){function n(U,Y,q){return Y in U?Object.defineProperty(U,Y,{value:q,enumerable:!0,configurable:!0,writable:!0}):U[Y]=q,U}function r(U,Y){var q=Object.keys(U);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(U);Y&&(Q=Q.filter(function(le){return Object.getOwnPropertyDescriptor(U,le).enumerable})),q.push.apply(q,Q)}return q}function i(U){for(var Y=1;Y<arguments.length;Y++){var q=arguments[Y]!=null?arguments[Y]:{};Y%2?r(Object(q),!0).forEach(function(Q){n(U,Q,q[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(q)):r(Object(q)).forEach(function(Q){Object.defineProperty(U,Q,Object.getOwnPropertyDescriptor(q,Q))})}return U}function s(U,Y){if(U==null)return{};var q,Q,le=function(Pe,ve){if(Pe==null)return{};var Ce,Me,Oe={},nt=Object.keys(Pe);for(Me=0;Me<nt.length;Me++)Ce=nt[Me],ve.indexOf(Ce)>=0||(Oe[Ce]=Pe[Ce]);return Oe}(U,Y);if(Object.getOwnPropertySymbols){var Se=Object.getOwnPropertySymbols(U);for(Q=0;Q<Se.length;Q++)q=Se[Q],Y.indexOf(q)>=0||Object.prototype.propertyIsEnumerable.call(U,q)&&(le[q]=U[q])}return le}function l(U,Y){return function(q){if(Array.isArray(q))return q}(U)||function(q,Q){if(Symbol.iterator in Object(q)||Object.prototype.toString.call(q)==="[object Arguments]"){var le=[],Se=!0,Pe=!1,ve=void 0;try{for(var Ce,Me=q[Symbol.iterator]();!(Se=(Ce=Me.next()).done)&&(le.push(Ce.value),!Q||le.length!==Q);Se=!0);}catch(Oe){Pe=!0,ve=Oe}finally{try{Se||Me.return==null||Me.return()}finally{if(Pe)throw ve}}return le}}(U,Y)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(U){return function(Y){if(Array.isArray(Y)){for(var q=0,Q=new Array(Y.length);q<Y.length;q++)Q[q]=Y[q];return Q}}(U)||function(Y){if(Symbol.iterator in Object(Y)||Object.prototype.toString.call(Y)==="[object Arguments]")return Array.from(Y)}(U)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(U){var Y,q="algoliasearch-client-js-".concat(U.key),Q=function(){return Y===void 0&&(Y=U.localStorage||window.localStorage),Y},le=function(){return JSON.parse(Q().getItem(q)||"{}")},Se=function(ve){Q().setItem(q,JSON.stringify(ve))},Pe=function(){var ve=U.timeToLive?1e3*U.timeToLive:null,Ce=le(),Me=Object.fromEntries(Object.entries(Ce).filter(function(nt){return l(nt,2)[1].timestamp!==void 0}));if(Se(Me),ve){var Oe=Object.fromEntries(Object.entries(Me).filter(function(nt){var tt=l(nt,2)[1],St=new Date().getTime();return!(tt.timestamp+ve<St)}));Se(Oe)}};return{get:function(ve,Ce){var Me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){Pe();var Oe=JSON.stringify(ve);return le()[Oe]}).then(function(Oe){return Promise.all([Oe?Oe.value:Ce(),Oe!==void 0])}).then(function(Oe){var nt=l(Oe,2),tt=nt[0],St=nt[1];return Promise.all([tt,St||Me.miss(tt)])}).then(function(Oe){return l(Oe,1)[0]})},set:function(ve,Ce){return Promise.resolve().then(function(){var Me=le();return Me[JSON.stringify(ve)]={timestamp:new Date().getTime(),value:Ce},Q().setItem(q,JSON.stringify(Me)),Ce})},delete:function(ve){return Promise.resolve().then(function(){var Ce=le();delete Ce[JSON.stringify(ve)],Q().setItem(q,JSON.stringify(Ce))})},clear:function(){return Promise.resolve().then(function(){Q().removeItem(q)})}}}function c(U){var Y=a(U.caches),q=Y.shift();return q===void 0?{get:function(Q,le){var Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},Pe=le();return Pe.then(function(ve){return Promise.all([ve,Se.miss(ve)])}).then(function(ve){return l(ve,1)[0]})},set:function(Q,le){return Promise.resolve(le)},delete:function(Q){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(Q,le){var Se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return q.get(Q,le,Se).catch(function(){return c({caches:Y}).get(Q,le,Se)})},set:function(Q,le){return q.set(Q,le).catch(function(){return c({caches:Y}).set(Q,le)})},delete:function(Q){return q.delete(Q).catch(function(){return c({caches:Y}).delete(Q)})},clear:function(){return q.clear().catch(function(){return c({caches:Y}).clear()})}}}function h(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},Y={};return{get:function(q,Q){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},Se=JSON.stringify(q);if(Se in Y)return Promise.resolve(U.serializable?JSON.parse(Y[Se]):Y[Se]);var Pe=Q(),ve=le&&le.miss||function(){return Promise.resolve()};return Pe.then(function(Ce){return ve(Ce)}).then(function(){return Pe})},set:function(q,Q){return Y[JSON.stringify(q)]=U.serializable?JSON.stringify(Q):Q,Promise.resolve(Q)},delete:function(q){return delete Y[JSON.stringify(q)],Promise.resolve()},clear:function(){return Y={},Promise.resolve()}}}function u(U,Y,q){var Q={"x-algolia-api-key":q,"x-algolia-application-id":Y};return{headers:function(){return U===v.WithinHeaders?Q:{}},queryParameters:function(){return U===v.WithinQueryParameters?Q:{}}}}function f(U){var Y=0;return U(function q(){return Y++,new Promise(function(Q){setTimeout(function(){Q(U(q))},Math.min(100*Y,1e3))})})}function d(U){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(q,Q){return Promise.resolve()};return Object.assign(U,{wait:function(q){return d(U.then(function(Q){return Promise.all([Y(Q,q),Q])}).then(function(Q){return Q[1]}))}})}function p(U){for(var Y=U.length-1;Y>0;Y--){var q=Math.floor(Math.random()*(Y+1)),Q=U[Y];U[Y]=U[q],U[q]=Q}return U}function m(U,Y){return Y&&Object.keys(Y).forEach(function(q){U[q]=Y[q](U)}),U}function g(U){for(var Y=arguments.length,q=new Array(Y>1?Y-1:0),Q=1;Q<Y;Q++)q[Q-1]=arguments[Q];var le=0;return U.replace(/%s/g,function(){return encodeURIComponent(q[le++])})}var v={WithinQueryParameters:0,WithinHeaders:1};function _(U,Y){var q=U||{},Q=q.data||{};return Object.keys(q).forEach(function(le){["timeout","headers","queryParameters","data","cacheable"].indexOf(le)===-1&&(Q[le]=q[le])}),{data:Object.entries(Q).length>0?Q:void 0,timeout:q.timeout||Y,headers:q.headers||{},queryParameters:q.queryParameters||{},cacheable:q.cacheable}}var y={Read:1,Write:2,Any:3},b=1,S=2,x=3;function C(U){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b;return i(i({},U),{},{status:Y,lastUpdate:Date.now()})}function w(U){return typeof U=="string"?{protocol:"https",url:U,accept:y.Any}:{protocol:U.protocol||"https",url:U.url,accept:U.accept||y.Any}}var k="DELETE",I="GET",R="POST",j="PUT";function G(U,Y){return Promise.all(Y.map(function(q){return U.get(q,function(){return Promise.resolve(C(q))})})).then(function(q){var Q=q.filter(function(Pe){return function(ve){return ve.status===b||Date.now()-ve.lastUpdate>12e4}(Pe)}),le=q.filter(function(Pe){return function(ve){return ve.status===x&&Date.now()-ve.lastUpdate<=12e4}(Pe)}),Se=[].concat(a(Q),a(le));return{getTimeout:function(Pe,ve){return(le.length===0&&Pe===0?1:le.length+3+Pe)*ve},statelessHosts:Se.length>0?Se.map(function(Pe){return w(Pe)}):Y}})}function B(U,Y,q,Q){var le=[],Se=function(tt,St){if(!(tt.method===I||tt.data===void 0&&St.data===void 0)){var at=Array.isArray(tt.data)?tt.data:i(i({},tt.data),St.data);return JSON.stringify(at)}}(q,Q),Pe=function(tt,St){var at=i(i({},tt.headers),St.headers),Gt={};return Object.keys(at).forEach(function(nn){var Or=at[nn];Gt[nn.toLowerCase()]=Or}),Gt}(U,Q),ve=q.method,Ce=q.method!==I?{}:i(i({},q.data),Q.data),Me=i(i(i({"x-algolia-agent":U.userAgent.value},U.queryParameters),Ce),Q.queryParameters),Oe=0,nt=function tt(St,at){var Gt=St.pop();if(Gt===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:P(le)};var nn={data:Se,headers:Pe,method:ve,url:W(Gt,q.path,Me),connectTimeout:at(Oe,U.timeouts.connect),responseTimeout:at(Oe,Q.timeout)},Or=function(kr){var or={request:nn,response:kr,host:Gt,triesLeft:St.length};return le.push(or),or},af={onSuccess:function(kr){return function(or){try{return JSON.parse(or.content)}catch(ol){throw function(Mo,kc){return{name:"DeserializationError",message:Mo,response:kc}}(ol.message,or)}}(kr)},onRetry:function(kr){var or=Or(kr);return kr.isTimedOut&&Oe++,Promise.all([U.logger.info("Retryable failure",O(or)),U.hostsCache.set(Gt,C(Gt,kr.isTimedOut?x:S))]).then(function(){return tt(St,at)})},onFail:function(kr){throw Or(kr),function(or,ol){var Mo=or.content,kc=or.status,lf=Mo;try{lf=JSON.parse(Mo).message}catch{}return function(Cg,rb,dH){return{name:"ApiError",message:Cg,status:rb,transporterStackTrace:dH}}(lf,kc,ol)}(kr,P(le))}};return U.requester.send(nn).then(function(kr){return function(or,ol){return function(Mo){var kc=Mo.status;return Mo.isTimedOut||function(lf){var Cg=lf.isTimedOut,rb=lf.status;return!Cg&&~~rb==0}(Mo)||~~(kc/100)!=2&&~~(kc/100)!=4}(or)?ol.onRetry(or):~~(or.status/100)==2?ol.onSuccess(or):ol.onFail(or)}(kr,af)})};return G(U.hostsCache,Y).then(function(tt){return nt(a(tt.statelessHosts).reverse(),tt.getTimeout)})}function $(U){var Y=U.hostsCache,q=U.logger,Q=U.requester,le=U.requestsCache,Se=U.responsesCache,Pe=U.timeouts,ve=U.userAgent,Ce=U.hosts,Me=U.queryParameters,Oe={hostsCache:Y,logger:q,requester:Q,requestsCache:le,responsesCache:Se,timeouts:Pe,userAgent:ve,headers:U.headers,queryParameters:Me,hosts:Ce.map(function(nt){return w(nt)}),read:function(nt,tt){var St=_(tt,Oe.timeouts.read),at=function(){return B(Oe,Oe.hosts.filter(function(nn){return(nn.accept&y.Read)!=0}),nt,St)};if((St.cacheable!==void 0?St.cacheable:nt.cacheable)!==!0)return at();var Gt={request:nt,mappedRequestOptions:St,transporter:{queryParameters:Oe.queryParameters,headers:Oe.headers}};return Oe.responsesCache.get(Gt,function(){return Oe.requestsCache.get(Gt,function(){return Oe.requestsCache.set(Gt,at()).then(function(nn){return Promise.all([Oe.requestsCache.delete(Gt),nn])},function(nn){return Promise.all([Oe.requestsCache.delete(Gt),Promise.reject(nn)])}).then(function(nn){var Or=l(nn,2);return Or[0],Or[1]})})},{miss:function(nn){return Oe.responsesCache.set(Gt,nn)}})},write:function(nt,tt){return B(Oe,Oe.hosts.filter(function(St){return(St.accept&y.Write)!=0}),nt,_(tt,Oe.timeouts.write))}};return Oe}function V(U){var Y={value:"Algolia for JavaScript (".concat(U,")"),add:function(q){var Q="; ".concat(q.segment).concat(q.version!==void 0?" (".concat(q.version,")"):"");return Y.value.indexOf(Q)===-1&&(Y.value="".concat(Y.value).concat(Q)),Y}};return Y}function W(U,Y,q){var Q=M(q),le="".concat(U.protocol,"://").concat(U.url,"/").concat(Y.charAt(0)==="/"?Y.substr(1):Y);return Q.length&&(le+="?".concat(Q)),le}function M(U){return Object.keys(U).map(function(Y){return g("%s=%s",Y,(q=U[Y],Object.prototype.toString.call(q)==="[object Object]"||Object.prototype.toString.call(q)==="[object Array]"?JSON.stringify(U[Y]):U[Y]));var q}).join("&")}function P(U){return U.map(function(Y){return O(Y)})}function O(U){var Y=U.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return i(i({},U),{},{request:i(i({},U.request),{},{headers:i(i({},U.request.headers),Y)})})}var A=function(U){return function(Y,q){return U.transporter.write({method:R,path:"2/abtests",data:Y},q)}},D=function(U){return function(Y,q){return U.transporter.write({method:k,path:g("2/abtests/%s",Y)},q)}},X=function(U){return function(Y,q){return U.transporter.read({method:I,path:g("2/abtests/%s",Y)},q)}},N=function(U){return function(Y){return U.transporter.read({method:I,path:"2/abtests"},Y)}},F=function(U){return function(Y,q){return U.transporter.write({method:R,path:g("2/abtests/%s/stop",Y)},q)}},z=function(U){return function(Y){return U.transporter.read({method:I,path:"1/strategies/personalization"},Y)}},L=function(U){return function(Y,q){return U.transporter.write({method:R,path:"1/strategies/personalization",data:Y},q)}};function H(U){return function Y(q){return U.request(q).then(function(Q){if(U.batch!==void 0&&U.batch(Q.hits),!U.shouldStop(Q))return Q.cursor?Y({cursor:Q.cursor}):Y({page:(q.page||0)+1})})}({})}var K=function(U){return function(Y,q){var Q=q||{},le=Q.queryParameters,Se=s(Q,["queryParameters"]),Pe=i({acl:Y},le!==void 0?{queryParameters:le}:{});return d(U.transporter.write({method:R,path:"1/keys",data:Pe},Se),function(ve,Ce){return f(function(Me){return be(U)(ve.key,Ce).catch(function(Oe){if(Oe.status!==404)throw Oe;return Me()})})})}},Z=function(U){return function(Y,q,Q){var le=_(Q);return le.queryParameters["X-Algolia-User-ID"]=Y,U.transporter.write({method:R,path:"1/clusters/mapping",data:{cluster:q}},le)}},ee=function(U){return function(Y,q,Q){return U.transporter.write({method:R,path:"1/clusters/mapping/batch",data:{users:Y,cluster:q}},Q)}},ae=function(U){return function(Y,q){return d(U.transporter.write({method:R,path:g("/1/dictionaries/%s/batch",Y),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},q),function(Q,le){return On(U)(Q.taskID,le)})}},te=function(U){return function(Y,q,Q){return d(U.transporter.write({method:R,path:g("1/indexes/%s/operation",Y),data:{operation:"copy",destination:q}},Q),function(le,Se){return st(U)(Y,{methods:{waitTask:kn}}).waitTask(le.taskID,Se)})}},J=function(U){return function(Y,q,Q){return te(U)(Y,q,i(i({},Q),{},{scope:[nb.Rules]}))}},ne=function(U){return function(Y,q,Q){return te(U)(Y,q,i(i({},Q),{},{scope:[nb.Settings]}))}},ie=function(U){return function(Y,q,Q){return te(U)(Y,q,i(i({},Q),{},{scope:[nb.Synonyms]}))}},re=function(U){return function(Y,q){return Y.method===I?U.transporter.read(Y,q):U.transporter.write(Y,q)}},he=function(U){return function(Y,q){return d(U.transporter.write({method:k,path:g("1/keys/%s",Y)},q),function(Q,le){return f(function(Se){return be(U)(Y,le).then(Se).catch(function(Pe){if(Pe.status!==404)throw Pe})})})}},fe=function(U){return function(Y,q,Q){var le=q.map(function(Se){return{action:"deleteEntry",body:{objectID:Se}}});return d(U.transporter.write({method:R,path:g("/1/dictionaries/%s/batch",Y),data:{clearExistingDictionaryEntries:!1,requests:le}},Q),function(Se,Pe){return On(U)(Se.taskID,Pe)})}},be=function(U){return function(Y,q){return U.transporter.read({method:I,path:g("1/keys/%s",Y)},q)}},pe=function(U){return function(Y,q){return U.transporter.read({method:I,path:g("1/task/%s",Y.toString())},q)}},se=function(U){return function(Y){return U.transporter.read({method:I,path:"/1/dictionaries/*/settings"},Y)}},me=function(U){return function(Y){return U.transporter.read({method:I,path:"1/logs"},Y)}},Re=function(U){return function(Y){return U.transporter.read({method:I,path:"1/clusters/mapping/top"},Y)}},ze=function(U){return function(Y,q){return U.transporter.read({method:I,path:g("1/clusters/mapping/%s",Y)},q)}},_t=function(U){return function(Y){var q=Y||{},Q=q.retrieveMappings,le=s(q,["retrieveMappings"]);return Q===!0&&(le.getClusters=!0),U.transporter.read({method:I,path:"1/clusters/mapping/pending"},le)}},st=function(U){return function(Y){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q={transporter:U.transporter,appId:U.appId,indexName:Y};return m(Q,q.methods)}},tn=function(U){return function(Y){return U.transporter.read({method:I,path:"1/keys"},Y)}},Ut=function(U){return function(Y){return U.transporter.read({method:I,path:"1/clusters"},Y)}},ai=function(U){return function(Y){return U.transporter.read({method:I,path:"1/indexes"},Y)}},Ns=function(U){return function(Y){return U.transporter.read({method:I,path:"1/clusters/mapping"},Y)}},gr=function(U){return function(Y,q,Q){return d(U.transporter.write({method:R,path:g("1/indexes/%s/operation",Y),data:{operation:"move",destination:q}},Q),function(le,Se){return st(U)(Y,{methods:{waitTask:kn}}).waitTask(le.taskID,Se)})}},nf=function(U){return function(Y,q){return d(U.transporter.write({method:R,path:"1/indexes/*/batch",data:{requests:Y}},q),function(Q,le){return Promise.all(Object.keys(Q.taskID).map(function(Se){return st(U)(Se,{methods:{waitTask:kn}}).waitTask(Q.taskID[Se],le)}))})}},ue=function(U){return function(Y,q){return U.transporter.read({method:R,path:"1/indexes/*/objects",data:{requests:Y}},q)}},ge=function(U){return function(Y,q){var Q=Y.map(function(le){return i(i({},le),{},{params:M(le.params||{})})});return U.transporter.read({method:R,path:"1/indexes/*/queries",data:{requests:Q},cacheable:!0},q)}},ye=function(U){return function(Y,q){return Promise.all(Y.map(function(Q){var le=Q.params,Se=le.facetName,Pe=le.facetQuery,ve=s(le,["facetName","facetQuery"]);return st(U)(Q.indexName,{methods:{searchForFacetValues:U4}}).searchForFacetValues(Se,Pe,i(i({},q),ve))}))}},De=function(U){return function(Y,q){var Q=_(q);return Q.queryParameters["X-Algolia-User-ID"]=Y,U.transporter.write({method:k,path:"1/clusters/mapping"},Q)}},et=function(U){return function(Y,q,Q){var le=q.map(function(Se){return{action:"addEntry",body:Se}});return d(U.transporter.write({method:R,path:g("/1/dictionaries/%s/batch",Y),data:{clearExistingDictionaryEntries:!0,requests:le}},Q),function(Se,Pe){return On(U)(Se.taskID,Pe)})}},Qe=function(U){return function(Y,q){return d(U.transporter.write({method:R,path:g("1/keys/%s/restore",Y)},q),function(Q,le){return f(function(Se){return be(U)(Y,le).catch(function(Pe){if(Pe.status!==404)throw Pe;return Se()})})})}},Ze=function(U){return function(Y,q,Q){var le=q.map(function(Se){return{action:"addEntry",body:Se}});return d(U.transporter.write({method:R,path:g("/1/dictionaries/%s/batch",Y),data:{clearExistingDictionaryEntries:!1,requests:le}},Q),function(Se,Pe){return On(U)(Se.taskID,Pe)})}},He=function(U){return function(Y,q,Q){return U.transporter.read({method:R,path:g("/1/dictionaries/%s/search",Y),data:{query:q},cacheable:!0},Q)}},Ue=function(U){return function(Y,q){return U.transporter.read({method:R,path:"1/clusters/mapping/search",data:{query:Y}},q)}},Mt=function(U){return function(Y,q){return d(U.transporter.write({method:j,path:"/1/dictionaries/*/settings",data:Y},q),function(Q,le){return On(U)(Q.taskID,le)})}},bt=function(U){return function(Y,q){var Q=Object.assign({},q),le=q||{},Se=le.queryParameters,Pe=s(le,["queryParameters"]),ve=Se?{queryParameters:Se}:{},Ce=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return d(U.transporter.write({method:j,path:g("1/keys/%s",Y),data:ve},Pe),function(Me,Oe){return f(function(nt){return be(U)(Y,Oe).then(function(tt){return function(St){return Object.keys(Q).filter(function(at){return Ce.indexOf(at)!==-1}).every(function(at){if(Array.isArray(St[at])&&Array.isArray(Q[at])){var Gt=St[at];return Gt.length===Q[at].length&&Gt.every(function(nn,Or){return nn===Q[at][Or]})}return St[at]===Q[at]})}(tt)?Promise.resolve():nt()})})})}},On=function(U){return function(Y,q){return f(function(Q){return pe(U)(Y,q).then(function(le){return le.status!=="published"?Q():void 0})})}},_n=function(U){return function(Y,q){return d(U.transporter.write({method:R,path:g("1/indexes/%s/batch",U.indexName),data:{requests:Y}},q),function(Q,le){return kn(U)(Q.taskID,le)})}},sr=function(U){return function(Y){return H(i(i({shouldStop:function(q){return q.cursor===void 0}},Y),{},{request:function(q){return U.transporter.read({method:R,path:g("1/indexes/%s/browse",U.indexName),data:q},Y)}}))}},li=function(U){return function(Y){var q=i({hitsPerPage:1e3},Y);return H(i(i({shouldStop:function(Q){return Q.hits.length<q.hitsPerPage}},q),{},{request:function(Q){return $4(U)("",i(i({},q),Q)).then(function(le){return i(i({},le),{},{hits:le.hits.map(function(Se){return delete Se._highlightResult,Se})})})}}))}},nl=function(U){return function(Y){var q=i({hitsPerPage:1e3},Y);return H(i(i({shouldStop:function(Q){return Q.hits.length<q.hitsPerPage}},q),{},{request:function(Q){return G4(U)("",i(i({},q),Q)).then(function(le){return i(i({},le),{},{hits:le.hits.map(function(Se){return delete Se._highlightResult,Se})})})}}))}},rl=function(U){return function(Y,q,Q){var le=Q||{},Se=le.batchSize,Pe=s(le,["batchSize"]),ve={taskIDs:[],objectIDs:[]};return d(function Ce(){var Me,Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,nt=[];for(Me=Oe;Me<Y.length&&(nt.push(Y[Me]),nt.length!==(Se||1e3));Me++);return nt.length===0?Promise.resolve(ve):_n(U)(nt.map(function(tt){return{action:q,body:tt}}),Pe).then(function(tt){return ve.objectIDs=ve.objectIDs.concat(tt.objectIDs),ve.taskIDs.push(tt.taskID),Me++,Ce(Me)})}(),function(Ce,Me){return Promise.all(Ce.taskIDs.map(function(Oe){return kn(U)(Oe,Me)}))})}},Pc=function(U){return function(Y){return d(U.transporter.write({method:R,path:g("1/indexes/%s/clear",U.indexName)},Y),function(q,Q){return kn(U)(q.taskID,Q)})}},Ai=function(U){return function(Y){var q=Y||{},Q=q.forwardToReplicas,le=_(s(q,["forwardToReplicas"]));return Q&&(le.queryParameters.forwardToReplicas=1),d(U.transporter.write({method:R,path:g("1/indexes/%s/rules/clear",U.indexName)},le),function(Se,Pe){return kn(U)(Se.taskID,Pe)})}},Ic=function(U){return function(Y){var q=Y||{},Q=q.forwardToReplicas,le=_(s(q,["forwardToReplicas"]));return Q&&(le.queryParameters.forwardToReplicas=1),d(U.transporter.write({method:R,path:g("1/indexes/%s/synonyms/clear",U.indexName)},le),function(Se,Pe){return kn(U)(Se.taskID,Pe)})}},rf=function(U){return function(Y,q){return d(U.transporter.write({method:R,path:g("1/indexes/%s/deleteByQuery",U.indexName),data:Y},q),function(Q,le){return kn(U)(Q.taskID,le)})}},sf=function(U){return function(Y){return d(U.transporter.write({method:k,path:g("1/indexes/%s",U.indexName)},Y),function(q,Q){return kn(U)(q.taskID,Q)})}},of=function(U){return function(Y,q){return d(il(U)([Y],q).then(function(Q){return{taskID:Q.taskIDs[0]}}),function(Q,le){return kn(U)(Q.taskID,le)})}},il=function(U){return function(Y,q){var Q=Y.map(function(le){return{objectID:le}});return rl(U)(Q,Oc.DeleteObject,q)}},$t=function(U){return function(Y,q){var Q=q||{},le=Q.forwardToReplicas,Se=_(s(Q,["forwardToReplicas"]));return le&&(Se.queryParameters.forwardToReplicas=1),d(U.transporter.write({method:k,path:g("1/indexes/%s/rules/%s",U.indexName,Y)},Se),function(Pe,ve){return kn(U)(Pe.taskID,ve)})}},Ir=function(U){return function(Y,q){var Q=q||{},le=Q.forwardToReplicas,Se=_(s(Q,["forwardToReplicas"]));return le&&(Se.queryParameters.forwardToReplicas=1),d(U.transporter.write({method:k,path:g("1/indexes/%s/synonyms/%s",U.indexName,Y)},Se),function(Pe,ve){return kn(U)(Pe.taskID,ve)})}},Do=function(U){return function(Y){return N4(U)(Y).then(function(){return!0}).catch(function(q){if(q.status!==404)throw q;return!1})}},Ln=function(U){return function(Y,q,Q){return U.transporter.read({method:R,path:g("1/answers/%s/prediction",U.indexName),data:{query:Y,queryLanguages:q},cacheable:!0},Q)}},sl=function(U){return function(Y,q){var Q=q||{},le=Q.query,Se=Q.paginate,Pe=s(Q,["query","paginate"]),ve=0;return function Ce(){return B4(U)(le||"",i(i({},Pe),{},{page:ve})).then(function(Me){for(var Oe=0,nt=Object.entries(Me.hits);Oe<nt.length;Oe++){var tt=l(nt[Oe],2),St=tt[0],at=tt[1];if(Y(at))return{object:at,position:parseInt(St,10),page:ve}}if(ve++,Se===!1||ve>=Me.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return Ce()})}()}},wg=function(U){return function(Y,q){return U.transporter.read({method:I,path:g("1/indexes/%s/%s",U.indexName,Y)},q)}},J_=function(){return function(U,Y){for(var q=0,Q=Object.entries(U.hits);q<Q.length;q++){var le=l(Q[q],2),Se=le[0];if(le[1].objectID===Y)return parseInt(Se,10)}return-1}},ZV=function(U){return function(Y,q){var Q=q||{},le=Q.attributesToRetrieve,Se=s(Q,["attributesToRetrieve"]),Pe=Y.map(function(ve){return i({indexName:U.indexName,objectID:ve},le?{attributesToRetrieve:le}:{})});return U.transporter.read({method:R,path:"1/indexes/*/objects",data:{requests:Pe}},Se)}},eH=function(U){return function(Y,q){return U.transporter.read({method:I,path:g("1/indexes/%s/rules/%s",U.indexName,Y)},q)}},N4=function(U){return function(Y){return U.transporter.read({method:I,path:g("1/indexes/%s/settings",U.indexName),data:{getVersion:2}},Y)}},tH=function(U){return function(Y,q){return U.transporter.read({method:I,path:g("1/indexes/%s/synonyms/%s",U.indexName,Y)},q)}},nH=function(U){return function(Y,q){return d(j4(U)([Y],q).then(function(Q){return{objectID:Q.objectIDs[0],taskID:Q.taskIDs[0]}}),function(Q,le){return kn(U)(Q.taskID,le)})}},j4=function(U){return function(Y,q){var Q=q||{},le=Q.createIfNotExists,Se=s(Q,["createIfNotExists"]),Pe=le?Oc.PartialUpdateObject:Oc.PartialUpdateObjectNoCreate;return rl(U)(Y,Pe,Se)}},rH=function(U){return function(Y,q){var Q=q||{},le=Q.safe,Se=Q.autoGenerateObjectIDIfNotExist,Pe=Q.batchSize,ve=s(Q,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),Ce=function(at,Gt,nn,Or){return d(U.transporter.write({method:R,path:g("1/indexes/%s/operation",at),data:{operation:nn,destination:Gt}},Or),function(af,kr){return kn(U)(af.taskID,kr)})},Me=Math.random().toString(36).substring(7),Oe="".concat(U.indexName,"_tmp_").concat(Me),nt=Z_({appId:U.appId,transporter:U.transporter,indexName:Oe}),tt=[],St=Ce(U.indexName,Oe,"copy",i(i({},ve),{},{scope:["settings","synonyms","rules"]}));return tt.push(St),d((le?St.wait(ve):St).then(function(){var at=nt(Y,i(i({},ve),{},{autoGenerateObjectIDIfNotExist:Se,batchSize:Pe}));return tt.push(at),le?at.wait(ve):at}).then(function(){var at=Ce(Oe,U.indexName,"move",ve);return tt.push(at),le?at.wait(ve):at}).then(function(){return Promise.all(tt)}).then(function(at){var Gt=l(at,3),nn=Gt[0],Or=Gt[1],af=Gt[2];return{objectIDs:Or.objectIDs,taskIDs:[nn.taskID].concat(a(Or.taskIDs),[af.taskID])}}),function(at,Gt){return Promise.all(tt.map(function(nn){return nn.wait(Gt)}))})}},iH=function(U){return function(Y,q){return eb(U)(Y,i(i({},q),{},{clearExistingRules:!0}))}},sH=function(U){return function(Y,q){return tb(U)(Y,i(i({},q),{},{clearExistingSynonyms:!0}))}},oH=function(U){return function(Y,q){return d(Z_(U)([Y],q).then(function(Q){return{objectID:Q.objectIDs[0],taskID:Q.taskIDs[0]}}),function(Q,le){return kn(U)(Q.taskID,le)})}},Z_=function(U){return function(Y,q){var Q=q||{},le=Q.autoGenerateObjectIDIfNotExist,Se=s(Q,["autoGenerateObjectIDIfNotExist"]),Pe=le?Oc.AddObject:Oc.UpdateObject;if(Pe===Oc.UpdateObject){var ve=!0,Ce=!1,Me=void 0;try{for(var Oe,nt=Y[Symbol.iterator]();!(ve=(Oe=nt.next()).done);ve=!0)if(Oe.value.objectID===void 0)return d(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(tt){Ce=!0,Me=tt}finally{try{ve||nt.return==null||nt.return()}finally{if(Ce)throw Me}}}return rl(U)(Y,Pe,Se)}},aH=function(U){return function(Y,q){return eb(U)([Y],q)}},eb=function(U){return function(Y,q){var Q=q||{},le=Q.forwardToReplicas,Se=Q.clearExistingRules,Pe=_(s(Q,["forwardToReplicas","clearExistingRules"]));return le&&(Pe.queryParameters.forwardToReplicas=1),Se&&(Pe.queryParameters.clearExistingRules=1),d(U.transporter.write({method:R,path:g("1/indexes/%s/rules/batch",U.indexName),data:Y},Pe),function(ve,Ce){return kn(U)(ve.taskID,Ce)})}},lH=function(U){return function(Y,q){return tb(U)([Y],q)}},tb=function(U){return function(Y,q){var Q=q||{},le=Q.forwardToReplicas,Se=Q.clearExistingSynonyms,Pe=Q.replaceExistingSynonyms,ve=_(s(Q,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return le&&(ve.queryParameters.forwardToReplicas=1),(Pe||Se)&&(ve.queryParameters.replaceExistingSynonyms=1),d(U.transporter.write({method:R,path:g("1/indexes/%s/synonyms/batch",U.indexName),data:Y},ve),function(Ce,Me){return kn(U)(Ce.taskID,Me)})}},B4=function(U){return function(Y,q){return U.transporter.read({method:R,path:g("1/indexes/%s/query",U.indexName),data:{query:Y},cacheable:!0},q)}},U4=function(U){return function(Y,q,Q){return U.transporter.read({method:R,path:g("1/indexes/%s/facets/%s/query",U.indexName,Y),data:{facetQuery:q},cacheable:!0},Q)}},$4=function(U){return function(Y,q){return U.transporter.read({method:R,path:g("1/indexes/%s/rules/search",U.indexName),data:{query:Y}},q)}},G4=function(U){return function(Y,q){return U.transporter.read({method:R,path:g("1/indexes/%s/synonyms/search",U.indexName),data:{query:Y}},q)}},cH=function(U){return function(Y,q){var Q=q||{},le=Q.forwardToReplicas,Se=_(s(Q,["forwardToReplicas"]));return le&&(Se.queryParameters.forwardToReplicas=1),d(U.transporter.write({method:j,path:g("1/indexes/%s/settings",U.indexName),data:Y},Se),function(Pe,ve){return kn(U)(Pe.taskID,ve)})}},kn=function(U){return function(Y,q){return f(function(Q){return function(le){return function(Se,Pe){return le.transporter.read({method:I,path:g("1/indexes/%s/task/%s",le.indexName,Se.toString())},Pe)}}(U)(Y,q).then(function(le){return le.status!=="published"?Q():void 0})})}},Oc={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},nb={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},uH=1,hH=2,fH=3;function V4(U,Y,q){var Q,le={appId:U,apiKey:Y,timeouts:{connect:1,read:2,write:30},requester:{send:function(ve){return new Promise(function(Ce){var Me=new XMLHttpRequest;Me.open(ve.method,ve.url,!0),Object.keys(ve.headers).forEach(function(St){return Me.setRequestHeader(St,ve.headers[St])});var Oe,nt=function(St,at){return setTimeout(function(){Me.abort(),Ce({status:0,content:at,isTimedOut:!0})},1e3*St)},tt=nt(ve.connectTimeout,"Connection timeout");Me.onreadystatechange=function(){Me.readyState>Me.OPENED&&Oe===void 0&&(clearTimeout(tt),Oe=nt(ve.responseTimeout,"Socket timeout"))},Me.onerror=function(){Me.status===0&&(clearTimeout(tt),clearTimeout(Oe),Ce({content:Me.responseText||"Network request failed",status:Me.status,isTimedOut:!1}))},Me.onload=function(){clearTimeout(tt),clearTimeout(Oe),Ce({content:Me.responseText,status:Me.status,isTimedOut:!1})},Me.send(ve.data)})}},logger:(Q=fH,{debug:function(ve,Ce){return uH>=Q&&console.debug(ve,Ce),Promise.resolve()},info:function(ve,Ce){return hH>=Q&&console.info(ve,Ce),Promise.resolve()},error:function(ve,Ce){return console.error(ve,Ce),Promise.resolve()}}),responsesCache:h(),requestsCache:h({serializable:!1}),hostsCache:c({caches:[o({key:"".concat("4.22.1","-").concat(U)}),h()]}),userAgent:V("4.22.1").add({segment:"Browser"})},Se=i(i({},le),q),Pe=function(){return function(ve){return function(Ce){var Me=Ce.region||"us",Oe=u(v.WithinHeaders,Ce.appId,Ce.apiKey),nt=$(i(i({hosts:[{url:"personalization.".concat(Me,".algolia.com")}]},Ce),{},{headers:i(i(i({},Oe.headers()),{"content-type":"application/json"}),Ce.headers),queryParameters:i(i({},Oe.queryParameters()),Ce.queryParameters)}));return m({appId:Ce.appId,transporter:nt},Ce.methods)}(i(i(i({},le),ve),{},{methods:{getPersonalizationStrategy:z,setPersonalizationStrategy:L}}))}};return function(ve){var Ce=ve.appId,Me=u(ve.authMode!==void 0?ve.authMode:v.WithinHeaders,Ce,ve.apiKey),Oe=$(i(i({hosts:[{url:"".concat(Ce,"-dsn.algolia.net"),accept:y.Read},{url:"".concat(Ce,".algolia.net"),accept:y.Write}].concat(p([{url:"".concat(Ce,"-1.algolianet.com")},{url:"".concat(Ce,"-2.algolianet.com")},{url:"".concat(Ce,"-3.algolianet.com")}]))},ve),{},{headers:i(i(i({},Me.headers()),{"content-type":"application/x-www-form-urlencoded"}),ve.headers),queryParameters:i(i({},Me.queryParameters()),ve.queryParameters)}));return m({transporter:Oe,appId:Ce,addAlgoliaAgent:function(nt,tt){Oe.userAgent.add({segment:nt,version:tt})},clearCache:function(){return Promise.all([Oe.requestsCache.clear(),Oe.responsesCache.clear()]).then(function(){})}},ve.methods)}(i(i({},Se),{},{methods:{search:ge,searchForFacetValues:ye,multipleBatch:nf,multipleGetObjects:ue,multipleQueries:ge,copyIndex:te,copySettings:ne,copySynonyms:ie,copyRules:J,moveIndex:gr,listIndices:ai,getLogs:me,listClusters:Ut,multipleSearchForFacetValues:ye,getApiKey:be,addApiKey:K,listApiKeys:tn,updateApiKey:bt,deleteApiKey:he,restoreApiKey:Qe,assignUserID:Z,assignUserIDs:ee,getUserID:ze,searchUserIDs:Ue,listUserIDs:Ns,getTopUserIDs:Re,removeUserID:De,hasPendingMappings:_t,clearDictionaryEntries:ae,deleteDictionaryEntries:fe,getDictionarySettings:se,getAppTask:pe,replaceDictionaryEntries:et,saveDictionaryEntries:Ze,searchDictionaryEntries:He,setDictionarySettings:Mt,waitAppTask:On,customRequest:re,initIndex:function(ve){return function(Ce){return st(ve)(Ce,{methods:{batch:_n,delete:sf,findAnswers:Ln,getObject:wg,getObjects:ZV,saveObject:oH,saveObjects:Z_,search:B4,searchForFacetValues:U4,waitTask:kn,setSettings:cH,getSettings:N4,partialUpdateObject:nH,partialUpdateObjects:j4,deleteObject:of,deleteObjects:il,deleteBy:rf,clearObjects:Pc,browseObjects:sr,getObjectPosition:J_,findObject:sl,exists:Do,saveSynonym:lH,saveSynonyms:tb,getSynonym:tH,searchSynonyms:G4,browseSynonyms:nl,deleteSynonym:Ir,clearSynonyms:Ic,replaceAllObjects:rH,replaceAllSynonyms:sH,searchRules:$4,getRule:eH,deleteRule:$t,saveRule:aH,saveRules:eb,replaceAllRules:iH,browseRules:li,clearRules:Ai}})}},initAnalytics:function(){return function(ve){return function(Ce){var Me=Ce.region||"us",Oe=u(v.WithinHeaders,Ce.appId,Ce.apiKey),nt=$(i(i({hosts:[{url:"analytics.".concat(Me,".algolia.com")}]},Ce),{},{headers:i(i(i({},Oe.headers()),{"content-type":"application/json"}),Ce.headers),queryParameters:i(i({},Oe.queryParameters()),Ce.queryParameters)}));return m({appId:Ce.appId,transporter:nt},Ce.methods)}(i(i(i({},le),ve),{},{methods:{addABTest:A,getABTest:X,getABTests:N,stopABTest:F,deleteABTest:D}}))}},initPersonalization:Pe,initRecommendation:function(){return function(ve){return Se.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),Pe()(ve)}}}}))}return V4.version="4.22.1",V4})})(EV);var a5e=EV.exports;const l5e=Tr(a5e),c5e="KO25I12XZ3",u5e="8f1c3789bd528e25c3e27ab835584af5",h5e="prod_studio_items",f5e=l5e(c5e,u5e),d5e=f5e.initIndex(h5e);async function PD(e){try{return await d5e.getObject(e)}catch{return null}}var Ye={};const p5e={},g5e=Object.freeze(Object.defineProperty({__proto__:null,default:p5e},Symbol.toStringTag,{value:"Module"})),JS=yH(g5e);(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.3.0"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var n=JS,r=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=r.document,t.jsdomImplForWrapper=JS.implForWrapper,t.nodeCanvas=JS.Canvas,t.window=r,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function a(d,p){if(this.__eventListeners[d]){var m=this.__eventListeners[d];p?m[m.indexOf(p)]=!1:t.util.array.fill(m,!1)}}function o(d,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in d)this.on(m,d[m]);else this.__eventListeners[d]||(this.__eventListeners[d]=[]),this.__eventListeners[d].push(p);return this}function c(d,p){var m=(function(){p.apply(this,arguments),this.off(d,m)}).bind(this);this.on(d,m)}function h(d,p){if(arguments.length===1)for(var m in d)c.call(this,m,d[m]);else c.call(this,d,p);return this}function u(d,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(d in this.__eventListeners)a.call(this,d);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in d)a.call(this,m,d[m]);else a.call(this,d,p);return this}function f(d,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[d];if(!m)return this;for(var g=0,v=m.length;g<v;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[d]=m.filter(function(_){return _!==!1}),this}t.Observable={fire:f,on:o,once:h,off:u}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,o=arguments.length;a<o;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,o,c){var h=this._objects;return c?h[o]=a:h.splice(o,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,o,c=!1,h=0,u=arguments.length;h<u;h++)o=a.indexOf(arguments[h]),o!==-1&&(c=!0,a.splice(o,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(a,o){for(var c=this.getObjects(),h=0,u=c.length;h<u;h++)a.call(o,c[h],h,c);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(o){return o.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,o){return this._objects.indexOf(a)>-1?!0:o?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,o){return a+=o.complexity?o.complexity():0,a},0)}},t.CommonMethods={_setOptions:function(a){for(var o in a)this.set(o,a[o])},_initGradient:function(a,o){a&&a.colorStops&&!(a instanceof t.Gradient)&&this.set(o,new t.Gradient(a))},_initPattern:function(a,o,c){a&&a.source&&!(a instanceof t.Pattern)?this.set(o,new t.Pattern(a,c)):c&&c()},_setObject:function(a){for(var o in a)this._set(o,a[o])},set:function(a,o){return typeof a=="object"?this._setObject(a):this._set(a,o),this},_set:function(a,o){this[a]=o},toggle:function(a){var o=this.get(a);return typeof o=="boolean"&&this.set(a,!o),this},get:function(a){return this[a]}},function(a){var o=Math.sqrt,c=Math.atan2,h=Math.pow,u=Math.PI/180,f=Math.PI/2;t.util={cos:function(d){if(d===0)return 1;d<0&&(d=-d);var p=d/f;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(d)},sin:function(d){if(d===0)return 0;var p=d/f,m=1;switch(d<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(d)},removeFromArray:function(d,p){var m=d.indexOf(p);return m!==-1&&d.splice(m,1),d},getRandomInt:function(d,p){return Math.floor(Math.random()*(p-d+1))+d},degreesToRadians:function(d){return d*u},radiansToDegrees:function(d){return d/u},rotatePoint:function(d,p,m){var g=new t.Point(d.x-p.x,d.y-p.y),v=t.util.rotateVector(g,m);return new t.Point(v.x,v.y).addEquals(p)},rotateVector:function(d,p){var m=t.util.sin(p),g=t.util.cos(p),v=d.x*g-d.y*m,_=d.x*m+d.y*g;return{x:v,y:_}},createVector:function(d,p){return new t.Point(p.x-d.x,p.y-d.y)},calcAngleBetweenVectors:function(d,p){return Math.acos((d.x*p.x+d.y*p.y)/(Math.hypot(d.x,d.y)*Math.hypot(p.x,p.y)))},getHatVector:function(d){return new t.Point(d.x,d.y).multiply(1/Math.hypot(d.x,d.y))},getBisector:function(d,p,m){var g=t.util.createVector(d,p),v=t.util.createVector(d,m),_=t.util.calcAngleBetweenVectors(g,v),y=t.util.calcAngleBetweenVectors(t.util.rotateVector(g,_),v),b=_*(y===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(g,b)),angle:_}},projectStrokeOnPoints:function(d,p,m){var g=[],v=p.strokeWidth/2,_=p.strokeUniform?new t.Point(1/p.scaleX,1/p.scaleY):new t.Point(1,1),y=function(b){var S=v/Math.hypot(b.x,b.y);return new t.Point(b.x*S*_.x,b.y*S*_.y)};return d.length<=1||d.forEach(function(b,S){var x=new t.Point(b.x,b.y),C,w;S===0?(w=d[S+1],C=m?y(t.util.createVector(w,x)).addEquals(x):d[d.length-1]):S===d.length-1?(C=d[S-1],w=m?y(t.util.createVector(C,x)).addEquals(x):d[0]):(C=d[S-1],w=d[S+1]);var k=t.util.getBisector(x,C,w),I=k.vector,R=k.angle,j,G;if(p.strokeLineJoin==="miter"&&(j=-v/Math.sin(R/2),G=new t.Point(I.x*j*_.x,I.y*j*_.y),Math.hypot(G.x,G.y)/v<=p.strokeMiterLimit)){g.push(x.add(G)),g.push(x.subtract(G));return}j=-v*Math.SQRT2,G=new t.Point(I.x*j*_.x,I.y*j*_.y),g.push(x.add(G)),g.push(x.subtract(G))}),g},transformPoint:function(d,p,m){return m?new t.Point(p[0]*d.x+p[2]*d.y,p[1]*d.x+p[3]*d.y):new t.Point(p[0]*d.x+p[2]*d.y+p[4],p[1]*d.x+p[3]*d.y+p[5])},makeBoundingBoxFromPoints:function(d,p){if(p)for(var m=0;m<d.length;m++)d[m]=t.util.transformPoint(d[m],p);var g=[d[0].x,d[1].x,d[2].x,d[3].x],v=t.util.array.min(g),_=t.util.array.max(g),y=_-v,b=[d[0].y,d[1].y,d[2].y,d[3].y],S=t.util.array.min(b),x=t.util.array.max(b),C=x-S;return{left:v,top:S,width:y,height:C}},invertTransform:function(d){var p=1/(d[0]*d[3]-d[1]*d[2]),m=[p*d[3],-p*d[1],-p*d[2],p*d[0]],g=t.util.transformPoint({x:d[4],y:d[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(d,p){return parseFloat(Number(d).toFixed(p))},parseUnit:function(d,p){var m=/\D{0,2}$/.exec(d),g=parseFloat(d);switch(p||(p=t.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*t.DPI/25.4;case"cm":return g*t.DPI/2.54;case"in":return g*t.DPI;case"pt":return g*t.DPI/72;case"pc":return g*t.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(d,p){return d=t.util.string.camelize(d.charAt(0).toUpperCase()+d.slice(1)),t.util.resolveNamespace(p)[d]},getSvgAttributes:function(d){var p=["instantiated_by_use","style","id","class"];switch(d){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(d){if(!d)return t;var p=d.split("."),m=p.length,g,v=a||t.window;for(g=0;g<m;++g)v=v[p[g]];return v},loadImage:function(d,p,m,g){if(!d){p&&p.call(m,d);return}var v=t.util.createImage(),_=function(){p&&p.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=_,v.onerror=function(){t.log("Error loading "+v.src),p&&p.call(m,null,!0),v=v.onload=v.onerror=null},d.indexOf("data")!==0&&g!==void 0&&g!==null&&(v.crossOrigin=g),d.substring(0,14)==="data:image/svg"&&(v.onload=null,t.util.loadImageInDom(v,_)),v.src=d},loadImageInDom:function(d,p){var m=t.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(d),t.document.querySelector("body").appendChild(m),d.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(d,p,m,g){d=d||[];var v=[],_=0,y=d.length;function b(){++_===y&&p&&p(v.filter(function(S){return S}))}if(!y){p&&p(v);return}d.forEach(function(S,x){if(!S||!S.type){b();return}var C=t.util.getKlass(S.type,m);C.fromObject(S,function(w,k){k||(v[x]=w),g&&g(S,w,k),b()})})},enlivenObjectEnlivables:function(d,p,m){var g=t.Object.ENLIVEN_PROPS.filter(function(v){return!!d[v]});t.util.enlivenObjects(g.map(function(v){return d[v]}),function(v){var _={};g.forEach(function(y,b){_[y]=v[b],p&&(p[y]=v[b])}),m&&m(_)})},enlivenPatterns:function(d,p){d=d||[];function m(){++v===_&&p&&p(g)}var g=[],v=0,_=d.length;if(!_){p&&p(g);return}d.forEach(function(y,b){y&&y.source?new t.Pattern(y,function(S){g[b]=S,m()}):(g[b]=y,m())})},groupSVGElements:function(d,p,m){var g;return d&&d.length===1?(typeof m<"u"&&(d[0].sourcePath=m),d[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new t.Group(d,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(d,p,m){if(m&&Array.isArray(m))for(var g=0,v=m.length;g<v;g++)m[g]in d&&(p[m[g]]=d[m[g]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(d){var p=t.util.createCanvasElement();return p.width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0),p},toDataURL:function(d,p,m){return d.toDataURL("image/"+p,m)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(d,p,m){return[d[0]*p[0]+d[2]*p[1],d[1]*p[0]+d[3]*p[1],d[0]*p[2]+d[2]*p[3],d[1]*p[2]+d[3]*p[3],m?0:d[0]*p[4]+d[2]*p[5]+d[4],m?0:d[1]*p[4]+d[3]*p[5]+d[5]]},qrDecompose:function(d){var p=c(d[1],d[0]),m=h(d[0],2)+h(d[1],2),g=o(m),v=(d[0]*d[3]-d[2]*d[1])/g,_=c(d[0]*d[2]+d[1]*d[3],m);return{angle:p/u,scaleX:g,scaleY:v,skewX:_/u,skewY:0,translateX:d[4],translateY:d[5]}},calcRotateMatrix:function(d){if(!d.angle)return t.iMatrix.concat();var p=t.util.degreesToRadians(d.angle),m=t.util.cos(p),g=t.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(d){var p=typeof d.scaleX>"u"?1:d.scaleX,m=typeof d.scaleY>"u"?1:d.scaleY,g=[d.flipX?-p:p,0,0,d.flipY?-m:m,0,0],v=t.util.multiplyTransformMatrices,_=t.util.degreesToRadians;return d.skewX&&(g=v(g,[1,0,Math.tan(_(d.skewX)),1],!0)),d.skewY&&(g=v(g,[1,Math.tan(_(d.skewY)),0,1],!0)),g},composeMatrix:function(d){var p=[1,0,0,1,d.translateX||0,d.translateY||0],m=t.util.multiplyTransformMatrices;return d.angle&&(p=m(p,t.util.calcRotateMatrix(d))),(d.scaleX!==1||d.scaleY!==1||d.skewX||d.skewY||d.flipX||d.flipY)&&(p=m(p,t.util.calcDimensionsMatrix(d))),p},resetObjectTransform:function(d){d.scaleX=1,d.scaleY=1,d.skewX=0,d.skewY=0,d.flipX=!1,d.flipY=!1,d.rotate(0)},saveObjectTransform:function(d){return{scaleX:d.scaleX,scaleY:d.scaleY,skewX:d.skewX,skewY:d.skewY,angle:d.angle,left:d.left,flipX:d.flipX,flipY:d.flipY,top:d.top}},isTransparent:function(d,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var v=!0,_,y,b=d.getImageData(p,m,g*2||1,g*2||1),S=b.data.length;for(_=3;_<S&&(y=b.data[_],v=y<=0,v!==!1);_+=4);return b=null,v},parsePreserveAspectRatioAttribute:function(d){var p="meet",m="Mid",g="Mid",v=d.split(" "),_;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(_=p,p="meet"):v.length&&(_=v.pop())),m=_!=="none"?_.slice(1,4):"none",g=_!=="none"?_.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(d){d=(d||"").toLowerCase(),d?t.charWidthsCache[d]&&delete t.charWidthsCache[d]:t.charWidthsCache={}},limitDimsByArea:function(d,p){var m=Math.sqrt(p*d),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(d,p,m){return Math.max(d,Math.min(p,m))},findScaleToFit:function(d,p){return Math.min(p.width/d.width,p.height/d.height)},findScaleToCover:function(d,p){return Math.max(p.width/d.width,p.height/d.height)},matrixToSVG:function(d){return"matrix("+d.map(function(p){return t.util.toFixed(p,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(d,p){var m=t.util.invertTransform(p),g=t.util.multiplyTransformMatrices(m,d.calcOwnMatrix());t.util.applyTransformToObject(d,g)},addTransformToObject:function(d,p){t.util.applyTransformToObject(d,t.util.multiplyTransformMatrices(p,d.calcOwnMatrix()))},applyTransformToObject:function(d,p){var m=t.util.qrDecompose(p),g=new t.Point(m.translateX,m.translateY);d.flipX=!1,d.flipY=!1,d.set("scaleX",m.scaleX),d.set("scaleY",m.scaleY),d.skewX=m.skewX,d.skewY=m.skewY,d.angle=m.angle,d.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(d,p,m){var g=d/2,v=p/2,_=[{x:-g,y:-v},{x:g,y:-v},{x:-g,y:v},{x:g,y:v}],y=t.util.calcDimensionsMatrix(m),b=t.util.makeBoundingBoxFromPoints(_,y);return{x:b.width,y:b.height}},mergeClipPaths:function(d,p){var m=d,g=p;m.inverted&&!g.inverted&&(m=p,g=d),t.util.applyTransformToObject(g,t.util.multiplyTransformMatrices(t.util.invertTransform(m.calcTransformMatrix()),g.calcTransformMatrix()));var v=m.inverted&&g.inverted;return v&&(m.inverted=g.inverted=!1),new t.Group([m],{clipPath:g,inverted:v})},hasStyleChanged:function(d,p,m){return m=m||!1,d.fill!==p.fill||d.stroke!==p.stroke||d.strokeWidth!==p.strokeWidth||d.fontSize!==p.fontSize||d.fontFamily!==p.fontFamily||d.fontWeight!==p.fontWeight||d.fontStyle!==p.fontStyle||d.textBackgroundColor!==p.textBackgroundColor||d.deltaY!==p.deltaY||m&&(d.overline!==p.overline||d.underline!==p.underline||d.linethrough!==p.linethrough)},stylesToArray:function(m,p){for(var m=t.util.object.clone(m,!0),g=p.split(`
`),v=-1,_={},y=[],b=0;b<g.length;b++){if(!m[b]){v+=g[b].length;continue}for(var S=0;S<g[b].length;S++){v++;var x=m[b][S];if(x&&Object.keys(x).length>0){var C=t.util.hasStyleChanged(_,x,!0);C?y.push({start:v,end:v+1,style:x}):y[y.length-1].end++}_=x||{}}}return y},stylesFromArray:function(d,p){if(!Array.isArray(d))return d;for(var m=p.split(`
`),g=-1,v=0,_={},y=0;y<m.length;y++)for(var b=0;b<m[y].length;b++)g++,d[v]&&d[v].start<=g&&g<d[v].end&&(_[y]=_[y]||{},_[y][b]=Object.assign({},d[v].style),g===d[v].end-1&&v++);return _}}}(e),function(){var a=Array.prototype.join,o={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function h(P,O,A,D,X,N,F,z,L,H,K){var Z=t.util.cos(P),ee=t.util.sin(P),ae=t.util.cos(O),te=t.util.sin(O),J=A*X*ae-D*N*te+F,ne=D*X*ae+A*N*te+z,ie=H+L*(-A*X*ee-D*N*Z),re=K+L*(-D*X*ee+A*N*Z),he=J+L*(A*X*te+D*N*ae),fe=ne+L*(D*X*te-A*N*ae);return["C",ie,re,he,fe,J,ne]}function u(P,O,A,D,X,N,F){var z=Math.PI,L=F*z/180,H=t.util.sin(L),K=t.util.cos(L),Z=0,ee=0;A=Math.abs(A),D=Math.abs(D);var ae=-K*P*.5-H*O*.5,te=-K*O*.5+H*P*.5,J=A*A,ne=D*D,ie=te*te,re=ae*ae,he=J*ne-J*ie-ne*re,fe=0;if(he<0){var be=Math.sqrt(1-he/(J*ne));A*=be,D*=be}else fe=(X===N?-1:1)*Math.sqrt(he/(J*ie+ne*re));var pe=fe*A*te/D,se=-fe*D*ae/A,me=K*pe-H*se+P*.5,Re=H*pe+K*se+O*.5,ze=f(1,0,(ae-pe)/A,(te-se)/D),_t=f((ae-pe)/A,(te-se)/D,(-ae-pe)/A,(-te-se)/D);N===0&&_t>0?_t-=2*z:N===1&&_t<0&&(_t+=2*z);for(var st=Math.ceil(Math.abs(_t/z*2)),tn=[],Ut=_t/st,ai=8/3*Math.sin(Ut/4)*Math.sin(Ut/4)/Math.sin(Ut/2),Ns=ze+Ut,gr=0;gr<st;gr++)tn[gr]=h(ze,Ns,K,H,A,D,me,Re,ai,Z,ee),Z=tn[gr][5],ee=tn[gr][6],ze=Ns,Ns+=Ut;return tn}function f(P,O,A,D){var X=Math.atan2(O,P),N=Math.atan2(D,A);return N>=X?N-X:2*Math.PI-(X-N)}function d(P,O,A,D,X,N,F,z){var L;if(t.cachesBoundsOfCurve&&(L=a.call(arguments),t.boundsOfCurveCache[L]))return t.boundsOfCurveCache[L];var H=Math.sqrt,K=Math.min,Z=Math.max,ee=Math.abs,ae=[],te=[[],[]],J,ne,ie,re,he,fe,be,pe;ne=6*P-12*A+6*X,J=-3*P+9*A-9*X+3*F,ie=3*A-3*P;for(var se=0;se<2;++se){if(se>0&&(ne=6*O-12*D+6*N,J=-3*O+9*D-9*N+3*z,ie=3*D-3*O),ee(J)<1e-12){if(ee(ne)<1e-12)continue;re=-ie/ne,0<re&&re<1&&ae.push(re);continue}be=ne*ne-4*ie*J,!(be<0)&&(pe=H(be),he=(-ne+pe)/(2*J),0<he&&he<1&&ae.push(he),fe=(-ne-pe)/(2*J),0<fe&&fe<1&&ae.push(fe))}for(var me,Re,ze=ae.length,_t=ze,st;ze--;)re=ae[ze],st=1-re,me=st*st*st*P+3*st*st*re*A+3*st*re*re*X+re*re*re*F,te[0][ze]=me,Re=st*st*st*O+3*st*st*re*D+3*st*re*re*N+re*re*re*z,te[1][ze]=Re;te[0][_t]=P,te[1][_t]=O,te[0][_t+1]=F,te[1][_t+1]=z;var tn=[{x:K.apply(null,te[0]),y:K.apply(null,te[1])},{x:Z.apply(null,te[0]),y:Z.apply(null,te[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[L]=tn),tn}function p(P,O,A){for(var D=A[1],X=A[2],N=A[3],F=A[4],z=A[5],L=A[6],H=A[7],K=u(L-P,H-O,D,X,F,z,N),Z=0,ee=K.length;Z<ee;Z++)K[Z][1]+=P,K[Z][2]+=O,K[Z][3]+=P,K[Z][4]+=O,K[Z][5]+=P,K[Z][6]+=O;return K}function m(P){var O=0,A=0,D=P.length,X=0,N=0,F,z,L,H=[],K,Z,ee;for(z=0;z<D;++z){switch(L=!1,F=P[z].slice(0),F[0]){case"l":F[0]="L",F[1]+=O,F[2]+=A;case"L":O=F[1],A=F[2];break;case"h":F[1]+=O;case"H":F[0]="L",F[2]=A,O=F[1];break;case"v":F[1]+=A;case"V":F[0]="L",A=F[1],F[1]=O,F[2]=A;break;case"m":F[0]="M",F[1]+=O,F[2]+=A;case"M":O=F[1],A=F[2],X=F[1],N=F[2];break;case"c":F[0]="C",F[1]+=O,F[2]+=A,F[3]+=O,F[4]+=A,F[5]+=O,F[6]+=A;case"C":Z=F[3],ee=F[4],O=F[5],A=F[6];break;case"s":F[0]="S",F[1]+=O,F[2]+=A,F[3]+=O,F[4]+=A;case"S":K==="C"?(Z=2*O-Z,ee=2*A-ee):(Z=O,ee=A),O=F[3],A=F[4],F[0]="C",F[5]=F[3],F[6]=F[4],F[3]=F[1],F[4]=F[2],F[1]=Z,F[2]=ee,Z=F[3],ee=F[4];break;case"q":F[0]="Q",F[1]+=O,F[2]+=A,F[3]+=O,F[4]+=A;case"Q":Z=F[1],ee=F[2],O=F[3],A=F[4];break;case"t":F[0]="T",F[1]+=O,F[2]+=A;case"T":K==="Q"?(Z=2*O-Z,ee=2*A-ee):(Z=O,ee=A),F[0]="Q",O=F[1],A=F[2],F[1]=Z,F[2]=ee,F[3]=O,F[4]=A;break;case"a":F[0]="A",F[6]+=O,F[7]+=A;case"A":L=!0,H=H.concat(p(O,A,F)),O=F[6],A=F[7];break;case"z":case"Z":O=X,A=N;break}L||H.push(F),K=F[0]}return H}function g(P,O,A,D){return Math.sqrt((A-P)*(A-P)+(D-O)*(D-O))}function v(P){return P*P*P}function _(P){return 3*P*P*(1-P)}function y(P){return 3*P*(1-P)*(1-P)}function b(P){return(1-P)*(1-P)*(1-P)}function S(P,O,A,D,X,N,F,z){return function(L){var H=v(L),K=_(L),Z=y(L),ee=b(L);return{x:F*H+X*K+A*Z+P*ee,y:z*H+N*K+D*Z+O*ee}}}function x(P,O,A,D,X,N,F,z){return function(L){var H=1-L,K=3*H*H*(A-P)+6*H*L*(X-A)+3*L*L*(F-X),Z=3*H*H*(D-O)+6*H*L*(N-D)+3*L*L*(z-N);return Math.atan2(Z,K)}}function C(P){return P*P}function w(P){return 2*P*(1-P)}function k(P){return(1-P)*(1-P)}function I(P,O,A,D,X,N){return function(F){var z=C(F),L=w(F),H=k(F);return{x:X*z+A*L+P*H,y:N*z+D*L+O*H}}}function R(P,O,A,D,X,N){return function(F){var z=1-F,L=2*z*(A-P)+2*F*(X-A),H=2*z*(D-O)+2*F*(N-D);return Math.atan2(H,L)}}function j(P,O,A){var D={x:O,y:A},X,N=0,F;for(F=1;F<=100;F+=1)X=P(F/100),N+=g(D.x,D.y,X.x,X.y),D=X;return N}function G(P,O){for(var A=0,D=0,X=P.iterator,N={x:P.x,y:P.y},F,z,L=.01,H=P.angleFinder,K;D<O&&L>1e-4;)F=X(A),K=A,z=g(N.x,N.y,F.x,F.y),z+D>O?(A-=L,L/=2):(N=F,A+=L,D+=z);return F.angle=H(K),F}function B(P){for(var O=0,A=P.length,D,X=0,N=0,F=0,z=0,L=[],H,K,Z,ee=0;ee<A;ee++){switch(D=P[ee],K={x:X,y:N,command:D[0]},D[0]){case"M":K.length=0,F=X=D[1],z=N=D[2];break;case"L":K.length=g(X,N,D[1],D[2]),X=D[1],N=D[2];break;case"C":H=S(X,N,D[1],D[2],D[3],D[4],D[5],D[6]),Z=x(X,N,D[1],D[2],D[3],D[4],D[5],D[6]),K.iterator=H,K.angleFinder=Z,K.length=j(H,X,N),X=D[5],N=D[6];break;case"Q":H=I(X,N,D[1],D[2],D[3],D[4]),Z=R(X,N,D[1],D[2],D[3],D[4]),K.iterator=H,K.angleFinder=Z,K.length=j(H,X,N),X=D[3],N=D[4];break;case"Z":case"z":K.destX=F,K.destY=z,K.length=g(X,N,F,z),X=F,N=z;break}O+=K.length,L.push(K)}return L.push({length:O,x:X,y:N}),L}function $(P,O,A){A||(A=B(P));for(var D=0;O-A[D].length>0&&D<A.length-2;)O-=A[D].length,D++;var X=A[D],N=O/X.length,F=X.command,z=P[D],L;switch(F){case"M":return{x:X.x,y:X.y,angle:0};case"Z":case"z":return L=new t.Point(X.x,X.y).lerp(new t.Point(X.destX,X.destY),N),L.angle=Math.atan2(X.destY-X.y,X.destX-X.x),L;case"L":return L=new t.Point(X.x,X.y).lerp(new t.Point(z[1],z[2]),N),L.angle=Math.atan2(z[2]-X.y,z[1]-X.x),L;case"C":return G(X,O);case"Q":return G(X,O)}}function V(P){var O=[],A=[],D,X,N=t.rePathCommand,F="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",z="("+F+")"+t.commaWsp,L="([01])"+t.commaWsp+"?",H=z+"?"+z+"?"+z+L+L+z+"?("+F+")",K=new RegExp(H,"g"),Z,ee,ae;if(!P||!P.match)return O;ae=P.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var te=0,J,ne=ae.length;te<ne;te++){D=ae[te],ee=D.slice(1).trim(),A.length=0;var ie=D.charAt(0);if(J=[ie],ie.toLowerCase()==="a")for(var re;re=K.exec(ee);)for(var he=1;he<re.length;he++)A.push(re[he]);else for(;Z=N.exec(ee);)A.push(Z[0]);for(var he=0,fe=A.length;he<fe;he++)X=parseFloat(A[he]),isNaN(X)||J.push(X);var be=o[ie.toLowerCase()],pe=c[ie]||ie;if(J.length-1>be)for(var se=1,me=J.length;se<me;se+=be)O.push([ie].concat(J.slice(se,se+be))),ie=pe;else O.push(J)}return O}function W(P,O){var A=[],D,X=new t.Point(P[0].x,P[0].y),N=new t.Point(P[1].x,P[1].y),F=P.length,z=1,L=0,H=F>2;for(O=O||0,H&&(z=P[2].x<N.x?-1:P[2].x===N.x?0:1,L=P[2].y<N.y?-1:P[2].y===N.y?0:1),A.push(["M",X.x-z*O,X.y-L*O]),D=1;D<F;D++){if(!X.eq(N)){var K=X.midPointFrom(N);A.push(["Q",X.x,X.y,K.x,K.y])}X=P[D],D+1<P.length&&(N=P[D+1])}return H&&(z=X.x>P[D-2].x?1:X.x===P[D-2].x?0:-1,L=X.y>P[D-2].y?1:X.y===P[D-2].y?0:-1),A.push(["L",X.x+z*O,X.y+L*O]),A}function M(P,O,A){return A&&(O=t.util.multiplyTransformMatrices(O,[1,0,0,1,-A.x,-A.y])),P.map(function(D){for(var X=D.slice(0),N={},F=1;F<D.length-1;F+=2)N.x=D[F],N.y=D[F+1],N=t.util.transformPoint(N,O),X[F]=N.x,X[F+1]=N.y;return X})}t.util.joinPath=function(P){return P.map(function(O){return O.join(" ")}).join(" ")},t.util.parsePath=V,t.util.makePathSimpler=m,t.util.getSmoothPathFromPoints=W,t.util.getPathSegmentsInfo=B,t.util.getBoundsOfCurve=d,t.util.getPointOnPath=$,t.util.transformPath=M}(),function(){var a=Array.prototype.slice;function o(d,p){for(var m=a.call(arguments,2),g=[],v=0,_=d.length;v<_;v++)g[v]=m.length?d[v][p].apply(d[v],m):d[v][p].call(d[v]);return g}function c(d,p){return f(d,p,function(m,g){return m>=g})}function h(d,p){return f(d,p,function(m,g){return m<g})}function u(d,p){for(var m=d.length;m--;)d[m]=p;return d}function f(d,p,m){if(!(!d||d.length===0)){var g=d.length-1,v=p?d[g][p]:d[g];if(p)for(;g--;)m(d[g][p],v)&&(v=d[g][p]);else for(;g--;)m(d[g],v)&&(v=d[g]);return v}}t.util.array={fill:u,invoke:o,min:h,max:c}}(),function(){function a(c,h,u){if(u)if(!t.isLikelyNode&&h instanceof Element)c=h;else if(h instanceof Array){c=[];for(var f=0,d=h.length;f<d;f++)c[f]=a({},h[f],u)}else if(h&&typeof h=="object")for(var p in h)p==="canvas"||p==="group"?c[p]=null:h.hasOwnProperty(p)&&(c[p]=a({},h[p],u));else c=h;else for(var p in h)c[p]=h[p];return c}function o(c,h){return a({},c,h)}t.util.object={extend:a,clone:o},t.util.object.extend(t.util,t.Observable)}(),function(){function a(f){return f.replace(/-+(.)?/g,function(d,p){return p?p.toUpperCase():""})}function o(f,d){return f.charAt(0).toUpperCase()+(d?f.slice(1):f.slice(1).toLowerCase())}function c(f){return f.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(f){var d=0,p,m=[];for(d=0,p;d<f.length;d++)(p=u(f,d))!==!1&&m.push(p);return m}function u(f,d){var p=f.charCodeAt(d);if(isNaN(p))return"";if(p<55296||p>57343)return f.charAt(d);if(55296<=p&&p<=56319){if(f.length<=d+1)throw"High surrogate without following low surrogate";var m=f.charCodeAt(d+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return f.charAt(d)+f.charAt(d+1)}if(d===0)throw"Low surrogate without preceding high surrogate";var g=f.charCodeAt(d-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:a,capitalize:o,escapeXml:c,graphemeSplit:h}}(),function(){var a=Array.prototype.slice,o=function(){},c=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),h=function(p,m,g){for(var v in m)v in p.prototype&&typeof p.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(_){return function(){var y=this.constructor.superclass;this.constructor.superclass=g;var b=m[_].apply(this,arguments);if(this.constructor.superclass=y,_!=="initialize")return b}}(v):p.prototype[v]=m[v],c&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function u(){}function f(p){for(var m=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[p];if(g[p]!==v){m=v;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,a.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function d(){var p=null,m=a.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(u.prototype=p.prototype,g.prototype=new u,p.subclasses.push(g));for(var v=0,_=m.length;v<_;v++)h(g,m[v],p);return g.prototype.initialize||(g.prototype.initialize=o),g.prototype.constructor=g,g.prototype.callSuper=f,g}t.util.createClass=d}(),function(){var a=!!t.document.createElement("div").attachEvent,o=["touchstart","touchmove","touchend"];t.util.addListener=function(h,u,f,d){h&&h.addEventListener(u,f,a?!1:d)},t.util.removeListener=function(h,u,f,d){h&&h.removeEventListener(u,f,a?!1:d)};function c(h){var u=h.changedTouches;return u&&u[0]?u[0]:h}t.util.getPointer=function(h){var u=h.target,f=t.util.getScrollLeftTop(u),d=c(h);return{x:d.clientX+f.left,y:d.clientY+f.top}},t.util.isTouchEvent=function(h){return o.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function a(d,p){var m=d.style;if(!m)return d;if(typeof p=="string")return d.style.cssText+=";"+p,p.indexOf("opacity")>-1?f(d,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):d;for(var g in p)if(g==="opacity")f(d,p[g]);else{var v=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m.setProperty(v,p[g])}return d}var o=t.document.createElement("div"),c=typeof o.style.opacity=="string",h=typeof o.style.filter=="string",u=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,f=function(d){return d};c?f=function(d,p){return d.style.opacity=p,d}:h&&(f=function(d,p){var m=d.style;return d.currentStyle&&!d.currentStyle.hasLayout&&(m.zoom=1),u.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(u,p)):m.filter+=" alpha(opacity="+p*100+")",d}),t.util.setStyle=a}(),function(){var a=Array.prototype.slice;function o(b){return typeof b=="string"?t.document.getElementById(b):b}var c,h=function(b){return a.call(b,0)};try{c=h(t.document.childNodes)instanceof Array}catch{}c||(h=function(b){for(var S=new Array(b.length),x=b.length;x--;)S[x]=b[x];return S});function u(b,S){var x=t.document.createElement(b);for(var C in S)C==="class"?x.className=S[C]:C==="for"?x.htmlFor=S[C]:x.setAttribute(C,S[C]);return x}function f(b,S){b&&(" "+b.className+" ").indexOf(" "+S+" ")===-1&&(b.className+=(b.className?" ":"")+S)}function d(b,S,x){return typeof S=="string"&&(S=u(S,x)),b.parentNode&&b.parentNode.replaceChild(S,b),S.appendChild(b),S}function p(b){for(var S=0,x=0,C=t.document.documentElement,w=t.document.body||{scrollLeft:0,scrollTop:0};b&&(b.parentNode||b.host)&&(b=b.parentNode||b.host,b===t.document?(S=w.scrollLeft||C.scrollLeft||0,x=w.scrollTop||C.scrollTop||0):(S+=b.scrollLeft||0,x+=b.scrollTop||0),!(b.nodeType===1&&b.style.position==="fixed")););return{left:S,top:x}}function m(b){var S,x=b&&b.ownerDocument,C={left:0,top:0},w={left:0,top:0},k,I={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!x)return w;for(var R in I)w[I[R]]+=parseInt(g(b,R),10)||0;return S=x.documentElement,typeof b.getBoundingClientRect<"u"&&(C=b.getBoundingClientRect()),k=p(b),{left:C.left+k.left-(S.clientLeft||0)+w.left,top:C.top+k.top-(S.clientTop||0)+w.top}}var g;t.document.defaultView&&t.document.defaultView.getComputedStyle?g=function(b,S){var x=t.document.defaultView.getComputedStyle(b,null);return x?x[S]:void 0}:g=function(b,S){var x=b.style[S];return!x&&b.currentStyle&&(x=b.currentStyle[S]),x},function(){var b=t.document.documentElement.style,S="userSelect"in b?"userSelect":"MozUserSelect"in b?"MozUserSelect":"WebkitUserSelect"in b?"WebkitUserSelect":"KhtmlUserSelect"in b?"KhtmlUserSelect":"";function x(w){return typeof w.onselectstart<"u"&&(w.onselectstart=t.util.falseFunction),S?w.style[S]="none":typeof w.unselectable=="string"&&(w.unselectable="on"),w}function C(w){return typeof w.onselectstart<"u"&&(w.onselectstart=null),S?w.style[S]="":typeof w.unselectable=="string"&&(w.unselectable=""),w}t.util.makeElementUnselectable=x,t.util.makeElementSelectable=C}();function v(b){var S=t.jsdomImplForWrapper(b);return S._canvas||S._image}function _(b){if(t.isLikelyNode){var S=t.jsdomImplForWrapper(b);S&&(S._image=null,S._canvas=null,S._currentSrc=null,S._attributes=null,S._classList=null)}}function y(b,S){b.imageSmoothingEnabled=b.imageSmoothingEnabled||b.webkitImageSmoothingEnabled||b.mozImageSmoothingEnabled||b.msImageSmoothingEnabled||b.oImageSmoothingEnabled,b.imageSmoothingEnabled=S}t.util.setImageSmoothing=y,t.util.getById=o,t.util.toArray=h,t.util.addClass=f,t.util.makeElement=u,t.util.wrapElement=d,t.util.getScrollLeftTop=p,t.util.getElementOffset=m,t.util.getNodeCanvas=v,t.util.cleanUpJsdomNode=_}(),function(){function a(h,u){return h+(/\?/.test(h)?"&":"?")+u}function o(){}function c(h,u){u||(u={});var f=u.method?u.method.toUpperCase():"GET",d=u.onComplete||function(){},p=new t.window.XMLHttpRequest,m=u.body||u.parameters;return p.onreadystatechange=function(){p.readyState===4&&(d(p),p.onreadystatechange=o)},f==="GET"&&(m=null,typeof u.parameters=="string"&&(h=a(h,u.parameters))),p.open(f,h,!0),(f==="POST"||f==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}t.util.request=c}(),t.log=console.log,t.warn=console.warn,function(){var a=t.util.object.extend,o=t.util.object.clone,c=[];t.util.object.extend(c,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(_){_.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var _=this.filter(function(y){return typeof y.target=="object"&&y.target.canvas===v});return _.forEach(function(y){y.cancel()}),_},cancelByTarget:function(v){var _=this.findAnimationsByTarget(v);return _.forEach(function(y){y.cancel()}),_},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(_){return _.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(_){return _.target===v}):[]}});function h(){return!1}function u(v,_,y,b){return-y*Math.cos(v/b*(Math.PI/2))+y+_}function f(v){v||(v={});var _=!1,y,b=function(){var S=t.runningAnimations.indexOf(y);return S>-1&&t.runningAnimations.splice(S,1)[0]};return y=a(o(v),{cancel:function(){return _=!0,b()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(y),m(function(S){var x=S||+new Date,C=v.duration||500,w=x+C,k,I=v.onChange||h,R=v.abort||h,j=v.onComplete||h,G=v.easing||u,B="startValue"in v?v.startValue.length>0:!1,$="startValue"in v?v.startValue:0,V="endValue"in v?v.endValue:100,W=v.byValue||(B?$.map(function(M,P){return V[P]-$[P]}):V-$);v.onStart&&v.onStart(),function M(P){k=P||+new Date;var O=k>w?C:k-x,A=O/C,D=B?$.map(function(N,F){return G(O,$[F],W[F],C)}):G(O,$,W,C),X=Math.abs(B?(D[0]-$[0])/W[0]:(D-$)/W);if(y.currentValue=B?D.slice():D,y.completionRate=X,y.durationRate=A,!_){if(R(D,X,A)){b();return}if(k>w){y.currentValue=B?V.slice():V,y.completionRate=1,y.durationRate=1,I(B?V.slice():V,1,1),j(V,1,1),b();return}else I(D,X,A),m(M)}}(x)}),y.cancel}var d=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(v){return t.window.setTimeout(v,1e3/60)},p=t.window.cancelAnimationFrame||t.window.clearTimeout;function m(){return d.apply(t.window,arguments)}function g(){return p.apply(t.window,arguments)}t.util.animate=f,t.util.requestAnimFrame=m,t.util.cancelAnimFrame=g,t.runningAnimations=c}(),function(){function a(c,h,u){var f="rgba("+parseInt(c[0]+u*(h[0]-c[0]),10)+","+parseInt(c[1]+u*(h[1]-c[1]),10)+","+parseInt(c[2]+u*(h[2]-c[2]),10);return f+=","+(c&&h?parseFloat(c[3]+u*(h[3]-c[3])):1),f+=")",f}function o(c,h,u,f){var d=new t.Color(c).getSource(),p=new t.Color(h).getSource(),m=f.onComplete,g=f.onChange;return f=f||{},t.util.animate(t.util.object.extend(f,{duration:u||500,startValue:d,endValue:p,byValue:p,easing:function(v,_,y,b){var S=f.colorEasing?f.colorEasing(v,b):1-Math.cos(v/b*(Math.PI/2));return a(_,y,S)},onComplete:function(v,_,y){if(m)return m(a(p,p,0),_,y)},onChange:function(v,_,y){if(g){if(Array.isArray(v))return g(a(v,v,0),_,y);g(v,_,y)}}}))}t.util.animateColor=o}(),function(){function a(P,O,A,D){return P<Math.abs(O)?(P=O,D=A/4):O===0&&P===0?D=A/(2*Math.PI)*Math.asin(1):D=A/(2*Math.PI)*Math.asin(O/P),{a:P,c:O,p:A,s:D}}function o(P,O,A){return P.a*Math.pow(2,10*(O-=1))*Math.sin((O*A-P.s)*(2*Math.PI)/P.p)}function c(P,O,A,D){return A*((P=P/D-1)*P*P+1)+O}function h(P,O,A,D){return P/=D/2,P<1?A/2*P*P*P+O:A/2*((P-=2)*P*P+2)+O}function u(P,O,A,D){return A*(P/=D)*P*P*P+O}function f(P,O,A,D){return-A*((P=P/D-1)*P*P*P-1)+O}function d(P,O,A,D){return P/=D/2,P<1?A/2*P*P*P*P+O:-A/2*((P-=2)*P*P*P-2)+O}function p(P,O,A,D){return A*(P/=D)*P*P*P*P+O}function m(P,O,A,D){return A*((P=P/D-1)*P*P*P*P+1)+O}function g(P,O,A,D){return P/=D/2,P<1?A/2*P*P*P*P*P+O:A/2*((P-=2)*P*P*P*P+2)+O}function v(P,O,A,D){return-A*Math.cos(P/D*(Math.PI/2))+A+O}function _(P,O,A,D){return A*Math.sin(P/D*(Math.PI/2))+O}function y(P,O,A,D){return-A/2*(Math.cos(Math.PI*P/D)-1)+O}function b(P,O,A,D){return P===0?O:A*Math.pow(2,10*(P/D-1))+O}function S(P,O,A,D){return P===D?O+A:A*(-Math.pow(2,-10*P/D)+1)+O}function x(P,O,A,D){return P===0?O:P===D?O+A:(P/=D/2,P<1?A/2*Math.pow(2,10*(P-1))+O:A/2*(-Math.pow(2,-10*--P)+2)+O)}function C(P,O,A,D){return-A*(Math.sqrt(1-(P/=D)*P)-1)+O}function w(P,O,A,D){return A*Math.sqrt(1-(P=P/D-1)*P)+O}function k(P,O,A,D){return P/=D/2,P<1?-A/2*(Math.sqrt(1-P*P)-1)+O:A/2*(Math.sqrt(1-(P-=2)*P)+1)+O}function I(P,O,A,D){var X=1.70158,N=0,F=A;if(P===0)return O;if(P/=D,P===1)return O+A;N||(N=D*.3);var z=a(F,A,N,X);return-o(z,P,D)+O}function R(P,O,A,D){var X=1.70158,N=0,F=A;if(P===0)return O;if(P/=D,P===1)return O+A;N||(N=D*.3);var z=a(F,A,N,X);return z.a*Math.pow(2,-10*P)*Math.sin((P*D-z.s)*(2*Math.PI)/z.p)+z.c+O}function j(P,O,A,D){var X=1.70158,N=0,F=A;if(P===0)return O;if(P/=D/2,P===2)return O+A;N||(N=D*(.3*1.5));var z=a(F,A,N,X);return P<1?-.5*o(z,P,D)+O:z.a*Math.pow(2,-10*(P-=1))*Math.sin((P*D-z.s)*(2*Math.PI)/z.p)*.5+z.c+O}function G(P,O,A,D,X){return X===void 0&&(X=1.70158),A*(P/=D)*P*((X+1)*P-X)+O}function B(P,O,A,D,X){return X===void 0&&(X=1.70158),A*((P=P/D-1)*P*((X+1)*P+X)+1)+O}function $(P,O,A,D,X){return X===void 0&&(X=1.70158),P/=D/2,P<1?A/2*(P*P*(((X*=1.525)+1)*P-X))+O:A/2*((P-=2)*P*(((X*=1.525)+1)*P+X)+2)+O}function V(P,O,A,D){return A-W(D-P,0,A,D)+O}function W(P,O,A,D){return(P/=D)<1/2.75?A*(7.5625*P*P)+O:P<2/2.75?A*(7.5625*(P-=1.5/2.75)*P+.75)+O:P<2.5/2.75?A*(7.5625*(P-=2.25/2.75)*P+.9375)+O:A*(7.5625*(P-=2.625/2.75)*P+.984375)+O}function M(P,O,A,D){return P<D/2?V(P*2,0,A,D)*.5+O:W(P*2-D,0,A,D)*.5+A*.5+O}t.util.ease={easeInQuad:function(P,O,A,D){return A*(P/=D)*P+O},easeOutQuad:function(P,O,A,D){return-A*(P/=D)*(P-2)+O},easeInOutQuad:function(P,O,A,D){return P/=D/2,P<1?A/2*P*P+O:-A/2*(--P*(P-2)-1)+O},easeInCubic:function(P,O,A,D){return A*(P/=D)*P*P+O},easeOutCubic:c,easeInOutCubic:h,easeInQuart:u,easeOutQuart:f,easeInOutQuart:d,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:v,easeOutSine:_,easeInOutSine:y,easeInExpo:b,easeOutExpo:S,easeInOutExpo:x,easeInCirc:C,easeOutCirc:w,easeInOutCirc:k,easeInElastic:I,easeOutElastic:R,easeInOutElastic:j,easeInBack:G,easeOutBack:B,easeInOutBack:$,easeInBounce:V,easeOutBounce:W,easeInOutBounce:M}}(),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.util.object.clone,u=o.util.toFixed,f=o.util.parseUnit,d=o.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],_={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},b="font-size",S="clip-path";o.svgValidTagNamesRegEx=w(p),o.svgViewBoxElementsRegEx=w(m),o.svgInvalidAncestorsRegEx=w(g),o.svgValidParentsRegEx=w(v),o.cssRules={},o.gradientDefs={},o.clipPaths={};function x(N){return N in _?_[N]:N}function C(N,F,z,L){var H=Array.isArray(F),K;if((N==="fill"||N==="stroke")&&F==="none")F="";else{if(N==="strokeUniform")return F==="non-scaling-stroke";if(N==="strokeDashArray")F==="none"?F=null:F=F.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(N==="transformMatrix")z&&z.transformMatrix?F=d(z.transformMatrix,o.parseTransformAttribute(F)):F=o.parseTransformAttribute(F);else if(N==="visible")F=F!=="none"&&F!=="hidden",z&&z.visible===!1&&(F=!1);else if(N==="opacity")F=parseFloat(F),z&&typeof z.opacity<"u"&&(F*=z.opacity);else if(N==="textAnchor")F=F==="start"?"left":F==="end"?"right":"center";else if(N==="charSpacing")K=f(F,L)/L*1e3;else if(N==="paintFirst"){var Z=F.indexOf("fill"),ee=F.indexOf("stroke"),F="fill";(Z>-1&&ee>-1&&ee<Z||Z===-1&&ee>-1)&&(F="stroke")}else{if(N==="href"||N==="xlink:href"||N==="font")return F;if(N==="imageSmoothing")return F==="optimizeQuality";K=H?F.map(f):f(F,L)}}return!H&&isNaN(K)?F:K}function w(N){return new RegExp("^("+N.join("|")+")\\b","i")}function k(N){for(var F in y)if(!(typeof N[y[F]]>"u"||N[F]==="")){if(typeof N[F]>"u"){if(!o.Object.prototype[F])continue;N[F]=o.Object.prototype[F]}if(N[F].indexOf("url(")!==0){var z=new o.Color(N[F]);N[F]=z.setAlpha(u(z.getAlpha()*N[y[F]],2)).toRgba()}}return N}function I(N,F){var z,L=[],H,K,Z;for(K=0,Z=F.length;K<Z;K++)z=F[K],H=N.getElementsByTagName(z),L=L.concat(Array.prototype.slice.call(H));return L}o.parseTransformAttribute=function(){function N(se,me){var Re=o.util.cos(me[0]),ze=o.util.sin(me[0]),_t=0,st=0;me.length===3&&(_t=me[1],st=me[2]),se[0]=Re,se[1]=ze,se[2]=-ze,se[3]=Re,se[4]=_t-(Re*_t-ze*st),se[5]=st-(ze*_t+Re*st)}function F(se,me){var Re=me[0],ze=me.length===2?me[1]:me[0];se[0]=Re,se[3]=ze}function z(se,me,Re){se[Re]=Math.tan(o.util.degreesToRadians(me[0]))}function L(se,me){se[4]=me[0],me.length===2&&(se[5]=me[1])}var H=o.iMatrix,K=o.reNum,Z=o.commaWsp,ee="(?:(skewX)\\s*\\(\\s*("+K+")\\s*\\))",ae="(?:(skewY)\\s*\\(\\s*("+K+")\\s*\\))",te="(?:(rotate)\\s*\\(\\s*("+K+")(?:"+Z+"("+K+")"+Z+"("+K+"))?\\s*\\))",J="(?:(scale)\\s*\\(\\s*("+K+")(?:"+Z+"("+K+"))?\\s*\\))",ne="(?:(translate)\\s*\\(\\s*("+K+")(?:"+Z+"("+K+"))?\\s*\\))",ie="(?:(matrix)\\s*\\(\\s*("+K+")"+Z+"("+K+")"+Z+"("+K+")"+Z+"("+K+")"+Z+"("+K+")"+Z+"("+K+")\\s*\\))",re="(?:"+ie+"|"+ne+"|"+J+"|"+te+"|"+ee+"|"+ae+")",he="(?:"+re+"(?:"+Z+"*"+re+")*)",fe="^\\s*(?:"+he+"?)\\s*$",be=new RegExp(fe),pe=new RegExp(re,"g");return function(se){var me=H.concat(),Re=[];if(!se||se&&!be.test(se))return me;se.replace(pe,function(_t){var st=new RegExp(re).exec(_t).filter(function(ai){return!!ai}),tn=st[1],Ut=st.slice(2).map(parseFloat);switch(tn){case"translate":L(me,Ut);break;case"rotate":Ut[0]=o.util.degreesToRadians(Ut[0]),N(me,Ut);break;case"scale":F(me,Ut);break;case"skewX":z(me,Ut,2);break;case"skewY":z(me,Ut,1);break;case"matrix":me=Ut;break}Re.push(me.concat()),me=H.concat()});for(var ze=Re[0];Re.length>1;)Re.shift(),ze=o.util.multiplyTransformMatrices(ze,Re[0]);return ze}}();function R(N,F){var z,L;N.replace(/;\s*$/,"").split(";").forEach(function(H){var K=H.split(":");z=K[0].trim().toLowerCase(),L=K[1].trim(),F[z]=L})}function j(N,F){var z,L;for(var H in N)typeof N[H]>"u"||(z=H.toLowerCase(),L=N[H],F[z]=L)}function G(N,F){var z={};for(var L in o.cssRules[F])if(B(N,L.split(" ")))for(var H in o.cssRules[F][L])z[H]=o.cssRules[F][L][H];return z}function B(N,F){var z,L=!0;return z=V(N,F.pop()),z&&F.length&&(L=$(N,F)),z&&L&&F.length===0}function $(N,F){for(var z,L=!0;N.parentNode&&N.parentNode.nodeType===1&&F.length;)L&&(z=F.pop()),N=N.parentNode,L=V(N,z);return F.length===0}function V(N,F){var z=N.nodeName,L=N.getAttribute("class"),H=N.getAttribute("id"),K,Z;if(K=new RegExp("^"+z,"i"),F=F.replace(K,""),H&&F.length&&(K=new RegExp("#"+H+"(?![a-zA-Z\\-]+)","i"),F=F.replace(K,"")),L&&F.length)for(L=L.split(" "),Z=L.length;Z--;)K=new RegExp("\\."+L[Z]+"(?![a-zA-Z\\-]+)","i"),F=F.replace(K,"");return F.length===0}function W(N,F){var z;if(N.getElementById&&(z=N.getElementById(F)),z)return z;var L,H,K,Z=N.getElementsByTagName("*");for(H=0,K=Z.length;H<K;H++)if(L=Z[H],F===L.getAttribute("id"))return L}function M(N){for(var F=I(N,["use","svg:use"]),z=0;F.length&&z<F.length;){var L=F[z],H=L.getAttribute("xlink:href")||L.getAttribute("href");if(H===null)return;var K=H.slice(1),Z=L.getAttribute("x")||0,ee=L.getAttribute("y")||0,ae=W(N,K).cloneNode(!0),te=(ae.getAttribute("transform")||"")+" translate("+Z+", "+ee+")",J,ne=F.length,ie,re,he,fe,be=o.svgNS;if(O(ae),/^svg$/i.test(ae.nodeName)){var pe=ae.ownerDocument.createElementNS(be,"g");for(re=0,he=ae.attributes,fe=he.length;re<fe;re++)ie=he.item(re),pe.setAttributeNS(be,ie.nodeName,ie.nodeValue);for(;ae.firstChild;)pe.appendChild(ae.firstChild);ae=pe}for(re=0,he=L.attributes,fe=he.length;re<fe;re++)ie=he.item(re),!(ie.nodeName==="x"||ie.nodeName==="y"||ie.nodeName==="xlink:href"||ie.nodeName==="href")&&(ie.nodeName==="transform"?te=ie.nodeValue+" "+te:ae.setAttribute(ie.nodeName,ie.nodeValue));ae.setAttribute("transform",te),ae.setAttribute("instantiated_by_use","1"),ae.removeAttribute("id"),J=L.parentNode,J.replaceChild(ae,L),F.length===ne&&z++}}var P=new RegExp("^\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*,?\\s*("+o.reNum+"+)\\s*$");function O(N){if(!o.svgViewBoxElementsRegEx.test(N.nodeName))return{};var F=N.getAttribute("viewBox"),z=1,L=1,H=0,K=0,Z,ee,ae,te,J=N.getAttribute("width"),ne=N.getAttribute("height"),ie=N.getAttribute("x")||0,re=N.getAttribute("y")||0,he=N.getAttribute("preserveAspectRatio")||"",fe=!F||!(F=F.match(P)),be=!J||!ne||J==="100%"||ne==="100%",pe=fe&&be,se={},me="",Re=0,ze=0;if(se.width=0,se.height=0,se.toBeParsed=pe,fe&&(ie||re)&&N.parentNode&&N.parentNode.nodeName!=="#document"&&(me=" translate("+f(ie)+" "+f(re)+") ",ae=(N.getAttribute("transform")||"")+me,N.setAttribute("transform",ae),N.removeAttribute("x"),N.removeAttribute("y")),pe)return se;if(fe)return se.width=f(J),se.height=f(ne),se;if(H=-parseFloat(F[1]),K=-parseFloat(F[2]),Z=parseFloat(F[3]),ee=parseFloat(F[4]),se.minX=H,se.minY=K,se.viewBoxWidth=Z,se.viewBoxHeight=ee,be?(se.width=Z,se.height=ee):(se.width=f(J),se.height=f(ne),z=se.width/Z,L=se.height/ee),he=o.util.parsePreserveAspectRatioAttribute(he),he.alignX!=="none"&&(he.meetOrSlice==="meet"&&(L=z=z>L?L:z),he.meetOrSlice==="slice"&&(L=z=z>L?z:L),Re=se.width-Z*z,ze=se.height-ee*z,he.alignX==="Mid"&&(Re/=2),he.alignY==="Mid"&&(ze/=2),he.alignX==="Min"&&(Re=0),he.alignY==="Min"&&(ze=0)),z===1&&L===1&&H===0&&K===0&&ie===0&&re===0)return se;if((ie||re)&&N.parentNode.nodeName!=="#document"&&(me=" translate("+f(ie)+" "+f(re)+") "),ae=me+" matrix("+z+" 0 0 "+L+" "+(H*z+Re)+" "+(K*L+ze)+") ",N.nodeName==="svg"){for(te=N.ownerDocument.createElementNS(o.svgNS,"g");N.firstChild;)te.appendChild(N.firstChild);N.appendChild(te)}else te=N,te.removeAttribute("x"),te.removeAttribute("y"),ae=te.getAttribute("transform")+ae;return te.setAttribute("transform",ae),se}function A(N,F){for(;N&&(N=N.parentNode);)if(N.nodeName&&F.test(N.nodeName.replace("svg:",""))&&!N.getAttribute("instantiated_by_use"))return!0;return!1}o.parseSVGDocument=function(N,F,z,L){if(N){M(N);var H=o.Object.__uid++,K,Z,ee=O(N),ae=o.util.toArray(N.getElementsByTagName("*"));if(ee.crossOrigin=L&&L.crossOrigin,ee.svgUid=H,ae.length===0&&o.isLikelyNode){ae=N.selectNodes('//*[name(.)!="svg"]');var te=[];for(K=0,Z=ae.length;K<Z;K++)te[K]=ae[K];ae=te}var J=ae.filter(function(ie){return O(ie),o.svgValidTagNamesRegEx.test(ie.nodeName.replace("svg:",""))&&!A(ie,o.svgInvalidAncestorsRegEx)});if(!J||J&&!J.length){F&&F([],{});return}var ne={};ae.filter(function(ie){return ie.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ie){var re=ie.getAttribute("id");ne[re]=o.util.toArray(ie.getElementsByTagName("*")).filter(function(he){return o.svgValidTagNamesRegEx.test(he.nodeName.replace("svg:",""))})}),o.gradientDefs[H]=o.getGradientDefs(N),o.cssRules[H]=o.getCSSRules(N),o.clipPaths[H]=ne,o.parseElements(J,function(ie,re){F&&(F(ie,ee,re,ae),delete o.gradientDefs[H],delete o.cssRules[H],delete o.clipPaths[H])},h(ee),z,L)}};function D(N,F){var z=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],L="xlink:href",H=F.getAttribute(L).slice(1),K=W(N,H);if(K&&K.getAttribute(L)&&D(N,K),z.forEach(function(ee){K&&!F.hasAttribute(ee)&&K.hasAttribute(ee)&&F.setAttribute(ee,K.getAttribute(ee))}),!F.children.length)for(var Z=K.cloneNode(!0);Z.firstChild;)F.appendChild(Z.firstChild);F.removeAttribute(L)}var X=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+o.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+o.reNum+"))?\\s+(.*)");c(o,{parseFontDeclaration:function(N,F){var z=N.match(X);if(z){var L=z[1],H=z[3],K=z[4],Z=z[5],ee=z[6];L&&(F.fontStyle=L),H&&(F.fontWeight=isNaN(parseFloat(H))?H:parseFloat(H)),K&&(F.fontSize=f(K)),ee&&(F.fontFamily=ee),Z&&(F.lineHeight=Z==="normal"?1:Z)}},getGradientDefs:function(N){var F=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],z=I(N,F),L,H=0,K={};for(H=z.length;H--;)L=z[H],L.getAttribute("xlink:href")&&D(N,L),K[L.getAttribute("id")]=L;return K},parseAttributes:function(N,F,z){if(N){var L,H={},K,Z;typeof z>"u"&&(z=N.getAttribute("svgUid")),N.parentNode&&o.svgValidParentsRegEx.test(N.parentNode.nodeName)&&(H=o.parseAttributes(N.parentNode,F,z));var ee=F.reduce(function(he,fe){return L=N.getAttribute(fe),L&&(he[fe]=L),he},{}),ae=c(G(N,z),o.parseStyleAttribute(N));ee=c(ee,ae),ae[S]&&N.setAttribute(S,ae[S]),K=Z=H.fontSize||o.Text.DEFAULT_SVG_FONT_SIZE,ee[b]&&(ee[b]=K=f(ee[b],Z));var te,J,ne={};for(var ie in ee)te=x(ie),J=C(te,ee[ie],H,K),ne[te]=J;ne&&ne.font&&o.parseFontDeclaration(ne.font,ne);var re=c(H,ne);return o.svgValidParentsRegEx.test(N.nodeName)?re:k(re)}},parseElements:function(N,F,z,L,H){new o.ElementsParser(N,F,z,L,H).parse()},parseStyleAttribute:function(N){var F={},z=N.getAttribute("style");return z&&(typeof z=="string"?R(z,F):j(z,F)),F},parsePointsAttribute:function(N){if(!N)return null;N=N.replace(/,/g," ").trim(),N=N.split(/\s+/);var F=[],z,L;for(z=0,L=N.length;z<L;z+=2)F.push({x:parseFloat(N[z]),y:parseFloat(N[z+1])});return F},getCSSRules:function(N){var F=N.getElementsByTagName("style"),z,L,H={},K;for(z=0,L=F.length;z<L;z++){var Z=F[z].textContent;Z=Z.replace(/\/\*[\s\S]*?\*\//g,""),Z.trim()!==""&&(K=Z.split("}"),K=K.filter(function(ee){return ee.trim()}),K.forEach(function(ee){var ae=ee.split("{"),te={},J=ae[1].trim(),ne=J.split(";").filter(function(fe){return fe.trim()});for(z=0,L=ne.length;z<L;z++){var ie=ne[z].split(":"),re=ie[0].trim(),he=ie[1].trim();te[re]=he}ee=ae[0].trim(),ee.split(",").forEach(function(fe){fe=fe.replace(/^svg/i,"").trim(),fe!==""&&(H[fe]?o.util.object.extend(H[fe],te):H[fe]=o.util.object.clone(te))})}))}return H},loadSVGFromURL:function(N,F,z,L){N=N.replace(/^\n\s*/,"").trim(),new o.util.request(N,{method:"get",onComplete:H});function H(K){var Z=K.responseXML;if(!Z||!Z.documentElement)return F&&F(null),!1;o.parseSVGDocument(Z.documentElement,function(ee,ae,te,J){F&&F(ee,ae,te,J)},z,L)}},loadSVGFromString:function(N,F,z,L){var H=new o.window.DOMParser,K=H.parseFromString(N.trim(),"text/xml");o.parseSVGDocument(K.documentElement,function(Z,ee,ae,te){F(Z,ee,ae,te)},z,L)}})}(e),t.ElementsParser=function(a,o,c,h,u,f){this.elements=a,this.callback=o,this.options=c,this.reviver=h,this.svgUid=c&&c.svgUid||0,this.parsingOptions=u,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=f},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var o=this;this.elements.forEach(function(c,h){c.setAttribute("svgUid",o.svgUid),o.createObject(c,h)})},a.findTag=function(o){return t[t.util.string.capitalize(o.tagName.replace("svg:",""))]},a.createObject=function(o,c){var h=this.findTag(o);if(h&&h.fromElement)try{h.fromElement(o,this.createCallback(c,o),this.options)}catch(u){t.log(u)}else this.checkIfDone()},a.createCallback=function(o,c){var h=this;return function(u){var f;h.resolveGradient(u,c,"fill"),h.resolveGradient(u,c,"stroke"),u instanceof t.Image&&u._originalElement&&(f=u.parsePreserveAspectRatioAttribute(c)),u._removeTransformMatrix(f),h.resolveClipPath(u,c),h.reviver&&h.reviver(c,u),h.instances[o]=u,h.checkIfDone()}},a.extractPropertyDefinition=function(o,c,h){var u=o[c],f=this.regexUrl;if(f.test(u)){f.lastIndex=0;var d=f.exec(u)[1];return f.lastIndex=0,t[h][this.svgUid][d]}},a.resolveGradient=function(o,c,h){var u=this.extractPropertyDefinition(o,h,"gradientDefs");if(u){var f=c.getAttribute(h+"-opacity"),d=t.Gradient.fromElement(u,o,f,this.options);o.set(h,d)}},a.createClipPathCallback=function(o,c){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,c.push(h)}},a.resolveClipPath=function(o,c){var h=this.extractPropertyDefinition(o,"clipPath","clipPaths"),u,f,d,p,m,g;if(h){p=[],d=t.util.invertTransform(o.calcTransformMatrix());for(var v=h[0].parentNode,_=c;_.parentNode&&_.getAttribute("clip-path")!==o.clipPath;)_=_.parentNode;_.parentNode.appendChild(v);for(var y=0;y<h.length;y++)u=h[y],f=this.findTag(u),f.fromElement(u,this.createClipPathCallback(o,p),this.options);p.length===1?h=p[0]:h=new t.Group(p),m=t.util.multiplyTransformMatrices(d,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,_);var g=t.util.qrDecompose(m);h.flipX=!1,h.flipY=!1,h.set("scaleX",g.scaleX),h.set("scaleY",g.scaleY),h.angle=g.angle,h.skewX=g.skewX,h.skewY=0,h.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),o.clipPath=h}else delete o.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(o){return o!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(a){var o=a.fabric||(a.fabric={});if(o.Point){o.warn("fabric.Point is already defined");return}o.Point=c;function c(h,u){this.x=h,this.y=u}c.prototype={type:"point",constructor:c,add:function(h){return new c(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new c(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new c(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new c(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new c(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new c(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,u){return typeof u>"u"&&(u=.5),u=Math.max(Math.min(1,u),0),new c(this.x+(h.x-this.x)*u,this.y+(h.y-this.y)*u)},distanceFrom:function(h){var u=this.x-h.x,f=this.y-h.y;return Math.sqrt(u*u+f*f)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new c(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new c(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,u){return this.x=h,this.y=u,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var u=this.x,f=this.y;this.x=h.x,this.y=h.y,h.x=u,h.y=f},clone:function(){return new c(this.x,this.y)}}}(e),function(a){var o=a.fabric||(a.fabric={});if(o.Intersection){o.warn("fabric.Intersection is already defined");return}function c(h){this.status=h,this.points=[]}o.Intersection=c,o.Intersection.prototype={constructor:c,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},o.Intersection.intersectLineLine=function(h,u,f,d){var p,m=(d.x-f.x)*(h.y-f.y)-(d.y-f.y)*(h.x-f.x),g=(u.x-h.x)*(h.y-f.y)-(u.y-h.y)*(h.x-f.x),v=(d.y-f.y)*(u.x-h.x)-(d.x-f.x)*(u.y-h.y);if(v!==0){var _=m/v,y=g/v;0<=_&&_<=1&&0<=y&&y<=1?(p=new c("Intersection"),p.appendPoint(new o.Point(h.x+_*(u.x-h.x),h.y+_*(u.y-h.y)))):p=new c}else m===0||g===0?p=new c("Coincident"):p=new c("Parallel");return p},o.Intersection.intersectLinePolygon=function(h,u,f){var d=new c,p=f.length,m,g,v,_;for(_=0;_<p;_++)m=f[_],g=f[(_+1)%p],v=c.intersectLineLine(h,u,m,g),d.appendPoints(v.points);return d.points.length>0&&(d.status="Intersection"),d},o.Intersection.intersectPolygonPolygon=function(h,u){var f=new c,d=h.length,p;for(p=0;p<d;p++){var m=h[p],g=h[(p+1)%d],v=c.intersectLinePolygon(m,g,u);f.appendPoints(v.points)}return f.points.length>0&&(f.status="Intersection"),f},o.Intersection.intersectPolygonRectangle=function(h,u,f){var d=u.min(f),p=u.max(f),m=new o.Point(p.x,d.y),g=new o.Point(d.x,p.y),v=c.intersectLinePolygon(d,m,h),_=c.intersectLinePolygon(m,p,h),y=c.intersectLinePolygon(p,g,h),b=c.intersectLinePolygon(g,d,h),S=new c;return S.appendPoints(v.points),S.appendPoints(_.points),S.appendPoints(y.points),S.appendPoints(b.points),S.points.length>0&&(S.status="Intersection"),S}}(e),function(a){var o=a.fabric||(a.fabric={});if(o.Color){o.warn("fabric.Color is already defined.");return}function c(u){u?this._tryParsingColor(u):this.setSource([0,0,0,1])}o.Color=c,o.Color.prototype={_tryParsingColor:function(u){var f;u in c.colorNameMap&&(u=c.colorNameMap[u]),u==="transparent"&&(f=[255,255,255,0]),f||(f=c.sourceFromHex(u)),f||(f=c.sourceFromRgb(u)),f||(f=c.sourceFromHsl(u)),f||(f=[0,0,0,1]),f&&this.setSource(f)},_rgbToHsl:function(u,f,d){u/=255,f/=255,d/=255;var p,m,g,v=o.util.array.max([u,f,d]),_=o.util.array.min([u,f,d]);if(g=(v+_)/2,v===_)p=m=0;else{var y=v-_;switch(m=g>.5?y/(2-v-_):y/(v+_),v){case u:p=(f-d)/y+(f<d?6:0);break;case f:p=(d-u)/y+2;break;case d:p=(u-f)/y+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(u){this._source=u},toRgb:function(){var u=this.getSource();return"rgb("+u[0]+","+u[1]+","+u[2]+")"},toRgba:function(){var u=this.getSource();return"rgba("+u[0]+","+u[1]+","+u[2]+","+u[3]+")"},toHsl:function(){var u=this.getSource(),f=this._rgbToHsl(u[0],u[1],u[2]);return"hsl("+f[0]+","+f[1]+"%,"+f[2]+"%)"},toHsla:function(){var u=this.getSource(),f=this._rgbToHsl(u[0],u[1],u[2]);return"hsla("+f[0]+","+f[1]+"%,"+f[2]+"%,"+u[3]+")"},toHex:function(){var u=this.getSource(),f,d,p;return f=u[0].toString(16),f=f.length===1?"0"+f:f,d=u[1].toString(16),d=d.length===1?"0"+d:d,p=u[2].toString(16),p=p.length===1?"0"+p:p,f.toUpperCase()+d.toUpperCase()+p.toUpperCase()},toHexa:function(){var u=this.getSource(),f;return f=Math.round(u[3]*255),f=f.toString(16),f=f.length===1?"0"+f:f,this.toHex()+f.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(u){var f=this.getSource();return f[3]=u,this.setSource(f),this},toGrayscale:function(){var u=this.getSource(),f=parseInt((u[0]*.3+u[1]*.59+u[2]*.11).toFixed(0),10),d=u[3];return this.setSource([f,f,f,d]),this},toBlackWhite:function(u){var f=this.getSource(),d=(f[0]*.3+f[1]*.59+f[2]*.11).toFixed(0),p=f[3];return u=u||127,d=Number(d)<Number(u)?0:255,this.setSource([d,d,d,p]),this},overlayWith:function(u){u instanceof c||(u=new c(u));var f=[],d=this.getAlpha(),p=.5,m=this.getSource(),g=u.getSource(),v;for(v=0;v<3;v++)f.push(Math.round(m[v]*(1-p)+g[v]*p));return f[3]=d,this.setSource(f),this}},o.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,o.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,o.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,o.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(u,f,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?u+(f-u)*6*d:d<1/2?f:d<2/3?u+(f-u)*(2/3-d)*6:u}o.Color.fromRgb=function(u){return c.fromSource(c.sourceFromRgb(u))},o.Color.sourceFromRgb=function(u){var f=u.match(c.reRGBa);if(f){var d=parseInt(f[1],10)/(/%$/.test(f[1])?100:1)*(/%$/.test(f[1])?255:1),p=parseInt(f[2],10)/(/%$/.test(f[2])?100:1)*(/%$/.test(f[2])?255:1),m=parseInt(f[3],10)/(/%$/.test(f[3])?100:1)*(/%$/.test(f[3])?255:1);return[parseInt(d,10),parseInt(p,10),parseInt(m,10),f[4]?parseFloat(f[4]):1]}},o.Color.fromRgba=c.fromRgb,o.Color.fromHsl=function(u){return c.fromSource(c.sourceFromHsl(u))},o.Color.sourceFromHsl=function(u){var f=u.match(c.reHSLa);if(f){var d=(parseFloat(f[1])%360+360)%360/360,p=parseFloat(f[2])/(/%$/.test(f[2])?100:1),m=parseFloat(f[3])/(/%$/.test(f[3])?100:1),g,v,_;if(p===0)g=v=_=m;else{var y=m<=.5?m*(p+1):m+p-m*p,b=m*2-y;g=h(b,y,d+1/3),v=h(b,y,d),_=h(b,y,d-1/3)}return[Math.round(g*255),Math.round(v*255),Math.round(_*255),f[4]?parseFloat(f[4]):1]}},o.Color.fromHsla=c.fromHsl,o.Color.fromHex=function(u){return c.fromSource(c.sourceFromHex(u))},o.Color.sourceFromHex=function(u){if(u.match(c.reHex)){var f=u.slice(u.indexOf("#")+1),d=f.length===3||f.length===4,p=f.length===8||f.length===4,m=d?f.charAt(0)+f.charAt(0):f.substring(0,2),g=d?f.charAt(1)+f.charAt(1):f.substring(2,4),v=d?f.charAt(2)+f.charAt(2):f.substring(4,6),_=p?d?f.charAt(3)+f.charAt(3):f.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(v,16),parseFloat((parseInt(_,16)/255).toFixed(2))]}},o.Color.fromSource=function(u){var f=new c;return f.setSource(u),f}}(e),function(a){var o=a.fabric||(a.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],u={},f="left",d="top",p="right",m="bottom",g="center",v={top:m,bottom:d,left:p,right:f,center:g},_=o.util.radiansToDegrees,y=Math.sign||function(te){return(te>0)-(te<0)||+te};function b(te,J){var ne=te.angle+_(Math.atan2(J.y,J.x))+360;return Math.round(ne%360/45)}function S(te,J){var ne=J.transform.target,ie=ne.canvas,re=o.util.object.clone(J);re.target=ne,ie&&ie.fire("object:"+te,re),ne.fire(te,J)}function x(te,J){var ne=J.canvas,ie=ne.uniScaleKey,re=te[ie];return ne.uniformScaling&&!re||!ne.uniformScaling&&re}function C(te){return te.originX===g&&te.originY===g}function w(te,J,ne){var ie=te.lockScalingX,re=te.lockScalingY;return!!(ie&&re||!J&&(ie||re)&&ne||ie&&J==="x"||re&&J==="y")}function k(te,J,ne){var ie="not-allowed",re=x(te,ne),he="";if(J.x!==0&&J.y===0?he="x":J.x===0&&J.y!==0&&(he="y"),w(ne,he,re))return ie;var fe=b(ne,J);return c[fe]+"-resize"}function I(te,J,ne){var ie="not-allowed";if(J.x!==0&&ne.lockSkewingY||J.y!==0&&ne.lockSkewingX)return ie;var re=b(ne,J)%4;return h[re]+"-resize"}function R(te,J,ne){return te[ne.canvas.altActionKey]?u.skewCursorStyleHandler(te,J,ne):u.scaleCursorStyleHandler(te,J,ne)}function j(te,J,ne){var ie=te[ne.canvas.altActionKey];if(J.x===0)return ie?"skewX":"scaleY";if(J.y===0)return ie?"skewY":"scaleX"}function G(te,J,ne){return ne.lockRotation?"not-allowed":J.cursorStyle}function B(te,J,ne,ie){return{e:te,transform:J,pointer:{x:ne,y:ie}}}function $(te){return function(J,ne,ie,re){var he=ne.target,fe=he.getCenterPoint(),be=he.translateToOriginPoint(fe,ne.originX,ne.originY),pe=te(J,ne,ie,re);return he.setPositionByOrigin(be,ne.originX,ne.originY),pe}}function V(te,J){return function(ne,ie,re,he){var fe=J(ne,ie,re,he);return fe&&S(te,B(ne,ie,re,he)),fe}}function W(te,J,ne,ie,re){var he=te.target,fe=he.controls[te.corner],be=he.canvas.getZoom(),pe=he.padding/be,se=he.toLocalPoint(new o.Point(ie,re),J,ne);return se.x>=pe&&(se.x-=pe),se.x<=-pe&&(se.x+=pe),se.y>=pe&&(se.y-=pe),se.y<=pe&&(se.y+=pe),se.x-=fe.offsetX,se.y-=fe.offsetY,se}function M(te){return te.flipX!==te.flipY}function P(te,J,ne,ie,re){if(te[J]!==0){var he=te._getTransformedDimensions()[ie],fe=re/he*te[ne];te.set(ne,fe)}}function O(te,J,ne,ie){var re=J.target,he=re._getTransformedDimensions(0,re.skewY),fe=W(J,J.originX,J.originY,ne,ie),be=Math.abs(fe.x*2)-he.x,pe=re.skewX,se;be<2?se=0:(se=_(Math.atan2(be/re.scaleX,he.y/re.scaleY)),J.originX===f&&J.originY===m&&(se=-se),J.originX===p&&J.originY===d&&(se=-se),M(re)&&(se=-se));var me=pe!==se;if(me){var Re=re._getTransformedDimensions().y;re.set("skewX",se),P(re,"skewY","scaleY","y",Re)}return me}function A(te,J,ne,ie){var re=J.target,he=re._getTransformedDimensions(re.skewX,0),fe=W(J,J.originX,J.originY,ne,ie),be=Math.abs(fe.y*2)-he.y,pe=re.skewY,se;be<2?se=0:(se=_(Math.atan2(be/re.scaleY,he.x/re.scaleX)),J.originX===f&&J.originY===m&&(se=-se),J.originX===p&&J.originY===d&&(se=-se),M(re)&&(se=-se));var me=pe!==se;if(me){var Re=re._getTransformedDimensions().x;re.set("skewY",se),P(re,"skewX","scaleX","x",Re)}return me}function D(te,J,ne,ie){var re=J.target,he=re.skewX,fe,be=J.originY;if(re.lockSkewingX)return!1;if(he===0){var pe=W(J,g,g,ne,ie);pe.x>0?fe=f:fe=p}else he>0&&(fe=be===d?f:p),he<0&&(fe=be===d?p:f),M(re)&&(fe=fe===f?p:f);J.originX=fe;var se=V("skewing",$(O));return se(te,J,ne,ie)}function X(te,J,ne,ie){var re=J.target,he=re.skewY,fe,be=J.originX;if(re.lockSkewingY)return!1;if(he===0){var pe=W(J,g,g,ne,ie);pe.y>0?fe=d:fe=m}else he>0&&(fe=be===f?d:m),he<0&&(fe=be===f?m:d),M(re)&&(fe=fe===d?m:d);J.originY=fe;var se=V("skewing",$(A));return se(te,J,ne,ie)}function N(te,J,ne,ie){var re=J,he=re.target,fe=he.translateToOriginPoint(he.getCenterPoint(),re.originX,re.originY);if(he.lockRotation)return!1;var be=Math.atan2(re.ey-fe.y,re.ex-fe.x),pe=Math.atan2(ie-fe.y,ne-fe.x),se=_(pe-be+re.theta),me=!0;if(he.snapAngle>0){var Re=he.snapAngle,ze=he.snapThreshold||Re,_t=Math.ceil(se/Re)*Re,st=Math.floor(se/Re)*Re;Math.abs(se-st)<ze?se=st:Math.abs(se-_t)<ze&&(se=_t)}return se<0&&(se=360+se),se%=360,me=he.angle!==se,he.angle=se,me}function F(te,J,ne,ie,re){re=re||{};var he=J.target,fe=he.lockScalingX,be=he.lockScalingY,pe=re.by,se,me,Re,ze,_t=x(te,he),st=w(he,pe,_t),tn,Ut,ai=J.gestureScale;if(st)return!1;if(ai)me=J.scaleX*ai,Re=J.scaleY*ai;else{if(se=W(J,J.originX,J.originY,ne,ie),tn=pe!=="y"?y(se.x):1,Ut=pe!=="x"?y(se.y):1,J.signX||(J.signX=tn),J.signY||(J.signY=Ut),he.lockScalingFlip&&(J.signX!==tn||J.signY!==Ut))return!1;if(ze=he._getTransformedDimensions(),_t&&!pe){var Ns=Math.abs(se.x)+Math.abs(se.y),gr=J.original,nf=Math.abs(ze.x*gr.scaleX/he.scaleX)+Math.abs(ze.y*gr.scaleY/he.scaleY),ue=Ns/nf;me=gr.scaleX*ue,Re=gr.scaleY*ue}else me=Math.abs(se.x*he.scaleX/ze.x),Re=Math.abs(se.y*he.scaleY/ze.y);C(J)&&(me*=2,Re*=2),J.signX!==tn&&pe!=="y"&&(J.originX=v[J.originX],me*=-1,J.signX=tn),J.signY!==Ut&&pe!=="x"&&(J.originY=v[J.originY],Re*=-1,J.signY=Ut)}var ge=he.scaleX,ye=he.scaleY;return pe?(pe==="x"&&he.set("scaleX",me),pe==="y"&&he.set("scaleY",Re)):(!fe&&he.set("scaleX",me),!be&&he.set("scaleY",Re)),ge!==he.scaleX||ye!==he.scaleY}function z(te,J,ne,ie){return F(te,J,ne,ie)}function L(te,J,ne,ie){return F(te,J,ne,ie,{by:"x"})}function H(te,J,ne,ie){return F(te,J,ne,ie,{by:"y"})}function K(te,J,ne,ie){return te[J.target.canvas.altActionKey]?u.skewHandlerX(te,J,ne,ie):u.scalingY(te,J,ne,ie)}function Z(te,J,ne,ie){return te[J.target.canvas.altActionKey]?u.skewHandlerY(te,J,ne,ie):u.scalingX(te,J,ne,ie)}function ee(te,J,ne,ie){var re=J.target,he=W(J,J.originX,J.originY,ne,ie),fe=re.strokeWidth/(re.strokeUniform?re.scaleX:1),be=C(J)?2:1,pe=re.width,se=Math.abs(he.x*be/re.scaleX)-fe;return re.set("width",Math.max(se,0)),pe!==se}function ae(te,J,ne,ie){var re=J.target,he=ne-J.offsetX,fe=ie-J.offsetY,be=!re.get("lockMovementX")&&re.left!==he,pe=!re.get("lockMovementY")&&re.top!==fe;return be&&re.set("left",he),pe&&re.set("top",fe),(be||pe)&&S("moving",B(te,J,ne,ie)),be||pe}u.scaleCursorStyleHandler=k,u.skewCursorStyleHandler=I,u.scaleSkewCursorStyleHandler=R,u.rotationWithSnapping=V("rotating",$(N)),u.scalingEqually=V("scaling",$(z)),u.scalingX=V("scaling",$(L)),u.scalingY=V("scaling",$(H)),u.scalingYOrSkewingX=K,u.scalingXOrSkewingY=Z,u.changeWidth=V("resizing",$(ee)),u.skewHandlerX=D,u.skewHandlerY=X,u.dragHandler=ae,u.scaleOrSkewActionName=j,u.rotationStyleHandler=G,u.fireEvent=S,u.wrapWithFixedAnchor=$,u.wrapWithFireEvent=V,u.getLocalPoint=W,o.controlsUtils=u}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.degreesToRadians,h=o.controlsUtils;function u(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,y=this.sizeY||g.cornerSize||v.cornerSize,b=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,S=b?"stroke":"fill",x=!b&&(g.cornerStrokeColor||v.cornerStrokeColor),C=p,w=m,k;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,_>y?(k=_,d.scale(1,y/_),w=m*_/y):y>_?(k=y,d.scale(_/y,1),C=p*y/_):k=_,d.lineWidth=1,d.beginPath(),d.arc(C,w,k/2,0,2*Math.PI,!1),d[S](),x&&d.stroke(),d.restore()}function f(d,p,m,g,v){g=g||{};var _=this.sizeX||g.cornerSize||v.cornerSize,y=this.sizeY||g.cornerSize||v.cornerSize,b=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,S=b?"stroke":"fill",x=!b&&(g.cornerStrokeColor||v.cornerStrokeColor),C=_/2,w=y/2;d.save(),d.fillStyle=g.cornerColor||v.cornerColor,d.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,d.lineWidth=1,d.translate(p,m),d.rotate(c(v.angle)),d[S+"Rect"](-C,-w,_,y),x&&d.strokeRect(-C,-w,_,y),d.restore()}h.renderCircleControl=u,h.renderSquareControl=f}(e),function(a){var o=a.fabric||(a.fabric={});function c(h){for(var u in h)this[u]=h[u]}o.Control=c,o.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,u){return u.cursorStyle},getActionName:function(h,u){return u.actionName},getVisibility:function(h,u){var f=h._controlsVisibility;return f&&typeof f[u]<"u"?f[u]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,u){var f=o.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},u);return f},calcCornerCoords:function(h,u,f,d,p){var m,g,v,_,y=p?this.touchSizeX:this.sizeX,b=p?this.touchSizeY:this.sizeY;if(y&&b&&y!==b){var S=Math.atan2(b,y),x=Math.sqrt(y*y+b*b)/2,C=S-o.util.degreesToRadians(h),w=Math.PI/2-S-o.util.degreesToRadians(h);m=x*o.util.cos(C),g=x*o.util.sin(C),v=x*o.util.cos(w),_=x*o.util.sin(w)}else{var k=y&&b?y:u;x=k*.7071067812;var C=o.util.degreesToRadians(45-h);m=v=x*o.util.cos(C),g=_=x*o.util.sin(C)}return{tl:{x:f-_,y:d-v},tr:{x:f+m,y:d-g},bl:{x:f-m,y:d+g},br:{x:f+_,y:d+v}}},render:function(h,u,f,d,p){switch(d=d||{},d.cornerStyle||p.cornerStyle){case"circle":o.controlsUtils.renderCircleControl.call(this,h,u,f,d,p);break;default:o.controlsUtils.renderSquareControl.call(this,h,u,f,d,p)}}}}(e),function(){function a(f,d){var p=f.getAttribute("style"),m=f.getAttribute("offset")||0,g,v,_,y;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var b=p.split(/\s*;\s*/);for(b[b.length-1]===""&&b.pop(),y=b.length;y--;){var S=b[y].split(/\s*:\s*/),x=S[0].trim(),C=S[1].trim();x==="stop-color"?g=C:x==="stop-opacity"&&(_=C)}}return g||(g=f.getAttribute("stop-color")||"rgb(0,0,0)"),_||(_=f.getAttribute("stop-opacity")),g=new t.Color(g),v=g.getAlpha(),_=isNaN(parseFloat(_))?1:parseFloat(_),_*=v*d,{offset:m,color:g.toRgb(),opacity:_}}function o(f){return{x1:f.getAttribute("x1")||0,y1:f.getAttribute("y1")||0,x2:f.getAttribute("x2")||"100%",y2:f.getAttribute("y2")||0}}function c(f){return{x1:f.getAttribute("fx")||f.getAttribute("cx")||"50%",y1:f.getAttribute("fy")||f.getAttribute("cy")||"50%",r1:0,x2:f.getAttribute("cx")||"50%",y2:f.getAttribute("cy")||"50%",r2:f.getAttribute("r")||"50%"}}var h=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(f){f||(f={}),f.coords||(f.coords={});var d,p=this;Object.keys(f).forEach(function(m){p[m]=f[m]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,d={x1:f.coords.x1||0,y1:f.coords.y1||0,x2:f.coords.x2||0,y2:f.coords.y2||0},this.type==="radial"&&(d.r1=f.coords.r1||0,d.r2=f.coords.r2||0),this.coords=d,this.colorStops=f.colorStops.slice()},addColorStop:function(f){for(var d in f){var p=new t.Color(f[d]);this.colorStops.push({offset:parseFloat(d),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(f){var d={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,d,f),d},toSVG:function(f,v){var p=h(this.coords,!0),m,g,v=v||{},_,y,b=h(this.colorStops,!0),S=p.r1>p.r2,x=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),C=-this.offsetX,w=-this.offsetY,k=!!v.additionalTransform,I=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(b.sort(function($,V){return $.offset-V.offset}),I==="objectBoundingBox"?(C/=f.width,w/=f.height):(C+=f.width/2,w+=f.height/2),f.type==="path"&&this.gradientUnits!=="percentage"&&(C-=f.pathOffset.x,w-=f.pathOffset.y),x[4]-=C,x[5]-=w,y='id="SVGID_'+this.id+'" gradientUnits="'+I+'"',y+=' gradientTransform="'+(k?v.additionalTransform+" ":"")+t.util.matrixToSVG(x)+'" ',this.type==="linear"?_=["<linearGradient ",y,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(_=["<radialGradient ",y,' cx="',S?p.x1:p.x2,'" cy="',S?p.y1:p.y2,'" r="',S?p.r1:p.r2,'" fx="',S?p.x2:p.x1,'" fy="',S?p.y2:p.y1,`">
`]),this.type==="radial"){if(S)for(b=b.concat(),b.reverse(),m=0,g=b.length;m<g;m++)b[m].offset=1-b[m].offset;var R=Math.min(p.r1,p.r2);if(R>0){var j=Math.max(p.r1,p.r2),G=R/j;for(m=0,g=b.length;m<g;m++)b[m].offset+=G*(1-b[m].offset)}}for(m=0,g=b.length;m<g;m++){var B=b[m];_.push("<stop ",'offset="',B.offset*100+"%",'" style="stop-color:',B.color,typeof B.opacity<"u"?";stop-opacity: "+B.opacity:";",`"/>
`)}return _.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),_.join("")},toLive:function(f){var d,p=t.util.object.clone(this.coords),m,g;if(this.type){for(this.type==="linear"?d=f.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(d=f.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var v=this.colorStops[m].color,_=this.colorStops[m].opacity,y=this.colorStops[m].offset;typeof _<"u"&&(v=new t.Color(v).setAlpha(_).toRgba()),d.addColorStop(y,v)}return d}}}),t.util.object.extend(t.Gradient,{fromElement:function(f,d,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var v=f.getElementsByTagName("stop"),_,y=f.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",b=f.getAttribute("gradientTransform")||"",S=[],x,C,w=0,k=0,I;for(f.nodeName==="linearGradient"||f.nodeName==="LINEARGRADIENT"?(_="linear",x=o(f)):(_="radial",x=c(f)),C=v.length;C--;)S.push(a(v[C],g));I=t.parseTransformAttribute(b),u(d,x,m,y),y==="pixels"&&(w=-d.left,k=-d.top);var R=new t.Gradient({id:f.getAttribute("id"),type:_,coords:x,colorStops:S,gradientUnits:y,gradientTransform:I,offsetX:w,offsetY:k});return R}});function u(f,d,p,m){var g,v;Object.keys(d).forEach(function(_){g=d[_],g==="Infinity"?v=1:g==="-Infinity"?v=0:(v=parseFloat(d[_],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(v*=.01,m==="pixels"&&((_==="x1"||_==="x2"||_==="r2")&&(v*=p.viewBoxWidth||p.width),(_==="y1"||_==="y2")&&(v*=p.viewBoxHeight||p.height)))),d[_]=v})}}(),function(){var a=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(o,c){if(o||(o={}),this.id=t.Object.__uid++,this.setOptions(o),!o.source||o.source&&typeof o.source!="string"){c&&c(this);return}else{var h=this;this.source=t.util.createImage(),t.util.loadImage(o.source,function(u,f){h.source=u,c&&c(h,f)},null,this.crossOrigin)}},toObject:function(o){var c=t.Object.NUM_FRACTION_DIGITS,h,u;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),u={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,c),offsetY:a(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,u,o),u},toSVG:function(o){var c=typeof this.source=="function"?this.source():this.source,h=c.width/o.width,u=c.height/o.height,f=this.offsetX/o.width,d=this.offsetY/o.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(u=1,d&&(u+=Math.abs(d))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,f&&(h+=Math.abs(f))),c.src?p=c.src:c.toDataURL&&(p=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+f+'" y="'+d+'" width="'+h+'" height="'+u+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(o){for(var c in o)this[c]=o[c]},toLive:function(o){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":o.createPattern(c,this.repeat)}})}(),function(a){var o=a.fabric||(a.fabric={}),c=o.util.toFixed;if(o.Shadow){o.warn("fabric.Shadow is already defined.");return}o.Shadow=o.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var u in h)this[u]=h[u];this.id=o.Object.__uid++},_parseShadow:function(h){var u=h.trim(),f=o.Shadow.reOffsetsAndBlur.exec(u)||[],d=u.replace(o.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:d.trim(),offsetX:parseFloat(f[1],10)||0,offsetY:parseFloat(f[2],10)||0,blur:parseFloat(f[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var u=40,f=40,d=o.Object.NUM_FRACTION_DIGITS,p=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-h.angle)),m=20,g=new o.Color(this.color);return h.width&&h.height&&(u=c((Math.abs(p.x)+this.blur)/h.width,d)*100+m,f=c((Math.abs(p.y)+this.blur)/h.height,d)*100+m),h.flipX&&(p.x*=-1),h.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+f+'%" height="'+(100+2*f)+'%" x="-'+u+'%" width="'+(100+2*u)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,d)+`"></feGaussianBlur>
	<feOffset dx="`+c(p.x,d)+'" dy="'+c(p.y,d)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},u=o.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(f){this[f]!==u[f]&&(h[f]=this[f])},this),h}}),o.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var a=t.util.object.extend,o=t.util.getElementOffset,c=t.util.removeFromArray,h=t.util.toFixed,u=t.util.transformPoint,f=t.util.invertTransform,d=t.util.getNodeCanvas,p=t.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(g,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,v){var _=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,_),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,_),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,_),v.overlayColor&&this.setOverlayColor(v.overlayColor,_),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=t.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,v,_){v.setAttribute("width",this.width*g),v.setAttribute("height",this.height*g),_.scale(g,g)},calcOffset:function(){return this._offset=o(this.lowerCanvasEl),this},setOverlayImage:function(g,v,_){return this.__setBgOverlayImage("overlayImage",g,v,_)},setBackgroundImage:function(g,v,_){return this.__setBgOverlayImage("backgroundImage",g,v,_)},setOverlayColor:function(g,v){return this.__setBgOverlayColor("overlayColor",g,v)},setBackgroundColor:function(g,v){return this.__setBgOverlayColor("backgroundColor",g,v)},__setBgOverlayImage:function(g,v,_,y){return typeof v=="string"?t.util.loadImage(v,function(b,S){if(b){var x=new t.Image(b,y);this[g]=x,x.canvas=this}_&&_(b,S)},this,y&&y.crossOrigin):(y&&v.setOptions(y),this[g]=v,v&&(v.canvas=this),_&&_(v,!1)),this},__setBgOverlayColor:function(g,v,_){return this[g]=v,this._initGradient(v,g),this._initPattern(v,g,_),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var v=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=t.util.getById(g)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,v){return this.setDimensions({width:g},v)},setHeight:function(g,v){return this.setDimensions({height:g},v)},setDimensions:function(g,v){var _;v=v||{};for(var y in g)_=g[y],v.cssOnly||(this._setBackstoreDimension(y,g[y]),_+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(y,_);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,v){return this.lowerCanvasEl[g]=v,this.upperCanvasEl&&(this.upperCanvasEl[g]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=v),this[g]=v,this},_setCssDimension:function(g,v){return this.lowerCanvasEl.style[g]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=v),this.wrapperEl&&(this.wrapperEl.style[g]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var v=this._activeObject,_=this.backgroundImage,y=this.overlayImage,b,S,x;for(this.viewportTransform=g,S=0,x=this._objects.length;S<x;S++)b=this._objects[S],b.group||b.setCoords(!0);return v&&v.setCoords(),_&&_.setCoords(!0),y&&y.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,v){var _=g,y=this.viewportTransform.slice(0);g=u(g,f(this.viewportTransform)),y[0]=v,y[3]=v;var b=u(g,y);return y[4]+=_.x-b.x,y[5]+=_.y-b.y,this.setViewportTransform(y)},setZoom:function(g){return this.zoomToPoint(new t.Point(0,0),g),this},absolutePan:function(g){var v=this.viewportTransform.slice(0);return v[4]=-g.x,v[5]=-g.y,this.setViewportTransform(v)},relativePan:function(g){return this.absolutePan(new t.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},v=this.width,_=this.height,y=f(this.viewportTransform);return g.tl=u({x:0,y:0},y),g.br=u({x:v,y:_},y),g.tr=new t.Point(g.br.x,g.tl.y),g.bl=new t.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,v){var _=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),t.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._renderObjects(g,v),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var v=this.viewportTransform,_=this.clipPath;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),g.globalCompositeOperation="destination-in",_.transform(g),g.scale(1/_.zoomX,1/_.zoomY),g.drawImage(_._cacheCanvas,-_.cacheTranslationX,-_.cacheTranslationY),g.restore()},_renderObjects:function(g,v){var _,y;for(_=0,y=v.length;_<y;++_)v[_]&&v[_].render(g)},_renderBackgroundOrOverlay:function(g,v){var _=this[v+"Color"],y=this[v+"Image"],b=this.viewportTransform,S=this[v+"Vpt"];if(!(!_&&!y)){if(_){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=_.toLive?_.toLive(g,this):_,S&&g.transform(b[0],b[1],b[2],b[3],b[4],b[5]),g.transform(1,0,0,1,_.offsetX||0,_.offsetY||0);var x=_.gradientTransform||_.patternTransform;x&&g.transform(x[0],x[1],x[2],x[3],x[4],x[5]),g.fill(),g.restore()}y&&(g.save(),S&&g.transform(b[0],b[1],b[2],b[3],b[4],b[5]),y.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new t.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new t.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var v=this.getCenterPoint();return this._centerObject(g,v)},viewportCenterObject:function(g){var v=this.getVpCenter();return this._centerObject(g,v)},viewportCenterObjectH:function(g){var v=this.getVpCenter();return this._centerObject(g,new t.Point(v.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var v=this.getVpCenter();return this._centerObject(g,new t.Point(g.getCenterPoint().x,v.y))},getVpCenter:function(){var g=this.getCenterPoint(),v=f(this.viewportTransform);return u(g,v)},_centerObject:function(g,v){return g.setPositionByOrigin(v,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,v){var _=this.clipPath,y={version:t.version,objects:this._toObjects(g,v)};return _&&!_.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,g,v)),a(y,this.__serializeBgOverlay(g,v)),t.util.populateWithProperties(this,y,v),y},_toObjects:function(g,v){return this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){return this._toObject(_,g,v)},this)},_toObject:function(g,v,_){var y;this.includeDefaultValues||(y=g.includeDefaultValues,g.includeDefaultValues=!1);var b=g[v](_);return this.includeDefaultValues||(g.includeDefaultValues=y),b},__serializeBgOverlay:function(g,v){var _={},y=this.backgroundImage,b=this.overlayImage,S=this.backgroundColor,x=this.overlayColor;return S&&S.toObject?S.excludeFromExport||(_.background=S.toObject(v)):S&&(_.background=S),x&&x.toObject?x.excludeFromExport||(_.overlay=x.toObject(v)):x&&(_.overlay=x),y&&!y.excludeFromExport&&(_.backgroundImage=this._toObject(y,g,v)),b&&!b.excludeFromExport&&(_.overlayImage=this._toObject(b,g,v)),_},svgViewportTransformation:!0,toSVG:function(g,v){g||(g={}),g.reviver=v;var _=[];return this._setSVGPreamble(_,g),this._setSVGHeader(_,g),this.clipPath&&_.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(_,"background"),this._setSVGBgOverlayImage(_,"backgroundImage",v),this._setSVGObjects(_,v),this.clipPath&&_.push(`</g>
`),this._setSVGBgOverlayColor(_,"overlay"),this._setSVGBgOverlayImage(_,"overlayImage",v),_.push("</svg>"),_.join("")},_setSVGPreamble:function(g,v){v.suppressPreamble||g.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,v){var _=v.width||this.width,y=v.height||this.height,b,S='viewBox="0 0 '+this.width+" "+this.height+'" ',x=t.Object.NUM_FRACTION_DIGITS;v.viewBox?S='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(b=this.viewportTransform,S='viewBox="'+h(-b[4]/b[0],x)+" "+h(-b[5]/b[3],x)+" "+h(this.width/b[0],x)+" "+h(this.height/b[3],x)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',_,'" ','height="',y,'" ',S,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(g){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,v=["background","overlay"].map(function(_){var y=g[_+"Color"];if(y&&y.toLive){var b=g[_+"Vpt"],S=g.viewportTransform,x={width:g.width/(b?S[0]:1),height:g.height/(b?S[3]:1)};return y.toSVG(x,{additionalTransform:b?t.util.matrixToSVG(S):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var g="",v={},_,y,b,S,x,C,w,k,I,R=t.fontPaths,j=[];for(this._objects.forEach(function B($){j.push($),$._objects&&$._objects.forEach(B)}),k=0,I=j.length;k<I;k++)if(_=j[k],y=_.fontFamily,!(_.type.indexOf("text")===-1||v[y]||!R[y])&&(v[y]=!0,!!_.styles)){b=_.styles;for(x in b){S=b[x];for(w in S)C=S[w],y=C.fontFamily,!v[y]&&R[y]&&(v[y]=!0)}}for(var G in v)g+=[`		@font-face {
`,"			font-family: '",G,`';
`,"			src: url('",R[G],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,v){var _,y,b,S=this._objects;for(y=0,b=S.length;y<b;y++)_=S[y],!_.excludeFromExport&&this._setSVGObject(g,_,v)},_setSVGObject:function(g,v,_){g.push(v.toSVG(_))},_setSVGBgOverlayImage:function(g,v,_){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&g.push(this[v].toSVG(_))},_setSVGBgOverlayColor:function(g,v){var _=this[v+"Color"],y=this.viewportTransform,b=this.width,S=this.height;if(_)if(_.toLive){var x=_.repeat,C=t.util.invertTransform(y),w=this[v+"Vpt"],k=w?t.util.matrixToSVG(C):"";g.push('<rect transform="'+k+" translate(",b/2,",",S/2,')"',' x="',_.offsetX-b/2,'" y="',_.offsetY-S/2,'" ','width="',x==="repeat-y"||x==="no-repeat"?_.source.width:b,'" height="',x==="repeat-x"||x==="no-repeat"?_.source.height:S,'" fill="url(#SVGID_'+_.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',_,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var v=this._activeObject,_,y,b;if(g===v&&g.type==="activeSelection")for(b=v._objects,_=b.length;_--;)y=b[_],c(this._objects,y),this._objects.unshift(y);else c(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var v=this._activeObject,_,y,b;if(g===v&&g.type==="activeSelection")for(b=v._objects,_=0;_<b.length;_++)y=b[_],c(this._objects,y),this._objects.push(y);else c(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,v){if(!g)return this;var _=this._activeObject,y,b,S,x,C,w=0;if(g===_&&g.type==="activeSelection")for(C=_._objects,y=0;y<C.length;y++)b=C[y],S=this._objects.indexOf(b),S>0+w&&(x=S-1,c(this._objects,b),this._objects.splice(x,0,b)),w++;else S=this._objects.indexOf(g),S!==0&&(x=this._findNewLowerIndex(g,S,v),c(this._objects,g),this._objects.splice(x,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,v,_){var y,b;if(_)for(y=v,b=v-1;b>=0;--b){var S=g.intersectsWithObject(this._objects[b])||g.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(g);if(S){y=b;break}}else y=v-1;return y},bringForward:function(g,v){if(!g)return this;var _=this._activeObject,y,b,S,x,C,w=0;if(g===_&&g.type==="activeSelection")for(C=_._objects,y=C.length;y--;)b=C[y],S=this._objects.indexOf(b),S<this._objects.length-1-w&&(x=S+1,c(this._objects,b),this._objects.splice(x,0,b)),w++;else S=this._objects.indexOf(g),S!==this._objects.length-1&&(x=this._findNewUpperIndex(g,S,v),c(this._objects,g),this._objects.splice(x,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,v,_){var y,b,S;if(_)for(y=v,b=v+1,S=this._objects.length;b<S;++b){var x=g.intersectsWithObject(this._objects[b])||g.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(g);if(x){y=b;break}}else y=v+1;return y},moveTo:function(g,v){return c(this._objects,g),this._objects.splice(v,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(t.StaticCanvas.prototype,t.Observable),a(t.StaticCanvas.prototype,t.Collection),a(t.StaticCanvas.prototype,t.DataURLExporter),a(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var v=p();if(!v||!v.getContext)return null;var _=v.getContext("2d");if(!_)return null;switch(g){case"setLineDash":return typeof _.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var g=d(this.lowerCanvasEl);return g&&g.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(g){var v=d(this.lowerCanvasEl);return v&&v.createJPEGStream(g)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var o=this.canvas.viewportTransform;a.save(),a.transform(o[0],o[1],o[2],o[3],o[4],o[5])},_setShadow:function(){if(this.shadow){var a=this.canvas,o=this.shadow,c=a.contextTop,h=a.getZoom();a&&a._isRetinaScaling()&&(h*=t.devicePixelRatio),c.shadowColor=o.color,c.shadowBlur=o.blur*h,c.shadowOffsetX=o.offsetX*h,c.shadowOffsetY=o.offsetY*h}},needsFullRender:function(){var a=new t.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,o,c){var h=o.midPointFrom(c);return a.quadraticCurveTo(o.x,o.y,h.x,h.y),h},onMouseDown:function(a,o){this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,o){if(this.canvas._isMainEvent(o.e)&&(this.drawStraightLine=o.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,h=c.length,u=this.canvas.contextTop;this._saveAndTransform(u),this.oldEnd&&(u.beginPath(),u.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(u,c[h-2],c[h-1],!0),u.stroke(),u.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var o=new t.Point(a.x,a.y);this._reset(),this._addPoint(o),this.canvas.contextTop.moveTo(o.x,o.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var o=new t.Point(a.x,a.y);return this._addPoint(o)},_render:function(a){var o,c,h=this._points[0],u=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&h.x===u.x&&h.y===u.y){var f=this.width/1e3;h=new t.Point(h.x,h.y),u=new t.Point(u.x,u.y),h.x-=f,u.x+=f}for(a.moveTo(h.x,h.y),o=1,c=this._points.length;o<c;o++)this._drawSegment(a,h,u),h=this._points[o],u=this._points[o+1];a.lineTo(h.x,h.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var o=this.width/1e3;return t.util.getSmoothPathFromPoints(a,o)},_isEmptySVGPath:function(a){var o=t.util.joinPath(a);return o==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var o=new t.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,o.shadow=new t.Shadow(this.shadow)),o},decimatePoints:function(a,o){if(a.length<=2)return a;var c=this.canvas.getZoom(),h=Math.pow(o/c,2),u,f=a.length-1,d=a[0],p=[d],m;for(u=1;u<f-1;u++)m=Math.pow(d.x-a[u].x,2)+Math.pow(d.y-a[u].y,2),m>=h&&(d=a[u],p.push(d));return p.push(a[f]),p},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var o=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(o)){this.canvas.requestRenderAll();return}var c=this.createPath(o);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var o=this.addPoint(a),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,o),c.restore()},dot:function(a,o){a.fillStyle=o.fill,a.beginPath(),a.arc(o.x,o.y,o.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,o,c,h=this.points;for(this._saveAndTransform(a),o=0,c=h.length;o<c;o++)this.dot(a,h[o]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,o,c;this.canvas.renderOnAddRemove=!1;var h=[];for(o=0,c=this.points.length;o<c;o++){var u=this.points[o],f=new t.Circle({radius:u.radius,left:u.x,top:u.y,originX:"center",originY:"center",fill:u.fill});this.shadow&&(f.shadow=new t.Shadow(this.shadow)),h.push(f)}var d=new t.Group(h);d.canvas=this.canvas,this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.fire("path:created",{path:d}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var o=new t.Point(a.x,a.y),c=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return o.radius=c,o.fill=h,this.points.push(o),o}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var o=[],c=0,h=this.sprayChunks.length;c<h;c++)for(var u=this.sprayChunks[c],f=0,d=u.length;f<d;f++){var p=new t.Rect({width:u[f].width,height:u[f].width,left:u[f].x+1,top:u[f].y+1,originX:"center",originY:"center",fill:this.color});o.push(p)}this.optimizeOverlapping&&(o=this._getOptimizedRects(o));var m=new t.Group(o);this.shadow&&m.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var o={},c,h,u;for(h=0,u=a.length;h<u;h++)c=a[h].left+""+a[h].top,o[c]||(o[c]=a[h]);var f=[];for(c in o)f.push(o[c]);return f},render:function(a){var o=this.canvas.contextTop,c,h;for(o.fillStyle=this.color,this._saveAndTransform(o),c=0,h=a.length;c<h;c++){var u=a[c];typeof u.opacity<"u"&&(o.globalAlpha=u.opacity),o.fillRect(u.x,u.y,u.width,u.width)}o.restore()},_render:function(){var a=this.canvas.contextTop,o,c;for(a.fillStyle=this.color,this._saveAndTransform(a),o=0,c=this.sprayChunks.length;o<c;o++)this.render(this.sprayChunks[o]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var o,c,h,u=this.width/2,f;for(f=0;f<this.density;f++){o=t.util.getRandomInt(a.x-u,a.x+u),c=t.util.getRandomInt(a.y-u,a.y+u),this.dotWidthVariance?h=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var d=new t.Point(o,c);d.width=h,this.randomOpacity&&(d.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(d)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var a=20,o=5,c=t.util.createCanvasElement(),h=c.getContext("2d");return c.width=c.height=a+o,h.fillStyle=this.color,h.beginPath(),h.arc(a/2,a/2,a/2,0,Math.PI*2,!1),h.closePath(),h.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var o=this.callSuper("createPath",a),c=o._getLeftTopCoords().scalarAdd(o.strokeWidth/2);return o.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),o}}),function(){var a=t.util.getPointer,o=t.util.degreesToRadians,c=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(u,f){f||(f={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(u,f),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var u=this.getActiveObjects(),f,d,p;if(u.length>0&&!this.preserveObjectStacking){d=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)f=this._objects[m],u.indexOf(f)===-1?d.push(f):p.push(f);u.length>1&&(this._activeObject._objects=p),d.push.apply(d,p)}else d=this._objects;return d},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var u=this.contextContainer;return this.renderCanvas(u,this._chooseObjectsToRender()),this},renderTopLayer:function(u){u.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(u),this.contextTopDirty=!0),u.restore()},renderTop:function(){var u=this.contextTop;return this.clearContext(u),this.renderTopLayer(u),this.fire("after:render"),this},_normalizePointer:function(u,f){var d=u.calcTransformMatrix(),p=t.util.invertTransform(d),m=this.restorePointerVpt(f);return t.util.transformPoint(m,p)},isTargetTransparent:function(u,f,d){if(u.shouldCache()&&u._cacheCanvas&&u!==this._activeObject){var p=this._normalizePointer(u,{x:f,y:d}),m=Math.max(u.cacheTranslationX+p.x*u.zoomX,0),g=Math.max(u.cacheTranslationY+p.y*u.zoomY,0),b=t.util.isTransparent(u._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return b}var v=this.contextCache,_=u.selectionBackgroundColor,y=this.viewportTransform;u.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(y[0],y[1],y[2],y[3],y[4],y[5]),u.render(v),v.restore(),u.selectionBackgroundColor=_;var b=t.util.isTransparent(v,f,d,this.targetFindTolerance);return b},_isSelectionKeyPressed:function(u){var f=!1;return Array.isArray(this.selectionKey)?f=!!this.selectionKey.find(function(d){return u[d]===!0}):f=u[this.selectionKey],f},_shouldClearSelection:function(u,f){var d=this.getActiveObjects(),p=this._activeObject;return!f||f&&p&&d.length>1&&d.indexOf(f)===-1&&p!==f&&!this._isSelectionKeyPressed(u)||f&&!f.evented||f&&!f.selectable&&p&&p!==f},_shouldCenterTransform:function(u,f,d){if(u){var p;return f==="scale"||f==="scaleX"||f==="scaleY"||f==="resizing"?p=this.centeredScaling||u.centeredScaling:f==="rotate"&&(p=this.centeredRotation||u.centeredRotation),p?!d:d}},_getOriginFromCorner:function(u,f){var d={x:u.originX,y:u.originY};return f==="ml"||f==="tl"||f==="bl"?d.x="right":(f==="mr"||f==="tr"||f==="br")&&(d.x="left"),f==="tl"||f==="mt"||f==="tr"?d.y="bottom":(f==="bl"||f==="mb"||f==="br")&&(d.y="top"),d},_getActionFromCorner:function(u,f,d,p){if(!f||!u)return"drag";var m=p.controls[f];return m.getActionName(d,m,p)},_setupCurrentTransform:function(u,f,d){if(f){var p=this.getPointer(u),m=f.__corner,g=f.controls[m],v=d&&m?g.getActionHandler(u,f,g):t.controlsUtils.dragHandler,_=this._getActionFromCorner(d,m,u,f),y=this._getOriginFromCorner(f,m),b=u[this.centeredKey],S={target:f,action:_,actionHandler:v,corner:m,scaleX:f.scaleX,scaleY:f.scaleY,skewX:f.skewX,skewY:f.skewY,offsetX:p.x-f.left,offsetY:p.y-f.top,originX:y.x,originY:y.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:o(f.angle),width:f.width*f.scaleX,shiftKey:u.shiftKey,altKey:b,original:t.util.saveObjectTransform(f)};this._shouldCenterTransform(f,_,b)&&(S.originX="center",S.originY="center"),S.original.originX=y.x,S.original.originY=y.y,this._currentTransform=S,this._beforeTransform(u)}},setCursor:function(u){this.upperCanvasEl.style.cursor=u},_drawSelection:function(u){var f=this._groupSelector,d=new t.Point(f.ex,f.ey),p=t.util.transformPoint(d,this.viewportTransform),m=new t.Point(f.ex+f.left,f.ey+f.top),g=t.util.transformPoint(m,this.viewportTransform),v=Math.min(p.x,g.x),_=Math.min(p.y,g.y),y=Math.max(p.x,g.x),b=Math.max(p.y,g.y),S=this.selectionLineWidth/2;this.selectionColor&&(u.fillStyle=this.selectionColor,u.fillRect(v,_,y-v,b-_)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(u.lineWidth=this.selectionLineWidth,u.strokeStyle=this.selectionBorderColor,v+=S,_+=S,y-=S,b-=S,t.Object.prototype._setLineDash.call(this,u,this.selectionDashArray),u.strokeRect(v,_,y-v,b-_))},findTarget:function(u,f){if(!this.skipTargetFind){var d=!0,p=this.getPointer(u,d),m=this._activeObject,g=this.getActiveObjects(),v,_,y=c(u),b=g.length>1&&!f||g.length===1;if(this.targets=[],b&&m._findTargetCorner(p,y)||g.length>1&&!f&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)v=m,_=this.targets,this.targets=[];else return m;var S=this._searchPossibleTargets(this._objects,p);return u[this.altSelectionKey]&&S&&v&&S!==v&&(S=v,this.targets=_),S}},_checkTarget:function(u,f,d){if(f&&f.visible&&f.evented&&f.containsPoint(u))if((this.perPixelTargetFind||f.perPixelTargetFind)&&!f.isEditing){var p=this.isTargetTransparent(f,d.x,d.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(u,f){for(var d,p=u.length,m;p--;){var g=u[p],v=g.group?this._normalizePointer(g.group,f):f;if(this._checkTarget(v,g,f)){d=u[p],d.subTargetCheck&&d instanceof t.Group&&(m=this._searchPossibleTargets(d._objects,f),m&&this.targets.push(m));break}}return d},restorePointerVpt:function(u){return t.util.transformPoint(u,t.util.invertTransform(this.viewportTransform))},getPointer:function(u,f){if(this._absolutePointer&&!f)return this._absolutePointer;if(this._pointer&&f)return this._pointer;var d=a(u),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,v=m.height||0,_;(!g||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),d.x=d.x-this._offset.left,d.y=d.y-this._offset.top,f||(d=this.restorePointerVpt(d));var y=this.getRetinaScaling();return y!==1&&(d.x/=y,d.y/=y),g===0||v===0?_={width:1,height:1}:_={width:p.width/g,height:p.height/v},{x:d.x*_.width,y:d.y*_.height}},_createUpperCanvas:function(){var u=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),f=this.lowerCanvasEl,d=this.upperCanvasEl;d?d.className="":(d=this._createCanvasElement(),this.upperCanvasEl=d),t.util.addClass(d,"upper-canvas "+u),this.wrapperEl.appendChild(d),this._copyCanvasStyle(f,d),this._applyCanvasStyle(d),this.contextTop=d.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(u){var f=this.width||u.width,d=this.height||u.height;t.util.setStyle(u,{position:"absolute",width:f+"px",height:d+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),u.width=f,u.height=d,t.util.makeElementUnselectable(u)},_copyCanvasStyle:function(u,f){f.style.cssText=u.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var u=this._activeObject;return u?u.type==="activeSelection"&&u._objects?u._objects.slice(0):[u]:[]},_onObjectRemoved:function(u){u===this._activeObject&&(this.fire("before:selection:cleared",{target:u}),this._discardActiveObject(),this.fire("selection:cleared",{target:u}),u.fire("deselected")),u===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",u)},_fireSelectionEvents:function(u,f){var d=!1,p=this.getActiveObjects(),m=[],g=[];u.forEach(function(v){p.indexOf(v)===-1&&(d=!0,v.fire("deselected",{e:f,target:v}),g.push(v))}),p.forEach(function(v){u.indexOf(v)===-1&&(d=!0,v.fire("selected",{e:f,target:v}),m.push(v))}),u.length>0&&p.length>0?d&&this.fire("selection:updated",{e:f,selected:m,deselected:g}):p.length>0?this.fire("selection:created",{e:f,selected:m}):u.length>0&&this.fire("selection:cleared",{e:f,deselected:g})},setActiveObject:function(u,f){var d=this.getActiveObjects();return this._setActiveObject(u,f),this._fireSelectionEvents(d,f),this},_setActiveObject:function(u,f){return this._activeObject===u||!this._discardActiveObject(f,u)||u.onSelect({e:f})?!1:(this._activeObject=u,!0)},_discardActiveObject:function(u,f){var d=this._activeObject;if(d){if(d.onDeselect({e:u,object:f}))return!1;this._activeObject=null}return!0},discardActiveObject:function(u){var f=this.getActiveObjects(),d=this.getActiveObject();return f.length&&this.fire("before:selection:cleared",{target:d,e:u}),this._discardActiveObject(u),this._fireSelectionEvents(f,u),this},dispose:function(){var u=this.wrapperEl;return this.removeListeners(),u.removeChild(this.upperCanvasEl),u.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(f){t.util.cleanUpJsdomNode(this[f]),this[f]=void 0}).bind(this)),u.parentNode&&u.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(u){var f=this._activeObject;f&&f._renderControls(u)},_toObject:function(u,f,d){var p=this._realizeGroupTransformOnObject(u),m=this.callSuper("_toObject",u,f,d);return this._unwindGroupTransformOnObject(u,p),m},_realizeGroupTransformOnObject:function(u){if(u.group&&u.group.type==="activeSelection"&&this._activeObject===u.group){var f=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],d={};return f.forEach(function(p){d[p]=u[p]}),t.util.addTransformToObject(u,this._activeObject.calcOwnMatrix()),d}else return null},_unwindGroupTransformOnObject:function(u,f){f&&u.set(f)},_setSVGObject:function(u,f,d){var p=this._realizeGroupTransformOnObject(f);this.callSuper("_setSVGObject",u,f,d),this._unwindGroupTransformOnObject(f,p)},setViewportTransform:function(u){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,u)}});for(var h in t.StaticCanvas)h!=="prototype"&&(t.Canvas[h]=t.StaticCanvas[h])}(),function(){var a=t.util.addListener,o=t.util.removeListener,c=3,h=2,u=1,f={passive:!1};function d(p,m){return p.button&&p.button===m-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,v=this._getEventPrefix();p(t.window,"resize",this._onResize),p(g,v+"down",this._onMouseDown),p(g,v+"move",this._onMouseMove,f),p(g,v+"out",this._onMouseOut),p(g,v+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,f),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(o,"remove");var p=this._getEventPrefix();o(t.document,p+"up",this._onMouseUp),o(t.document,"touchend",this._onTouchEnd,f),o(t.document,p+"move",this._onMouseMove,f),o(t.document,"touchmove",this._onMouseMove,f)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(v){g.fire("mouse:out",{target:m,e:p}),v&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();a(t.document,"touchend",this._onTouchEnd,f),a(t.document,"touchmove",this._onMouseMove,f),o(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();o(m,g+"move",this._onMouseMove,f),a(t.document,g+"up",this._onMouseUp),a(t.document,g+"move",this._onMouseMove,f)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();o(t.document,"touchend",this._onTouchEnd,f),o(t.document,"touchmove",this._onMouseMove,f);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(o(t.document,g+"up",this._onMouseUp),o(t.document,g+"move",this._onMouseMove,f),a(m,g+"move",this._onMouseMove,f))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,v=this._groupSelector,_=!1,y=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),d(p,c)){this.fireRightClick&&this._handleEvent(p,"up",c,y);return}if(d(p,h)){this.fireMiddleClick&&this._handleEvent(p,"up",h,y),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),_=g.actionPerformed),!y){var b=m===this._activeObject;this._maybeGroupObjects(p),_||(_=this._shouldRender(m)||!b&&m===this._activeObject)}var S,x;if(m){if(S=m._findTargetCorner(this.getPointer(p,!0),t.util.isTouchEvent(p)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),_=!0;else{var C=m.controls[S],w=C&&C.getMouseUpHandler(p,m,C);w&&(x=this.getPointer(p),w(p,g,x.x,x.y))}m.isMoving=!1}if(g&&(g.target!==m||g.corner!==S)){var k=g.target&&g.target.controls[g.corner],I=k&&k.getMouseUpHandler(p,m,C);x=x||this.getPointer(p),I&&I(p,g,x.x,x.y)}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",u,y),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),_?this.requestRenderAll():y||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),v=this.targets,_={e:m,target:g,subTargets:v};if(this.fire(p,_),g&&g.fire(p,_),!v)return g;for(var y=0;y<v.length;y++)v[y].fire(p,_);return g},_handleEvent:function(p,m,g,v){var _=this._target,y=this.targets||[],b={e:p,target:_,subTargets:y,button:g||u,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(b.currentTarget=this.findTarget(p),b.currentSubTargets=this.targets),this.fire("mouse:"+m,b),_&&_.fire("mouse"+m,b);for(var S=0;S<y.length;S++)y[S].fire("mouse"+m,b)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(d(p,c)){this.fireRightClick&&this._handleEvent(p,"down",c);return}if(d(p,h)){this.fireMiddleClick&&this._handleEvent(p,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var v=this._shouldRender(m),_=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):_&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var y=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var b=m._findTargetCorner(this.getPointer(p,!0),t.util.isTouchEvent(p));if(m.__corner=b,m===this._activeObject&&(b||!_)){this._setupCurrentTransform(p,m,y);var S=m.controls[b],g=this.getPointer(p),x=S&&S.getMouseDownHandler(p,m,S);x&&x(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(v||_)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var v=this._groupSelector;v?(g=this._absolutePointer,v.left=g.x-v.ex,v.top=g.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,v=this._hoveredTargets,_=this.targets,y=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<y;b++)this.fireSyntheticInOutEvents(_[b],m,{oldTarget:v[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,v=this._hoveredTargets,_=this.targets,y=Math.max(v.length,_.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<y;b++)this.fireSyntheticInOutEvents(_[b],m,{oldTarget:v[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var v,_,y=g.oldTarget,b,S,x=y!==p,C=g.canvasEvtIn,w=g.canvasEvtOut;x&&(v={e:m,target:p,previousTarget:y},_={e:m,target:y,nextTarget:p}),S=p&&x,b=y&&x,b&&(w&&this.fire(w,_),y.fire(g.evtOut,_)),S&&(C&&this.fire(C,v),p.fire(g.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var v=g.x,_=g.y,y=m.action,b=!1,S=m.actionHandler;S&&(b=S(p,m,v,_)),y==="drag"&&b&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||b},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,_=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));_?this.setCursor(this.getCornerCursor(_,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(y){g=y.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var v=m.controls[p];return v.cursorStyleHandler(g,v,m)}})}(),function(){var a=Math.min,o=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(c,h){var u=this._activeObject;return u&&this._isSelectionKeyPressed(c)&&h&&h.selectable&&this.selection&&(u!==h||u.type==="activeSelection")&&!h.onSelect({e:c})},_handleGrouping:function(c,h){var u=this._activeObject;u.__corner||h===u&&(h=this.findTarget(c,!0),!h||!h.selectable)||(u&&u.type==="activeSelection"?this._updateActiveSelection(h,c):this._createActiveSelection(h,c))},_updateActiveSelection:function(c,h){var u=this._activeObject,f=u._objects.slice(0);u.contains(c)?(u.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),u.size()===1&&this._setActiveObject(u.item(0),h)):(u.addWithUpdate(c),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(f,h)},_createActiveSelection:function(c,h){var u=this.getActiveObjects(),f=this._createGroup(c);this._hoveredTarget=f,this._setActiveObject(f,h),this._fireSelectionEvents(u,h)},_createGroup:function(c){var h=this._objects,u=h.indexOf(this._activeObject)<h.indexOf(c),f=u?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(f,{canvas:this})},_groupSelectedObjects:function(c){var h=this._collectObjects(c),u;h.length===1?this.setActiveObject(h[0],c):h.length>1&&(u=new t.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(u,c))},_collectObjects:function(c){for(var h=[],u,f=this._groupSelector.ex,d=this._groupSelector.ey,p=f+this._groupSelector.left,m=d+this._groupSelector.top,g=new t.Point(a(f,p),a(d,m)),v=new t.Point(o(f,p),o(d,m)),_=!this.selectionFullyContained,y=f===p&&d===m,b=this._objects.length;b--&&(u=this._objects[b],!(!(!u||!u.selectable||!u.visible)&&(_&&u.intersectsWithRect(g,v,!0)||u.isContainedWithinRect(g,v,!0)||_&&u.containsPoint(g,null,!0)||_&&u.containsPoint(v,null,!0))&&(h.push(u),y))););return h.length>1&&(h=h.filter(function(S){return!S.onSelect({e:c})})),h},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var o=a.format||"png",c=a.quality||1,h=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),u=this.toCanvasElement(h,a);return t.util.toDataURL(u,o,c)},toCanvasElement:function(a,o){a=a||1,o=o||{};var c=(o.width||this.width)*a,h=(o.height||this.height)*a,u=this.getZoom(),f=this.width,d=this.height,p=u*a,m=this.viewportTransform,g=(m[4]-(o.left||0))*a,v=(m[5]-(o.top||0))*a,_=this.interactive,y=[p,0,0,p,g,v],b=this.enableRetinaScaling,S=t.util.createCanvasElement(),x=this.contextTop;return S.width=c,S.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=c,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(S.getContext("2d"),this._objects),this.viewportTransform=m,this.width=f,this.height=d,this.calcViewportBoundaries(),this.interactive=_,this.enableRetinaScaling=b,this.contextTop=x,S}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(a,o,c){if(a){var h=typeof a=="string"?JSON.parse(a):t.util.object.clone(a),u=this,f=h.clipPath,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(p){u.clear(),u._setBgOverlay(h,function(){f?u._enlivenObjects([f],function(m){u.clipPath=m[0],u.__setupCanvas.call(u,h,p,d,o)}):u.__setupCanvas.call(u,h,p,d,o)})},c),this}},__setupCanvas:function(a,o,c,h){var u=this;o.forEach(function(f,d){u.insertAt(f,d)}),this.renderOnAddRemove=c,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),h&&h()},_setBgOverlay:function(a,o){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){o&&o();return}var h=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&o&&o()};this.__setBgOverlay("backgroundImage",a.backgroundImage,c,h),this.__setBgOverlay("overlayImage",a.overlayImage,c,h),this.__setBgOverlay("backgroundColor",a.background,c,h),this.__setBgOverlay("overlayColor",a.overlay,c,h)},__setBgOverlay:function(a,o,c,h){var u=this;if(!o){c[a]=!0,h&&h();return}a==="backgroundImage"||a==="overlayImage"?t.util.enlivenObjects([o],function(f){u[a]=f[0],c[a]=!0,h&&h()}):this["set"+t.util.string.capitalize(a,!0)](o,function(){c[a]=!0,h&&h()})},_enlivenObjects:function(a,o,c){if(!a||a.length===0){o&&o([]);return}t.util.enlivenObjects(a,function(h){o&&o(h)},null,c)},_toDataURL:function(a,o){this.clone(function(c){o(c.toDataURL(a))})},_toDataURLWithMultiplier:function(a,o,c){this.clone(function(h){c(h.toDataURLWithMultiplier(a,o))})},clone:function(a,o){var c=JSON.stringify(this.toJSON(o));this.cloneWithoutData(function(h){h.loadFromJSON(c,function(){a&&a(h)})})},cloneWithoutData:function(a){var o=t.util.createCanvasElement();o.width=this.width,o.height=this.height;var c=new t.Canvas(o);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),a&&a(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):a&&a(c)}}),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.util.object.clone,u=o.util.toFixed,f=o.util.string.capitalize,d=o.util.degreesToRadians,p=!o.isLikelyNode,m=2;o.Object||(o.Object=o.util.createClass(o.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=o.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=o.perfLimitSizeTotal,_=g.width,y=g.height,b=o.maxCacheSideLimit,S=o.minCacheSideLimit;if(_<=b&&y<=b&&_*y<=v)return _<S&&(g.width=S),y<S&&(g.height=S),g;var x=_/y,C=o.util.limitDimsByArea(x,v),w=o.util.capValue,k=w(S,C.x,b),I=w(S,C.y,b);return _>k&&(g.zoomX/=_/k,g.width=k,g.capped=!0),y>I&&(g.zoomY/=y/I,g.height=I,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),_=v.x*g.scaleX/this.scaleX,y=v.y*g.scaleY/this.scaleY;return{width:_+m,height:y+m,zoomX:g.scaleX,zoomY:g.scaleY,x:_,y}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,_=g._currentTransform.action;if(this===v&&_.slice&&_.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,b=this._limitCacheSize(this._getCacheCanvasDimensions()),S=o.minCacheSideLimit,x=b.width,C=b.height,w,k,I=b.zoomX,R=b.zoomY,j=x!==this.cacheWidth||C!==this.cacheHeight,G=this.zoomX!==I||this.zoomY!==R,B=j||G,$=0,V=0,W=!1;if(j){var M=this._cacheCanvas.width,P=this._cacheCanvas.height,O=x>M||C>P,A=(x<M*.9||C<P*.9)&&M>S&&P>S;W=O||A,O&&!b.capped&&(x>S||C>S)&&($=x*.1,V=C*.1)}return this instanceof o.Text&&this.path&&(B=!0,W=!0,$+=this.getHeightOfLine(0)*this.zoomX,V+=this.getHeightOfLine(0)*this.zoomY),B?(W?(y.width=Math.ceil(x+$),y.height=Math.ceil(C+V)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),w=b.x/2,k=b.y/2,this.cacheTranslationX=Math.round(y.width/2-w)+w,this.cacheTranslationY=Math.round(y.height/2-k)+k,this.cacheWidth=x,this.cacheHeight=C,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(I,R),this.zoomX=I,this.zoomY=R,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,_=this.calcTransformMatrix(!v);g.transform(_[0],_[1],_[2],_[3],_[4],_[5])},toObject:function(g){var v=o.Object.NUM_FRACTION_DIGITS,_={type:this.type,version:o.version,originX:this.originX,originY:this.originY,left:u(this.left,v),top:u(this.top,v),width:u(this.width,v),height:u(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:u(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:u(this.strokeMiterLimit,v),scaleX:u(this.scaleX,v),scaleY:u(this.scaleY,v),angle:u(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:u(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:u(this.skewX,v),skewY:u(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(_.clipPath=this.clipPath.toObject(g),_.clipPath.inverted=this.clipPath.inverted,_.clipPath.absolutePositioned=this.clipPath.absolutePositioned),o.util.populateWithProperties(this,_,g),this.includeDefaultValues||(_=this._removeDefaultValues(_)),_},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=o.util.getKlass(g.type).prototype,_=v.stateProperties;return _.forEach(function(y){y==="left"||y==="top"||(g[y]===v[y]&&delete g[y],Array.isArray(g[y])&&Array.isArray(v[y])&&g[y].length===0&&v[y].length===0&&delete g[y])}),g},toString:function(){return"#<fabric."+f(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=o.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,_=g.scaleY;if(this.canvas){var y=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();v*=y*b,_*=y*b}return{scaleX:v,scaleY:_}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var _=g==="scaleX"||g==="scaleY",y=this[g]!==v,b=!1;return _&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g==="shadow"&&v&&!(v instanceof o.Shadow)?v=new o.Shadow(v):g==="dirty"&&this.group&&this.group.set("dirty",v),this[g]=v,y&&(b=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:o.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var _=o.util.invertTransform(this.calcTransformMatrix());g.transform(_[0],_[1],_[2],_[3],_[4],_[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var _=this.fill,y=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=_,this.stroke=y},_drawClipPath:function(g,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,_=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-_/2,v,_)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var _=v.stroke;_&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,_.toLive?_.gradientUnits==="percentage"||_.gradientTransform||_.patternTransform?this._applyPatternForTransformedGradient(g,_):(g.strokeStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,_)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var _=v.fill;_&&(_.toLive?(g.fillStyle=_.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=_)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var _=this.getViewportTransform(),y=this.calcTransformMatrix(),b,S,x;v=v||{},S=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,x=typeof v.hasControls<"u"?v.hasControls:this.hasControls,y=o.util.multiplyTransformMatrices(_,y),b=o.util.qrDecompose(y),g.save(),g.translate(b.translateX,b.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),g.rotate(d(this.group?b.angle:this.angle)),v.forActiveSelection||this.group?S&&this.drawBordersInGroup(g,b,v):S&&this.drawBorders(g,v),x&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(this.shadow){var v=this.shadow,_=this.canvas,y,b=_&&_.viewportTransform[0]||1,S=_&&_.viewportTransform[3]||1;v.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),_&&_._isRetinaScaling()&&(b*=o.devicePixelRatio,S*=o.devicePixelRatio),g.shadowColor=v.color,g.shadowBlur=v.blur*o.browserShadowBlurConstant*(b+S)*(y.scaleX+y.scaleY)/4,g.shadowOffsetX=v.offsetX*b*y.scaleX,g.shadowOffsetY=v.offsetY*S*y.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var _=v.gradientTransform||v.patternTransform,y=-this.width/2+v.offsetX||0,b=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,y,b):g.transform(1,0,0,1,y,b),_&&g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),{offsetX:y,offsetY:b}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var _=this._limitCacheSize(this._getCacheCanvasDimensions()),y=o.util.createCanvasElement(),b,S=this.canvas.getRetinaScaling(),x=_.x/this.scaleX/S,C=_.y/this.scaleY/S;y.width=x,y.height=C,b=y.getContext("2d"),b.beginPath(),b.moveTo(0,0),b.lineTo(x,0),b.lineTo(x,C),b.lineTo(0,C),b.closePath(),b.translate(x/2,C/2),b.scale(_.zoomX/this.scaleX/S,_.zoomY/this.scaleY/S),this._applyPatternGradientTransform(b,v),b.fillStyle=v.toLive(g),b.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(S*this.scaleX/_.zoomX,S*this.scaleY/_.zoomY),g.strokeStyle=b.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=o.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=o.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var _=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(_,g):o.Object._fromObject("Object",_,g)},cloneAsImage:function(g,v){var _=this.toCanvasElement(v);return g&&g(new o.Image(_)),this},toCanvasElement:function(g){g||(g={});var v=o.util,_=v.saveObjectTransform(this),y=this.group,b=this.shadow,S=Math.abs,x=(g.multiplier||1)*(g.enableRetinaScaling?o.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var C=o.util.createCanvasElement(),w=this.getBoundingRect(!0,!0),k=this.shadow,I,R={x:0,y:0},j,G,B;k&&(j=k.blur,k.nonScaling?I={scaleX:1,scaleY:1}:I=this.getObjectScaling(),R.x=2*Math.round(S(k.offsetX)+j)*S(I.scaleX),R.y=2*Math.round(S(k.offsetY)+j)*S(I.scaleY)),G=w.width+R.x,B=w.height+R.y,C.width=Math.ceil(G),C.height=Math.ceil(B);var $=new o.StaticCanvas(C,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&($.backgroundColor="#fff"),this.setPositionByOrigin(new o.Point($.width/2,$.height/2),"center","center");var V=this.canvas;$.add(this);var W=$.toCanvasElement(x||1,g);return this.shadow=b,this.set("canvas",V),y&&(this.group=y),this.set(_).setCoords(),$._objects=[],$.dispose(),$=null,W},toDataURL:function(g){return g||(g={}),o.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var _=new o.Point(v.x,v.y),y=this._getLeftTopCoords();return this.angle&&(_=o.util.rotatePoint(_,y,d(-this.angle))),{x:_.x-y.x,y:_.y-y.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){o.runningAnimations&&o.runningAnimations.cancelByTarget(this)}}),o.util.createAccessors&&o.util.createAccessors(o.Object),c(o.Object.prototype,o.Observable),o.Object.NUM_FRACTION_DIGITS=2,o.Object.ENLIVEN_PROPS=["clipPath"],o.Object._fromObject=function(g,v,_,y){var b=o[g];v=h(v,!0),o.util.enlivenPatterns([v.fill,v.stroke],function(S){typeof S[0]<"u"&&(v.fill=S[0]),typeof S[1]<"u"&&(v.stroke=S[1]),o.util.enlivenObjectEnlivables(v,v,function(){var x=y?new b(v[y],v):new b(v);_&&_(x)})})},o.Object.__uid=0)}(e),function(){var a=t.util.degreesToRadians,o={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(h,u,f,d,p){var m=h.x,g=h.y,v,_,y;return typeof u=="string"?u=o[u]:u-=.5,typeof d=="string"?d=o[d]:d-=.5,v=d-u,typeof f=="string"?f=c[f]:f-=.5,typeof p=="string"?p=c[p]:p-=.5,_=p-f,(v||_)&&(y=this._getTransformedDimensions(),m=h.x+v*y.x,g=h.y+_*y.y),new t.Point(m,g)},translateToCenterPoint:function(h,u,f){var d=this.translateToGivenOrigin(h,u,f,"center","center");return this.angle?t.util.rotatePoint(d,h,a(this.angle)):d},translateToOriginPoint:function(h,u,f){var d=this.translateToGivenOrigin(h,"center","center",u,f);return this.angle?t.util.rotatePoint(d,h,a(this.angle)):d},getCenterPoint:function(){var h=new t.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,u){var f=this.getCenterPoint();return this.translateToOriginPoint(f,h,u)},toLocalPoint:function(h,u,f){var d=this.getCenterPoint(),p,m;return typeof u<"u"&&typeof f<"u"?p=this.translateToGivenOrigin(d,"center","center",u,f):p=new t.Point(this.left,this.top),m=new t.Point(h.x,h.y),this.angle&&(m=t.util.rotatePoint(m,d,-a(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(h,u,f){var d=this.translateToCenterPoint(h,u,f),p=this.translateToOriginPoint(d,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(h){var u=a(this.angle),f=this.getScaledWidth(),d=t.util.cos(u)*f,p=t.util.sin(u)*f,m,g;typeof this.originX=="string"?m=o[this.originX]:m=this.originX-.5,typeof h=="string"?g=o[h]:g=h-.5,this.left+=d*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(f){return[new t.Point(f.tl.x,f.tl.y),new t.Point(f.tr.x,f.tr.y),new t.Point(f.br.x,f.br.y),new t.Point(f.bl.x,f.bl.y)]}var o=t.util,c=o.degreesToRadians,h=o.multiplyTransformMatrices,u=o.transformPoint;o.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(f,d){return d?f?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),f?this.aCoords:this.lineCoords)},getCoords:function(f,d){return a(this._getCoords(f,d))},intersectsWithRect:function(f,d,p,m){var g=this.getCoords(p,m),v=t.Intersection.intersectPolygonRectangle(g,f,d);return v.status==="Intersection"},intersectsWithObject:function(f,d,p){var m=t.Intersection.intersectPolygonPolygon(this.getCoords(d,p),f.getCoords(d,p));return m.status==="Intersection"||f.isContainedWithinObject(this,d,p)||this.isContainedWithinObject(f,d,p)},isContainedWithinObject:function(f,d,p){for(var m=this.getCoords(d,p),g=d?f.aCoords:f.lineCoords,v=0,_=f._getImageLines(g);v<4;v++)if(!f.containsPoint(m[v],_))return!1;return!0},isContainedWithinRect:function(f,d,p,m){var g=this.getBoundingRect(p,m);return g.left>=f.x&&g.left+g.width<=d.x&&g.top>=f.y&&g.top+g.height<=d.y},containsPoint:function(f,v,p,m){var g=this._getCoords(p,m),v=v||this._getImageLines(g),_=this._findCrossPoints(f,v);return _!==0&&_%2===1},isOnScreen:function(f){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,f);return m.some(function(g){return g.x<=p.x&&g.x>=d.x&&g.y<=p.y&&g.y>=d.y})||this.intersectsWithRect(d,p,!0,f)?!0:this._containsCenterOfCanvas(d,p,f)},_containsCenterOfCanvas:function(f,d,p){var m={x:(f.x+d.x)/2,y:(f.y+d.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(f){if(!this.canvas)return!1;var d=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(d,p,!0,f))return!0;var m=this.getCoords(!0,f).every(function(g){return(g.x>=p.x||g.x<=d.x)&&(g.y>=p.y||g.y<=d.y)});return m&&this._containsCenterOfCanvas(d,p,f)},_getImageLines:function(f){var d={topline:{o:f.tl,d:f.tr},rightline:{o:f.tr,d:f.br},bottomline:{o:f.br,d:f.bl},leftline:{o:f.bl,d:f.tl}};return d},_findCrossPoints:function(f,d){var p,m,g,v,_,y=0,b;for(var S in d)if(b=d[S],!(b.o.y<f.y&&b.d.y<f.y)&&!(b.o.y>=f.y&&b.d.y>=f.y)&&(b.o.x===b.d.x&&b.o.x>=f.x?_=b.o.x:(p=0,m=(b.d.y-b.o.y)/(b.d.x-b.o.x),g=f.y-p*f.x,v=b.o.y-m*b.o.x,_=-(g-v)/(p-m)),_>=f.x&&(y+=1),y===2))break;return y},getBoundingRect:function(f,d){var p=this.getCoords(f,d);return o.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(f){return Math.abs(f)<this.minScaleLimit?f<0?-this.minScaleLimit:this.minScaleLimit:f===0?1e-4:f},scale:function(f){return this._set("scaleX",f),this._set("scaleY",f),this.setCoords()},scaleToWidth:function(f,d){var p=this.getBoundingRect(d).width/this.getScaledWidth();return this.scale(f/this.width/p)},scaleToHeight:function(f,d){var p=this.getBoundingRect(d).height/this.getScaledHeight();return this.scale(f/this.height/p)},calcLineCoords:function(){var f=this.getViewportTransform(),d=this.padding,p=c(this.angle),m=o.cos(p),g=o.sin(p),v=m*d,_=g*d,y=v+_,b=v-_,S=this.calcACoords(),x={tl:u(S.tl,f),tr:u(S.tr,f),bl:u(S.bl,f),br:u(S.br,f)};return d&&(x.tl.x-=b,x.tl.y-=y,x.tr.x+=y,x.tr.y-=b,x.bl.x-=y,x.bl.y+=b,x.br.x+=b,x.br.y+=y),x},calcOCoords:function(){var f=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=h(p,d),g=h(m,f),g=h(g,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),_={};return this.forEachControl(function(y,b,S){_[b]=y.positionHandler(v,g,S)}),_},calcACoords:function(){var f=this._calcRotateMatrix(),d=this._calcTranslateMatrix(),p=h(d,f),m=this._getTransformedDimensions(),g=m.x/2,v=m.y/2;return{tl:u({x:-g,y:-v},p),tr:u({x:g,y:-v},p),bl:u({x:-g,y:v},p),br:u({x:g,y:v},p)}},setCoords:function(f){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),f?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return o.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var f=this.getCenterPoint();return[1,0,0,1,f.x,f.y]},transformMatrixKey:function(f){var d="_",p="";return!f&&this.group&&(p=this.group.transformMatrixKey(f)+d),p+this.top+d+this.left+d+this.scaleX+d+this.scaleY+d+this.skewX+d+this.skewY+d+this.angle+d+this.originX+d+this.originY+d+this.width+d+this.height+d+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(f){var d=this.calcOwnMatrix();if(f||!this.group)return d;var p=this.transformMatrixKey(f),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(d=h(this.group.calcTransformMatrix(!1),d)),m.key=p,m.value=d,d)},calcOwnMatrix:function(){var f=this.transformMatrixKey(!0),d=this.ownMatrixCache||(this.ownMatrixCache={});if(d.key===f)return d.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return d.key=f,d.value=o.composeMatrix(m),d.value},_getNonTransformedDimensions:function(){var f=this.strokeWidth,d=this.width+f,p=this.height+f;return{x:d,y:p}},_getTransformedDimensions:function(f,d){typeof f>"u"&&(f=this.skewX),typeof d>"u"&&(d=this.skewY);var p,m,g,v=f===0&&d===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),v)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var _=o.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:f,skewY:d});return this._finalizeDimensions(_.x,_.y)},_finalizeDimensions:function(f,d){return this.strokeUniform?{x:f+this.strokeWidth,y:d+this.strokeWidth}:{x:f,y:d}},_calculateCurrentDimensions:function(){var f=this.getViewportTransform(),d=this._getTransformedDimensions(),p=u(d,f,!0);return p.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(c,h){if(h){if(h.toLive)return c+": url(#SVGID_"+h.id+"); ";var u=new t.Color(h),f=c+": "+u.toRgb()+"; ",d=u.getAlpha();return d!==1&&(f+=c+"-opacity: "+d.toString()+"; "),f}else return c+": none; "}var o=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(c){var h=this.fillRule?this.fillRule:"nonzero",u=this.strokeWidth?this.strokeWidth:"0",f=this.strokeDashArray?this.strokeDashArray.join(" "):"none",d=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",_=this.visible?"":" visibility: hidden;",y=c?"":this.getSvgFilter(),b=a("fill",this.fill),S=a("stroke",this.stroke);return[S,"stroke-width: ",u,"; ","stroke-dasharray: ",f,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",d,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",b,"fill-rule: ",h,"; ","opacity: ",v,";",y,_].join("")},getSvgSpanStyles:function(c,h){var u="; ",d=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+u:"",f=c.strokeWidth?"stroke-width: "+c.strokeWidth+u:"",d=d,p=c.fontSize?"font-size: "+c.fontSize+"px"+u:"",m=c.fontStyle?"font-style: "+c.fontStyle+u:"",g=c.fontWeight?"font-weight: "+c.fontWeight+u:"",v=c.fill?a("fill",c.fill):"",_=c.stroke?a("stroke",c.stroke):"",y=this.getSvgTextDecoration(c),b=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return y&&(y="text-decoration: "+y+u),[_,f,d,p,m,g,y,v,b,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(h){return c[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,h){var u=c?this.calcTransformMatrix():this.calcOwnMatrix(),f='transform="'+t.util.matrixToSVG(u);return f+(h||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var h=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',o(-this.width/2,h),'" y="',o(-this.height/2,h),'" width="',o(this.width,h),'" height="',o(this.height,h),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,h){h=h||{};var u=h.reviver,f=h.additionalTransform||"",d=[this.getSvgTransform(!0,f),this.getSvgCommons()].join(""),p=c.indexOf("COMMON_PARTS");return c[p]=d,u?u(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,h){h=h||{};var u=h.noStyle,f=h.reviver,d=u?"":'style="'+this.getSvgStyles()+'" ',p=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,_=this.stroke,y=this.fill,b=this.shadow,S,x=[],C,w=c.indexOf("COMMON_PARTS"),k=h.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+t.Object.__uid++,C='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(f)+`</clipPath>
`),v&&x.push("<g ",p,this.getSvgCommons(),` >
`),x.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),S=[d,g,u?"":this.addPaintOrder()," ",k?'transform="'+k+'" ':""].join(""),c[w]=S,y&&y.toLive&&x.push(y.toSVG(this)),_&&_.toLive&&x.push(_.toSVG(this)),b&&x.push(b.toSVG(this)),m&&x.push(C),x.push(c.join("")),x.push(`</g>
`),v&&x.push(`</g>
`),f?f(x.join("")):x.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=t.util.object.extend,o="stateProperties";function c(u,f,d){var p={},m=!0;d.forEach(function(g){p[g]=u[g]}),a(u[f],p,m)}function h(u,f,d){if(u===f)return!0;if(Array.isArray(u)){if(!Array.isArray(f)||u.length!==f.length)return!1;for(var p=0,m=u.length;p<m;p++)if(!h(u[p],f[p]))return!1;return!0}else if(u&&typeof u=="object"){var g=Object.keys(u),v;if(!f||typeof f!="object"||!d&&g.length!==Object.keys(f).length)return!1;for(var p=0,m=g.length;p<m;p++)if(v=g[p],!(v==="canvas"||v==="group")&&!h(u[v],f[v]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(u){u=u||o;var f="_"+u;return Object.keys(this[f]).length<this[u].length?!0:!h(this[f],this,!0)},saveState:function(u){var f=u&&u.propertySet||o,d="_"+f;return this[d]?(c(this,d,this[f]),u&&u.stateProperties&&c(this,d,u.stateProperties),this):this.setupState(u)},setupState:function(u){u=u||{};var f=u.propertySet||o;return u.propertySet=f,this["_"+f]={},this.saveState(u),this}})}(),function(){var a=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(o,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=o.x,u=o.y,f,d,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(d=this._getImageLines(c?this.oCoords[g].touchCorner:this.oCoords[g].corner),f=this._findCrossPoints({x:h,y:u},d),f!==0&&f%2===1))return this.__corner=g,g;return!1},forEachControl:function(o){for(var c in this.controls)o(this.controls[c],c,this)},_setCornerCoords:function(){var o=this.oCoords;for(var c in o){var h=this.controls[c];o[c].corner=h.calcCornerCoords(this.angle,this.cornerSize,o[c].x,o[c].y,!1),o[c].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,o[c].x,o[c].y,!0)}},drawSelectionBackground:function(o){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;o.save();var c=this.getCenterPoint(),h=this._calculateCurrentDimensions(),u=this.canvas.viewportTransform;return o.translate(c.x,c.y),o.scale(1/u[0],1/u[3]),o.rotate(a(this.angle)),o.fillStyle=this.selectionBackgroundColor,o.fillRect(-h.x/2,-h.y/2,h.x,h.y),o.restore(),this},drawBorders:function(o,c){c=c||{};var h=this._calculateCurrentDimensions(),u=this.borderScaleFactor,f=h.x+u,d=h.y+u,p=typeof c.hasControls<"u"?c.hasControls:this.hasControls,m=!1;return o.save(),o.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(o,c.borderDashArray||this.borderDashArray),o.strokeRect(-f/2,-d/2,f,d),p&&(o.beginPath(),this.forEachControl(function(g,v,_){g.withConnection&&g.getVisibility(_,v)&&(m=!0,o.moveTo(g.x*f,g.y*d),o.lineTo(g.x*f+g.offsetX,g.y*d+g.offsetY))}),m&&o.stroke()),o.restore(),this},drawBordersInGroup:function(o,c,h){h=h||{};var u=t.util.sizeAfterTransform(this.width,this.height,c),f=this.strokeWidth,d=this.strokeUniform,p=this.borderScaleFactor,m=u.x+f*(d?this.canvas.getZoom():c.scaleX)+p,g=u.y+f*(d?this.canvas.getZoom():c.scaleY)+p;return o.save(),this._setLineDash(o,h.borderDashArray||this.borderDashArray),o.strokeStyle=h.borderColor||this.borderColor,o.strokeRect(-m/2,-g/2,m,g),o.restore(),this},drawControls:function(o,c){c=c||{},o.save();var h=this.canvas.getRetinaScaling(),u,f;return o.setTransform(h,0,0,h,0,0),o.strokeStyle=o.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(o.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(o,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(u=this.group.calcTransformMatrix()),this.forEachControl(function(d,p,m){f=m.oCoords[p],d.getVisibility(m,p)&&(u&&(f=t.util.transformPoint(f,u)),d.render(o,f.x,f.y,c,m))}),o.restore(),this},isControlVisible:function(o){return this.controls[o]&&this.controls[o].getVisibility(this,o)},setControlVisible:function(o,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[o]=c,this},setControlsVisibility:function(o){o||(o={});for(var c in o)this.setControlVisible(c,o[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,o){o=o||{};var c=function(){},h=o.onComplete||c,u=o.onChange||c,f=this;return t.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(d){a.set("left",d),f.requestRenderAll(),u()},onComplete:function(){a.setCoords(),h()}})},fxCenterObjectV:function(a,o){o=o||{};var c=function(){},h=o.onComplete||c,u=o.onChange||c,f=this;return t.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(d){a.set("top",d),f.requestRenderAll(),u()},onComplete:function(){a.setCoords(),h()}})},fxRemove:function(a,o){o=o||{};var c=function(){},h=o.onComplete||c,u=o.onChange||c,f=this;return t.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(d){a.set("opacity",d),f.requestRenderAll(),u()},onComplete:function(){f.remove(a),h()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],o,c,h=[];for(o in arguments[0])a.push(o);for(var u=0,f=a.length;u<f;u++)o=a[u],c=u!==f-1,h.push(this._animate(o,arguments[0][o],arguments[1],c));return h}else return this._animate.apply(this,arguments)},_animate:function(a,o,c,h){var u=this,f;o=o.toString(),c?c=t.util.object.clone(c):c={},~a.indexOf(".")&&(f=a.split("."));var d=u.colorProperties.indexOf(a)>-1||f&&u.colorProperties.indexOf(f[1])>-1,p=f?this.get(f[0])[f[1]]:this.get(a);"from"in c||(c.from=p),d||(~o.indexOf("=")?o=p+parseFloat(o.replace("=","")):o=parseFloat(o));var m={target:this,startValue:c.from,endValue:o,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(g,v,_){return c.abort.call(u,g,v,_)},onChange:function(g,v,_){f?u[f[0]][f[1]]=g:u.set(a,g),!h&&c.onChange&&c.onChange(g,v,_)},onComplete:function(g,v,_){h||(u.setCoords(),c.onComplete&&c.onComplete(g,v,_))}};return d?t.util.animateColor(m.startValue,m.endValue,m.duration,m):t.util.animate(m)}}),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.util.object.clone,u={x1:1,x2:1,y1:1,y2:1};if(o.Line){o.warn("fabric.Line is already defined");return}o.Line=o.util.createClass(o.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:o.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(d,p){d||(d=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",d[0]),this.set("y1",d[1]),this.set("x2",d[2]),this.set("y2",d[3]),this._setWidthHeight(p)},_setWidthHeight:function(d){d||(d={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in d?d.left:this._getLeftToOriginX(),this.top="top"in d?d.top:this._getTopToOriginY()},_set:function(d,p){return this.callSuper("_set",d,p),typeof u[d]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:f({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:f({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(d){d.beginPath();var p=this.calcLinePoints();d.moveTo(p.x1,p.y1),d.lineTo(p.x2,p.y2),d.lineWidth=this.strokeWidth;var m=d.strokeStyle;d.strokeStyle=this.stroke||d.fillStyle,this.stroke&&this._renderStroke(d),d.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(d){return c(this.callSuper("toObject",d),this.calcLinePoints())},_getNonTransformedDimensions:function(){var d=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(d.y-=this.strokeWidth),this.height===0&&(d.x-=this.strokeWidth)),d},calcLinePoints:function(){var d=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=d*this.width*.5,g=p*this.height*.5,v=d*this.width*-.5,_=p*this.height*-.5;return{x1:m,x2:v,y1:g,y2:_}},_toSVG:function(){var d=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`" />
`]}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(d,p,m){m=m||{};var g=o.parseAttributes(d,o.Line.ATTRIBUTE_NAMES),v=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new o.Line(v,c(g,m)))},o.Line.fromObject=function(d,p){function m(v){delete v.points,p&&p(v)}var g=h(d,!0);g.points=[d.x1,d.y1,d.x2,d.y2],o.Object._fromObject("Line",g,m,"points")};function f(d,p){var m=d.origin,g=d.axis1,v=d.axis2,_=d.dimension,y=p.nearest,b=p.center,S=p.farthest;return function(){switch(this.get(m)){case y:return Math.min(this.get(g),this.get(v));case b:return Math.min(this.get(g),this.get(v))+.5*this.get(_);case S:return Math.max(this.get(g),this.get(v))}}}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.degreesToRadians;if(o.Circle){o.warn("fabric.Circle is already defined.");return}o.Circle=o.util.createClass(o.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:o.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(u,f){return this.callSuper("_set",u,f),u==="radius"&&this.setRadius(f),this},toObject:function(u){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(u))},_toSVG:function(){var u,f=0,d=0,p=(this.endAngle-this.startAngle)%360;if(p===0)u=["<circle ","COMMON_PARTS",'cx="'+f+'" cy="'+d+'" ','r="',this.radius,`" />
`];else{var m=c(this.startAngle),g=c(this.endAngle),v=this.radius,_=o.util.cos(m)*v,y=o.util.sin(m)*v,b=o.util.cos(g)*v,S=o.util.sin(g)*v,x=p>180?"1":"0";u=['<path d="M '+_+" "+y," A "+v+" "+v," 0 ",+x+" 1"," "+b+" "+S,'" ',"COMMON_PARTS",` />
`]}return u},_render:function(u){u.beginPath(),u.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(u)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(u){return this.radius=u,this.set("width",u*2).set("height",u*2)}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(u,f){var d=o.parseAttributes(u,o.Circle.ATTRIBUTE_NAMES);if(!h(d))throw new Error("value of `r` attribute is required and can not be negative");d.left=(d.left||0)-d.radius,d.top=(d.top||0)-d.radius,f(new o.Circle(d))};function h(u){return"radius"in u&&u.radius>=0}o.Circle.fromObject=function(u,f){o.Object._fromObject("Circle",u,f)}}(e),function(a){var o=a.fabric||(a.fabric={});if(o.Triangle){o.warn("fabric.Triangle is already defined");return}o.Triangle=o.util.createClass(o.Object,{type:"triangle",width:100,height:100,_render:function(c){var h=this.width/2,u=this.height/2;c.beginPath(),c.moveTo(-h,u),c.lineTo(0,-u),c.lineTo(h,u),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,h=this.height/2,u=[-c+" "+h,"0 "+-h,c+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',u,'" />']}}),o.Triangle.fromObject=function(c,h){return o.Object._fromObject("Triangle",c,h)}}(e),function(a){var o=a.fabric||(a.fabric={}),c=Math.PI*2;if(o.Ellipse){o.warn("fabric.Ellipse is already defined.");return}o.Ellipse=o.util.createClass(o.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,u){switch(this.callSuper("_set",h,u),h){case"rx":this.rx=u,this.set("width",u*2);break;case"ry":this.ry=u,this.set("height",u*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,c,!1),h.restore(),this._renderPaintInOrder(h)}}),o.Ellipse.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),o.Ellipse.fromElement=function(h,u){var f=o.parseAttributes(h,o.Ellipse.ATTRIBUTE_NAMES);f.left=(f.left||0)-f.rx,f.top=(f.top||0)-f.ry,u(new o.Ellipse(f))},o.Ellipse.fromObject=function(h,u){o.Object._fromObject("Ellipse",h,u)}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend;if(o.Rect){o.warn("fabric.Rect is already defined");return}o.Rect=o.util.createClass(o.Object,{stateProperties:o.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:o.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var u=this.rx?Math.min(this.rx,this.width/2):0,f=this.ry?Math.min(this.ry,this.height/2):0,d=this.width,p=this.height,m=-this.width/2,g=-this.height/2,v=u!==0||f!==0,_=1-.5522847498;h.beginPath(),h.moveTo(m+u,g),h.lineTo(m+d-u,g),v&&h.bezierCurveTo(m+d-_*u,g,m+d,g+_*f,m+d,g+f),h.lineTo(m+d,g+p-f),v&&h.bezierCurveTo(m+d,g+p-_*f,m+d-_*u,g+p,m+d-u,g+p),h.lineTo(m+u,g+p),v&&h.bezierCurveTo(m+_*u,g+p,m,g+p-_*f,m,g+p-f),h.lineTo(m,g+f),v&&h.bezierCurveTo(m,g+_*f,m+_*u,g,m+u,g),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,u=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',u,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(h,u,f){if(!h)return u(null);f=f||{};var d=o.parseAttributes(h,o.Rect.ATTRIBUTE_NAMES);d.left=d.left||0,d.top=d.top||0,d.height=d.height||0,d.width=d.width||0;var p=new o.Rect(c(f?o.util.object.clone(f):{},d));p.visible=p.visible&&p.width>0&&p.height>0,u(p)},o.Rect.fromObject=function(h,u){return o.Object._fromObject("Rect",h,u)}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.util.array.min,u=o.util.array.max,f=o.util.toFixed,d=o.util.projectStrokeOnPoints;if(o.Polyline){o.warn("fabric.Polyline is already defined");return}o.Polyline=o.util.createClass(o.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:o.Object.prototype.cacheProperties.concat("points"),initialize:function(p,m){m=m||{},this.points=p||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return d(this.points,this,!0)},_setPositionDimensions:function(p){var m=this._calcDimensions(p),g,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,p.fromSVG||(g=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?m.left:g.x),typeof p.top>"u"&&(this.top=p.fromSVG?m.top:g.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=h(p,"x")||0,g=h(p,"y")||0,v=u(p,"x")||0,_=u(p,"y")||0,y=v-m,b=_-g;return{left:m,top:g,width:y,height:b}},toObject:function(p){return c(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],m=this.pathOffset.x,g=this.pathOffset.y,v=o.Object.NUM_FRACTION_DIGITS,_=0,y=this.points.length;_<y;_++)p.push(f(this.points[_].x-m,v),",",f(this.points[_].y-g,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var m,g=this.points.length,v=this.pathOffset.x,_=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-_);for(var y=0;y<g;y++)m=this.points[y],p.lineTo(m.x-v,m.y-_);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElementGenerator=function(p){return function(m,g,v){if(!m)return g(null);v||(v={});var _=o.parsePointsAttribute(m.getAttribute("points")),y=o.parseAttributes(m,o[p].ATTRIBUTE_NAMES);y.fromSVG=!0,g(new o[p](_,c(y,v)))}},o.Polyline.fromElement=o.Polyline.fromElementGenerator("Polyline"),o.Polyline.fromObject=function(p,m){return o.Object._fromObject("Polyline",p,m,"points")}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.projectStrokeOnPoints;if(o.Polygon){o.warn("fabric.Polygon is already defined");return}o.Polygon=o.util.createClass(o.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),o.Polygon.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polygon.fromElement=o.Polyline.fromElementGenerator("Polygon"),o.Polygon.fromObject=function(h,u){o.Object._fromObject("Polygon",h,u,"points")}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.array.min,h=o.util.array.max,u=o.util.object.extend,f=o.util.object.clone,d=o.util.toFixed;if(o.Path){o.warn("fabric.Path is already defined");return}o.Path=o.util.createClass(o.Object,{type:"path",path:null,cacheProperties:o.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:o.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=f(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(p||[],m)},_setPath:function(p,m){this.path=o.util.makePathSimpler(Array.isArray(p)?p:o.util.parsePath(p)),o.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(p){var m,g=0,v=0,_=0,y=0,b=0,S=0,x=-this.pathOffset.x,C=-this.pathOffset.y;p.beginPath();for(var w=0,k=this.path.length;w<k;++w)switch(m=this.path[w],m[0]){case"L":_=m[1],y=m[2],p.lineTo(_+x,y+C);break;case"M":_=m[1],y=m[2],g=_,v=y,p.moveTo(_+x,y+C);break;case"C":_=m[5],y=m[6],b=m[3],S=m[4],p.bezierCurveTo(m[1]+x,m[2]+C,b+x,S+C,_+x,y+C);break;case"Q":p.quadraticCurveTo(m[1]+x,m[2]+C,m[3]+x,m[4]+C),_=m[3],y=m[4],b=m[1],S=m[2];break;case"z":case"Z":_=g,y=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return u(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=o.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=o.Object.NUM_FRACTION_DIGITS;return" translate("+d(-this.pathOffset.x,p)+", "+d(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,v=0,_=0,y=0,b=0,S,x=0,C=this.path.length;x<C;++x){switch(g=this.path[x],g[0]){case"L":y=g[1],b=g[2],S=[];break;case"M":y=g[1],b=g[2],v=y,_=b,S=[];break;case"C":S=o.util.getBoundsOfCurve(y,b,g[1],g[2],g[3],g[4],g[5],g[6]),y=g[5],b=g[6];break;case"Q":S=o.util.getBoundsOfCurve(y,b,g[1],g[2],g[1],g[2],g[3],g[4]),y=g[3],b=g[4];break;case"z":case"Z":y=v,b=_;break}S.forEach(function(B){p.push(B.x),m.push(B.y)}),p.push(y),m.push(b)}var w=c(p)||0,k=c(m)||0,I=h(p)||0,R=h(m)||0,j=I-w,G=R-k;return{left:w,top:k,width:j,height:G}}}),o.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;o.loadSVGFromURL(g,function(v){var _=v[0];_.setOptions(p),p.clipPath?o.util.enlivenObjects([p.clipPath],function(y){_.clipPath=y[0],m&&m(_)}):m&&m(_)})}else o.Object._fromObject("Path",p,m,"path")},o.Path.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(["d"]),o.Path.fromElement=function(p,m,g){var v=o.parseAttributes(p,o.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new o.Path(v.d,u(v,g)))}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.array.min,h=o.util.array.max;o.Group||(o.Group=o.util.createClass(o.Object,o.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(u,f,d){f=f||{},this._objects=[],d&&this.callSuper("initialize",f),this._objects=u||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(d)this._updateObjectsACoords();else{var m=f&&f.centerPoint;f.originX!==void 0&&(this.originX=f.originX),f.originY!==void 0&&(this.originY=f.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete f.centerPoint,this.callSuper("initialize",f)}this.setCoords()},_updateObjectsACoords:function(){for(var u=!0,f=this._objects.length;f--;)this._objects[f].setCoords(u)},_updateObjectsCoords:function(f){for(var f=f||this.getCenterPoint(),d=this._objects.length;d--;)this._updateObjectCoords(this._objects[d],f)},_updateObjectCoords:function(u,f){var d=u.left,p=u.top,m=!0;u.set({left:d-f.x,top:p-f.y}),u.group=this,u.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(u){var f=!!this.group;return this._restoreObjectsState(),o.util.resetObjectTransform(this),u&&(f&&o.util.removeTransformFromObject(u,this.group.calcTransformMatrix()),this._objects.push(u),u.group=this,u._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,f?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(u){return this._restoreObjectsState(),o.util.resetObjectTransform(this),this.remove(u),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(u){this.dirty=!0,u.group=this,u._set("canvas",this.canvas)},_onObjectRemoved:function(u){this.dirty=!0,delete u.group},_set:function(u,f){var d=this._objects.length;if(this.useSetOnGroup)for(;d--;)this._objects[d].setOnGroup(u,f);if(u==="canvas")for(;d--;)this._objects[d]._set(u,f);o.Object.prototype._set.call(this,u,f)},toObject:function(u){var f=this.includeDefaultValues,d=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=f;var v=m.toObject(u);return m.includeDefaultValues=g,v}),p=o.Object.prototype.toObject.call(this,u);return p.objects=d,p},toDatalessObject:function(u){var f,d=this.sourcePath;if(d)f=d;else{var p=this.includeDefaultValues;f=this._objects.map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=p;var _=g.toDatalessObject(u);return g.includeDefaultValues=v,_})}var m=o.Object.prototype.toDatalessObject.call(this,u);return m.objects=f,m},render:function(u){this._transformDone=!0,this.callSuper("render",u),this._transformDone=!1},shouldCache:function(){var u=o.Object.prototype.shouldCache.call(this);if(u){for(var f=0,d=this._objects.length;f<d;f++)if(this._objects[f].willDrawShadow())return this.ownCaching=!1,!1}return u},willDrawShadow:function(){if(o.Object.prototype.willDrawShadow.call(this))return!0;for(var u=0,f=this._objects.length;u<f;u++)if(this._objects[u].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(u){for(var f=0,d=this._objects.length;f<d;f++)this._objects[f].render(u);this._drawClipPath(u,this.clipPath)},isCacheDirty:function(u){if(this.callSuper("isCacheDirty",u))return!0;if(!this.statefullCache)return!1;for(var f=0,d=this._objects.length;f<d;f++)if(this._objects[f].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var u=this.calcOwnMatrix();return this._objects.forEach(function(f){o.util.addTransformToObject(f,u),delete f.group,f.setCoords()}),this},destroy:function(){return this._objects.forEach(function(u){u.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(u){u.dispose&&u.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var u=this._objects,f=this.canvas;this._objects=[];var d=this.toObject();delete d.objects;var p=new o.ActiveSelection([]);return p.set(d),p.type="activeSelection",f.remove(this),u.forEach(function(m){m.group=p,m.dirty=!0,f.add(m)}),p.canvas=f,p._objects=u,f._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var u=!0;return this.forEachObject(function(f){f.setCoords(u)}),this},_calcBounds:function(u){for(var f=[],d=[],p,m,g,v=["tr","br","bl","tl"],_=0,y=this._objects.length,b,S=v.length;_<y;++_){for(p=this._objects[_],g=p.calcACoords(),b=0;b<S;b++)m=v[b],f.push(g[m].x),d.push(g[m].y);p.aCoords=g}this._getBounds(f,d,u)},_getBounds:function(u,f,d){var p=new o.Point(c(u),c(f)),m=new o.Point(h(u),h(f)),g=p.y||0,v=p.x||0,_=m.x-p.x||0,y=m.y-p.y||0;this.width=_,this.height=y,d||this.setPositionByOrigin({x:v,y:g},"left","top")},_toSVG:function(u){for(var f=["<g ","COMMON_PARTS",` >
`],d=0,p=this._objects.length;d<p;d++)f.push("		",this._objects[d].toSVG(u));return f.push(`</g>
`),f},getSvgStyles:function(){var u=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",f=this.visible?"":" visibility: hidden;";return[u,this.getSvgFilter(),f].join("")},toClipPathSVG:function(u){for(var f=[],d=0,p=this._objects.length;d<p;d++)f.push("	",this._objects[d].toClipPathSVG(u));return this._createBaseClipPathSVGMarkup(f,{reviver:u})}}),o.Group.fromObject=function(u,f){var d=u.objects,p=o.util.object.clone(u,!0);if(delete p.objects,typeof d=="string"){o.loadSVGFromURL(d,function(m){var g=o.util.groupSVGElements(m,u,d),v=p.clipPath;delete p.clipPath,g.set(p),v?o.util.enlivenObjects([v],function(_){g.clipPath=_[0],f&&f(g)}):f&&f(g)});return}o.util.enlivenObjects(d,function(m){o.util.enlivenObjectEnlivables(u,p,function(){f&&f(new o.Group(m,p,!0))})})})}(e),function(a){var o=a.fabric||(a.fabric={});o.ActiveSelection||(o.ActiveSelection=o.util.createClass(o.Group,{type:"activeSelection",initialize:function(c,h){h=h||{},this._objects=c||[];for(var u=this._objects.length;u--;)this._objects[u].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),o.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var h=o.Object.prototype.toObject.call(this),u=new o.Group([]);if(delete h.type,u.set(h),c.forEach(function(d){d.canvas.remove(d),d.group=u}),u._objects=c,!this.canvas)return u;var f=this.canvas;return f.add(u),f._activeObject=u,u.setCoords(),u},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,h,u){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,h),u=u||{},typeof u.hasControls>"u"&&(u.hasControls=!1),u.forActiveSelection=!0;for(var f=0,d=this._objects.length;f<d;f++)this._objects[f]._renderControls(c,u);c.restore()}}),o.ActiveSelection.fromObject=function(c,h){o.util.enlivenObjects(c.objects,function(u){delete c.objects,h&&h(new o.ActiveSelection(u,c,!0))})})}(e),function(a){var o=t.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,h){h||(h={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",h),this._initElement(c,h)},getElement:function(){return this._element||{}},setElement:function(c,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var h=t.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,u=this.height/2;c.beginPath(),c.moveTo(-h,-u),c.lineTo(h,-u),c.lineTo(h,u),c.lineTo(-h,u),c.lineTo(-h,-u),c.closePath()}},toObject:function(c){var h=[];this.filters.forEach(function(f){f&&h.push(f.toObject())});var u=o(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(u.resizeFilter=this.resizeFilter.toObject()),u},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],h=[],u,f=this._element,d=-this.width/2,p=-this.height/2,m="",g="";if(!f)return[];if(this.hasCrop()){var v=t.Object.__uid++;c.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+d+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',d-this.cropX,'" y="',p-this.cropY,'" width="',f.width||f.naturalWidth,'" height="',f.height||f.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var _=this.fill;this.fill=null,u=["	<rect ",'x="',d,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=_}return this.paintFirst!=="fill"?c=c.concat(u,h):c=c.concat(h,u),c},getSrc:function(c){var h=c?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(c,h,u){return t.util.loadImage(c,function(f,d){this.setElement(f,u),this._setWidthHeight(),h&&h(this,d)},this,u&&u.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,h=this.minimumScaleTrigger,u=this.getTotalObjectScaling(),f=u.scaleX,d=u.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||f>h&&d>h){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=f,this._lastScaleY=d;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var m=t.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,_=p.height;m.width=v,m.height=_,this._element=m,this._lastScaleX=c.scaleX=f,this._lastScaleY=c.scaleY=d,t.filterBackend.applyFilters([c],p,v,_,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,u=h.naturalWidth||h.width,f=h.naturalHeight||h.height;if(this._element===this._originalElement){var d=t.util.createCanvasElement();d.width=u,d.height=f,this._element=d,this._filteredEl=d}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,u,f),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(c,this._originalElement,u,f,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var h=this._element;if(h){var u=this._filterScalingX,f=this._filterScalingY,d=this.width,p=this.height,m=Math.min,g=Math.max,v=g(this.cropX,0),_=g(this.cropY,0),y=h.naturalWidth||h.width,b=h.naturalHeight||h.height,S=v*u,x=_*f,C=m(d*u,y-S),w=m(p*f,b-x),k=-d/2,I=-p/2,R=m(d,y/u-v),j=m(p,b/f-_);h&&c.drawImage(h,S,x,C,w,k,I,R,j)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,h){this.setElement(t.util.getById(c),h),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,h){c&&c.length?t.util.enlivenObjects(c,function(u){h&&h(u)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(c){c||(c={});var h=this.getElement();this.width=c.width||h.naturalWidth||h.width||0,this.height=c.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var c=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,u=this._element.height,f=1,d=1,p=0,m=0,g=0,v=0,_,y=this.width,b=this.height,S={width:y,height:b};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(f=d=t.util.findScaleToFit(this._element,S),_=(y-h*f)/2,c.alignX==="Min"&&(p=-_),c.alignX==="Max"&&(p=_),_=(b-u*d)/2,c.alignY==="Min"&&(m=-_),c.alignY==="Max"&&(m=_)),c.meetOrSlice==="slice"&&(f=d=t.util.findScaleToCover(this._element,S),_=h-y/f,c.alignX==="Mid"&&(g=_/2),c.alignX==="Max"&&(g=_),_=u-b/d,c.alignY==="Mid"&&(v=_/2),c.alignY==="Max"&&(v=_),h=y/f,u=b/d)):(f=y/h,d=b/u),{width:h,height:u,scaleX:f,scaleY:d,offsetLeft:p,offsetTop:m,cropX:g,cropY:v}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(c,h){var u=t.util.object.clone(c);t.util.loadImage(u.src,function(f,d){if(d){h&&h(null,!0);return}t.Image.prototype._initFilters.call(u,u.filters,function(p){u.filters=p||[],t.Image.prototype._initFilters.call(u,[u.resizeFilter],function(m){u.resizeFilter=m[0],t.util.enlivenObjectEnlivables(u,u,function(){var g=new t.Image(f,u);h(g,!1)})})})},null,u.crossOrigin)},t.Image.fromURL=function(c,h,u){t.util.loadImage(c,function(f,d){h&&h(new t.Image(f,u),d)},null,u&&u.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(c,h,u){var f=t.parseAttributes(c,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(f["xlink:href"],h,o(u?t.util.object.clone(u):{},f))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var o=function(){},c=a.onComplete||o,h=a.onChange||o,u=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(f){u.rotate(f),h()},onComplete:function(){u.setCoords(),c()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(c,h){var u="precision "+h+` float;
void main(){}`,f=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(f,u),c.compileShader(f),!!c.getShaderParameter(f,c.COMPILE_STATUS)}t.isWebglSupported=function(c){if(t.isLikelyNode)return!1;c=c||t.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),u=h.getContext("webgl")||h.getContext("experimental-webgl"),f=!1;if(u){t.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),f=t.maxTextureSize>=c;for(var d=["highp","mediump","lowp"],p=0;p<3;p++)if(a(u,d[p])){t.webGlPrecision=d[p];break}}return this.isSupported=f,f},t.WebglFilterBackend=o;function o(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}o.prototype={tileSize:2048,resources:{},setupGLContext:function(c,h){this.dispose(),this.createWebGLCanvas(c,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,h)},chooseFastestCopyGLTo2DMethod:function(c,h){var u=typeof window.performance<"u",f;try{new ImageData(1,1),f=!0}catch{f=!1}var d=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(u&&f&&d&&p){var m=t.util.createCanvasElement(),g=new ArrayBuffer(c*h*4);if(t.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=l;return}var v={imageBuffer:g,destinationWidth:c,destinationHeight:h,targetCanvas:m},_,y,b;m.width=c,m.height=h,_=window.performance.now(),s.call(v,this.gl,v),y=window.performance.now()-_,_=window.performance.now(),l.call(v,this.gl,v),b=window.performance.now()-_,y>b?(this.imageBuffer=g,this.copyGLTo2D=l):this.copyGLTo2D=s}},createWebGLCanvas:function(c,h){var u=t.util.createCanvasElement();u.width=c,u.height=h;var f={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},d=u.getContext("webgl",f);d||(d=u.getContext("experimental-webgl",f)),d&&(d.clearColor(0,0,0,0),this.canvas=u,this.gl=d)},applyFilters:function(c,h,u,f,d,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,h));var v={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:u,sourceHeight:f,destinationWidth:u,destinationHeight:f,context:m,sourceTexture:this.createTexture(m,u,f,!g&&h),targetTexture:this.createTexture(m,u,f),originalTexture:g||this.createTexture(m,u,f,!g&&h),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:d},_=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,_),c.forEach(function(y){y&&y.applyTo(v)}),i(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(_),d.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,h,u,f,d){var p=c.createTexture();return c.bindTexture(c.TEXTURE_2D,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,d||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,d||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),f?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,f):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,h,u,0,c.RGBA,c.UNSIGNED_BYTE,null),p},getCachedTexture:function(c,h){if(this.textureCache[c])return this.textureCache[c];var u=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[c]=u,u},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:s,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,h={renderer:"",vendor:""};if(!c)return h;var u=c.getExtension("WEBGL_debug_renderer_info");if(u){var f=c.getParameter(u.UNMASKED_RENDERER_WEBGL),d=c.getParameter(u.UNMASKED_VENDOR_WEBGL);f&&(h.renderer=f.toLowerCase()),d&&(h.vendor=d.toLowerCase())}return this.gpuInfo=h,h}}}();function i(a){var o=a.targetCanvas,c=o.width,h=o.height,u=a.destinationWidth,f=a.destinationHeight;(c!==u||h!==f)&&(o.width=u,o.height=f)}function s(a,o){var c=a.canvas,h=o.targetCanvas,u=h.getContext("2d");u.translate(0,h.height),u.scale(1,-1);var f=c.height-h.height;u.drawImage(c,0,f,h.width,h.height,0,0,h.width,h.height)}function l(a,o){var c=o.targetCanvas,h=c.getContext("2d"),u=o.destinationWidth,f=o.destinationHeight,d=u*f*4,p=new Uint8Array(this.imageBuffer,0,d),m=new Uint8ClampedArray(this.imageBuffer,0,d);a.readPixels(0,0,u,f,a.RGBA,a.UNSIGNED_BYTE,p);var g=new ImageData(m,u,f);h.putImageData(g,0,0)}(function(){var a=function(){};t.Canvas2dFilterBackend=o;function o(){}o.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(c,h,u,f,d){var p=d.getContext("2d");p.drawImage(h,0,0,u,f);var m=p.getImageData(0,0,u,f),g=p.getImageData(0,0,u,f),v={sourceWidth:u,sourceHeight:f,imageData:m,originalEl:h,originalImageData:g,canvasEl:d,ctx:p,filterBackend:this};return c.forEach(function(_){_.applyTo(v)}),(v.imageData.width!==u||v.imageData.height!==f)&&(d.width=v.imageData.width,d.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var o in a)this[o]=a[o]},createProgram:function(a,o,c){o=o||this.fragmentSource,c=c||this.vertexSource,t.webGlPrecision!=="highp"&&(o=o.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var h=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(h,c),a.compileShader(h),!a.getShaderParameter(h,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(h));var u=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(u,o),a.compileShader(u),!a.getShaderParameter(u,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(u));var f=a.createProgram();if(a.attachShader(f,h),a.attachShader(f,u),a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(f));var d=this.getAttributeLocations(a,f),p=this.getUniformLocations(a,f)||{};return p.uStepW=a.getUniformLocation(f,"uStepW"),p.uStepH=a.getUniformLocation(f,"uStepH"),{program:f,attributeLocations:d,uniformLocations:p}},getAttributeLocations:function(a,o){return{aPosition:a.getAttribLocation(o,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,o,c){var h=o.aPosition,u=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,u),a.enableVertexAttribArray(h),a.vertexAttribPointer(h,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var o=a.context,c,h;a.passes>1?(c=a.destinationWidth,h=a.destinationHeight,(a.sourceWidth!==c||a.sourceHeight!==h)&&(o.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(o,c,h)),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,a.targetTexture,0)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.finish())},_swapTextures:function(a){a.passes--,a.pass++;var o=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=o},isNeutralState:function(){var a=this.mainParameter,o=t.Image.filters[this.type].prototype;if(a)if(Array.isArray(o[a])){for(var c=o[a].length;c--;)if(this[a][c]!==o[a][c])return!1;return!0}else return o[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var o=a.context,c=this.retrieveShader(a);a.pass===0&&a.originalTexture?o.bindTexture(o.TEXTURE_2D,a.originalTexture):o.bindTexture(o.TEXTURE_2D,a.sourceTexture),o.useProgram(c.program),this.sendAttributeData(o,c.attributeLocations,a.aPosition),o.uniform1f(c.uniformLocations.uStepW,1/a.sourceWidth),o.uniform1f(c.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(o,c.uniformLocations),o.viewport(0,0,a.destinationWidth,a.destinationHeight),o.drawArrays(o.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,o,c){a.activeTexture(c),a.bindTexture(a.TEXTURE_2D,o),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,o){a.activeTexture(o),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var o=document.createElement("canvas");o.width=a.sourceWidth,o.height=a.sourceHeight,a.helpLayer=o}},toObject:function(){var a={type:this.type},o=this.mainParameter;return o&&(a[o]=this[o]),a},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(a,o){var c=new t.Image.filters[a.type](a);return o&&o(c),c},function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.ColorMatrix=h(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(u){this.callSuper("initialize",u),this.matrix=this.matrix.slice(0)},applyTo2d:function(u){var f=u.imageData,d=f.data,p=d.length,m=this.matrix,g,v,_,y,b,S=this.colorsOnly;for(b=0;b<p;b+=4)g=d[b],v=d[b+1],_=d[b+2],S?(d[b]=g*m[0]+v*m[1]+_*m[2]+m[4]*255,d[b+1]=g*m[5]+v*m[6]+_*m[7]+m[9]*255,d[b+2]=g*m[10]+v*m[11]+_*m[12]+m[14]*255):(y=d[b+3],d[b]=g*m[0]+v*m[1]+_*m[2]+y*m[3]+m[4]*255,d[b+1]=g*m[5]+v*m[6]+_*m[7]+y*m[8]+m[9]*255,d[b+2]=g*m[10]+v*m[11]+_*m[12]+y*m[13]+m[14]*255,d[b+3]=g*m[15]+v*m[16]+_*m[17]+y*m[18]+m[19]*255)},getUniformLocations:function(u,f){return{uColorMatrix:u.getUniformLocation(f,"uColorMatrix"),uConstants:u.getUniformLocation(f,"uConstants")}},sendUniformData:function(u,f){var d=this.matrix,p=[d[0],d[1],d[2],d[3],d[5],d[6],d[7],d[8],d[10],d[11],d[12],d[13],d[15],d[16],d[17],d[18]],m=[d[4],d[9],d[14],d[19]];u.uniformMatrix4fv(f.uColorMatrix,!1,p),u.uniform4fv(f.uConstants,m)}}),o.Image.filters.ColorMatrix.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Brightness=h(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(u){if(this.brightness!==0){var f=u.imageData,d=f.data,p,m=d.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)d[p]=d[p]+g,d[p+1]=d[p+1]+g,d[p+2]=d[p+2]+g}},getUniformLocations:function(u,f){return{uBrightness:u.getUniformLocation(f,"uBrightness")}},sendUniformData:function(u,f){u.uniform1f(f.uBrightness,this.brightness)}}),o.Image.filters.Brightness.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.Image.filters,u=o.util.createClass;h.Convolute=u(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(f){var d=Math.sqrt(this.matrix.length),p=this.type+"_"+d+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return f.programCache.hasOwnProperty(p)||(f.programCache[p]=this.createProgram(f.context,m)),f.programCache[p]},applyTo2d:function(f){var d=f.imageData,p=d.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),v=Math.floor(g/2),_=d.width,y=d.height,b=f.ctx.createImageData(_,y),S=b.data,x=this.opaque?1:0,C,w,k,I,R,j,G,B,$,V,W,M,P;for(W=0;W<y;W++)for(V=0;V<_;V++){for(R=(W*_+V)*4,C=0,w=0,k=0,I=0,P=0;P<g;P++)for(M=0;M<g;M++)G=W+P-v,j=V+M-v,!(G<0||G>=y||j<0||j>=_)&&(B=(G*_+j)*4,$=m[P*g+M],C+=p[B]*$,w+=p[B+1]*$,k+=p[B+2]*$,x||(I+=p[B+3]*$));S[R]=C,S[R+1]=w,S[R+2]=k,x?S[R+3]=p[R+3]:S[R+3]=I}f.imageData=b},getUniformLocations:function(f,d){return{uMatrix:f.getUniformLocation(d,"uMatrix"),uOpaque:f.getUniformLocation(d,"uOpaque"),uHalfSize:f.getUniformLocation(d,"uHalfSize"),uSize:f.getUniformLocation(d,"uSize")}},sendUniformData:function(f,d){f.uniform1fv(d.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),o.Image.filters.Convolute.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Grayscale=h(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(u){var f=u.imageData,d=f.data,p,m=d.length,g,v=this.mode;for(p=0;p<m;p+=4)v==="average"?g=(d[p]+d[p+1]+d[p+2])/3:v==="lightness"?g=(Math.min(d[p],d[p+1],d[p+2])+Math.max(d[p],d[p+1],d[p+2]))/2:v==="luminosity"&&(g=.21*d[p]+.72*d[p+1]+.07*d[p+2]),d[p]=g,d[p+1]=g,d[p+2]=g},retrieveShader:function(u){var f=this.type+"_"+this.mode;if(!u.programCache.hasOwnProperty(f)){var d=this.fragmentSource[this.mode];u.programCache[f]=this.createProgram(u.context,d)}return u.programCache[f]},getUniformLocations:function(u,f){return{uMode:u.getUniformLocation(f,"uMode")}},sendUniformData:function(u,f){var d=1;u.uniform1i(f.uMode,d)},isNeutralState:function(){return!1}}),o.Image.filters.Grayscale.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Invert=h(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(u){var f=u.imageData,d=f.data,p,m=d.length;for(p=0;p<m;p+=4)d[p]=255-d[p],d[p+1]=255-d[p+1],d[p+2]=255-d[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(u,f){return{uInvert:u.getUniformLocation(f,"uInvert")}},sendUniformData:function(u,f){u.uniform1i(f.uInvert,this.invert)}}),o.Image.filters.Invert.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.Image.filters,u=o.util.createClass;h.Noise=u(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(f){if(this.noise!==0){var d=f.imageData,p=d.data,m,g=p.length,v=this.noise,_;for(m=0,g=p.length;m<g;m+=4)_=(.5-Math.random())*v,p[m]+=_,p[m+1]+=_,p[m+2]+=_}},getUniformLocations:function(f,d){return{uNoise:f.getUniformLocation(d,"uNoise"),uSeed:f.getUniformLocation(d,"uSeed")}},sendUniformData:function(f,d){f.uniform1f(d.uNoise,this.noise/255),f.uniform1f(d.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),o.Image.filters.Noise.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Pixelate=h(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(u){var f=u.imageData,d=f.data,p=f.height,m=f.width,g,v,_,y,b,S,x,C,w,k,I;for(v=0;v<p;v+=this.blocksize)for(_=0;_<m;_+=this.blocksize)for(g=v*4*m+_*4,y=d[g],b=d[g+1],S=d[g+2],x=d[g+3],k=Math.min(v+this.blocksize,p),I=Math.min(_+this.blocksize,m),C=v;C<k;C++)for(w=_;w<I;w++)g=C*4*m+w*4,d[g]=y,d[g+1]=b,d[g+2]=S,d[g+3]=x},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(u,f){return{uBlocksize:u.getUniformLocation(f,"uBlocksize"),uStepW:u.getUniformLocation(f,"uStepW"),uStepH:u.getUniformLocation(f,"uStepH")}},sendUniformData:function(u,f){u.uniform1f(f.uBlocksize,this.blocksize)}}),o.Image.filters.Pixelate.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.extend,h=o.Image.filters,u=o.util.createClass;h.RemoveColor=u(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(f){var d=f.imageData,p=d.data,m,g=this.distance*255,v,_,y,b=new o.Color(this.color).getSource(),S=[b[0]-g,b[1]-g,b[2]-g],x=[b[0]+g,b[1]+g,b[2]+g];for(m=0;m<p.length;m+=4)v=p[m],_=p[m+1],y=p[m+2],v>S[0]&&_>S[1]&&y>S[2]&&v<x[0]&&_<x[1]&&y<x[2]&&(p[m+3]=0)},getUniformLocations:function(f,d){return{uLow:f.getUniformLocation(d,"uLow"),uHigh:f.getUniformLocation(d,"uHigh")}},sendUniformData:function(f,d){var p=new o.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],v=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];f.uniform4fv(d.uLow,g),f.uniform4fv(d.uHigh,v)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),o.Image.filters.RemoveColor.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass,u={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var f in u)c[f]=h(c.ColorMatrix,{type:f,matrix:u[f],mainParameter:!1,colorsOnly:!0}),o.Image.filters[f].fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric,c=o.Image.filters,h=o.util.createClass;c.BlendColor=h(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(u){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[u]+`}
}`},retrieveShader:function(u){var f=this.type+"_"+this.mode,d;return u.programCache.hasOwnProperty(f)||(d=this.buildSource(this.mode),u.programCache[f]=this.createProgram(u.context,d)),u.programCache[f]},applyTo2d:function(u){var f=u.imageData,d=f.data,p=d.length,m,g,v,_,y,b,S,x=1-this.alpha;S=new o.Color(this.color).getSource(),m=S[0]*this.alpha,g=S[1]*this.alpha,v=S[2]*this.alpha;for(var C=0;C<p;C+=4)switch(_=d[C],y=d[C+1],b=d[C+2],this.mode){case"multiply":d[C]=_*m/255,d[C+1]=y*g/255,d[C+2]=b*v/255;break;case"screen":d[C]=255-(255-_)*(255-m)/255,d[C+1]=255-(255-y)*(255-g)/255,d[C+2]=255-(255-b)*(255-v)/255;break;case"add":d[C]=_+m,d[C+1]=y+g,d[C+2]=b+v;break;case"diff":case"difference":d[C]=Math.abs(_-m),d[C+1]=Math.abs(y-g),d[C+2]=Math.abs(b-v);break;case"subtract":d[C]=_-m,d[C+1]=y-g,d[C+2]=b-v;break;case"darken":d[C]=Math.min(_,m),d[C+1]=Math.min(y,g),d[C+2]=Math.min(b,v);break;case"lighten":d[C]=Math.max(_,m),d[C+1]=Math.max(y,g),d[C+2]=Math.max(b,v);break;case"overlay":d[C]=m<128?2*_*m/255:255-2*(255-_)*(255-m)/255,d[C+1]=g<128?2*y*g/255:255-2*(255-y)*(255-g)/255,d[C+2]=v<128?2*b*v/255:255-2*(255-b)*(255-v)/255;break;case"exclusion":d[C]=m+_-2*m*_/255,d[C+1]=g+y-2*g*y/255,d[C+2]=v+b-2*v*b/255;break;case"tint":d[C]=m+_*x,d[C+1]=g+y*x,d[C+2]=v+b*x}},getUniformLocations:function(u,f){return{uColor:u.getUniformLocation(f,"uColor")}},sendUniformData:function(u,f){var d=new o.Color(this.color).getSource();d[0]=this.alpha*d[0]/255,d[1]=this.alpha*d[1]/255,d[2]=this.alpha*d[2]/255,d[3]=this.alpha,u.uniform4fv(f.uColor,d)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendColor.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric,c=o.Image.filters,h=o.util.createClass;c.BlendImage=h(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(u){var f=this.type+"_"+this.mode,d=this.fragmentSource[this.mode];return u.programCache.hasOwnProperty(f)||(u.programCache[f]=this.createProgram(u.context,d)),u.programCache[f]},applyToWebGL:function(u){var f=u.context,d=this.createTexture(u.filterBackend,this.image);this.bindAdditionalTexture(f,d,f.TEXTURE1),this.callSuper("applyToWebGL",u),this.unbindAdditionalTexture(f,f.TEXTURE1)},createTexture:function(u,f){return u.getCachedTexture(f.cacheKey,f._element)},calculateMatrix:function(){var u=this.image,f=u._element.width,d=u._element.height;return[1/u.scaleX,0,0,0,1/u.scaleY,0,-u.left/f,-u.top/d,1]},applyTo2d:function(u){var f=u.imageData,d=u.filterBackend.resources,p=f.data,m=p.length,g=f.width,v=f.height,_,y,b,S,x,C,w,k,I,R,j=this.image,G;d.blendImage||(d.blendImage=o.util.createCanvasElement()),I=d.blendImage,R=I.getContext("2d"),I.width!==g||I.height!==v?(I.width=g,I.height=v):R.clearRect(0,0,g,v),R.setTransform(j.scaleX,0,0,j.scaleY,j.left,j.top),R.drawImage(j._element,0,0,g,v),G=R.getImageData(0,0,g,v).data;for(var B=0;B<m;B+=4)switch(x=p[B],C=p[B+1],w=p[B+2],k=p[B+3],_=G[B],y=G[B+1],b=G[B+2],S=G[B+3],this.mode){case"multiply":p[B]=x*_/255,p[B+1]=C*y/255,p[B+2]=w*b/255,p[B+3]=k*S/255;break;case"mask":p[B+3]=S;break}},getUniformLocations:function(u,f){return{uTransformMatrix:u.getUniformLocation(f,"uTransformMatrix"),uImage:u.getUniformLocation(f,"uImage")}},sendUniformData:function(u,f){var d=this.calculateMatrix();u.uniform1i(f.uImage,1),u.uniformMatrix3fv(f.uTransformMatrix,!1,d)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),o.Image.filters.BlendImage.fromObject=function(u,f){o.Image.fromObject(u.image,function(d){var p=o.util.object.clone(u);p.image=d,f(new o.Image.filters.BlendImage(p))})}}(e),function(a){var o=a.fabric||(a.fabric={}),c=Math.pow,h=Math.floor,u=Math.sqrt,f=Math.abs,d=Math.round,p=Math.sin,m=Math.ceil,g=o.Image.filters,v=o.util.createClass;g.Resize=v(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(_,y){return{uDelta:_.getUniformLocation(y,"uDelta"),uTaps:_.getUniformLocation(y,"uTaps")}},sendUniformData:function(_,y){_.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(_){var y=this.getFilterWindow(),b=this.type+"_"+y;if(!_.programCache.hasOwnProperty(b)){var S=this.generateShader(y);_.programCache[b]=this.createProgram(_.context,S)}return _.programCache[b]},getFilterWindow:function(){var _=this.tempScale;return Math.ceil(this.lanczosLobes/_)},getTaps:function(){for(var _=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,b=this.getFilterWindow(),S=new Array(b),x=1;x<=b;x++)S[x-1]=_(x*y);return S},generateShader:function(S){for(var y=new Array(S),b=this.fragmentSourceTOP,S,x=1;x<=S;x++)y[x-1]=x+".0 * uDelta";return b+="uniform float uTaps["+S+`];
`,b+=`void main() {
`,b+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,b+=`  float sum = 1.0;
`,y.forEach(function(C,w){b+="  color += texture2D(uTexture, vTexCoord + "+C+") * uTaps["+w+`];
`,b+="  color += texture2D(uTexture, vTexCoord - "+C+") * uTaps["+w+`];
`,b+="  sum += 2.0 * uTaps["+w+`];
`}),b+=`  gl_FragColor = color / sum;
`,b+="}",b},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(_){_.webgl?(_.passes++,this.width=_.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_.destinationWidth=this.dW,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceWidth=_.destinationWidth,this.height=_.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_.destinationHeight=this.dH,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceHeight=_.destinationHeight):this.applyTo2d(_)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(_){return function(y){if(y>=_||y<=-_)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;y*=Math.PI;var b=y/_;return p(y)/y*p(b)/b}},applyTo2d:function(_){var y=_.imageData,b=this.scaleX,S=this.scaleY;this.rcpScaleX=1/b,this.rcpScaleY=1/S;var x=y.width,C=y.height,w=d(x*b),k=d(C*S),I;this.resizeType==="sliceHack"?I=this.sliceByTwo(_,x,C,w,k):this.resizeType==="hermite"?I=this.hermiteFastResize(_,x,C,w,k):this.resizeType==="bilinear"?I=this.bilinearFiltering(_,x,C,w,k):this.resizeType==="lanczos"&&(I=this.lanczosResize(_,x,C,w,k)),_.imageData=I},sliceByTwo:function(_,y,b,S,x){var C=_.imageData,w=.5,k=!1,I=!1,R=y*w,j=b*w,G=o.filterBackend.resources,B,$,V=0,W=0,M=y,P=0;for(G.sliceByTwo||(G.sliceByTwo=document.createElement("canvas")),B=G.sliceByTwo,(B.width<y*1.5||B.height<b)&&(B.width=y*1.5,B.height=b),$=B.getContext("2d"),$.clearRect(0,0,y*1.5,b),$.putImageData(C,0,0),S=h(S),x=h(x);!k||!I;)y=R,b=j,S<h(R*w)?R=h(R*w):(R=S,k=!0),x<h(j*w)?j=h(j*w):(j=x,I=!0),$.drawImage(B,V,W,y,b,M,P,R,j),V=M,W=P,P+=j;return $.getImageData(V,W,S,x)},lanczosResize:function(_,y,b,S,x){function C(A){var D,X,N,F,z,L,H,K,Z,ee,ae;for(P.x=(A+.5)*j,O.x=h(P.x),D=0;D<x;D++){for(P.y=(D+.5)*G,O.y=h(P.y),z=0,L=0,H=0,K=0,Z=0,X=O.x-V;X<=O.x+V;X++)if(!(X<0||X>=y)){ee=h(1e3*f(X-P.x)),M[ee]||(M[ee]={});for(var te=O.y-W;te<=O.y+W;te++)te<0||te>=b||(ae=h(1e3*f(te-P.y)),M[ee][ae]||(M[ee][ae]=R(u(c(ee*B,2)+c(ae*$,2))/1e3)),N=M[ee][ae],N>0&&(F=(te*y+X)*4,z+=N,L+=N*w[F],H+=N*w[F+1],K+=N*w[F+2],Z+=N*w[F+3]))}F=(D*S+A)*4,I[F]=L/z,I[F+1]=H/z,I[F+2]=K/z,I[F+3]=Z/z}return++A<S?C(A):k}var w=_.imageData.data,k=_.ctx.createImageData(S,x),I=k.data,R=this.lanczosCreate(this.lanczosLobes),j=this.rcpScaleX,G=this.rcpScaleY,B=2/this.rcpScaleX,$=2/this.rcpScaleY,V=m(j*this.lanczosLobes/2),W=m(G*this.lanczosLobes/2),M={},P={},O={};return C(0)},bilinearFiltering:function(_,y,b,S,x){var C,w,k,I,R,j,G,B,$,V,W,M,P=0,O,A=this.rcpScaleX,D=this.rcpScaleY,X=4*(y-1),N=_.imageData,F=N.data,z=_.ctx.createImageData(S,x),L=z.data;for(G=0;G<x;G++)for(B=0;B<S;B++)for(R=h(A*B),j=h(D*G),$=A*B-R,V=D*G-j,O=4*(j*y+R),W=0;W<4;W++)C=F[O+W],w=F[O+4+W],k=F[O+X+W],I=F[O+X+4+W],M=C*(1-$)*(1-V)+w*$*(1-V)+k*V*(1-$)+I*$*V,L[P++]=M;return z},hermiteFastResize:function(_,y,b,S,x){for(var C=this.rcpScaleX,w=this.rcpScaleY,k=m(C/2),I=m(w/2),R=_.imageData,j=R.data,G=_.ctx.createImageData(S,x),B=G.data,$=0;$<x;$++)for(var V=0;V<S;V++){for(var W=(V+$*S)*4,M=0,P=0,O=0,A=0,D=0,X=0,N=0,F=($+.5)*w,z=h($*w);z<($+1)*w;z++)for(var L=f(F-(z+.5))/I,H=(V+.5)*C,K=L*L,Z=h(V*C);Z<(V+1)*C;Z++){var ee=f(H-(Z+.5))/k,ae=u(K+ee*ee);ae>1&&ae<-1||(M=2*ae*ae*ae-3*ae*ae+1,M>0&&(ee=4*(Z+z*y),N+=M*j[ee+3],O+=M,j[ee+3]<255&&(M=M*j[ee+3]/250),A+=M*j[ee],D+=M*j[ee+1],X+=M*j[ee+2],P+=M))}B[W]=A/P,B[W+1]=D/P,B[W+2]=X/P,B[W+3]=N/O}return G},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),o.Image.filters.Resize.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Contrast=h(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(u){if(this.contrast!==0){var f=u.imageData,d,m,p=f.data,m=p.length,g=Math.floor(this.contrast*255),v=259*(g+255)/(255*(259-g));for(d=0;d<m;d+=4)p[d]=v*(p[d]-128)+128,p[d+1]=v*(p[d+1]-128)+128,p[d+2]=v*(p[d+2]-128)+128}},getUniformLocations:function(u,f){return{uContrast:u.getUniformLocation(f,"uContrast")}},sendUniformData:function(u,f){u.uniform1f(f.uContrast,this.contrast)}}),o.Image.filters.Contrast.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Saturation=h(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(u){if(this.saturation!==0){var f=u.imageData,d=f.data,p=d.length,m=-this.saturation,g,v;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),d[g]+=v!==d[g]?(v-d[g])*m:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*m:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*m:0}},getUniformLocations:function(u,f){return{uSaturation:u.getUniformLocation(f,"uSaturation")}},sendUniformData:function(u,f){u.uniform1f(f.uSaturation,-this.saturation)}}),o.Image.filters.Saturation.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Vibrance=h(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(u){if(this.vibrance!==0){var f=u.imageData,d=f.data,p=d.length,m=-this.vibrance,g,v,_,y;for(g=0;g<p;g+=4)v=Math.max(d[g],d[g+1],d[g+2]),_=(d[g]+d[g+1]+d[g+2])/3,y=Math.abs(v-_)*2/255*m,d[g]+=v!==d[g]?(v-d[g])*y:0,d[g+1]+=v!==d[g+1]?(v-d[g+1])*y:0,d[g+2]+=v!==d[g+2]?(v-d[g+2])*y:0}},getUniformLocations:function(u,f){return{uVibrance:u.getUniformLocation(f,"uVibrance")}},sendUniformData:function(u,f){u.uniform1f(f.uVibrance,-this.vibrance)}}),o.Image.filters.Vibrance.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Blur=h(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(u){u.webgl?(this.aspectRatio=u.sourceWidth/u.sourceHeight,u.passes++,this._setupFrameBuffer(u),this.horizontal=!0,this.applyToWebGL(u),this._swapTextures(u),this._setupFrameBuffer(u),this.horizontal=!1,this.applyToWebGL(u),this._swapTextures(u)):this.applyTo2d(u)},applyTo2d:function(u){u.imageData=this.simpleBlur(u)},simpleBlur:function(u){var f=u.filterBackend.resources,d,p,m=u.imageData.width,g=u.imageData.height;f.blurLayer1||(f.blurLayer1=o.util.createCanvasElement(),f.blurLayer2=o.util.createCanvasElement()),d=f.blurLayer1,p=f.blurLayer2,(d.width!==m||d.height!==g)&&(p.width=d.width=m,p.height=d.height=g);var v=d.getContext("2d"),_=p.getContext("2d"),y=15,b,S,x,C,w=this.blur*.06*.5;for(v.putImageData(u.imageData,0,0),_.clearRect(0,0,m,g),C=-y;C<=y;C++)b=(Math.random()-.5)/4,S=C/y,x=w*S*m+b,_.globalAlpha=1-Math.abs(S),_.drawImage(d,x,b),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);for(C=-y;C<=y;C++)b=(Math.random()-.5)/4,S=C/y,x=w*S*g+b,_.globalAlpha=1-Math.abs(S),_.drawImage(d,b,x),v.drawImage(p,0,0),_.globalAlpha=1,_.clearRect(0,0,p.width,p.height);u.ctx.drawImage(d,0,0);var k=u.ctx.getImageData(0,0,d.width,d.height);return v.globalAlpha=1,v.clearRect(0,0,d.width,d.height),k},getUniformLocations:function(u,f){return{delta:u.getUniformLocation(f,"uDelta")}},sendUniformData:function(u,f){var d=this.chooseRightDelta();u.uniform2fv(f.delta,d)},chooseRightDelta:function(){var u=1,f=[0,0],d;return this.horizontal?this.aspectRatio>1&&(u=1/this.aspectRatio):this.aspectRatio<1&&(u=this.aspectRatio),d=u*this.blur*.12,this.horizontal?f[0]=d:f[1]=d,f}}),c.Blur.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Gamma=h(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(u){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,u)},applyTo2d:function(u){var f=u.imageData,d=f.data,p=this.gamma,m=d.length,g=1/p[0],v=1/p[1],_=1/p[2],y;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),y=0,m=256;y<m;y++)this.rVals[y]=Math.pow(y/255,g)*255,this.gVals[y]=Math.pow(y/255,v)*255,this.bVals[y]=Math.pow(y/255,_)*255;for(y=0,m=d.length;y<m;y+=4)d[y]=this.rVals[d[y]],d[y+1]=this.gVals[d[y+1]],d[y+2]=this.bVals[d[y+2]]},getUniformLocations:function(u,f){return{uGamma:u.getUniformLocation(f,"uGamma")}},sendUniformData:function(u,f){u.uniform3fv(f.uGamma,this.gamma)}}),o.Image.filters.Gamma.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.Composed=h(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(u){this.callSuper("initialize",u),this.subFilters=this.subFilters.slice(0)},applyTo:function(u){u.passes+=this.subFilters.length-1,this.subFilters.forEach(function(f){f.applyTo(u)})},toObject:function(){return o.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(u){return u.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(u){return!u.isNeutralState()})}}),o.Image.filters.Composed.fromObject=function(u,f){var d=u.subFilters||[],p=d.map(function(g){return new o.Image.filters[g.type](g)}),m=new o.Image.filters.Composed({subFilters:p});return f&&f(m),m}}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.Image.filters,h=o.util.createClass;c.HueRotation=h(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var u=this.rotation*Math.PI,f=o.util.cos(u),d=o.util.sin(u),p=1/3,m=Math.sqrt(p)*d,g=1-f;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=f+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=f+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=f+p*g},isNeutralState:function(u){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,u)},applyTo:function(u){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,u)}}),o.Image.filters.HueRotation.fromObject=o.Image.filters.BaseFilter.fromObject}(e),function(a){var o=a.fabric||(a.fabric={}),c=o.util.object.clone;if(o.Text){o.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");o.Text=o.util.createClass(o.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:o.Object.prototype.stateProperties.concat(h),cacheProperties:o.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(u,f){this.styles=f?f.styles||{}:{},this.text=u,this.__skipDimension=!0,this.callSuper("initialize",f),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var u=this.path;u&&(u.segmentsInfo=o.util.getPathSegmentsInfo(u.path))},getMeasuringContext:function(){return o._measuringContext||(o._measuringContext=this.canvas&&this.canvas.contextCache||o.util.createCanvasElement().getContext("2d")),o._measuringContext},_splitText:function(){var u=this._splitTextIntoLines(this.text);return this.textLines=u.lines,this._textLines=u.graphemeLines,this._unwrappedTextLines=u._unwrappedLines,this._text=u.graphemeText,u},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var u,f,d,p,m,g,v,_=0,y=this._textLines.length;_<y;_++)if(!(this.textAlign!=="justify"&&(_===y-1||this.isEndOfWrapping(_)))&&(p=0,m=this._textLines[_],f=this.getLineWidth(_),f<this.width&&(v=this.textLines[_].match(this._reSpacesAndTabs)))){d=v.length,u=(this.width-f)/d;for(var b=0,S=m.length;b<=S;b++)g=this.__charBounds[_][b],this._reSpaceAndTab.test(m[b])?(g.width+=u,g.kernedWidth+=u,g.left+=p,p+=u):g.left+=p}},isEndOfWrapping:function(u){return u===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var u=this.callSuper("_getCacheCanvasDimensions"),f=this.fontSize;return u.width+=f*u.zoomX,u.height+=f*u.zoomY,u},_render:function(u){var f=this.path;f&&!f.isNotVisible()&&f._render(u),this._setTextStyles(u),this._renderTextLinesBackground(u),this._renderTextDecoration(u,"underline"),this._renderText(u),this._renderTextDecoration(u,"overline"),this._renderTextDecoration(u,"linethrough")},_renderText:function(u){this.paintFirst==="stroke"?(this._renderTextStroke(u),this._renderTextFill(u)):(this._renderTextFill(u),this._renderTextStroke(u))},_setTextStyles:function(u,f,d){if(u.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":u.textBaseline="middle";break;case"ascender":u.textBaseline="top";break;case"descender":u.textBaseline="bottom";break}u.font=this._getFontDeclaration(f,d)},calcTextWidth:function(){for(var u=this.getLineWidth(0),f=1,d=this._textLines.length;f<d;f++){var p=this.getLineWidth(f);p>u&&(u=p)}return u},_renderTextLine:function(u,f,d,p,m,g){this._renderChars(u,f,d,p,m,g)},_renderTextLinesBackground:function(u){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var f,d,p=u.fillStyle,m,g,v=this._getLeftOffset(),_=this._getTopOffset(),y=0,b=0,S,x,C=this.path,w,k=0,I=this._textLines.length;k<I;k++){if(f=this.getHeightOfLine(k),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",k)){_+=f;continue}m=this._textLines[k],d=this._getLineLeftOffset(k),b=0,y=0,g=this.getValueOfPropertyAt(k,0,"textBackgroundColor");for(var R=0,j=m.length;R<j;R++)S=this.__charBounds[k][R],x=this.getValueOfPropertyAt(k,R,"textBackgroundColor"),C?(u.save(),u.translate(S.renderLeft,S.renderTop),u.rotate(S.angle),u.fillStyle=x,x&&u.fillRect(-S.width/2,-f/this.lineHeight*(1-this._fontSizeFraction),S.width,f/this.lineHeight),u.restore()):x!==g?(w=v+d+y,this.direction==="rtl"&&(w=this.width-w-b),u.fillStyle=g,g&&u.fillRect(w,_,b,f/this.lineHeight),y=S.left,b=S.width,g=x):b+=S.kernedWidth;x&&!C&&(w=v+d+y,this.direction==="rtl"&&(w=this.width-w-b),u.fillStyle=x,u.fillRect(w,_,b,f/this.lineHeight)),_+=f}u.fillStyle=p,this._removeShadow(u)}},getFontCache:function(u){var f=u.fontFamily.toLowerCase();o.charWidthsCache[f]||(o.charWidthsCache[f]={});var d=o.charWidthsCache[f],p=u.fontStyle.toLowerCase()+"_"+(u.fontWeight+"").toLowerCase();return d[p]||(d[p]={}),d[p]},_measureChar:function(u,f,d,p){var m=this.getFontCache(f),g=this._getFontDeclaration(f),v=this._getFontDeclaration(p),_=d+u,y=g===v,b,S,x,C=f.fontSize/this.CACHE_FONT_SIZE,w;if(d&&m[d]!==void 0&&(x=m[d]),m[u]!==void 0&&(w=b=m[u]),y&&m[_]!==void 0&&(S=m[_],w=S-x),b===void 0||x===void 0||S===void 0){var k=this.getMeasuringContext();this._setTextStyles(k,f,!0)}return b===void 0&&(w=b=k.measureText(u).width,m[u]=b),x===void 0&&y&&d&&(x=k.measureText(d).width,m[d]=x),y&&S===void 0&&(S=k.measureText(_).width,m[_]=S,w=S-x),{width:b*C,kernedWidth:w*C}},getHeightOfChar:function(u,f){return this.getValueOfPropertyAt(u,f,"fontSize")},measureLine:function(u){var f=this._measureLine(u);return this.charSpacing!==0&&(f.width-=this._getWidthOfCharSpacing()),f.width<0&&(f.width=0),f},_measureLine:function(u){var f=0,d,p,m=this._textLines[u],g,v,_=0,y=new Array(m.length),b=0,S,x,C=this.path,w=this.pathSide==="right";for(this.__charBounds[u]=y,d=0;d<m.length;d++)p=m[d],v=this._getGraphemeBox(p,u,d,g),y[d]=v,f+=v.kernedWidth,g=p;if(y[d]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},C){switch(x=C.segmentsInfo[C.segmentsInfo.length-1].length,S=o.util.getPointOnPath(C.path,0,C.segmentsInfo),S.x+=C.pathOffset.x,S.y+=C.pathOffset.y,this.textAlign){case"left":b=w?x-f:0;break;case"center":b=(x-f)/2;break;case"right":b=w?0:x-f;break}for(b+=this.pathStartOffset*(w?-1:1),d=w?m.length-1:0;w?d>=0:d<m.length;w?d--:d++)v=y[d],b>x?b%=x:b<0&&(b+=x),this._setGraphemeOnPath(b,v,S),b+=v.kernedWidth}return{width:f,numOfSpaces:_}},_setGraphemeOnPath:function(u,f,d){var p=u+f.kernedWidth/2,m=this.path,g=o.util.getPointOnPath(m.path,p,m.segmentsInfo);f.renderLeft=g.x-d.x,f.renderTop=g.y-d.y,f.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(u,f,d,p,m){var g=this.getCompleteStyleDeclaration(f,d),v=p?this.getCompleteStyleDeclaration(f,d-1):{},_=this._measureChar(u,g,p,v),y=_.kernedWidth,b=_.width,S;this.charSpacing!==0&&(S=this._getWidthOfCharSpacing(),b+=S,y+=S);var x={width:b,left:0,height:g.fontSize,kernedWidth:y,deltaY:g.deltaY};if(d>0&&!m){var C=this.__charBounds[f][d-1];x.left=C.left+C.width+_.kernedWidth-_.width}return x},getHeightOfLine:function(u){if(this.__lineHeights[u])return this.__lineHeights[u];for(var f=this._textLines[u],d=this.getHeightOfChar(u,0),p=1,m=f.length;p<m;p++)d=Math.max(this.getHeightOfChar(u,p),d);return this.__lineHeights[u]=d*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var u,f=0,d=0,p=this._textLines.length;d<p;d++)u=this.getHeightOfLine(d),f+=d===p-1?u/this.lineHeight:u;return f},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(u,f){u.save();for(var d=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,v=this._textLines.length;g<v;g++){var _=this.getHeightOfLine(g),y=_/this.lineHeight,b=this._getLineLeftOffset(g);this._renderTextLine(f,u,this._textLines[g],p+b,m+d+y,g),d+=_}u.restore()},_renderTextFill:function(u){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(u,"fillText")},_renderTextStroke:function(u){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(u),u.save(),this._setLineDash(u,this.strokeDashArray),u.beginPath(),this._renderTextCommon(u,"strokeText"),u.closePath(),u.restore())},_renderChars:function(u,f,d,p,m,g){var v=this.getHeightOfLine(g),_=this.textAlign.indexOf("justify")!==-1,y,b,S="",x,C=0,w,k=this.path,I=!_&&this.charSpacing===0&&this.isEmptyStyles(g)&&!k,R=this.direction==="ltr",j=this.direction==="ltr"?1:-1,G,B=f.canvas.getAttribute("dir");if(f.save(),B!==this.direction&&(f.canvas.setAttribute("dir",R?"ltr":"rtl"),f.direction=R?"ltr":"rtl",f.textAlign=R?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,I){this._renderChar(u,f,g,0,d.join(""),p,m,v),f.restore();return}for(var $=0,V=d.length-1;$<=V;$++)w=$===V||this.charSpacing||k,S+=d[$],x=this.__charBounds[g][$],C===0?(p+=j*(x.kernedWidth-x.width),C+=x.width):C+=x.kernedWidth,_&&!w&&this._reSpaceAndTab.test(d[$])&&(w=!0),w||(y=y||this.getCompleteStyleDeclaration(g,$),b=this.getCompleteStyleDeclaration(g,$+1),w=o.util.hasStyleChanged(y,b,!1)),w&&(k?(f.save(),f.translate(x.renderLeft,x.renderTop),f.rotate(x.angle),this._renderChar(u,f,g,$,S,-C/2,0,v),f.restore()):(G=p,this._renderChar(u,f,g,$,S,G,m,v)),S="",y=b,p+=j*C,C=0);f.restore()},_applyPatternGradientTransformText:function(u){var f=o.util.createCanvasElement(),d,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return f.width=p,f.height=m,d=f.getContext("2d"),d.beginPath(),d.moveTo(0,0),d.lineTo(p,0),d.lineTo(p,m),d.lineTo(0,m),d.closePath(),d.translate(p/2,m/2),d.fillStyle=u.toLive(d),this._applyPatternGradientTransform(d,u),d.fill(),d.createPattern(f,"no-repeat")},handleFiller:function(u,f,d){var p,m;return d.toLive?d.gradientUnits==="percentage"||d.gradientTransform||d.patternTransform?(p=-this.width/2,m=-this.height/2,u.translate(p,m),u[f]=this._applyPatternGradientTransformText(d),{offsetX:p,offsetY:m}):(u[f]=d.toLive(u,this),this._applyPatternGradientTransform(u,d)):(u[f]=d,{offsetX:0,offsetY:0})},_setStrokeStyles:function(u,f){return u.lineWidth=f.strokeWidth,u.lineCap=this.strokeLineCap,u.lineDashOffset=this.strokeDashOffset,u.lineJoin=this.strokeLineJoin,u.miterLimit=this.strokeMiterLimit,this.handleFiller(u,"strokeStyle",f.stroke)},_setFillStyles:function(u,f){return this.handleFiller(u,"fillStyle",f.fill)},_renderChar:function(u,f,d,p,m,g,v){var _=this._getStyleDeclaration(d,p),y=this.getCompleteStyleDeclaration(d,p),b=u==="fillText"&&y.fill,S=u==="strokeText"&&y.stroke&&y.strokeWidth,x,C;!S&&!b||(f.save(),b&&(x=this._setFillStyles(f,y)),S&&(C=this._setStrokeStyles(f,y)),f.font=this._getFontDeclaration(y),_&&_.textBackgroundColor&&this._removeShadow(f),_&&_.deltaY&&(v+=_.deltaY),b&&f.fillText(m,g-x.offsetX,v-x.offsetY),S&&f.strokeText(m,g-C.offsetX,v-C.offsetY),f.restore())},setSuperscript:function(u,f){return this._setScript(u,f,this.superscript)},setSubscript:function(u,f){return this._setScript(u,f,this.subscript)},_setScript:function(u,f,d){var p=this.get2DCursorLocation(u,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:m*d.size,deltaY:g+m*d.baseline};return this.setSelectionStyles(v,u,f),this},_getLineLeftOffset:function(u){var f=this.getLineWidth(u),d=this.width-f,p=this.textAlign,m=this.direction,v,g=0,v=this.isEndOfWrapping(u);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(g=d/2),p==="right"&&(g=d),p==="justify-center"&&(g=d/2),p==="justify-right"&&(g=d),m==="rtl"&&(g-=d),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var u=this._forceClearCache;return u||(u=this.hasStateChanged("_dimensionAffectingProps")),u&&(this.dirty=!0,this._forceClearCache=!1),u},getLineWidth:function(u){if(this.__lineWidths[u]!==void 0)return this.__lineWidths[u];var f=this.measureLine(u),d=f.width;return this.__lineWidths[u]=d,d},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(u,f,d){var p=this._getStyleDeclaration(u,f);return p&&typeof p[d]<"u"?p[d]:this[d]},_renderTextDecoration:function(u,f){if(!(!this[f]&&!this.styleHas(f))){for(var d,p,m,g,v,_,y,b,S=this._getLeftOffset(),x=this._getTopOffset(),C,w,k,I,R,j,G,B,$=this.path,V=this._getWidthOfCharSpacing(),W=this.offsets[f],M=0,P=this._textLines.length;M<P;M++){if(d=this.getHeightOfLine(M),!this[f]&&!this.styleHas(f,M)){x+=d;continue}y=this._textLines[M],j=d/this.lineHeight,g=this._getLineLeftOffset(M),w=0,k=0,b=this.getValueOfPropertyAt(M,0,f),B=this.getValueOfPropertyAt(M,0,"fill"),C=x+j*(1-this._fontSizeFraction),p=this.getHeightOfChar(M,0),v=this.getValueOfPropertyAt(M,0,"deltaY");for(var O=0,A=y.length;O<A;O++)if(I=this.__charBounds[M][O],R=this.getValueOfPropertyAt(M,O,f),G=this.getValueOfPropertyAt(M,O,"fill"),m=this.getHeightOfChar(M,O),_=this.getValueOfPropertyAt(M,O,"deltaY"),$&&R&&G)u.save(),u.fillStyle=B,u.translate(I.renderLeft,I.renderTop),u.rotate(I.angle),u.fillRect(-I.kernedWidth/2,W*m+_,I.kernedWidth,this.fontSize/15),u.restore();else if((R!==b||G!==B||m!==p||_!==v)&&k>0){var D=S+g+w;this.direction==="rtl"&&(D=this.width-D-k),b&&B&&(u.fillStyle=B,u.fillRect(D,C+W*p+v,k,this.fontSize/15)),w=I.left,k=I.width,b=R,B=G,p=m,v=_}else k+=I.kernedWidth;var D=S+g+w;this.direction==="rtl"&&(D=this.width-D-k),u.fillStyle=G,R&&G&&u.fillRect(D,C+W*p+v,k-V,this.fontSize/15),x+=d}this._removeShadow(u)}},_getFontDeclaration:function(u,f){var d=u||this,p=this.fontFamily,m=o.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?d.fontFamily:'"'+d.fontFamily+'"';return[o.isLikelyNode?d.fontWeight:d.fontStyle,o.isLikelyNode?d.fontStyle:d.fontWeight,f?this.CACHE_FONT_SIZE+"px":d.fontSize+"px",g].join(" ")},render:function(u){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",u)))},_splitTextIntoLines:function(u){for(var f=u.split(this._reNewline),d=new Array(f.length),p=[`
`],m=[],g=0;g<f.length;g++)d[g]=o.util.string.graphemeSplit(f[g]),m=m.concat(d[g],p);return m.pop(),{_unwrappedLines:d,lines:f,graphemeText:m,graphemeLines:d}},toObject:function(u){var f=h.concat(u),d=this.callSuper("toObject",f);return d.styles=o.util.stylesToArray(this.styles,this.text),d.path&&(d.path=this.path.toObject()),d},set:function(u,f){this.callSuper("set",u,f);var d=!1,p=!1;if(typeof u=="object")for(var m in u)m==="path"&&this.setPathInfo(),d=d||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else d=this._dimensionAffectingProps.indexOf(u)!==-1,p=u==="path";return p&&this.setPathInfo(),d&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),o.Text.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),o.Text.DEFAULT_SVG_FONT_SIZE=16,o.Text.fromElement=function(u,f,d){if(!u)return f(null);var p=o.parseAttributes(u,o.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(d=o.util.object.extend(d?c(d):{},p),d.top=d.top||0,d.left=d.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(d.underline=!0),g.indexOf("overline")!==-1&&(d.overline=!0),g.indexOf("line-through")!==-1&&(d.linethrough=!0),delete d.textDecoration}"dx"in p&&(d.left+=p.dx),"dy"in p&&(d.top+=p.dy),"fontSize"in d||(d.fontSize=o.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in u?v=u.textContent:"firstChild"in u&&u.firstChild!==null&&"data"in u.firstChild&&u.firstChild.data!==null&&(v=u.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var _=d.strokeWidth;d.strokeWidth=0;var y=new o.Text(v,d),b=y.getScaledHeight()/y.height,S=(y.height+y.strokeWidth)*y.lineHeight-y.height,x=S*b,C=y.getScaledHeight()+x,w=0;m==="center"&&(w=y.getScaledWidth()/2),m==="right"&&(w=y.getScaledWidth()),y.set({left:y.left-w,top:y.top-(C-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:typeof _<"u"?_:1}),f(y)},o.Text.fromObject=function(u,f){var d=c(u),p=u.path;return delete d.path,o.Object._fromObject("Text",d,function(m){m.styles=o.util.stylesFromArray(u.styles,u.text),p?o.Object._fromObject("Path",p,function(g){m.set("path",g),f(m)},"path"):f(m)},"text")},o.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],o.util.createAccessors&&o.util.createAccessors(o.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var o=typeof a>"u"?this.styles:{line:this.styles[a]};for(var c in o)for(var h in o[c])for(var u in o[c][h])return!1;return!0},styleHas:function(a,o){if(!this.styles||!a||a===""||typeof o<"u"&&!this.styles[o])return!1;var c=typeof o>"u"?this.styles:{0:this.styles[o]};for(var h in c)for(var u in c[h])if(typeof c[h][u][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var o=this.styles,c=0,h,u,f=!0,d=0,p;for(var m in o){h=0;for(var g in o[m]){var p=o[m][g],v=p.hasOwnProperty(a);c++,v?(u?p[a]!==u&&(f=!1):u=p[a],p[a]===this[a]&&delete p[a]):f=!1,Object.keys(p).length!==0?h++:delete o[m][g]}h===0&&delete o[m]}for(var _=0;_<this._textLines.length;_++)d+=this._textLines[_].length;f&&c===d&&(this[a]=u,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var o=this.styles,c,h,u;for(h in o){c=o[h];for(u in c)delete c[u][a],Object.keys(c[u]).length===0&&delete c[u];Object.keys(c).length===0&&delete o[h]}}},_extendStyles:function(a,o){var c=this.get2DCursorLocation(a);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),o)},get2DCursorLocation:function(a,o){typeof a>"u"&&(a=this.selectionStart);for(var c=o?this._unwrappedTextLines:this._textLines,h=c.length,u=0;u<h;u++){if(a<=c[u].length)return{lineIndex:u,charIndex:a};a-=c[u].length+this.missingNewlineOffset(u)}return{lineIndex:u-1,charIndex:c[u-1].length<a?c[u-1].length:a}},getSelectionStyles:function(a,o,c){typeof a>"u"&&(a=this.selectionStart||0),typeof o>"u"&&(o=this.selectionEnd||a);for(var h=[],u=a;u<o;u++)h.push(this.getStyleAtPosition(u,c));return h},getStyleAtPosition:function(a,o){var c=this.get2DCursorLocation(a),h=o?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return h||{}},setSelectionStyles:function(a,o,c){typeof o>"u"&&(o=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||o);for(var h=o;h<c;h++)this._extendStyles(h,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,o){var c=this.styles&&this.styles[a];return c?c[o]:null},getCompleteStyleDeclaration:function(a,o){for(var c=this._getStyleDeclaration(a,o)||{},h={},u,f=0;f<this._styleProperties.length;f++)u=this._styleProperties[f],h[u]=typeof c[u]>"u"?this[u]:c[u];return h},_setStyleDeclaration:function(a,o,c){this.styles[a][o]=c},_deleteStyleDeclaration:function(a,o){delete this.styles[a][o]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(o){o.textDecoration&&(o.textDecoration.indexOf("underline")>-1&&(o.underline=!0),o.textDecoration.indexOf("line-through")>-1&&(o.linethrough=!0),o.textDecoration.indexOf("overline")>-1&&(o.overline=!0),delete o.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(o,c){this.callSuper("initialize",o,c),this.initBehavior()},setSelectionStart:function(o){o=Math.max(o,0),this._updateAndFire("selectionStart",o)},setSelectionEnd:function(o){o=Math.min(o,this.text.length),this._updateAndFire("selectionEnd",o)},_updateAndFire:function(o,c){this[o]!==c&&(this._fireSelectionChanged(),this[o]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(o){this.clearContextTop(),this.callSuper("render",o),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(o){this.callSuper("_render",o)},clearContextTop:function(o){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,h=this.canvas.viewportTransform;c.save(),c.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(c),this._clearTextArea(c),o||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var o=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(o,c):this.renderSelection(o,c),c.restore()}},_clearTextArea:function(o){var c=this.width+4,h=this.height+4;o.clearRect(-c/2,-h/2,c,h)},_getCursorBoundaries:function(o){typeof o>"u"&&(o=this.selectionStart);var c=this._getLeftOffset(),h=this._getTopOffset(),u=this._getCursorBoundariesOffsets(o);return{left:c,top:h,leftOffset:u.left,topOffset:u.top}},_getCursorBoundariesOffsets:function(o){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,h,u,f=0,d=0,p,m=this.get2DCursorLocation(o);u=m.charIndex,h=m.lineIndex;for(var g=0;g<h;g++)f+=this.getHeightOfLine(g);c=this._getLineLeftOffset(h);var v=this.__charBounds[h][u];return v&&(d=v.left),this.charSpacing!==0&&u===this._textLines[h].length&&(d-=this._getWidthOfCharSpacing()),p={top:f,left:c+(d>0?d:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(o,c){var h=this.get2DCursorLocation(),u=h.lineIndex,f=h.charIndex>0?h.charIndex-1:0,d=this.getValueOfPropertyAt(u,f,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=o.topOffset,v=this.getValueOfPropertyAt(u,f,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(u)/this.lineHeight-d*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(o,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(u,f,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(o.left+o.leftOffset-m/2,g+o.top+v,m,d)},renderSelection:function(o,c){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,u=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,f=this.textAlign.indexOf("justify")!==-1,d=this.get2DCursorLocation(h),p=this.get2DCursorLocation(u),m=d.lineIndex,g=p.lineIndex,v=d.charIndex<0?0:d.charIndex,_=p.charIndex<0?0:p.charIndex,y=m;y<=g;y++){var b=this._getLineLeftOffset(y)||0,S=this.getHeightOfLine(y),x=0,C=0,w=0;if(y===m&&(C=this.__charBounds[m][v].left),y>=m&&y<g)w=f&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===g)if(_===0)w=this.__charBounds[g][_].left;else{var k=this._getWidthOfCharSpacing();w=this.__charBounds[g][_-1].left+this.__charBounds[g][_-1].width-k}x=S,(this.lineHeight<1||y===g&&this.lineHeight>1)&&(S/=this.lineHeight);var I=o.left+b+C,R=w-C,j=S,G=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",j=1,G=S):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(I=this.width-I-R),c.fillRect(I,o.top+o.topOffset+G,R,j),o.topOffset+=x}},getCurrentCharFontSize:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fontSize")},getCurrentCharColor:function(){var o=this._getCurrentCharIndex();return this.getValueOfPropertyAt(o.l,o.c,"fill")},_getCurrentCharIndex:function(){var o=this.get2DCursorLocation(this.selectionStart,!0),c=o.charIndex>0?o.charIndex-1:0;return{l:o.lineIndex,c}}}),t.IText.fromObject=function(o,c){var h=t.util.stylesFromArray(o.styles,o.text),u=Object.assign({},o,{styles:h});if(a(u),u.styles)for(var f in u.styles)for(var d in u.styles[f])a(u.styles[f][d]);t.Object._fromObject("IText",u,c,"text")}}(),function(){var a=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var o=this;this.on("added",function(){var c=o.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,o._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(o))})},initRemovedHandler:function(){var o=this;this.on("removed",function(){var c=o.canvas;c&&(c._iTextInstances=c._iTextInstances||[],t.util.removeFromArray(c._iTextInstances,o),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,o._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(o){o._mouseUpITextHandler=function(){o._iTextInstances&&o._iTextInstances.forEach(function(c){c.__isMousedown=!1})},o.on("mouse:up",o._mouseUpITextHandler)},_removeCanvasHandlers:function(o){o.off("mouse:up",o._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(o,c,h,u){var f;return f={isAborted:!1,abort:function(){this.isAborted=!0}},o.animate("_currentCursorOpacity",c,{duration:h,onComplete:function(){f.isAborted||o[u]()},onChange:function(){o.canvas&&o.selectionStart===o.selectionEnd&&o.renderCursorOrSelection()},abort:function(){return f.isAborted}}),f},_onTickComplete:function(){var o=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){o._currentTickCompleteState=o._animateCursor(o,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(o){var c=this,h=o?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},h)},abortCursorAnimation:function(){var o=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,o&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(o){var c=0,h=o-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h--;for(;/\S/.test(this._text[h])&&h>-1;)c++,h--;return o-c},findWordBoundaryRight:function(o){var c=0,h=o;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)c++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)c++,h++;return o+c},findLineBoundaryLeft:function(o){for(var c=0,h=o-1;!/\n/.test(this._text[h])&&h>-1;)c++,h--;return o-c},findLineBoundaryRight:function(o){for(var c=0,h=o;!/\n/.test(this._text[h])&&h<this._text.length;)c++,h++;return o+c},searchWordBoundary:function(o,c){for(var h=this._text,u=this._reSpace.test(h[o])?o-1:o,f=h[u],d=t.reNonWord;!d.test(f)&&u>0&&u<h.length;)u+=c,f=h[u];return d.test(f)&&(u+=c===1?0:1),u},selectWord:function(o){o=o||this.selectionStart;var c=this.searchWordBoundary(o,-1),h=this.searchWordBoundary(o,1);this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(o){o=o||this.selectionStart;var c=this.findLineBoundaryLeft(o),h=this.findLineBoundaryRight(o);return this.selectionStart=c,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(o){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(o),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(o){o._iTextInstances&&o._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(o){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(o.e),h=this.selectionStart,u=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||h===u)&&(h===c||u===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==u)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(o,c,h){var u=h.slice(0,o),f=t.util.string.graphemeSplit(u).length;if(o===c)return{selectionStart:f,selectionEnd:f};var d=h.slice(o,c),p=t.util.string.graphemeSplit(d).length;return{selectionStart:f,selectionEnd:f+p}},fromGraphemeToStringSelection:function(o,c,h){var u=h.slice(0,o),f=u.join("").length;if(o===c)return{selectionStart:f,selectionEnd:f};var d=h.slice(o,c),p=d.join("").length;return{selectionStart:f,selectionEnd:f+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var o=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=o.selectionStart,this.hiddenTextarea.selectionEnd=o.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var o=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=o.selectionEnd,this.inCompositionMode||(this.selectionStart=o.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var o=this._calcTextareaPosition();this.hiddenTextarea.style.left=o.left,this.hiddenTextarea.style.top=o.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var o=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(o),h=this.get2DCursorLocation(o),u=h.lineIndex,f=h.charIndex,d=this.getValueOfPropertyAt(u,f,"fontSize")*this.lineHeight,p=c.leftOffset,m=this.calcTransformMatrix(),g={x:c.left+p,y:c.top+c.topOffset+d},v=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,y=_.width/v,b=_.height/v,S=y-d,x=b-d,C=_.clientWidth/y,w=_.clientHeight/b;return g=t.util.transformPoint(g,m),g=t.util.transformPoint(g,this.canvas.viewportTransform),g.x*=C,g.y*=w,g.x<0&&(g.x=0),g.x>S&&(g.x=S),g.y<0&&(g.y=0),g.y>x&&(g.y=x),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:d+"px",charHeight:d}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var o=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),o&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),o&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var o in this.styles)this._textLines[o]||delete this.styles[o]},removeStyleFromTo:function(o,c){var h=this.get2DCursorLocation(o,!0),u=this.get2DCursorLocation(c,!0),f=h.lineIndex,d=h.charIndex,p=u.lineIndex,m=u.charIndex,g,v;if(f!==p){if(this.styles[f])for(g=d;g<this._unwrappedTextLines[f].length;g++)delete this.styles[f][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)v=this.styles[p][g],v&&(this.styles[f]||(this.styles[f]={}),this.styles[f][d+g-m]=v);for(g=f+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,f-p)}else if(this.styles[f]){v=this.styles[f];var _=m-d,y,b;for(g=d;g<m;g++)delete v[g];for(b in this.styles[f])y=parseInt(b,10),y>=m&&(v[y-_]=v[b],delete v[b])}},shiftLineStyles:function(o,c){var h=a(this.styles);for(var u in this.styles){var f=parseInt(u,10);f>o&&(this.styles[f+c]=h[f],h[f-c]||delete this.styles[f])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(o,c,h,u){var f,d={},p=!1,m=this._unwrappedTextLines[o].length===c;h||(h=1),this.shiftLineStyles(o,h),this.styles[o]&&(f=this.styles[o][c===0?c:c-1]);for(var g in this.styles[o]){var v=parseInt(g,10);v>=c&&(p=!0,d[v-c]=this.styles[o][g],m&&c===0||delete this.styles[o][g])}var _=!1;for(p&&!m&&(this.styles[o+h]=d,_=!0),_&&h--;h>0;)u&&u[h-1]?this.styles[o+h]={0:a(u[h-1])}:f?this.styles[o+h]={0:a(f)}:delete this.styles[o+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(o,c,h,u){this.styles||(this.styles={});var f=this.styles[o],d=f?a(f):{};h||(h=1);for(var p in d){var m=parseInt(p,10);m>=c&&(f[m+h]=d[m],d[m-h]||delete f[m])}if(this._forceClearCache=!0,u){for(;h--;)Object.keys(u[h]).length&&(this.styles[o]||(this.styles[o]={}),this.styles[o][c+h]=a(u[h]));return}if(f)for(var g=f[c?c-1:1];g&&h--;)this.styles[o][c+h]=a(g)},insertNewStyleBlock:function(o,c,h){for(var u=this.get2DCursorLocation(c,!0),f=[0],d=0,p=0;p<o.length;p++)o[p]===`
`?(d++,f[d]=0):f[d]++;f[0]>0&&(this.insertCharStyleObject(u.lineIndex,u.charIndex,f[0],h),h=h&&h.slice(f[0]+1)),d&&this.insertNewlineStyleObject(u.lineIndex,u.charIndex+f[0],d);for(var p=1;p<d;p++)f[p]>0?this.insertCharStyleObject(u.lineIndex+p,0,f[p],h):h&&this.styles[u.lineIndex+p]&&h[0]&&(this.styles[u.lineIndex+p][0]=h[0]),h=h&&h.slice(f[p]+1);f[p]>0&&this.insertCharStyleObject(u.lineIndex+p,0,f[p],h)},setSelectionStartEndWithShift:function(o,c,h){h<=o?(c===o?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=o),this.selectionStart=h):h>o&&h<c?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(c===o?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=h)},setSelectionInBoundaries:function(){var o=this.text.length;this.selectionStart>o?this.selectionStart=o:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>o?this.selectionEnd=o:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(this.canvas){this.__newClickTime=+new Date;var o=a.pointer;this.isTripleClick(o)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=o,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var o=this.canvas._activeObject;if(o&&o!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var o=this.getSelectionStartFromPointer(a),c=this.selectionStart,h=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(c,h,o):(this.selectionStart=o,this.selectionEnd=o),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var o=this.getLocalPointer(a),c=0,h=0,u=0,f=0,d=0,p,m,g=0,v=this._textLines.length;g<v&&u<=o.y;g++)u+=this.getHeightOfLine(g)*this.scaleY,d=g,g>0&&(f+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(d),h=p*this.scaleX,m=this._textLines[d],this.direction==="rtl"&&(o.x=this.width*this.scaleX-o.x+h);for(var _=0,y=m.length;_<y&&(c=h,h+=this.__charBounds[d][_].kernedWidth*this.scaleX,h<=o.x);_++)f++;return this._getNewSelectionStartFromOffset(o,c,h,f,y)},_getNewSelectionStartFromOffset:function(a,o,c,h,u){var f=a.x-o,d=c-a.x,p=d>f||d<0?0:1,m=h+p;return this.flipX&&(m=u-m),m>this._text.length&&(m=this._text.length),m}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){var o=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in o)this[o[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var o=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,u=c.length,f,d,p=u-h,m=this.selectionStart,g=this.selectionEnd,v=m!==g,_,y,b;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var S=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),x=m>S.selectionStart;v?(f=this._text.slice(m,g),p+=g-m):u<h&&(x?f=this._text.slice(g+p,g):f=this._text.slice(m,m-p)),d=c.slice(S.selectionEnd-p,S.selectionEnd),f&&f.length&&(d.length&&(_=this.getSelectionStyles(m,m+1,!1),_=d.map(function(){return _[0]})),v?(y=m,b=g):x?(y=g-f.length,b=g):(y=g,b=g+f.length),this.removeStyleFromTo(y,b)),d.length&&(o&&d.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(_=t.copiedTextStyle),this.insertNewStyleBlock(d,m,_)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(a,o){var c=this._getLineLeftOffset(a),h;return o>0&&(h=this.__charBounds[a][o-1],c+=h.left+h.width),c},getDownCursorOffset:function(a,o){var c=this._getSelectionForOffset(a,o),h=this.get2DCursorLocation(c),u=h.lineIndex;if(u===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-c;var f=h.charIndex,d=this._getWidthBeforeCursor(u,f),p=this._getIndexOnLine(u+1,d),m=this._textLines[u].slice(f);return m.length+p+1+this.missingNewlineOffset(u)},_getSelectionForOffset:function(a,o){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&o?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,o){var c=this._getSelectionForOffset(a,o),h=this.get2DCursorLocation(c),u=h.lineIndex;if(u===0||a.metaKey||a.keyCode===33)return-c;var f=h.charIndex,d=this._getWidthBeforeCursor(u,f),p=this._getIndexOnLine(u-1,d),m=this._textLines[u].slice(0,f),g=this.missingNewlineOffset(u-1);return-this._textLines[u-1].length+p-m.length+(1-g)},_getIndexOnLine:function(a,o){for(var c=this._textLines[a],h=this._getLineLeftOffset(a),u=h,f=0,d,p,m=0,g=c.length;m<g;m++)if(d=this.__charBounds[a][m].width,u+=d,u>o){p=!0;var v=u-d,_=u,y=Math.abs(v-o),b=Math.abs(_-o);f=b<y?m:m-1;break}return p||(f=c.length-1),f},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,o){var c="get"+a+"CursorOffset",h=this[c](o,this._selectionDirection==="right");o.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var o=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,o),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,o,c){var h;if(a.altKey)h=this["findWordBoundary"+c](this[o]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)h=this["findLineBoundary"+c](this[o]);else return this[o]+=c==="Left"?-1:1,!0;if(typeof h<"u"&&this[o]!==h)return this[o]=h,!0},_moveLeft:function(a,o){return this._move(a,o,"Left")},_moveRight:function(a,o){return this._move(a,o,"Right")},moveCursorLeftWithoutShift:function(a){var o=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(o=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,o},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,o){var c="moveCursor"+a+"With";this._currentCursorOpacity=1,o.shiftKey?c+="Shift":c+="outShift",this[c](o)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var o=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(o=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,o},removeChars:function(a,o){typeof o>"u"&&(o=a+1),this.removeStyleFromTo(a,o),this._text.splice(a,o-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,o,c,h){typeof h>"u"&&(h=c),h>c&&this.removeStyleFromTo(c,h);var u=t.util.string.graphemeSplit(a);this.insertNewStyleBlock(u,c,o),this._text=[].concat(this._text.slice(0,c),u,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=t.util.toFixed,o=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var h=!0,u=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",u?'text-decoration="'+u+'" ':"",'style="',this.getSvgStyles(h),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,h){var u=[],f=[],d=c,p;this._setSVGBg(f);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(f,m,h+p,d),this._setSVGTextLineText(u,m,h+p,d),d+=this.getHeightOfLine(m);return{textSpans:u,textBgRects:f}},_createTextCharSpan:function(c,h,u,f){var d=c!==c.trim()||c.match(o),p=this.getSvgSpanStyles(h,d),m=p?'style="'+p+'"':"",g=h.deltaY,v="",_=t.Object.NUM_FRACTION_DIGITS;return g&&(v=' dy="'+a(g,_)+'" '),['<tspan x="',a(u,_),'" y="',a(f,_),'" ',v,m,">",t.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,h,u,f){var d=this.getHeightOfLine(h),p=this.textAlign.indexOf("justify")!==-1,m,g,v="",_,y,b=0,S=this._textLines[h],x;f+=d*(1-this._fontSizeFraction)/this.lineHeight;for(var C=0,w=S.length-1;C<=w;C++)x=C===w||this.charSpacing,v+=S[C],_=this.__charBounds[h][C],b===0?(u+=_.kernedWidth-_.width,b+=_.width):b+=_.kernedWidth,p&&!x&&this._reSpaceAndTab.test(S[C])&&(x=!0),x||(m=m||this.getCompleteStyleDeclaration(h,C),g=this.getCompleteStyleDeclaration(h,C+1),x=t.util.hasStyleChanged(m,g,!0)),x&&(y=this._getStyleDeclaration(h,C)||{},c.push(this._createTextCharSpan(v,y,u,f)),v="",m=g,u+=b,b=0)},_pushTextBgRect:function(c,h,u,f,d,p){var m=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(h),' x="',a(u,m),'" y="',a(f,m),'" width="',a(d,m),'" height="',a(p,m),`"></rect>
`)},_setSVGTextLineBg:function(c,h,u,f){for(var d=this._textLines[h],p=this.getHeightOfLine(h)/this.lineHeight,m=0,g=0,v,_,y=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),b=0,S=d.length;b<S;b++)v=this.__charBounds[h][b],_=this.getValueOfPropertyAt(h,b,"textBackgroundColor"),_!==y?(y&&this._pushTextBgRect(c,y,u+g,f,m,p),g=v.left,m=v.width,y=_):m+=v.kernedWidth;_&&this._pushTextBgRect(c,_,u+g,f,m,p)},_getFillAttributes:function(c){var h=c&&typeof c=="string"?new t.Color(c):"";return!h||!h.getSource()||h.getAlpha()===1?'fill="'+c+'"':'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var h=0,u=0,f=0;f<c;f++)h+=this.getHeightOfLine(f);return u=this.getHeightOfLine(f),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*u/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var h=t.Object.prototype.getSvgStyles.call(this,c);return h+" white-space: pre;"}})}(),function(a){var o=a.fabric||(a.fabric={});o.Textbox=o.util.createClass(o.IText,o.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:o.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var h=0,u=0,f=0,d={},p=0;p<c.graphemeLines.length;p++)c.graphemeText[f]===`
`&&p>0?(u=0,f++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[f])&&p>0&&(u++,f++),d[p]={line:h,offset:u},f+=c.graphemeLines[p].length,u+=c.graphemeLines[p].length;return d},styleHas:function(c,h){if(this._styleMap&&!this.isWrapping){var u=this._styleMap[h];u&&(h=u.line)}return o.Text.prototype.styleHas.call(this,c,h)},isEmptyStyles:function(c){if(!this.styles)return!0;var h=0,u=c+1,f,d,p=!1,m=this._styleMap[c],g=this._styleMap[c+1];m&&(c=m.line,h=m.offset),g&&(u=g.line,p=u===c,f=g.offset),d=typeof c>"u"?this.styles:{line:this.styles[c]};for(var v in d)for(var _ in d[v])if(_>=h&&(!p||_<f))for(var y in d[v][_])return!1;return!0},_getStyleDeclaration:function(c,h){if(this._styleMap&&!this.isWrapping){var u=this._styleMap[c];if(!u)return null;c=u.line,h=u.offset+h}return this.callSuper("_getStyleDeclaration",c,h)},_setStyleDeclaration:function(c,h,u){var f=this._styleMap[c];c=f.line,h=f.offset+h,this.styles[c][h]=u},_deleteStyleDeclaration:function(c,h){var u=this._styleMap[c];c=u.line,h=u.offset+h,delete this.styles[c][h]},_getLineStyle:function(c){var h=this._styleMap[c];return!!this.styles[h.line]},_setLineStyle:function(c){var h=this._styleMap[c];this.styles[h.line]={}},_wrapText:function(c,h){var u=[],f;for(this.isWrapping=!0,f=0;f<c.length;f++)u=u.concat(this._wrapLine(c[f],f,h));return this.isWrapping=!1,u},_measureWord:function(c,h,u){var f=0,d,p=!0;u=u||0;for(var m=0,g=c.length;m<g;m++){var v=this._getGraphemeBox(c[m],h,m+u,d,p);f+=v.kernedWidth,d=c[m]}return f},_wrapLine:function(c,h,u,I){var d=0,p=this.splitByGrapheme,m=[],g=[],v=p?o.util.string.graphemeSplit(c):c.split(this._wordJoiners),_="",y=0,b=p?"":" ",S=0,x=0,C=0,w=!0,k=this._getWidthOfCharSpacing(),I=I||0;v.length===0&&v.push([]),u-=I;for(var R=0;R<v.length;R++)_=p?v[R]:o.util.string.graphemeSplit(v[R]),S=this._measureWord(_,h,y),y+=_.length,d+=x+S-k,d>u&&!w?(m.push(g),g=[],d=S,w=!0):d+=k,!w&&!p&&g.push(b),g=g.concat(_),x=p?0:this._measureWord([b],h,y),y++,w=!1,S>C&&(C=S);return R&&m.push(g),C+I>this.dynamicMinWidth&&(this.dynamicMinWidth=C-k+I),m},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var h=o.Text.prototype._splitTextIntoLines.call(this,c),u=this._wrapText(h.lines,this.width),f=new Array(u.length),d=0;d<u.length;d++)f[d]=u[d].join("");return h.lines=f,h.graphemeLines=u,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var h in this._styleMap)this._textLines[h]&&(c[this._styleMap[h].line]=1);for(var h in this.styles)c[h]||delete this.styles[h]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),o.Textbox.fromObject=function(c,h){var u=o.util.stylesFromArray(c.styles,c.text),f=Object.assign({},c,{styles:u});return o.Object._fromObject("Textbox",f,h,"text")}}(e),function(){var a=t.controlsUtils,o=a.scaleSkewCursorStyleHandler,c=a.scaleCursorStyleHandler,h=a.scalingEqually,u=a.scalingYOrSkewingX,f=a.scalingXOrSkewingY,d=a.scaleOrSkewActionName,p=t.Object.prototype.controls;if(p.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:o,actionHandler:f,getActionName:d}),p.mr=new t.Control({x:.5,y:0,cursorStyleHandler:o,actionHandler:f,getActionName:d}),p.mb=new t.Control({x:0,y:.5,cursorStyleHandler:o,actionHandler:u,getActionName:d}),p.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:o,actionHandler:u,getActionName:d}),p.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),p.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:h}),p.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:h}),p.br=new t.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:h}),p.mtr=new t.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var m=t.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new t.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:o,actionName:"resizing"}),m.ml=new t.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:o,actionName:"resizing"})}}()})(Ye);const m5e="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let v5e=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=m5e[n[e]&63];return t};const y5e=Ye.fabric.Object.prototype.initialize;Ye.fabric.Object.prototype.initialize=function(...e){var t;return y5e.apply(this,e),this.id=((t=e[0])==null?void 0:t.id)||v5e(),this};const _5e=Ye.fabric.Object.prototype.toObject;Ye.fabric.Object.prototype.toObject=function(e=[]){return _5e.call(this,[...e,"id"])};const K_=zN(()=>({scale:1,isReady:!1,selectedObjects:[],activePageId:null}));function PV(){const e=K_.getState().activePageId;return Ee==null?void 0:Ee.getObjects().find(t=>t.id===e)}function ID(e){K_.setState({activePageId:e})}function b5e(){return K_.getState().selectedObjects}let ZS=!1;function $6e(){ZS||(ZS=!0,ame(()=>{K_.setState({selectedObjects:b5e()}),ZS=!1}))}const Bm=new Map;function S5e(e){const t=Bm.get(e)||0;return Bm.set(e,t+1),()=>{(Bm.get(e)||1)===1&&Bm.delete(e)}}const x5e=Ye.fabric.Object.prototype.initialize;Ye.fabric.Object.prototype.initialize=function(...e){var n;x5e.apply(this,e);const t=e[0];return this.pageId=(t==null?void 0:t.pageId)||((n=PV())==null?void 0:n.id),this};const w5e=Ye.fabric.Object.prototype.toObject;Ye.fabric.Object.prototype.toObject=function(e=[]){return w5e.call(this,[...e,"pageId"])};const IV=class OV extends Ye.fabric.Textbox{constructor(t,n){return super(t,n),this.originX=n.originX||"center",this.originY=n.originY||"center",this.type=OV.type,this.transformation=n.transformation,this}render(t){if(this.transformation)return null;super.render(t)}toObject(t=[]){return super.toObject([...t,"transformation"])}};IV.type="StudioTextbox";let C5e=IV;const OD=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return{resolve:e,reject:t,value:n}},T5e=(e,t)=>{var o;const n=e.name??`batcher:${Math.random().toString(16).slice(2)})`,r=e.scheduler??kV(10),i=(o=globalThis.__BATSHIT_DEVTOOLS__)==null?void 0:o.for(n);let s=t??{seq:0,batch:new Set,currentRequest:OD(),timer:void 0,start:null,latest:null};i==null||i.create({seq:s.seq});const l=()=>{s.batch=new Set,s.currentRequest=OD(),s.timer=void 0,s.start=null,s.latest=null};return{fetch:c=>{s.start||(s.start=Date.now()),s.latest=Date.now(),s.batch.add(c),clearTimeout(s.timer);const h=r(s.start,s.latest,s.batch.size);i==null||i.queue({seq:s.seq,query:c,batch:[...s.batch],scheduled:h,latest:s.latest,start:s.start});const u=()=>{const f=s.seq,d=e.fetcher([...s.batch]),p=s.currentRequest;return i==null||i.fetch({seq:f,batch:[...s.batch]}),l(),d.then(m=>{i==null||i.data({seq:f,data:m}),p.resolve(m)}).catch(m=>{i==null||i.error({seq:f,error:m}),p.reject(m)}),s.seq++,d};if(h==="immediate"){const f=s.currentRequest;return u(),f.value.then(d=>e.resolver(d,c))}else return h==="never"?s.currentRequest.value.then(f=>e.resolver(f,c)):(s.timer=setTimeout(u,h),s.currentRequest.value.then(f=>e.resolver(f,c)))}}},kV=e=>(t,n)=>{const r=n-t;return e-r},I4=`
    query contentDownloadAsset($ids: [ID!]!) {
  contentDownloadAssets(ids: $ids) {
    url
    product {
      id
    }
  }
}
    `,ho=(e,t)=>Ot(["contentDownloadAsset",e],oe(I4,e),t);ho.document=I4;ho.getKey=e=>["contentDownloadAsset",e];ho.rootKey="contentDownloadAsset";ho.fetcher=(e,t)=>oe(I4,e,t);const AV=`
    mutation contentIncreaseDownloadCount($productId: ID!) {
  contentIncreaseDownloadCount(productId: $productId)
}
    `,RV=e=>Ke(["contentIncreaseDownloadCount"],t=>oe(AV,t)(),e);RV.getKey=()=>["contentIncreaseDownloadCount"];RV.fetcher=(e,t)=>oe(AV,e,t);const DV=class C0 extends Ye.fabric.Image{constructor(t,n,r){return super(n||(r==null?void 0:r.placeholder)||"",r),this.objectId=t,this.type=C0.type,this}static fromObjectId(t,n,r){kD(t,i=>{if(!i)throw new Error("No URL found for object ID");Ye.fabric.util.loadImage(i,s=>{const l=new C0(t,void 0,r);n(l),l.setElement(s),r!=null&&r.width&&(l.scaleToWidth(1),l.scaleToWidth((r==null?void 0:r.width)||0),l.setCoords()),Ee==null||Ee.requestRenderAll()},null,r&&r.crossOrigin)})}toObject(t=[]){return super.toObject([...t,"id","objectId"])}static fromObject({objectId:t,...n},r){const i=new C0(t,void 0,n);r(i);const s=S5e("ContentImage");kD(t,l=>{if(!l)throw s(),new Error("No URL found for object ID");Ye.fabric.util.loadImage(l,a=>{if(s(),n.width){const o=n.width/a.width;i.scaleX=o,i.scaleY=o}i.setElement(a),Ee==null||Ee.requestRenderAll()},null,n==null?void 0:n.crossOrigin)})}};DV.type="ContentImage";let E5e=DV;const P5e=T5e({fetcher:async e=>(await Ji.prefetchQuery({queryKey:ho.getKey({ids:e}),queryFn:ho.fetcher({ids:e})}),Ji.getQueryData(ho.getKey({ids:e}))),resolver:(e,t)=>{var r;const n=(r=e==null?void 0:e.contentDownloadAssets)==null?void 0:r.find(i=>i.product.id===t);return(n==null?void 0:n.url)||null},scheduler:kV(49)});function I5e(e){var n,r;const t=Ji.getQueryData(ho.getKey({ids:[e]}));return(r=(n=t==null?void 0:t.contentDownloadAssets)==null?void 0:n[0])==null?void 0:r.url}async function kD(e,t){const n=I5e(e);if(n)return t(n);P5e.fetch(e).then(r=>{if(!r)throw new Error("No URL found for object ID");Ji.setQueryData(ho.getKey({ids:[e]}),{contentDownloadAssets:[{product:{id:e},url:r}]}),t(r)}).catch(r=>{bT(r)})}const MV="white",LV="#8559F9",FV="#9DA2AD",O5e="#8559F9",k5e="rgba(0, 0, 0, 0.23)";function oy(e){e.shadowOffsetX=0,e.shadowOffsetY=2,e.shadowBlur=4,e.shadowColor=k5e}function O4(e){e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor="transparent"}class tf extends Ye.fabric.Control{constructor({position:t,...n}){super(n),this.position=t}drawPill(t,n,r,i){const s=i*(Math.PI/180);t.save(),oy(t),t.translate(n,r),t.rotate(s),t.beginPath(),this.roundRect(t,-4,-12,8,20,4),t.fillStyle=MV,t.fill(),t.closePath(),O4(t),t.beginPath(),this.roundRect(t,-4,-12,8,20,4),t.strokeStyle=FV,t.stroke(),t.closePath(),t.restore()}roundRect(t,n,r,i,s,l){t.moveTo(n+l,r),t.arcTo(n+i,r,n+i,r+s,l),t.arcTo(n+i,r+s,n,r+s,l),t.arcTo(n,r+s,n,r,l),t.arcTo(n,r,n+i,r,l)}render(t,n,r,i,s){let l=s.angle||0;(this.position==="top"||this.position==="bottom")&&(l+=90),this.drawPill(t,n,r,l)}}class Q_ extends Ye.fabric.Control{constructor(){super(...arguments),this.isHovered=!1}render(t,n,r){t.save(),oy(t);const i=this.isHovered;t.beginPath(),t.translate(n,r),t.arc(0,0,6,0,2*Math.PI,!1),t.fillStyle=i?LV:MV,t.fill(),t.lineWidth=1,O4(t),t.strokeStyle=i?O5e:FV,t.stroke(),t.closePath(),t.restore()}}const A5e=`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_14137_118586)">
<path d="M14.8795 5.04435C16.7328 6.20584 18.0244 8.2069 18.1887 10.5558C18.4616 14.4583 15.5192 17.8431 11.6167 18.116L11.2011 18.145M7.36571 17.0554C5.51239 15.8939 4.22077 13.8929 4.05652 11.544C3.78363 7.6415 6.726 4.25669 10.6285 3.98381L11.0441 3.95474M12.5585 19.6373L10.7796 18.091L12.3259 16.3121M9.91926 5.78767L11.4656 4.00881L9.68674 2.46246" stroke="white" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"/>
</g>
<defs>
<clipPath id="clip0_14137_118586">
<rect width="20" height="20" fill="white" transform="translate(0.449158 1.77148) rotate(-4)"/>
</clipPath>
</defs>
</svg>
`,NV=new Image;NV.src=`data:image/svg+xml;base64,${btoa(A5e)}`;const k4=class Ho extends Ye.fabric.Control{constructor(t){super(t),this.sizeX=Ho.circleSize,this.sizeY=Ho.circleSize}render(t,n,r,i,s){if(t.save(),t.translate(n,r),typeof s.angle=="number"){oy(t);const l=0,a=s.angle>99?42:28,o=-a-22,c=24,h=8;t.beginPath(),t.moveTo(o+h,l),t.lineTo(o+a-h,l),t.arcTo(o+a,l,o+a,l+h,h),t.lineTo(o+a,l+c-h),t.arcTo(o+a,l+c,o+a-h,l+c,h),t.lineTo(o+h,l+c),t.arcTo(o,l+c,o,l+c-h,h),t.lineTo(o,l+h),t.arcTo(o,l,o+h,l,h),t.closePath(),t.fillStyle="#232528",t.fill(),O4(t),t.fillStyle="white",t.font='12px "Noto Sans", sans-serif',t.textAlign="center",t.textBaseline="middle",t.fillText(`${Math.round(s.angle)}`,o+a/2,l+12)}t.rotate(Ye.fabric.util.degreesToRadians(s.angle||0)),oy(t),t.beginPath(),t.arc(0,0,Ho.circleSize/2,0,2*Math.PI,!1),t.fillStyle=LV,t.fill(),t.closePath(),t.drawImage(NV,-Ho.iconSize/2,-Ho.iconSize/2,Ho.iconSize,Ho.iconSize),t.closePath(),t.restore()}};k4.circleSize=32;k4.iconSize=22;let jV=k4;const Fs=Ye.fabric.controlsUtils,_g=Fs.scaleSkewCursorStyleHandler,bg=Fs.scaleCursorStyleHandler,Sg=Fs.scalingEqually,A4=Fs.scalingYOrSkewingX,R4=Fs.scalingXOrSkewingY,xg=Fs.scaleOrSkewActionName,D4=Fs.rotationStyleHandler,M4=Fs.rotationWithSnapping,L4=Fs.changeWidth,F4=Fs.scaleSkewCursorStyleHandler;ri(_g,"scaleSkewStyleHandler is not defined");ri(bg,"scaleStyleHandler is not defined");ri(Sg,"scalingEqually is not defined");ri(A4,"scalingYOrSkewingX is not defined");ri(R4,"scalingXOrSkewingY is not defined");ri(xg,"scaleOrSkewActionName is not defined");ri(D4,"rotationStyleHandler is not defined");ri(M4,"rotationWithSnapping is not defined");ri(L4,"changeWidth is not defined");ri(F4,"scaleSkewCursorStyleHandler is not defined");const BV=new tf({position:"left",x:-.5,y:0,cursorStyleHandler:_g,actionHandler:R4,getActionName:xg}),UV=new tf({position:"right",x:.5,y:0,cursorStyleHandler:_g,actionHandler:R4,getActionName:xg}),$V=new tf({position:"bottom",x:0,y:.5,cursorStyleHandler:_g,actionHandler:A4,getActionName:xg}),GV=new tf({position:"top",x:0,y:-.5,cursorStyleHandler:_g,actionHandler:A4,getActionName:xg}),VV=new Q_({x:-.5,y:-.5,cursorStyleHandler:bg,actionHandler:Sg}),HV=new Q_({x:.5,y:-.5,cursorStyleHandler:bg,actionHandler:Sg}),zV=new Q_({x:-.5,y:.5,cursorStyleHandler:bg,actionHandler:Sg}),WV=new Q_({x:.5,y:.5,cursorStyleHandler:bg,actionHandler:Sg}),R5e=new jV({x:.5,y:-.5,actionHandler:M4,cursorStyle:"grabbing",cursorStyleHandler:D4,offsetY:-28,withConnection:!1,actionName:"rotate"}),D5e=new tf({position:"right",x:.5,y:0,actionHandler:L4,cursorStyleHandler:F4,actionName:"resizing"}),M5e=new tf({position:"left",x:-.5,y:0,actionHandler:L4,cursorStyleHandler:F4,actionName:"resizing"}),L5e=new jV({x:.5,y:-.5,actionHandler:M4,cursorStyle:"grabbing",cursorStyleHandler:D4,offsetY:-28,withConnection:!1,actionName:"rotate"}),YV=class XV extends Ye.fabric.Rect{constructor(t){return super(t),this.pageName=(t==null?void 0:t.pageName)||"Page",this.fill="#aaa",this.type=XV.type,this.originX="top",this.originY="left",this.stroke="#bbb",this.strokeWidth=2,this.left=(t==null?void 0:t.left)||0,this.top=(t==null?void 0:t.top)||0,this.width=(t==null?void 0:t.width)||500,this.height=(t==null?void 0:t.height)||500,this.selectable=!1,this.hoverCursor="default",this.excludeFromExport=!0,this.on("moving",this.moveAllObjects.bind(this)),this}moveAllObjects(t){var s,l;const n=(s=this.canvas)==null?void 0:s.getObjects().filter(a=>a.pageId===this.id),r=((l=this.canvas)==null?void 0:l.getZoom())||1,i={left:t.e.movementX/r,top:t.e.movementY/r};n&&n.forEach(a=>{a.left+=i.left,a.top+=i.top,a.setCoords()})}toObject(t=[]){return super.toObject([...t,"pageName"])}};YV.type="StudioPage";let F5e=YV;Ye.fabric.StudioTextbox=C5e;Ye.fabric.ContentImage=E5e;Ye.fabric.StudioPage=F5e;Ye.fabric.Object.prototype.controls.ml=BV;Ye.fabric.Object.prototype.controls.mr=UV;Ye.fabric.Object.prototype.controls.mt=GV;Ye.fabric.Object.prototype.controls.mb=$V;Ye.fabric.Object.prototype.controls.tl=VV;Ye.fabric.Object.prototype.controls.tr=HV;Ye.fabric.Object.prototype.controls.bl=zV;Ye.fabric.Object.prototype.controls.br=WV;Ye.fabric.Object.prototype.controls.mtr=R5e;Ye.fabric.Textbox.prototype.controls.ml=BV;Ye.fabric.Textbox.prototype.controls.mr=UV;Ye.fabric.Textbox.prototype.controls.mt=GV;Ye.fabric.Textbox.prototype.controls.mb=$V;Ye.fabric.Textbox.prototype.controls.tl=VV;Ye.fabric.Textbox.prototype.controls.tr=HV;Ye.fabric.Textbox.prototype.controls.bl=zV;Ye.fabric.Textbox.prototype.controls.br=WV;Ye.fabric.Textbox.prototype.controls.mtr=L5e;Ye.fabric.Textbox.prototype.controls.ml=M5e;Ye.fabric.Textbox.prototype.controls.mr=D5e;function G6e(e){return Ee==null?void 0:Ee.getObjects().find(t=>t.id===e)}function N5e(){const e=PV(),t=(e==null?void 0:e.width)??0,n=(e==null?void 0:e.height)??0,r=-t/2,i=-n/2;return{x:r,y:i,width:t,height:n}}function V6e(e){const t=N5e(),n=(e==null?void 0:e.width)??0,r=(e==null?void 0:e.height)??0,i=(e==null?void 0:e.left)??0,s=(e==null?void 0:e.top)??0,l=t.x+n/2+i,a=t.y+r/2+s;return{left:l+i,top:a+s,width:n,height:r}}function qV(){return(Ee==null?void 0:Ee.getObjects().filter(e=>{var t;return((t=e==null?void 0:e.type)==null?void 0:t.toLowerCase())==="studiopage"}))??[]}function j5e(e){return e.width/2+e.strokeWidth/2}function B5e(e){return e.height/2+e.strokeWidth/2}function ex(){if(!Ee)return;const e=qV();if(!(e!=null&&e.length)){Ee.clipPath=void 0,Ee.requestRenderAll();return}const t=e.map(r=>new Ye.fabric.Rect({left:r.left,top:r.top,width:r.width+r.strokeWidth,height:r.height+r.strokeWidth,selectable:!1})),n=new Ye.fabric.Group(t,{left:Math.min(...e.map(r=>r.left-j5e(r))),top:Math.min(...e.map(r=>r.top-B5e(r)))});Ee.clipPath=n,Ee.requestRenderAll()}function H6e(e){const t=["object:modified","object:moving","object:scaling","object:rotating","object:skewing","object:resizing","object:selected","object:added","object:removed"];return t.forEach(n=>{e.on(n,ex)}),ex(),e.controlsAboveOverlay=!0,()=>{t.forEach(n=>{e.off(n,ex)})}}function U5e(e){const t=e.getWidth(),n=e.getHeight();e.viewportTransform=[1,0,0,1,t/2,n/2],e.requestRenderAll()}function z6e(e){function t(){const n=document.getElementById("fabric-root");e.setWidth((n==null?void 0:n.clientWidth)||window.innerWidth),e.setHeight((n==null?void 0:n.clientHeight)||window.innerHeight),U5e(e)}return t(),jN(window,"resize",t)}function W6e(){window.navigator.clipboard.readText().then(e=>{if(e){const t=new Ye.fabric.Text(e,{left:100,top:100,fontFamily:"Arial",fontSize:20});Ee==null||Ee.add(t),Ee==null||Ee.setActiveObject(t),Ee==null||Ee.requestRenderAll()}})}function Y6e(e){Ee==null||Ee.discardActiveObject(),e.clone(t=>{Ee==null||Ee.discardActiveObject(),t.set({evented:!0,left:e.left,top:e.top,width:e.width,height:e.height});const n=(Ee==null?void 0:Ee.getActiveObject())||e,r=(n.left??0)+25,i=(n.top??0)+25;t.animate("left",r,{duration:100,onChange:()=>Ee==null?void 0:Ee.requestRenderAll(),easing:Ye.fabric.util.ease.easeOutBounce}),t.animate("top",i,{duration:100,onChange:()=>Ee==null?void 0:Ee.requestRenderAll(),easing:Ye.fabric.util.ease.easeOutBounce}),t.type==="activeSelection"?(Ee&&(t.canvas=Ee),t.forEachObject(s=>{Ee==null||Ee.add(s)})):Ee==null||Ee.add(t),t.setCoords(),e&&(e.top=(t.top??0)+25,e.left=(t.left??0)+25),Ee==null||Ee.setActiveObject(t),Ee==null||Ee.requestRenderAll()})}function X6e(e,t){if(!(Ee!=null&&Ee.viewportTransform))return;const n={x:Ee.viewportTransform[4]-e.x,y:Ee.viewportTransform[5]-e.y};Ee.zoomToPoint(new Ye.fabric.Point(e.x,e.y),t),Ee.viewportTransform[4]=n.x+e.x,Ee.viewportTransform[5]=n.y+e.y,Ee.requestRenderAll()}const $5e={};let KV={data:void 0,pages:[]};function G5e(e){KV=e}function V5e(e){Ee=e}function H5e(){return Ee}let Ee=null;function QV({width:e,height:t}){return{data:{objects:[],version:"4.2.0"},pages:[{width:e,height:t}]}}function z5e(e,t){var r,i;const n={...e==null?void 0:e.data,objects:((r=e==null?void 0:e.data)==null?void 0:r.objects)??[]};if(e!=null&&e.pages&&Array.isArray(e==null?void 0:e.pages)&&((i=e==null?void 0:e.pages)==null?void 0:i.length)>0)e.pages.forEach((s,l)=>{const a=new Ye.fabric.StudioPage(s);n.objects.unshift(a),a.sendToBack(),l===0&&a.id&&ID(a.id)});else{const s=new Ye.fabric.StudioPage({width:1e3,height:1e3});n.objects.unshift(s),s.sendToBack(),s.id&&ID(s.id)}Ee==null||Ee.loadFromJSON(n,()=>{t==null||t(),Ee==null||Ee.requestRenderAll()})}function W5e(){return{data:Ee==null?void 0:Ee.toJSON(),pages:qV().map(t=>t.toObject())}}const JV=Object.freeze(Object.defineProperty({__proto__:null,get canvas(){return Ee},fromJson:z5e,generateState:QV,getCanvas:H5e,initCanvas:V5e,initialOptions:$5e,get initialState(){return KV},setInitialState:G5e,toJson:W5e},Symbol.toStringTag,{value:"Module"})),Y5e=hc(()=>Ve(()=>import("./error-page-0c251602.js"),["assets/error-page-0c251602.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css"]).then(e=>e.ErrorPage)),X5e=hc(()=>Ve(()=>import("./404-33dba752.js"),["assets/404-33dba752.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/top-bar-3db44c74.js","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js"]).then(e=>e.NotFound)),AD=hc(()=>Ve(()=>import("./polotno-layout-1e468914.js"),["assets/polotno-layout-1e468914.js","assets/store-d7de4f1b.js","assets/page-0e423e1d.js","assets/group-model-1a7bf2ef.js","assets/_copyArray-226ec93f.js","assets/tinycolor-e5c0b657.js","assets/google-fonts-8ecba855.js"]).then(e=>e.PolotnoLayout)),q5e=[{path:"/",element:E.jsx(s5e,{}),errorElement:E.jsx(Y5e.component,{}),children:[{path:"*"},{path:"/404",element:E.jsx(X5e.component,{})},{path:"/",lazy:()=>Ve(()=>import("./index-c95c98bd.js"),["assets/index-c95c98bd.js","assets/index-9b7b3f93.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-2146729c.js","assets/top-bar-3db44c74.js","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js"])},{path:"/flow",lazy:()=>Ve(()=>import("./index-715f79c8.js").then(e=>e.i),["assets/index-715f79c8.js","assets/command-menu-views-bdaadab2.js","assets/use-keypress-4eac4e91.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-6edffb0a.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/use-transform-952f6ac6.js","assets/use-motion-value-089019da.js","assets/index-cb050585.js","assets/button-176a6d23.js","assets/index-db17fe71.js","assets/index-0d445c7d.js","assets/index-6c1245eb.js","assets/auth-9f6058c6.js"]),children:[{path:":id",lazy:()=>Ve(()=>import("./index-715f79c8.js").then(e=>e.i),["assets/index-715f79c8.js","assets/command-menu-views-bdaadab2.js","assets/use-keypress-4eac4e91.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-6edffb0a.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/use-transform-952f6ac6.js","assets/use-motion-value-089019da.js","assets/index-cb050585.js","assets/button-176a6d23.js","assets/index-db17fe71.js","assets/index-0d445c7d.js","assets/index-6c1245eb.js","assets/auth-9f6058c6.js"])}]},{path:"/transfer",children:[{path:"",lazy:()=>Ve(()=>import("./index-dd1cd828.js"),["assets/index-dd1cd828.js","assets/transfers-77c56a67.js","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/layout-5374f88a.js","assets/command-menu-views-bdaadab2.js","assets/use-keypress-4eac4e91.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-6edffb0a.js","assets/navigation-89a5e3a1.js","assets/index-9bd36345.js","assets/index-51a8cb7b.js","assets/index-bf69a95d.js","assets/index-afa3dd1d.js","assets/search-d0b2facc.js","assets/circle-progress-8896a575.js","assets/index-db17fe71.js","assets/menu-item-0346ea54.js","assets/index-103de00c.js","assets/typography-05804a7f.js","assets/index-2146729c.js","assets/index-69227dc3.js","assets/index-59304884.js","assets/index.es-53c8820f.js"])},{path:":id",lazy:()=>Ve(()=>import("./index-5f17719b.js"),["assets/index-5f17719b.js","assets/transfers-77c56a67.js","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/layout-5374f88a.js","assets/command-menu-views-bdaadab2.js","assets/use-keypress-4eac4e91.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-6edffb0a.js","assets/transfer-expired-17e5cc3c.js","assets/index-69227dc3.js","assets/index.es-53c8820f.js","assets/circle-progress-8896a575.js","assets/index-103de00c.js"])},{path:"expired",lazy:()=>Ve(()=>import("./expired-58f00ca3.js"),["assets/expired-58f00ca3.js","assets/transfers-77c56a67.js","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/layout-5374f88a.js","assets/command-menu-views-bdaadab2.js","assets/use-keypress-4eac4e91.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-6edffb0a.js","assets/transfer-expired-17e5cc3c.js","assets/index-69227dc3.js","assets/index.es-53c8820f.js"])},{path:"layout-2",lazy:()=>Ve(()=>import("./index-44795fd2.js"),["assets/index-44795fd2.js","assets/transfers-77c56a67.js","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/command-menu-views-bdaadab2.js","assets/use-keypress-4eac4e91.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-6edffb0a.js","assets/navigation-89a5e3a1.js","assets/index-9bd36345.js","assets/index-51a8cb7b.js","assets/index-bf69a95d.js","assets/index-afa3dd1d.js","assets/search-d0b2facc.js","assets/circle-progress-8896a575.js","assets/index-db17fe71.js","assets/menu-item-0346ea54.js","assets/index-103de00c.js","assets/typography-05804a7f.js","assets/index-2146729c.js","assets/index-69227dc3.js","assets/index-59304884.js","assets/index.es-53c8820f.js"])}]},{path:"healthcheck",element:E.jsx(t5e,{})},{path:"design-reviewer",lazy:()=>Ve(()=>import("./index-204e4ae2.js"),["assets/index-204e4ae2.js","assets/index-0c522cac.js","assets/index-8317ea43.js","assets/index-bf69a95d.js","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/navigation-item-context-fdde96de.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css"]),children:[{path:"",lazy:()=>Ve(()=>import("./index-aacf3bb6.js"),["assets/index-aacf3bb6.js","assets/navigation-bar-upload.context-4ef2870b.js","assets/index-204e4ae2.js","assets/index-0c522cac.js","assets/index-8317ea43.js","assets/index-bf69a95d.js","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/navigation-item-context-fdde96de.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css"])},{path:":id",lazy:()=>Ve(()=>import("./index-53041401.js"),["assets/index-53041401.js","assets/_copyArray-226ec93f.js","assets/index-0c522cac.js","assets/index-8317ea43.js","assets/index-bf69a95d.js"])}]},{path:"vectorizer",lazy:()=>Ve(()=>import("./index-3bf02283.js").then(e=>e.i),["assets/index-3bf02283.js","assets/index-8317ea43.js","assets/index-bf69a95d.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/navigation-bar-upload.context-4ef2870b.js","assets/navigation-item-context-fdde96de.js"]),children:[{path:"",lazy:()=>Ve(()=>import("./index-9fd6f41c.js"),["assets/index-9fd6f41c.js","assets/index-3bf02283.js","assets/index-8317ea43.js","assets/index-bf69a95d.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/navigation-bar-upload.context-4ef2870b.js","assets/navigation-item-context-fdde96de.js"])},{path:":id",lazy:()=>Ve(()=>import("./index-2ae6f4f3.js"),["assets/index-2ae6f4f3.js","assets/index-3bf02283.js","assets/index-8317ea43.js","assets/index-bf69a95d.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/auth-9f6058c6.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/navigation-bar-upload.context-4ef2870b.js","assets/navigation-item-context-fdde96de.js","assets/use-motion-value-089019da.js","assets/toolbar-button-25054d12.js","assets/index-44dfc678.js"]),loader:async({params:e})=>{const{id:t=""}=e,n={input:{id:t}},{vectorizerGetImage:r}=await Ji.fetchQuery({queryFn:Ph.fetcher(n),queryKey:Ph.getKey(n)}),{image:i,errors:s}=r;return s!=null&&s.length||(i==null?void 0:i.status)==="deleted"||(i==null?void 0:i.status)==="failed"?Fn("/vectorizer"):null}}]},{path:"invites",children:[{index:!0,loader:()=>Fn(mi.STUDIO.DEFAULT_LOGGED_OUT)},{path:"accept",lazy:()=>Ve(()=>import("./index-990278d0.js"),[])},{path:"approve-role-change",lazy:()=>Ve(()=>import("./index-6f381888.js"),[])},{path:"approve-member",lazy:()=>Ve(()=>import("./index-6f381888.js"),[])}]},{path:"studio",element:E.jsx(AD.component,{}),loader:()=>(AD.preload(),null),children:[{path:"",lazy:()=>Ve(()=>import("./index-ab2a554f.js"),["assets/index-ab2a554f.js","assets/index-9b7b3f93.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-6a3a2ef5.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/auth-9f6058c6.js","assets/new-design-combo-button-9e4c7f20.js","assets/menu-item-0346ea54.js","assets/components-c3966341.js"]),children:[{path:"",lazy:()=>Ve(()=>import("./index-86f75bdd.js"),["assets/index-86f75bdd.js","assets/search-d0b2facc.js","assets/index-298c667f.js","assets/new-design-combo-button-9e4c7f20.js","assets/menu-item-0346ea54.js","assets/index-db17fe71.js","assets/components-c3966341.js","assets/index-8f65a60f.js","assets/use-studio-preload-project-777c320b.js","assets/use-studio-projects-recent-files-896ed86f.js","assets/time-b5fb463a.js","assets/algolia.hooks-31c5621c.js","assets/templates-30b4bf4a.js","assets/index-e64704ed.js","assets/Configure-81e5b34d.js"]),loader:dl},{path:"trash",lazy:()=>Ve(()=>import("./index-c9b2a470.js"),["assets/index-c9b2a470.js","assets/index-298c667f.js","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/search-d0b2facc.js","assets/user-folder-fdf67db8.js","assets/index-db17fe71.js","assets/projects-b9d671c4.js","assets/time-b5fb463a.js","assets/user-project-aec13600.js","assets/use-studio-preload-project-777c320b.js","assets/user-projects-c47f7037.js"]),loader:dl}]},{path:"shared-projects",lazy:()=>Ve(()=>import("./index-100f9142.js"),["assets/index-100f9142.js","assets/index-6a781f06.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js"]),children:[{path:"",lazy:()=>Ve(()=>import("./index-82b752f4.js"),["assets/index-82b752f4.js","assets/index-298c667f.js","assets/search-d0b2facc.js","assets/user-project-aec13600.js","assets/use-studio-preload-project-777c320b.js","assets/index-db17fe71.js","assets/time-b5fb463a.js","assets/shared-projects-782151f1.js"]),loader:dl},{path:"teams",lazy:()=>Ve(()=>import("./index-3f93f652.js"),["assets/index-3f93f652.js","assets/index-298c667f.js","assets/search-d0b2facc.js","assets/user-project-aec13600.js","assets/use-studio-preload-project-777c320b.js","assets/index-db17fe71.js","assets/time-b5fb463a.js","assets/shared-projects-782151f1.js"]),loader:dl},{path:"users",lazy:()=>Ve(()=>import("./index-4ff5faef.js"),["assets/index-4ff5faef.js","assets/index-298c667f.js","assets/search-d0b2facc.js","assets/user-project-aec13600.js","assets/use-studio-preload-project-777c320b.js","assets/index-db17fe71.js","assets/time-b5fb463a.js","assets/shared-projects-782151f1.js"]),loader:dl}]},{path:"projects",lazy:()=>Ve(()=>import("./index-bc4e3ce9.js"),["assets/index-bc4e3ce9.js","assets/index-6a781f06.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-6a3a2ef5.js","assets/index-db17fe71.js","assets/user-projects-c47f7037.js"]),children:[{path:"",lazy:()=>Ve(()=>import("./index-ec340e2f.js"),["assets/index-ec340e2f.js","assets/index-298c667f.js","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/search-d0b2facc.js","assets/index-6a3a2ef5.js","assets/index-db17fe71.js","assets/user-folder-fdf67db8.js","assets/projects-b9d671c4.js","assets/time-b5fb463a.js","assets/user-project-aec13600.js","assets/use-studio-preload-project-777c320b.js","assets/user-projects-c47f7037.js","assets/user-move-folder-menu-881e2bae.js","assets/menu-item-0346ea54.js","assets/components-c3966341.js"]),loader:dl}]},{path:"folders",lazy:()=>Ve(()=>import("./index-bc4e3ce9.js"),["assets/index-bc4e3ce9.js","assets/index-6a781f06.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-6a3a2ef5.js","assets/index-db17fe71.js","assets/user-projects-c47f7037.js"]),children:[{index:!0,loader:()=>Fn(mi.STUDIO.DEFAULT_LOGGED_OUT)},{path:":folderId",lazy:()=>Ve(()=>import("./index-7ca0b1d2.js"),["assets/index-7ca0b1d2.js","assets/index-298c667f.js","assets/user-projects-c47f7037.js","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/search-d0b2facc.js","assets/index-6a3a2ef5.js","assets/index-db17fe71.js","assets/user-folder-fdf67db8.js","assets/projects-b9d671c4.js","assets/time-b5fb463a.js","assets/user-project-aec13600.js","assets/use-studio-preload-project-777c320b.js","assets/user-move-folder-menu-881e2bae.js","assets/menu-item-0346ea54.js","assets/components-c3966341.js"]),loader:dl}]},{path:"teams",lazy:()=>Ve(()=>import("./index-38110066.js").then(e=>e.w),["assets/index-38110066.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js"]),children:[{index:!0,loader:()=>Fn(mi.STUDIO.DEFAULT_LOGGED_OUT)},{path:":teamId",lazy:()=>Ve(()=>import("./index-4fadb4e1.js"),["assets/index-4fadb4e1.js","assets/index-298c667f.js","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/team-move-folder-menu-09afceac.js","assets/menu-item-0346ea54.js","assets/components-c3966341.js","assets/search-d0b2facc.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/team-project-009759a8.js","assets/use-studio-preload-project-777c320b.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-38110066.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js","assets/time-b5fb463a.js","assets/team-folder-e2ec55af.js","assets/projects-b9d671c4.js"]),loader:fl},{path:":teamId/users",children:[{path:"",lazy:()=>Ve(()=>import("./index-6cee18dc.js"),["assets/index-6cee18dc.js","assets/index-38110066.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js","assets/team-breadcrumbs-ab2eb516.js","assets/search-d0b2facc.js","assets/index-298c667f.js"]),loader:fl}]},{path:":teamId/templates",children:[{path:"",lazy:()=>Ve(()=>import("./index-9f4ca0bb.js"),["assets/index-9f4ca0bb.js","assets/index-38110066.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js","assets/index-298c667f.js","assets/team-breadcrumbs-ab2eb516.js","assets/content-563477e5.js","assets/team-project-009759a8.js","assets/use-studio-preload-project-777c320b.js","assets/time-b5fb463a.js","assets/search-d0b2facc.js"]),loader:fl}]},{path:":teamId/brand-hub",children:[{path:"",lazy:()=>Ve(()=>import("./index-6df2f131.js"),["assets/index-6df2f131.js","assets/index-38110066.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js","assets/index-298c667f.js","assets/team-breadcrumbs-ab2eb516.js","assets/content-563477e5.js","assets/team-project-009759a8.js","assets/use-studio-preload-project-777c320b.js","assets/time-b5fb463a.js","assets/search-d0b2facc.js"]),loader:fl}]},{path:":teamId/trash",children:[{path:"",lazy:()=>Ve(()=>import("./index-ca7b3f3c.js"),["assets/index-ca7b3f3c.js","assets/index-38110066.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js","assets/index-298c667f.js","assets/team-breadcrumbs-ab2eb516.js","assets/search-d0b2facc.js","assets/team-project-009759a8.js","assets/use-studio-preload-project-777c320b.js","assets/time-b5fb463a.js","assets/team-folder-e2ec55af.js","assets/projects-b9d671c4.js","assets/team-projects-trash-1b8ead05.js"]),loader:fl}]}]},{path:"teams/:teamId",lazy:()=>Ve(()=>import("./index-c6280450.js"),["assets/index-c6280450.js","assets/index-38110066.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js"]),children:[{path:"projects",lazy:()=>Ve(()=>import("./index-ea996ef6.js"),["assets/index-ea996ef6.js","assets/index-38110066.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js","assets/index-298c667f.js","assets/team-breadcrumbs-ab2eb516.js","assets/search-d0b2facc.js","assets/team-project-009759a8.js","assets/use-studio-preload-project-777c320b.js","assets/time-b5fb463a.js","assets/team-folder-e2ec55af.js","assets/projects-b9d671c4.js","assets/team-move-folder-menu-09afceac.js","assets/menu-item-0346ea54.js","assets/components-c3966341.js"]),loader:fl},{path:"folders",children:[{index:!0,loader:()=>Fn(mi.STUDIO.DEFAULT_LOGGED_OUT)},{path:":folderId",lazy:()=>Ve(()=>import("./index-08387f04.js"),["assets/index-08387f04.js","assets/index-38110066.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js","assets/index-298c667f.js","assets/team-breadcrumbs-ab2eb516.js","assets/search-d0b2facc.js","assets/team-project-009759a8.js","assets/use-studio-preload-project-777c320b.js","assets/time-b5fb463a.js","assets/team-folder-e2ec55af.js","assets/projects-b9d671c4.js","assets/team-move-folder-menu-09afceac.js","assets/menu-item-0346ea54.js","assets/components-c3966341.js"]),loader:fl}]}]},{path:"fabricate",lazy:()=>Ve(()=>import("./index-09e185d4.js").then(e=>e.i),["assets/index-09e185d4.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/search-d0b2facc.js","assets/navigation-bar-loader-243303ac.js","assets/use-motion-value-089019da.js","assets/use-transform-952f6ac6.js","assets/index-9bd36345.js","assets/use-keypress-4eac4e91.js","assets/navigation-5cdaf7a0.js","assets/editor-eb5a03f3.js","assets/index-db17fe71.js","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/input-steps-c98bf229.js","assets/components-c3966341.js","assets/propped-c7e84ee7.js"]),children:[{path:"",element:E.jsx(r0,{}),loader:async({params:e,request:t})=>{var o,c,h,u,f,d,p,m;const{searchParams:n}=new URL(t.url),r=md().catch(()=>null);if(CD(),n.get(ty)==="true"){const g=KR();if(!g)return null;if(await r){const _=await Fi.fetcher({input:{content:g,editor:gi.Fabric}})().catch(()=>null),y=(c=(o=_==null?void 0:_.studioProjectsCreateProject)==null?void 0:o.project)==null?void 0:c.id;if(y)return Fn(`./${y}`)}const v=await Um();if(!v)return;try{return v.setInitialState(typeof g=="string"?JSON.parse(g):g),null}catch{}}const i=n.get("content_template_id");if(i){const g=await PD(i).then(y=>y).catch(()=>null);if(!(g!=null&&g.fileUrl))return null;const v=await fetch(g.fileUrl).then(y=>y.json()).catch(()=>null);if(!v)return null;if(await r){const y=await Fi.fetcher({input:{content:JSON.stringify(v),editor:gi.Fabric}})().catch(()=>null);if((h=y==null?void 0:y.studioProjectsCreateProject.project)!=null&&h.id)return Fn(`./${y.studioProjectsCreateProject.project.id}`)}const _=await Um();try{return _==null||_.setInitialState(typeof v=="string"?JSON.parse(v):v),null}catch{}}const s=n.get("template_category"),l=n.get("template_id");if(s&&l){Um();const v=(u=(await Ve(()=>import("./document-categories-f91f804a.js"),["assets/document-categories-f91f804a.js","assets/social-22364841.js"]).then(S=>S.DOCUMENT_CATEGORIES)).find(S=>S.id===s))==null?void 0:u.templates;if(!(v==null?void 0:v.find(S=>S.id===i)))return null;const y={};if(!y)return null;if(await r){const S=await Fi.fetcher({input:{content:JSON.stringify(y),editor:gi.Fabric}})().catch(()=>null);if((f=S==null?void 0:S.studioProjectsCreateProject.project)!=null&&f.id)return Fn(`./${S.studioProjectsCreateProject.project.id}`)}const b=await Um();try{return b==null||b.setInitialState({data:{objects:[],version:"4.0.0"},pages:[]}),null}catch{}}const{id:a=""}=e;if(n.get("new")!==null||n.get("new")===null&&!a){if(!await r)return null;const v=(p=(d=(await Ve(()=>import("./document-categories-f91f804a.js"),["assets/document-categories-f91f804a.js","assets/social-22364841.js"]).then(S=>S.DOCUMENT_CATEGORIES)).find(S=>S.id==="standard"))==null?void 0:d.templates)==null?void 0:p.find(S=>S.id==="standard");if(!v)return null;const _=QV(v),y=JSON.stringify(_);if(!y)return null;const b=await Fi.fetcher({input:{content:y,editor:gi.Fabric}})().catch(()=>null);if((m=b==null?void 0:b.studioProjectsCreateProject.project)!=null&&m.id){const S=new URL(window.location.href),x=$3(S,mi.STUDIO.PROJECT(b.studioProjectsCreateProject.project.id)),C=G3(kv(x,["new"]));return Fn(C)}}return null}}]},{path:"create",lazy:()=>Ve(()=>import("./index-41a06927.js").then(e=>e.i),["assets/index-41a06927.js","assets/command-menu-views-bdaadab2.js","assets/use-keypress-4eac4e91.js","assets/index-8317ea43.js","assets/index-bf69a95d.js","assets/use-is-saveable-document-746f50b7.js","assets/navigation-5cdaf7a0.js","assets/index-38110066.js","assets/index-103de00c.js","assets/index-6edffb0a.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css","assets/index-19a34ae4.js","assets/index-0d445c7d.js","assets/index-db17fe71.js","assets/index-bc5386dc.js","assets/propped-c7e84ee7.js","assets/index-6a3a2ef5.js","assets/shared-projects-782151f1.js","assets/page-0e423e1d.js","assets/group-model-1a7bf2ef.js","assets/typography-fe30b70d.js","assets/search-d0b2facc.js","assets/navigation-bar-loader-243303ac.js","assets/use-motion-value-089019da.js","assets/use-transform-952f6ac6.js","assets/toolbar-button-25054d12.js","assets/text-9de58f1b.js","assets/components-c3966341.js","assets/navigation-item-context-fdde96de.js","assets/index-9bd36345.js"]),children:[{path:"",element:E.jsx(r0,{}),loader:async({params:e,request:t})=>{var o,c,h,u,f,d,p,m;const{searchParams:n}=new URL(t.url),r=md().catch(()=>null);if(CD(),n.get(ty)==="true"){const g=KR();if(!g)return null;if(await r){const _=await Fi.fetcher({input:{content:g}})().catch(()=>null),y=(c=(o=_==null?void 0:_.studioProjectsCreateProject)==null?void 0:o.project)==null?void 0:c.id;if(y)return Fn(`./${y}`)}const v=await tx();try{return v==null||v.loadJSON(typeof g=="string"?JSON.parse(g):g),null}catch{}}const i=n.get("content_template_id");if(i){const g=await PD(i).then(y=>y).catch(()=>null);if(!(g!=null&&g.fileUrl))return null;const v=await fetch(g.fileUrl).then(y=>y.json()).catch(()=>null);if(!v)return null;if(await r){const y=await Fi.fetcher({input:{content:JSON.stringify(v),editor:gi.Polotno}})().catch(()=>null);if((h=y==null?void 0:y.studioProjectsCreateProject.project)!=null&&h.id)return Fn(`./${y.studioProjectsCreateProject.project.id}`)}const _=await tx();try{return _==null||_.loadJSON(typeof v=="string"?JSON.parse(v):v),null}catch{}}const s=n.get("template_category"),l=n.get("template_id");if(s&&l){const g=tx(),_=(u=(await Ve(()=>import("./document-categories-f91f804a.js"),["assets/document-categories-f91f804a.js","assets/social-22364841.js"]).then(x=>x.DOCUMENT_CATEGORIES)).find(x=>x.id===s))==null?void 0:u.templates,y=_==null?void 0:_.find(x=>x.id===i);if(!y)return null;const b=qR(y);if(!b)return null;if(await r){const x=await Fi.fetcher({input:{content:JSON.stringify(b),editor:gi.Polotno}})().catch(()=>null);if((f=x==null?void 0:x.studioProjectsCreateProject.project)!=null&&f.id)return Fn(`./${x.studioProjectsCreateProject.project.id}`)}const S=await g;try{return S==null||S.loadJSON(b),null}catch{}}const{id:a=""}=e;if(n.get("new")!==null||n.get("new")===null&&!a){if(!await r)return null;const v=(p=(d=(await Ve(()=>import("./document-categories-f91f804a.js"),["assets/document-categories-f91f804a.js","assets/social-22364841.js"]).then(S=>S.DOCUMENT_CATEGORIES)).find(S=>S.id==="standard"))==null?void 0:d.templates)==null?void 0:p.find(S=>S.id==="standard");if(!v)return null;const _=qR(v),y=JSON.stringify(_);if(!y)return null;const b=await Fi.fetcher({input:{content:y,editor:gi.Polotno}})().catch(()=>null);if((m=b==null?void 0:b.studioProjectsCreateProject.project)!=null&&m.id){const S=new URL(window.location.href),x=$3(S,mi.STUDIO.PROJECT(b.studioProjectsCreateProject.project.id)),C=G3(kv(x,["new"]));return Fn(C)}}return null}},{path:":id",element:E.jsx(r0,{}),loader:async({params:e})=>{var h,u,f,d;T4e();const t=await md().catch(()=>null),n=Ve(()=>import("./store-d7de4f1b.js").then(p=>p.e),["assets/store-d7de4f1b.js","assets/page-0e423e1d.js","assets/group-model-1a7bf2ef.js","assets/_copyArray-226ec93f.js","assets/tinycolor-e5c0b657.js","assets/google-fonts-8ecba855.js"]).then(p=>p.store).catch(()=>null);if(!t)return Fn("..");if(!e.id)return{error:!0};const r={projectId:e.id},i=await Ji.fetchQuery({queryFn:Ch.fetcher(r),queryKey:Ch.getKey(r),staleTime:u1("15s")}),s=(h=i==null?void 0:i.studioProjectsGetProject.project)==null?void 0:h.activeRevision.fileUrl;if(((f=(u=i==null?void 0:i.studioProjectsGetProject.errors)==null?void 0:u[0])==null?void 0:f.code)==="unauthorized")return Fn(mi.STUDIO.UNAUTHORIZED_TO_VIEW_PROJECT);if(!s)return{error:!0};const a=await fetch(s).then(p=>p.text()).catch(()=>null);if(!a)return{error:!0};const o=await n;if(!o)return{error:!0};let c;try{c=JSON.parse(a)}catch{return{error:!0}}if(!c)return{error:!0};if((c==null?void 0:c.type)==="graphic-template"){const p=await fetch(c==null?void 0:c.fileUrl).then(m=>m.json()).catch(()=>null);if(!p)return{error:!0};o==null||o.loadJSON(p)}else o==null||o.loadJSON(c);return{name:(d=i.studioProjectsGetProject.project)==null?void 0:d.name}}}]}]}]}],K5e=Cq(q5e);async function tx(){return Ve(()=>import("./store-d7de4f1b.js").then(e=>e.e),["assets/store-d7de4f1b.js","assets/page-0e423e1d.js","assets/group-model-1a7bf2ef.js","assets/_copyArray-226ec93f.js","assets/tinycolor-e5c0b657.js","assets/google-fonts-8ecba855.js"]).then(e=>e.store).catch(()=>null)}async function Um(){return Ve(()=>Promise.resolve().then(()=>JV),void 0).catch(()=>null)}async function fl({params:e}){if(!await md().catch(()=>null))return Fn(mi.STUDIO.DEFAULT_LOGGED_OUT);const{teamId:n=""}=e;return await Q5e(n)?null:Fn(mi.STUDIO.HOME)}async function Q5e(e){const t={input:{teamId:e}},{teamsGet:n}=await Ji.fetchQuery({queryFn:Eh.fetcher(t),queryKey:Eh.getKey(t)}),{team:r}=n,i=await o5e().catch(()=>null);return!(r!=null&&r.members)||!i?Fn(mi.STUDIO.HOME):!!(r!=null&&r.members.find(({member:l})=>l.id===i))}async function dl(){return await md().catch(()=>null)?null:Fn(mi.STUDIO.DEFAULT_LOGGED_OUT)}hme();boe(l7.STUDIO);const J5e=hc(()=>Ve(()=>import("./error-page-0c251602.js"),["assets/error-page-0c251602.js","assets/index-016f3f7c.js","assets/index-8f65a60f.js","assets/index-7dad8cc3.js","assets/index-fcc63054.css"]).then(e=>e.ErrorPage));Zx.createRoot(document.getElementById("root")).render(E.jsx(T.StrictMode,{children:E.jsxs(ou,{children:[E.jsx(Ml,{titleTemplate:"%s - Studio"}),E.jsx(cme,{children:E.jsx(MY,{FallbackComponent:J5e.component,children:E.jsxs(yY,{client:Ji,children:[E.jsx(RY,{initialIsOpen:!1}),E.jsx(Noe,{children:E.jsxs(fme,{children:[E.jsx($oe,{}),E.jsx(Vge,{}),E.jsx(gq,{router:K5e})]})})]})})})]})}));export{vme as $,ej as A,En as B,d6e as C,wF as D,$h as E,R3e as F,wRe as G,xRe as H,u1 as I,j4e as J,SRe as K,o3e as L,jfe as M,ERe as N,r0 as O,a6e as P,tz as Q,mi as R,sAe as S,aAe as T,NAe as U,G3e as V,zoe as W,_me as X,bme as Y,yme as Z,Sme as _,T3e as a,fRe as a$,Fe as a0,_r as a1,dRe as a2,pRe as a3,Mge as a4,P3e as a5,rp as a6,Tve as a7,Fge as a8,TAe as a9,uOe as aA,DRe as aB,L3e as aC,YAe as aD,MRe as aE,LRe as aF,FRe as aG,hh as aH,YRe as aI,Fme as aJ,kme as aK,$ge as aL,LN as aM,lAe as aN,xle as aO,_Re as aP,zIe as aQ,WIe as aR,NIe as aS,LE as aT,wG as aU,YIe as aV,CG as aW,XIe as aX,mRe as aY,vRe as aZ,hAe as a_,FOe as aa,ame as ab,rme as ac,Mce as ad,hc as ae,Ve as af,aT as ag,a3e as ah,aRe as ai,tOe as aj,Ov as ak,Rp as al,Dp as am,XRe as an,cDe as ao,KN as ap,wDe as aq,CRe as ar,gRe as as,g1 as at,IRe as au,bRe as av,z3e as aw,rAe as ax,m1 as ay,Ml as az,h1 as b,$$ as b$,TRe as b0,Qd as b1,cRe as b2,c1 as b3,SAe as b4,M3e as b5,Hge as b6,oRe as b7,aA as b8,Nme as b9,Cve as bA,U3e as bB,$3e as bC,w3e as bD,Ph as bE,q_ as bF,_V as bG,vV as bH,a7 as bI,TV as bJ,TX as bK,gV as bL,SV as bM,c3e as bN,l3e as bO,aV as bP,sG as bQ,rV as bR,sV as bS,YG as bT,_Ae as bU,iRe as bV,RRe as bW,Y_ as bX,UAe as bY,iAe as bZ,hA as b_,cke as ba,ri as bb,zAe as bc,WAe as bd,kRe as be,ARe as bf,uRe as bg,ORe as bh,hRe as bi,RN as bj,Sge as bk,lE as bl,CAe as bm,f6e as bn,v3e as bo,on as bp,pAe as bq,wV as br,KTe as bs,$2 as bt,O3e as bu,Ap as bv,u2 as bw,j3e as bx,B3e as by,wve as bz,ZH as c,WY as c$,V$ as c0,lRe as c1,Z$ as c2,DAe as c3,GAe as c4,VAe as c5,Y$ as c6,Q$ as c7,q$ as c8,A3e as c9,dme as cA,yt as cB,Jt as cC,$Re as cD,MN as cE,Lme as cF,r5e as cG,ED as cH,f3e as cI,GRe as cJ,xoe as cK,h7 as cL,Bge as cM,yve as cN,pme as cO,d7 as cP,hN as cQ,bfe as cR,l2 as cS,Foe as cT,fc as cU,Nt as cV,Be as cW,Oi as cX,fr as cY,lY as cZ,ac as c_,D3e as ca,N$ as cb,N_ as cc,F_ as cd,M_ as ce,Ime as cf,L_ as cg,OAe as ch,ZG as ci,tV as cj,cV as ck,hV as cl,Ome as cm,gme as cn,Ra as co,jDe as cp,NDe as cq,q5e as cr,F4e as cs,Ki as ct,URe as cu,BRe as cv,bT as cw,yoe as cx,mme as cy,Mme as cz,t3e as d,Wt as d$,yH as d0,nT as d1,UY as d2,WP as d3,k$ as d4,J2 as d5,Gr as d6,MY as d7,ho as d8,u6e as d9,BPe as dA,wo as dB,m$ as dC,VPe as dD,xo as dE,qPe as dF,UPe as dG,$r as dH,nr as dI,JS as dJ,$D as dK,Aae as dL,Pae as dM,f0 as dN,h0 as dO,M7 as dP,Hae as dQ,Rae as dR,$7 as dS,SDe as dT,FE as dU,fAe as dV,YN as dW,HRe as dX,Qi as dY,BF as dZ,_o as d_,l6e as da,Qxe as db,Jxe as dc,p6e as dd,ZPe as de,CPe as df,TPe as dg,up as dh,Yn as di,NR as dj,zB as dk,sz as dl,ft as dm,Zx as dn,ua as dp,rPe as dq,NPe as dr,jPe as ds,QP as dt,dg as du,c$ as dv,o4 as dw,RPe as dx,DPe as dy,HPe as dz,kY as e,F3e as e$,W5 as e0,It as e1,Wd as e2,ht as e3,Pp as e4,mG as e5,GE as e6,fG as e7,rIe as e8,Fu as e9,Pme as eA,C3e as eB,BAe as eC,HAe as eD,FAe as eE,Eh as eF,X_ as eG,zN as eH,z5e as eI,W5e as eJ,K_ as eK,Ye as eL,$5e as eM,V5e as eN,jN as eO,H6e as eP,z6e as eQ,U5e as eR,KV as eS,X6e as eT,W6e as eU,Y6e as eV,Ee as eW,voe as eX,F5e as eY,G6e as eZ,FDe as e_,iIe as ea,k7 as eb,B7 as ec,A7 as ed,I7 as ee,E7 as ef,sIe as eg,Y7 as eh,cG as ei,J3e as ej,lG as ek,D6e as el,iOe as em,L6e as en,N6e as eo,F6e as ep,M6e as eq,s3e as er,MAe as es,LAe as et,Ch as eu,D_ as ev,sOe as ew,Pve as ex,Ive as ey,j_ as ez,Wue as f,CDe as f$,N3e as f0,kv as f1,GN as f2,XN as f3,gi as f4,d2 as f5,WRe as f6,b5e as f7,eAe as f8,V3e as f9,g6e as fA,W_ as fB,h4 as fC,k6e as fD,b6e as fE,b4e as fF,B_ as fG,kAe as fH,p3e as fI,d3e as fJ,NN as fK,Fi as fL,bAe as fM,x3e as fN,EAe as fO,n6e as fP,PAe as fQ,Z3e as fR,IAe as fS,g4e as fT,wAe as fU,S6e as fV,BOe as fW,UOe as fX,$Oe as fY,GOe as fZ,sRe as f_,H3e as fa,xAe as fb,an as fc,_3e as fd,Ur as fe,V6e as ff,nRe as fg,rRe as fh,la as fi,o1e as fj,a1e as fk,qRe as fl,Pn as fm,MDe as fn,LDe as fo,hDe as fp,uDe as fq,xDe as fr,C4e as fs,P1e as ft,B$ as fu,YR as fv,Rme as fw,Ame as fx,ty as fy,KRe as fz,uF as g,x6e as g$,Z5e as g0,r8 as g1,dn as g2,PRe as g3,lA as g4,eC as g5,qR as g6,KAe as g7,QAe as g8,o6e as g9,lDe as gA,g2 as gB,p2 as gC,TDe as gD,PDe as gE,EDe as gF,ODe as gG,IDe as gH,kDe as gI,ADe as gJ,RDe as gK,t6e as gL,e6e as gM,dDe as gN,gDe as gO,mDe as gP,vDe as gQ,fDe as gR,X3e as gS,Y3e as gT,K3e as gU,q3e as gV,yDe as gW,_De as gX,$6e as gY,PV as gZ,y6e as g_,XAe as ga,qAe as gb,XR as gc,tG as gd,QG as ge,rG as gf,Eme as gg,jAe as gh,yRe as gi,tAe as gj,$Ae as gk,R6e as gl,nAe as gm,jRe as gn,bDe as go,QRe as gp,W3e as gq,cAe as gr,uAe as gs,tRe as gt,h6e as gu,ex as gv,At as gw,DDe as gx,pDe as gy,aDe as gz,e3e as h,XDe as h$,w6e as h0,T6e as h1,C6e as h2,eOe as h3,z_ as h4,Dke as h5,zRe as h6,rOe as h7,oAe as h8,k3e as h9,Woe as hA,g3e as hB,m3e as hC,AAe as hD,z$ as hE,qG as hF,dV as hG,BDe as hH,h3e as hI,Q3e as hJ,JRe as hK,ZRe as hL,eDe as hM,UDe as hN,tDe as hO,nDe as hP,iDe as hQ,rDe as hR,sDe as hS,oDe as hT,$De as hU,zDe as hV,VDe as hW,HDe as hX,WDe as hY,YDe as hZ,GDe as h_,Dme as ha,E3e as hb,I3e as hc,ime as hd,L4e as he,VRe as hf,xme as hg,Cme as hh,dAe as hi,wme as hj,gAe as hk,vAe as hl,mAe as hm,yAe as hn,RAe as ho,Tme as hp,RV as hq,NRe as hr,JAe as hs,eRe as ht,ZAe as hu,pr as hv,$G as hw,B6e as hx,U6e as hy,s6e as hz,o7 as i,qDe as i0,KDe as i1,QDe as i2,JDe as i3,ZDe as i4,O6e as i5,I6e as i6,_6e as i7,Kxe as i8,m6e as i9,v6e as ia,v4e as ib,_4e as ic,y4e as id,E6e as ie,P6e as ig,HB as ih,JV as ii,E as j,hE as k,Ke as l,Qs as m,oe as n,Ot as o,Nf as p,Jke as q,T as r,b3e as s,i3e as t,uq as u,_p as v,Wr as w,Tr as x,Cy as y,ch as z};
